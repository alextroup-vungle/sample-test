<!DOCTYPE html><html><head> 	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">	<script>	var _TREIMAGES =  {		'256x256.jpg': 'data:image/jpg;base64,/9j/2wCEAAQCAgIDAgQDAwQFAwMDBQYEBAQEBgcGBgYGBgcJBwgHBwgHCQkKCwsLCgkMDAwMDAwPDw8PDxEREREREREREREBBAQEBwYHDQkJDRMODQ4TFBEREREUEREREREREREREREREREREREREREREREREREREREREREREREREREREREREf/dAAQAIP/uAA5BZG9iZQBkwAAAAAH/wAARCAEAAQADABEAAREBAhEB/8QAvQABAAMBAQEBAQEAAAAAAAAAAAcICQYFBAMBAgEBAAMBAQEBAAAAAAAAAAAAAAUGBwQDAgEQAAEDAwIEAwQGBQYLCQEAAAECAwQABREGIQcIEjEJE0EUIlFhFTJCUnGBIyRykaEzYmOSscEWFyUnNEOCo7K00Sg1RVNVZGWDpKIRAAIBAgIFCQcCBQQDAQAAAAABAgMEBREGEiExcTRBUWGBkbHB0SIyQnKh4fATsiMkM1KCFENi8RaSwtL/2gAMAwAAARECEQA/AIErYzIBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQH//QgStjMgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAf/9GBK2MyAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUB//0oErYzIBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQH//TgStjMgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAf/9SBK2MyAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUB//1YErYzIBQCgFAKAUAoBQH12HT1/vd1atllgybvcpPV5MOAy5Ifc6ElauhtoKUcJBJwOwr4qVI0460mkul7D7p05TerFNvoW0lDSvI3zNXxIcTpxdqYUenzLq+zGI7d21L83G/foqKq49Z0/jz4Zv7EpSwK7n8GXHZ9zieLfCvUnDvW8jSt+Ww5c4TbDrxiKUtoee0l1IClpQTgKwcDGa7rO7hc01UhufScV3aztqjpy3o5quo5RQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgP/9aBK2MyAUAofp2+mOWzj5qBKF2vSN4dZdAU2+9FcjMqSRkFLsgNoI/A1w1cTtqfvVI9+fgdtLDbmp7tOXdl4kiaX8OLmLuhzPRa9PN4Csz5nmKIONkpiIf3HwURUbV0ltYbs5cF65EjS0bupb8o8X6Znax/Cw1Cbf1v6yitzsn9C3bnFtY9D5pfSrP/ANdcL0sjnspvLj9juWissttRZ8Pucbr3w5OPdjZdk2cwNWR2k9YRBeLMkgDJ/RSAgE/AJWon032rtt9JbapslnF9e76HFcaOXNPbHKS6t/1IIudruVtuD0C4R3YE6ItTMiNJbU0604k4UhaFgKSQe4IqfhNSWaeaZAyi4vJrJolfkPURzVaXA+19IjsD/wCGyT6kfCojSDkU+z9yJbAeWQ7f2s0brNTRzPHxBm+nmeu5xjzIkBXbGf1ZAz3Oe1aPo6/5OPF+JnekK/m5cF4EKVOEIKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUB//14ErYzIBQFl/C+Sk8YL8SASmxKIz3B9rYGR++qvpV/Qj83kyzaL/ANeXy+aLxVRC8igFAKAhPnK5YLDxG0NLvltjNx9b2KOuTDlNgJVMaaHWqI8QPf6kg+UT9VfqElWZzBcVlbVFGT9iT29XWvMhMZwuNzTcor247uvq9Cp3IoAOazSgUejCrj3x3+jJW2/x7Vb8f5FPs/cip4FyyHb+1mjtZoaOZ7+IggJ5mZ5yD12+ArAxt+hxg4/D1rRdG+SLizPdIuVvgiDqniCFAKAUAoBQCgFAKAUAoBQCgFAKAkTgpytcYeKB9o09ATHs6Vlty8XFZYhpUnulKglS3CPUNoVj1xUbfYtQtNk3t6Fv/OJJWWFV7rbBbOl7vzgWD074WdjQxm+6ukyHiPqW6EhlKT+0646Vf1RVdqaWS+Cmu1lgp6Kx+Ko+xDVfha2JUIq01quSxMQFFLd1jIdacV9lJWwWygfE9C/wpR0rln7cFl1P1+wq6LRy9ibz616FYeL3B3XPDXVzmntURhHlBIejvsnrYkskkB1leBlOQQcgEHYgGrTZ3tO6p68Hs+q4lYvLOpbT1Jrb4nLV1nIKA//QgStjMgFAWV8L4n/HNfR6GwOH/wDZGqsaVcnj83kyzaL/ANeXy+aLyVQy8lCub/mH432zjrqPTlr1Rc7VZrbIabjRoD3svQlUdtZHWx0LO6j3VWgYNhtvK2hOUE5Nc+3n6yhYxiNxG4nCM2knzbObqIutvMZx8gT25jGs78p9khSfaLjJkIyDn3m3lrQofIpNSssNtpLJ049yXgRUcRuYvNVJd7ZeLkw5kJvFfh/J+nCynVenHURrj7OgtpfacTlmV0/VSV9K0rSk4CkkgJSpKRRMbwxWlVavuS3eaLzguJO7pPW96O/yZMhAIwdwe4qFJkopwc0dG0p4jiLDESExIN2u5itnpSEMP26U80nuoe6hYA9Tj0Owv17WdbCtd73GP7kUSzoqlimqtycv2svXVBL2Z++IynHMnIOAOq1wTkFJz7qhk43Hb13/ACxWiaNckXFmfaR8rfBEEVPkCKAUAoBQCgFAKAUAoCwHAzw+OJ2tIDN51K+nRlkkpDrCX2y7PeQrBCgxlIbSRndxQV29wg5qu3+kdGg9WC15fTv9Cw2Oj1autab1I/Xu9ScbT4Z3AOMx0zJ19uLx7rXJjtpH7KW44x+ZNQU9KLlvYorsfqTkNGbZLa5PtXocrxX8MvS7VklXDQ19kxJcVtb4h31TTjDgSCooD7aGi2MdlKSv5/EddppRNySqxTT547+7nOS70Ygot0pNNc0vXmKcrQUrKSQSkkEpII2+BGxq6FOJ15J+VeHxR1BJvepUOjR1hcS060jrb9vkqHV7MHUlJSlKSFOFJ6sFIGOrqEBjmLO0iow9+X0XT6E7gmFK6k5T9yP1fR6l+rRZ7VarWxbbZGZt9vhNpZjRYyEttNNpGAhCEgAAfAVns5ym3KTzbL/CEYJKKySON1VzO8ANOTjCu+rLYxLSSlbLLpkrQU9wsRw50n9rFd1HCrqqs403l3eJxVcUtqbylNZ9/gdXpnVWmdRWhu62GfGvFtfyG5UJ1DzRI7jqQSMj1FcdWjOlLVmmn1nXSqwqR1oNNdRxHNLwRtfEzhLcLWqOHr5bmnJ9ieTgOImNoJS2DkDpdHuKB23B7pBHfhN9K1rqWfsvZLh9jhxWxV1RccvaW2PH7mZpBBwdiNiDWoGZih+H/9GBK2MyAUBZTwv1f56b4n46fdP7pkX/AK1WNKuTx+byZZtF+US+XzReWqGXkzc53kKTzR6rB3y9FUN87GEwa0zAuRw7fFmbY5yyfZ4IimpciS0vhbOTBr3VLaev2VVsjqcxno8xL5CM/PBXj86qmlaX6UOnN+BatFm/1J9GS8S6lUcupS6yXmLcPFHXJZXhDdwlwyrzAr341lcjKT1BP30EdONvq59au9SDjg2XUn3zzKXCali+fW13QyLo1SC6FAvEhH/aO+t1Zs8LbIPT7zu2MDHxxv8AHPoNC0Z5J/k/IoGknKv8V5kB1YSvigFAKA6vhTwR4ncR7sqBpG1uXIsFPtUlSktRo4WdlOuuEJGwJ6RlRx7oNcl3fUbaOdSWXizrtLGtcyypxz8EWe4feF3p9uOHdb6jkypCh/othQhhtCs+r0lDpWCP6NH41VbnSqWf8KCXzeiy8S0W+i0cv4s2/l9X6HS3vwzeBciMfo24Xq2ygP0alvsvs9Wf9Y2WUqUPklxP41zU9KLlP2lFrtXn5HTPRm3a9lyT/OrzJK03yqcutkR0w9H2l4kdJVPjiae+e8rzcVF1cWuqm+pLseXhkSdPCrWG6mu1Z+JV3xM7NarbxG00zb4rMGP9DrAajNoaQMSV9koAHrVq0XnKVKebzet5FW0mgo1YZLL2fM83w7eDFr1fxTlaluzZft+h0sS2GSR0LnvqV7OVg7kNhta8D7QTnbY+ukl9KjRUI75+HOeejtkq1Zzluh48xebU+p7Bp3T8u+XuU3bbTa2lSJcp4kJbQn12ySSdkpAJUcAAk1Q6VKVSSjFZtl5q1Y04uUnkkQuvxGeWwXERhIui2Srp9sEFXkgZx1YKg5j1+pn5VN/+NXeWeS4Z/iIX/wAjtM8s3xyIz51edPTd80e1ozh1cPb4l+YS9ebqwHGumOvcQ0haUKClj+WyBhPuHcqAlMDwOdOp+pWWTj7q6+n07yMxvGoVIfp0Xmpb31dHr3FTYUORLmMxY6fMfkuJZaQPtLWQlI/MmrfKSSzfMVOMW3kjU7gzw3g6C4X2XScUhz6IiIbkPJGA7JV777oB3AW4pSgPQbVk97cu4rSqPnf05voanZWyt6Maa5l9ecjTnbvXG+VpaHovhtaLnOk6iDirtcrc2sJYioKUiP52AlJeKj1e+D0JI7KOJTAoW6m6taSSjuT6enLqIzG53DgqdGLblva6OjPrK0ad8PLmXueDJgQLGg4wq4zm/jj6sbz1DHzFWeppHaQ3Ny4L1yK1T0du5b0lxfpmWc5NeWfX3CG3Xhi/3mHcmr2ph1MC3JdW0y6z1pLodeS2SVpUAR5Y7DfaqvjWKUrxxcItavO/zzLPg2GVLNSU5J58y/PIm2oImzKji9aWLXxZ1RbGP5G3Xu5RG/2WZbiB8fQVrVnNzoQk+eK8DKbyCjWnFc0n4nO10nMf/9KBK2MyAUBZLwwVAcbb2Pvaee/5yLVZ0q5PH5vJll0X5RL5fNF56oRejODnoSE81GqgBj34JO+e9vjn++tLwHkUO39zM3x3lk+z9qIlqYIgvr4d/Bi76P4XTdQ3mOuFc9ZvNPtMOjC0wY6VBgqSdwVlxa/mkpNZ9pJexrVlCLzUPF7y/aO2UqNFzksnPwW4njUV+tlksE69XFzyLfaIz06W7jPQywguLVj5JSagKdN1JKMd7eRPVKihFye5LMz95StTSb/zr2e/yB0SL3cbvPdSCo4VJhy3CMp37q/D47ZrRMYpKnh8oL4VFdziZ9hFV1L+M3zuT70zQ6s4NEKSc8nDjV2ueba3ab0zGXcLrPskQpQVFKGkJekFbjil4ShCRuSNv9o4q84DcwoWLnN5JSfkUjHbade9UILNuK8yROGPhocL7ZAbd1rcJWprmr3nGYizDhIyB7iQnLqsHPvlac7e6PWNutKK03/CSiuva/QkbXRmjFfxG5PuXqe3rbw5uX+7WZyPY25ml7lj9BNYkOSkBW+PNZkLUFp33CVIP84V40NJbqEs5ZSXRll9Ue9fRy2nHKOcX055+JSzjTwh1Lw04gzNKXpTb0iIEOsSmM+VIYdHU26jqwRkbEHsoEb4zV3sbyF1SVSPP9GUq9s521V05c31Pt5euCd44p8TIml4a1RIqkqlXKclHmCNFbx1OEZAJKilCd/rKFeeI30bSi5va+ZdLPvDrGV1VUFsXO+hGk3DrhzpDQ2kounNNREW+2Qk7JSB1uuEAKeeV3W4rHvKP9gArMrm5qV5uc3m2aVbW0KEFCCySPl4icZeFuhI6HdW3yHZC+Oplh9fVIcTnBU2w2FOqAPcpSQK+7ayrXD/AIcXLw79x8XN7RoL+JJLx7t5/vh1xd4aa8gOS9I3mLfGo5AfQwopeaz281lwJcQDjYqSM+lflzZ1rd5VIuP50n7bXlK4WdOSf50HR1zHSUq8UlvGv9LL+9bJCf3P5/vq8aKf0p8V4FK0p/qQ4PxOq8LS5wlaR1Zbwr9cYnRJK0f0brS0JI974tq+yPxPpyaVxevTfNkzq0WktSa580WX1po3TurNKzdO36OJtouzXkSmCpSOpOQoEKSQoEKAIIOxFVehXnRmpweTRZq9GNaDhJZpkG3Dwz+XuS91szL/AAE5J8uPMjKTv6fporh2/Gp6OlF0t6i+x+pBy0ZtnzyXavQ4fiR4X6GbS/K0NqB2VOZQVtW+8ttgPEb9AkMhISo/Z6m8Z7kDcd9tpVnJKrDJdMfT7nDc6L5RbpSzfQ/UrtwnsM63cwOmLNeI6ocuJqa2w50aR7im1onNocQvPbG4NWS8qKVrOUXmnBtf+pXLSm43MIyWTU0n3mo9ZSakc1xE4x8MNCMNO6uvcSx+1BSmG5CiXXUoICi20gKcUAVDOE11W1lWuH/Di5ZHNc3lGgv4kksyJdTeJFy825a0W4XXUBTslcOJ5LavmDKWyr96al6WjN1L3so8X6ZkRV0ktY7s5cF65HA3XxL9Z3y4NWjQGiQ/dpbgbiJmvuzXHT36RFioaVnAPZ01IQ0Xp01rVamxdGz6vPwOCek1Sb1aVPa+nb9Fl4kdah8RLmXlurbaft1jUklCm4kAZSRkEH2pTxBzUnT0btFzOXF+mRG1NIrt86jwXrmQlfL1dLxe5l3uTplXG6yHZsx9QSkuPvrLjiyEgAdSlE7DFTlOChFRjsSWSISpNzk5S2tvNny19nwf/9OBK2MyAUBY3wx14463UfesEgf/AKoxqtaU8mj8y8GWTRjlEvlfii9lUEvZWbjdyD37iVxvvWr5WoY1itF0MT2dlmO5LkkMRGGFeYFLZQjKkLx0qVtg9yQLRY6QRtbeNNQcms+fJbW31lZvsAlc3Eqjmop5c2b3JdR1nCPkI4H6Iu6LtIbkasuTOCwq8+WuO0ofbQwhCUFXzX1Y7jB3rkvNILivHVWUV/x39512mAW9CWs85Pr9CbagibKg+IFzUsONSuFWl3kugqCNSzUYUAUKSsQ2lJUdwofpttvqfeFXLR3CWsq9T/Fefp39BT9IMVTzoQ/yfl69xDXJApwc02kighJ86YMqGdjAkAj8SO1TWO8jqdn7kQ2B8sh2/tZpHWZmknkxdFafY1rM1WlnrvdwhR7WuQsJJbixluOpaaOMpSpbpUsZ94hOfqjHs68nTVP4U2+1niqEVUdT4mkuxH4t8TeG7mpBp5vUNpXfyoti1JnxjM6kgqKfIC/MyACcdNfrtaqhr6ktXpyeXefiuqWvqa61ujNZ9x7leB7lWfE/0Ja39EWHWCGwm5wJ30Q46O64z7bjyUq+PQtslP7SqtmitxJVJU+ZrPtRVdKKCdONTnTy7DpPDm4YQrBwSOp1oP0prOQt9xagQUxYq1ssNgHbHV5i8jv1fIVy6S3TqXGpzQX1e1+R06OWqp2+vzzf0W4lnjXxKiaA4WXrVr6Q6bRFUuOyogByQ4Q2w2ckbKcUkHG+O2aiLG1dxWjTXO/pzkve3Kt6Mqj5l9eYzD1rrbVOrdTS9Qaimu3S7XFZcfkPHf5JQkYSlCRslCQEpGwAFanQoQowUILJIzCvXnWm5zebZ2PKZrS76a5htKyIL3kJudzjWeWDnocjznUsOJUPl1BQ+CgD6VxYxQjVtZp8ybXFbTswmtKldQa52l2PYaaVlxppTHxTG0jVukV79SoM1PbbAdbPf86u2ifuVOKKXpV79PgyC+AXHbVnCnXrWorMEyo7ifZ7nbniQ1LjE5U2SN0rB95tY+qobhSepKp/ELCF3S1JbOh9D/N5BYffztKmvHb0rpRdfSHiActV6hIdl3WRpySvAVFukR7qSSSPrxw83jbOersd8dhRq2jt3B7IqS6n65F2o6QWk1tk4vrXpmd1p/mE4F3uSiNa9XWSVKfcDLMb29hDziz2S22tSVqJ/mg1wVMOuaazlTklwZ308Qt5vKNSOfFHY1xHYUP8QeFC0xzO2++2hCYs6Vb4F6fLYx1SmJDraXSO2SllA7eme+av+jsnVs3CW1JuPZkvUoekMVSu1KOx5KXbm/QuzoLWlj1doy26ls7yZNuvMZuUytBBx1D3kKwThSFZSpJ3SoEHcVRrihKjUcJb0y7W9eNampx3NHh8buBOguKelBZNSsrCo6i7BnxilMqI4cAqaWpKhhQAC0kFKvxAI97HEKtpPWh2rmZ4X1hTuoas+x86K/27wsbMm5dU/WMh6AFA+XHt6GnlJ9R1recSk/PpP4VYpaWSy2U1nx+xX46Kxz21Hlw+5PPBvlv4ScMYuNL20JuK2vIkXeYQ9OeTkFQU6QAkKIBKW0pRkD3dhVfvcTr3T9t7OhbvziT1nhtC1XsLb0vf+cCA/EQ5fuG8OyL4jwJUawagfeQzItgCG0XVxxwlbraUgK88dRW4o5Ckp397c2HRvEaspfotOUen+37dBAaRYfSUf1k1GXR/d9+kp5VzKcKA/9SBK2MyAUBYnwzXOnj5PT9+xSR+6RHNVvSjky+ZeDLHozyl/K/FF8KoBfBQHD695k+BejQsX/U0CPIbx1RY7hlScnsCzGDjg7+qa77fDLmv7kH4LvZw3GJW9H35rxfciqfMT4huqdUR3LJw8RI0vZnUlEi5OkIuLwyRhstqUGU4+6Sv+cnsbbhujkKT1q2UpdHw/fwKpiOkU6q1aOcV0/F9itSlKUoqUSSTkk9yas5WiUOS1QTzQaRJSV/rbwwkEneI8M7EbDuaisc5HU4eaJTBeV0+PkzSmsxNKKoeJLx11PZVW3h3ZJDtubu8P6Vu77BKFvR1urZajhY3CSppZWB390dsg27RmwhPOtJZ5PJcen6lT0lv5wyoxeWazfDo+hTdl51p1LrSlNutKC0LQSFJUk5BBG4INXRrMpqeRqhwW1Hcr/wf0te7ivzrhdrLb5kt3b33nYyFOL2AAyok1k99SVOvOK3KTX1NUsqjqUISe9xT+hFfiPJSeXBZJIKbtCIAJGT+kG/xqW0Z5X/iyK0k5L2o7/leait8u2i0x+kNmxwlHo7damgpz8+snPzqPxVv/VVM/wC5khhaX+lp5f2o57nosdyunLHqNEJKnVwxGnOoR3LMeQ244T8koBUfwrowGooXkM+fNd6OfHablaTy5sn3MzjrSzNyUeTbh9edVcw2nBDZU5GsE1m+T3gD0MtQnEvJKiO3U4lKE/M1FY1cxo2s898lqrtJXBreVW6hlui9Z9hpRWYmlFN/FPRi/wCjF/ejXJP7nI5/vq66J+7U4rzKbpV71Pg/IiflQ5Yr7xZ1eHH0qiaPs7qDd5xBHmfa9lYO2XFjuQfcSeo/ZCpfF8VjZ09m2b3Lzf5tInCcLldz27ILe/JfmwsPxc8NTQN8nuXHRNzXpJ55RW5bn2zKhZPo0etLjQ7nGVj0ASKrdnpPVprVqx1+vc/v9CxXmjVObzpPV6t6+31Pn4R+Gnp2wamiXrVl+VqAW51uSzbYcYR2FutKStPnrcW6paMjdASnPxxkV9Xmk86kHGnHVz528+4+bPRmNOalUlrZcyWXeWhJAGTsBVVLQZq84fFmDxC473S7210SbNb0t2m2PIJKXGIwPU4kk46VuqcWnAA6SPXJOnYLZu2toxl7z2vt+2RmmMXauLmUluWxdn3Pc5TucK78JX37Rdo7180fPWHlRGVgPxHs+89GCyEnqT9ZslIUQD1J3z4Yvg0bxKUXqzXP08fU98JxiVo3GSzg/pwLi6J5vOXXU8BEmLqm32xxeAqLeXkW95CiM9JEgoSo/NClD51S6+DXVJ5ODfy7fAuVDF7Wqs1NLjs8T07xzI8v9sguS5Ws7CWmU+YpEa4x5LpH8xpha3FfglJryhhl1N5KnLua+rPWeJW0Vm6ke9PwIh4m+JdwrtLDjGjIErVc7BDch8KgwwewUS4kvKx36fLTn7wqZtdF609tRqK736fUh7rSajDZTTk+5ev0KhcW+MOvOJOq13/VMv2uV0+VHZbT0MRmQSQ0y2PqpBPzJO6iTVys7Knaw1KayXjxKhd3lS5nrzeb8Dl66jkFAf/VgStjMgFAWD8NReOYOQPv2SWP96warmk/JV8y8yxaNcpfyvyL7Vn5fTPrn51prJXMVqGwqvE5yxR0wCxa/anjFa8y3x1rAY6vLSVKJUcDfOa0TR6hT/0sJ6q1tu3Lb7z5zPsfrVP9VOOs9XZsz2e6uYgup8gRQCgJL5OV9PM1o8/+/UOyT3YcH2iB/f8ADeovGuR1OHmSeDcrp8fI0urMDTCh/ibDHH+27YzpyIc4Az+uTN9jv+dX/Rbkr+Z+ESh6T8pXyrxkV2qyFcNQuWkk8veis/8AoFu/5ZFZVinKqnzPxNRwzk1P5V4HBeIolR5aJpHZNxgE/W7eaR6DHc+u354qQ0b5WuDODSPkj4o+Xw7uKdv1DwQb0y4+DeNHPORXGVrKnFRHlqeYdAP2QVKbGO3R6ZFfeklo6dxr5bJ+PP69p8aO3SqW+pnth4c3oT1KixpMZyPIbS/HkIU0604ApC0LGFJUDsQQcEGq+m080T7SayZXzUHhq8CbjfXp8WbeLPGkLLnsER5gst9RyUtl1lawn0AKjirFT0nuYxyai30vP1K9U0at5SzTkl0bPQlng9wP4dcMtOqtGlIXsqJCkuzJbyi7JkuJHSFOuHvgfVSnCU5OAMnMRe39W6nrVHn0dCJezsaVrHVprLp6WddXGdZTzxUkYuGiF/eauyf3Kif9aueie6p/j/8ARTtKt9P/AC8jwuUXnlsmgtNRdEawt/l2CItQh3W2NZdZ851TjipbfVlwdS89SB1AbdKtq6MYwGVxN1ab9p70/LoPDCMdjbwVKovZW5rzLQ2jmn5c7lHQ9H1nZmkujqCZctEVY/aTILagfxFVSeE3UXk6cuxZ+BaIYrayWypHteXieNqznd5aLC0or1I1dnkpK0sWlpyUpe2yQtCfLyfmsfPFe9HArup8GXHZ9zxrY5aU/jz4bStHMT4gmsdawpentGx16Y01MSWH5LpSbjJaUMKQooUpDKVDZSUFRI+3gkVaMN0dp0Gp1HrSX/qvX82FZxHSGddOFNasX/7P0/NpXWrIVwUB/UpUpQSkFSlHAA3JJ9BQ/TpdO8FuL1+6DZ9MXe4Id3Q4zCfLZHx6ygJ/jXLUvqFP3pxXajpp2Vep7sJPsZIekfD/AOZi9upEi0xtOx1jIkXeY0lPYnBbjl94H8W6ja2kVpT3ScuC9cl9SRo6P3c98VHi/TNkkaa8LS/ONhWoNWxormRlu2RHHxj1wt5bP/BUZV0rj8FNvi8vUkqWi0vjmlwX/RWHW9gbsWtLvZG3FPt2a4Sreh1YCVLEd5TQUoDsT05q1UKn6lOMulJ96KvXp/p1JR6G13HmV6nkf//WgStjMgFAT94biiOYoj42eb/xNVXtJuS/5LzLBo3yr/F+Rfus9L+Z0c/BSearUuBghFtB3Jyfo2N8Rgflt+ea0nR7kUO39zM5x/lk+z9qIdqaIYUAoCRuUd0N8ymjlFXl5uaE5G31kKTj175xUbjCztKnAksIf83T4mmdZcaaUQ8Tc/5/rZ73VjTkTbb3f1yZtt++r/otyaXzPwiUPSflK+VeMiutWQrhqByzK6uXnRR/+Bt4327MJFZXinKqnzPxNRwzktP5V4HE+IYyV8sd0VjPlTbevOFHGZCU52IA7+uR+eCO7Rx/zkeD8Dh0iX8pLivEozwm4r6x4da2ian03I8iZEOHWFlRYlMq+uxIQCOpCh+YOFJIUARfLy0p3NNwmtj+nWijWl3UtqinB7V9epl4OGHiEcBdS25H07Jc0XdvdDkS4JceZKiNy1JZQUFI+LgbP82qLdaOXNJ+wtddK9PTMvFrpDbVV7T1H1+v/R18nm45bGGS4vWNrUkDOG3FOK+P1UJJ/hXEsHu3/ts7Hi9ov9xEScbvEl0Tb7e/buG7Dt9ujrakIu8tpTEOOpQwFobdAcdUk74UhKe26hkVMWOjNSTUqz1V0c78kRF9pLTimqK1n08y9SOL34m3GZ6GiParVabepLaULkyUOyX1LCQC57q2WgSd8eXipOnotbp5ylJ/T1f1I2ek9drKMUvr6L6ENcUuOHFTiRKhu6yuir05bfNEJPkR2Etef0dYSmO22Pe8tPcelTVpYUbVP9OOWe/f5kNdX1a5a/Ulnlu3eR4DOmtRvJCmrfLdSrcFDDigR8sJrpdWC50c6pSfMz55kCdEdLUplyM6O6HkKQr9ygDX1GSe4+XFreflX6fJNvA3kk1LxN0+3e7RqixJgFQRJbaXIelxlfcfYU02Uq2OMqwrGUkg5qCv8dhay1ZQln2ZPg8ycscEndR1ozjl25risiadK+F1w9jKCtRamuV3KSD0W9hmCk4JylXme0kg7diD/dCVtK6r9yCXHN+hNUtFqS9+bfDZ6kkaa5G+WSzdKk6cRc3UDBcuch+T1HABJQpfl5OPROKjKuPXk/jy4JIkqWBWkPgz4tskTSnD/QmmGCzpyzW+wtqGFi3RWY/V23UWkpKiekZJ+FRta4qVXnOTlxeZI0renSXsRUeCyPXrxPYUAoDKvjQnp4w6rT2xfbn/AM25Ws2P9CHyrwMqvf68/mfic1XUcp//14ErYzIBQE8eHIvHMkyPv2qcP4IP91V/SXknaif0b5V2M0BrPDQDOvn9Ssc0+oSSSFM20pyFjA9gYG3Vsdx9nb/azWkaPcih2/uZnWkHLJ9n7UQ1U2QooBQEgcqbhRzHaNUN/wDK8dO5x9Ykf31HYvySp8rJHCeVU/mRppMnQojBelvNxWQcFx5aUJz+KiBWXRi3sW002UktrKE+I7qPT15462+RZ50W6R2LBGjuuwnm30JdEuWsoUpskBQSpJwd8EehFaDo1SlC2akmvae/hEoOklSM7hOLT9lbuLIBqwlfLNaK8RufpLhhZNK2nSzUmVYbcxbzOmzVeWtbLYR1+S20DgkZx5lVevo0q1aVSU9km3kl55+RZ6Gkbo0Y04w2xWWbfll5kf8AGvnP4w8TdOuafvKbbb7I+tDrkS3RSOpTSwtCi4+t5wEEfZUnO/ptUhY4JQtZ68c3Lpb9MiPvcar3UdSWSj0JeuZEtTBECgFAetojQurdX6kj2HTcF663SaoJbYYSTgEgFbiuyEJzlS1EJSO5rxr3EKMHObySPahQnWmowWbZbHhF4ZFoYbancRruqa+QFKtFmJbZSfuuSVjrX8whCMH7RFVG80pk9lGOXXL0/wCy2WejEVtrSz6l6lh9CcC+D+jYqWNNact1sKB0+0BlLslQByAuQ91vLwe3Us1W7i/r13nObfh3bixULChRWUIJePfvOqSlKUhKQAAMADsBXIdZ8d703p28wXIV4gRbrCfGHY05ht9pY+CkOJUk/mK+6dWcHnFtPqPidOM1lJJrrIL4weHfwc1PHclaVC9FXn31JEXLsFxSsEByOs5QBjbylJAyfdVtifstJK9J5VPbj9e/1IK80doVVnD2H9O70KnXS08buXniyglarNe4qetmQwouQ58QrBIBIAcZWUDqSoBQI3CVDa3Qnb4lQ6YvvT8mVKULjDq3RJdzXoXt5beYrS/FvRAukIIgXqAQxd7UXApyO6RkLSPrFpzfoWR6FPdJqg4nhs7OpqvbF7n0/cvmG4jC7p6y2Nb10fYkWo0kTw9ScTeHGnur6dv9rsxQMqTOmsMKwTgbOLB3O1e9K1q1Pci3wTPCrdUqfvSS4tEY6p8QDlmtDbns13kX6QzkeRbIb56j8EuPpaaI+YXUrS0du574qK62vLNkXV0gtIbpOXBPzyRHWqfFK0622Uac0pKmOHZLtzlNx0p+fQyh4q/DqFSVLRSb9+aXBZ+hHVdKYr3IN8Xl6kcag8SnmCnKWLexZrK0SryzHiuOuJTk46lSHXEkgdz0AH4CpOnoxax3uT7fREbU0luZblFdnqyB7/fLler7NvFwWHZ91kOzZTiUhAU68suLUEpAAyonYVP06ahFRW5LIgalRzk5Pe3mfJX2fB//0IErYzIBQE6eHUvp5log+/bZ4/3YP91QGknJHxRPaOcrXBmgtZ2aCZ2c/pZVzR35TagvqYtxUUjsRBZGM5OdgPh+HqdI0e5HHt8WZ1pByyXZ4IhmpshRQCgPotN3utruTNxtkl63XCGsOx5UVxTTzSx2W2tBCkqHoQc18zhGaaks0z7hOUHnF5NH06i1jq6/yvab9dZ17kjbzrjJdkr/AKzqlGvinRhTWUIpLqWR9VK06jzlJt9bzPltVruNzuce3W9lcydPdRGjR2R1LddcUEoQkDuSSAK+5zUU23kkfEIOTSW1smPSvh/czF5cQH7VGsDLmcv3WY0kJ/aQwXnf/wCKha2kVpDdJy4L1yRM0tH7ue+KjxfpmyTtJeFpMUyhzU+rG2nSB5ka0xC4kK2z0vvrQSPxaFRdbStfBT735L1JSjos/jn3LzfoSLZ/Dy5crJaZLs2JP1JIQy4tC7jMcbCVJTkFKYfs/wAOys/9I2ekd3UksmorqXrmSMNHbWEXmnJ9b9MigVaEZ+KA7XgVwJ1rxU1o3YrE35UdvDlxubqSY8NjO63CO6jjCEA5UfgMkcN/f07Snrz7Fzs7rCwqXVTVj2voNE+DPAzh7wy0w3aNNQ0NulCRNuTqUmXMWn7bzgAJ3z0pHup9BWb3t/Vup603wXMuBotlY0rWGrBcXzs7GuI7DyNU6+0LpltDmo71brAh7+TVc5bMUL/Z85ac9vSvalb1KvuRcuCbPGrcU6XvyUeLSOYY5puXR2Z7MnWdlDmQOpcttDfvdv0iyEfj721dTwm6Sz/Tl3HKsVtW8v1I952Vk1DYLzBTNs86Ldoa/qyILzb7R/BbZUP41xVKcoPKSafWdsKkZrOLTXUfZXwfZyHGvgrozibomRp+/sJK1JUqBPSlJfhvkbOsqIyNwOpPZQ2NdljfVLWopwfFczOO9sqd1TcJrg+gzmZuvF3g3xGuUGDLl6W1Jb/OtkwtYHmNLHfCgUrQsdLjasH7K0HODWlOFC9pJtKUXtX59H3MzlTr2VVpNxktj/PDvPPv/FzirfEFF51Nebq2cjom3CS8gA9wErcIA+WK9KdnRp+7CK4JHnUu61T3pyfFs59a1rUVLJUo9yo5NdJzn8ofgoBQCgFAf//RgStjMgFAevojXur9H35N601OctN1Q24wiUyEFaUOjpWE9aVAZG2RvXjXt6daOrNZo9qFxOjLWg8mfZeuMPFq8DF11RerknuEyrjKdSPXYKcIHaviFlQh7sIrsR9zvK0/enJ9rPFt9svV2niPBjyLnNdxhqO2t51W4SMJSCo7kCvaUowWbaSPGMZTeSTbO30/yqcxd6QhcHR91CHMFK5bIiJOfnJLYrhqYtaw31F4+B3U8Kup7qb8PE7vSHhx8xV2BXdG7ZpdCTgpuExLzih8UphJkJ/rKTXBW0ltYe7nLgvXI7qOjd1P3so8X6Zkkac8LO3JKVX/AFc68PttW2Elv4bBx1xfz36KjKulj+Cn3skqeiq+Op3IknSPh88tNkSkybbM1G8js7d5jhPcndEX2ds7HG6PQeu5jK2kV3Pc1HgvXMk6Oj1pDenLi/TIkWwcEuD1kTi06Xs8EjbragsdffP1igq/jUZUvq9T3pyfayRp2NCHuwiuxFPeY1kR/EKtxx0Nru2mlJCB2SERUbAY+7Vzwx54W/ln5lOxJZYmuMPIvVVCL2KA+a8Z+iJWN/0Duw/YNfUPeR8z91mR9bCZEejpDSl81NqeBp+zMGXdLvIREitJzutZxlRAOEpG6legBJryrVo0oOcnkkj1o0pVZqEdrbNLeXbgZYeFfDeLp2D0v3BzEq8ThnMqYpIC1DIBCE46W042SN/eKicwxK/ld1XN7uZdC/N5peHWMbSkoLfzvpf5uO3mTIkSG7LlOojRYrann3nlBCG20AqUtalYAAAySa4YxbeS3s7pSSWb3FNeZnxDLjcvP07wsddt8AhTUnUK0FuS7vg+xhW7aSP9YoBz4BOM1dcL0cUcp19r/t5u3p4buJTMT0ics4UNi/u5+zo8SrdzulzuM92dcJDs6bIPW9IkuKddWrGMqWskk4HqatcYKKySyRVpTcnm3mz8K+j5Oh4acVNd6A1M1ftLT3LbOZ91aR7zLyD3bebV7q0n4EbdxggEc11aU7iGpUWa/Nx0211Ut560HkzQ7ll5kdOcXtHOT4rX0dfLSW2bxbSeryluJJQ40r7TTnSrpJ390g9snOMUwydnUye2L3P85zRMMxKF5TzWyS3r85iSqjCSKkeJxwjhmDaOI8NIbkocFjugH+sQoKdjOfikhaVH1BT92rhotePOVF7veXmVHSe0WUay3+6/IhLlfsFol6khKfQ0qbeb7bNOMSXmmHzBalh552Sw3Jbda88+QlDSloUlOV7dXSUzmK1JKDy3KMpc+3LLY8snlt29hCYXTi5rPe5KPNszz2rPNZ7NnadBx+05ZJOn31YM6bbbJC1RFvSpMaY6pEu5m3SIDkuKxFblNhaw6275XW2pK0e8g5Tz4dVkpLmTk46uTW6OspZNvV6Gs8nse/f0YhTi4vnaipa2ae+Wq45pLW6U8s1tW7dBVT5AigFAKAUB/9KBK2MyAUBKHKBwm0hxG4zMaa1Kl9dsXDkyimK75SytkJKQVYJwcnOKisZvKltbucN+aJXB7SFzXUJ7smXd0zyc8tNi6TF0nBlrSc9Vz8ydncHcSlOJ9PhVFq41d1N9Rrhs8C70sGtKe6CfHb4kg2XT9hs8FEK0Qo1qhtAIbjwmW2GkpHYJQ2EpAH4VHTqSm85Nt9ZIQpxgsopJdR9dfB9igFAKA8bU/ETQOnE51BerdZc9hPlMsKOwOwWoE7EV7UrarV9yLfBHjVuadP35JcWUU5pOKehZfN1B1nY5rd+stqds8t9+39Kw4YS0LcQ2VAJUrCMDJI+eO1+wm0qKxdOS1ZPW39ZRMVuqbvVUi9aK1d3USJqnxS5BLiNN6SSkZIafussq29CpplA/cHPzqNpaKL46ncvN+hI1dKX8EO9/niWg4Uaum6p4Z2HUkxDTUu+W6NPfbjBQaS482FqSgKKjgE43Jqq3dFUq0oLdFtFotKzq0oze+STPZuQzbpA+LS/+E14x3o9pbmZG1sJkRbLwyeEPtF1u3EecgFuADZrT1JBPnOJC5LoJ7FKClAI79ah+NQ0pvMoxorn9p+X51Ft0Ys83Ks+bYvMuPVLLkVC8RXmSuTE08K9PSPIb8pD+pX2lLS4rzUhbULIwAgtkLc79XUlO2FBVy0bwxNfrzXy+voVDSPEmn+hB/N6epUOriU8UAoBQEs8lXFaZojj5aPeJtmpXUWK4tgA5RKWEtOb4x5bvQonv09Q9ah8ctFXtpdMfaXZ9iXwS7dC5j0S9l9v3NIKzQ0gjTnC043e+WnV8RXeNbzckkDJBgOIl7bjuGsH5fHtUpgtX9O7pvry79nmRmMU9e0qLqz7tpnpw54mXvR9xL8NCJcdx1mQ5GdW63h6MSWZDTjC23Gnm+pQQ4hQIClDdKiDo1zaxrLJ7PvvW3Y11GeW11Ki81t+257Nz6z6tY8XLpedPNaehRG7LYWPK/VkOvynnAyp1xtLj8pbi+hDj7q0tN9DfUsqKSr3q+KNnGEtdvOXYvouC2vN7D7rXjnHUSyj2v6vi9mxbTkq7DjFAKAUAoD//04ErYzIBQE7eHQgq5lYpBSOi2T1EKOCfcSMJ+J3z+FQGkvJHxRPaOcrXBl+7jd7Vb2fOnymYTW/6SS4htO3fdZArPYwlLcsy/wApxjveRyOo+ZDgJYo7rty1fZmzHGVssTGpD/5MsFxw/kmuylhlzUfs05d2X1ew5KmJW1Ne1Uj35/REbaq8SHl6thUi1/Smo1gHpXEieQ2e/cylNLH9SpOlozdS97KPF+mZGVdJLWPu5y7PXIjnV/ilXZaVN6W0mxHUCeiTd5S3gRnbLLCWsbf0p/hvJ0dFI/7lTuXm8/Ajq2lMvgh3vyXqRpqbxAOZm7OuKYu0axsunIYtkNlKUD4JW+HnMfis1J0tHbSG+LlxfpkRlXSC7nuko8F65nC6h5gOOF8acZuurb3Ljv48yOZ76WVYwRlpC0o2IB+rUhTw63p+7TiuxHBUxC4qe9OT7WchXYcYoBQGoPLQ4V8vujVbf9xwRtn0ZSPUCsrxRfzVT5n4mo4Y/wCWp/Kjs56eqC8n4trG/wCya4Y70dstxkWoYUR8Nq2IyI1B5bNAxdG8DdNWNpvyXm7e1KmZwVKlSh575UQN/fWQPgkAelZXidw69zOXXs4LYjUMNt1Rt4R6tvF7WddfLzb7RZZl1nL8qDbI7syS5jPS0yguLVgfBKTXHTg5yUVvbyOuc1CLk9yWZlPr7WFx1Xra66lnk+13yY9OcSTno81ZUEA/BIISPkK1q3oqjTjBborIym4rOrUlN728zyK9jxFAKAUB9NlmPRLzElNKKHY0hp5CgcEKQsKBB39RXzOOcWuo+4PKSZrcyvrZQr7yQf3isfZraOT4/wDl/wCIfW3Xno/wavHV098ewvZxmuvDuU0/nj+5HJiHJqnyy8GZaVq5lgoBQCgFAKAUB//UgStjMgFAehprVmp9O3E3CwXGVZZ5bUz7XAeWw8ELx1JDjZSoA43wa86tGFRZTSa69p60qs6bzg2n1H5XnUF+u81cy7TZN0lvHqckTXnH3FEDGVLcKidh6mv2FOMFlFJLqPmdSU3nJtvrPkr7PgUAoBQCgFAKAUBp5yuKUeXXRhV3+hYf3u3ljH1t+35fDassxXlVT5mahhfJafyo7mYMxHR8UK/sNcEd53PcZS6G081e+JNnsTpCG7vdolvWo9gl+Shok7H0V8K1uvU1KUp9EW+5GUUKevVjHpaX1NXqyM1gj7mtuaoHLlrGQlJWo2l9gBOc/p8M529B15NSOER1rumv+RH4tLVtaj6jMetSMwFAKAUAoD09F2WTeNY2m0R09ci6z4sJpIGcrfeS2kYAPcq+FeVeahTlJ8ybPWhBzqRiudpGsjaAhtKB2QAkfltWQs1pEdc3V8RauWzWEhRA8+2OQU5PczFJjYG4/wDMqTwenr3dNdefdtI3F56lpUfVl37DM2tQMyFAKAUAoBQCgP/VgStjMgFAKAUAoBQCgFAKAUAoBQGnHKiUnlw0aQkoH0RHGCOncAgnGT3759ay3F+V1PmZp+E8lp/KjvpH8gv9k/2VHred73GW3Ct5Ebjtp11Z6UM6jgKJzjATNRvmtWu1nbT+V+Blto8riHzLxNTKyg1M4rmNsarvwF1fb0J63HrLNW2kZGVtMqcT2/nJFd2GVNS5pv8A5I4sShr21Rf8WZd1qplooBQCgFATv4enDB3U3Hdq9vsB616NYVcXVuJCke1OAtRk7gjrCip1Pw8vPcCoDSO6/SttVPbPZ2c/p2k9o7a/q3Os1sht7eb17DQKs7NBKxeJtxJbt/Dq06KjuFMzUMwT5aUqH+iQwcJWnvhbykqSf6M1adFrXWqyqvdFZdr+3iVjSe51aUaa3yefYvv4FI6vRRxQCgFAKAUAoD//1oErYzIBQCgFAKAUAoBQCgFAKAUBprylqUeW3RpUeo/RTQzgDYFQA2J7D9/y7Vl2McrqcTTsI5LT4EhOjLSh8Qf7KjUSLMmLq+7E1VJeaIDsWa44g+nUh0kfxFa/BZwS6UZJN5Tb6GapaB1fA1Voi0alhDpjX2DHuDaM5KPPbCyg/NJPSfmKya4oujUlB74to1W3rKrTjNbpJM9ZaELQULAUhYKVJO4IOxBrxPYzD5luED/DbjFdtOJbW3a/NMyzrX1HrgvkqawpW6ijdtSvvJNanhd4rqhGfPufHn9TMMTs3bV5Q5t64fmw4OpAjxQCgPU0Xo3UOq9UwdPWOOqbdLq8mPHaSD3PdSiAcJSMqUr0AJryr140YOcnkketCjKrNQis2zSPlp4B2bhPw3ZsTBRKvEtXtd5uCAf1iSRjCSrBDbY91A29VY6lKrMsUxCV5Vc3sS2RXQvU0nDMPjaUtVbW976Wd9MmRIkR2VKcRHjRkKeeedUEoQhAKlKUo7AADJJqPjFt5LeSEmks3uMxeZPjBI4l8YLrqYLcNtK/Y7Q07nLcFgkNDpP1SvJcUn7y1VqWGWStaEYc+98fzYZhiV47mvKfNuXD82nCVIHAKAUAoBQCgFAf/9eBK2MyAUAoBQCgFAKAUAoBQCgFAaX8nykq5Z9HlOCPo7G3R3Dqwf5Pbv8An973s1l+M8rqcTTcH5JT4EkqGUkfEVGEkZLasR06puafuzZA/c6qtfo+4uCMkq+++LLneG1xrF50TK4eXBafpDS/VMthJ95yC85lacepadV3+C0j0qk6TWOpUVZbpbHx+68C6aNXuvTdF747Vw+z8SzlVYs5wPH/AJddB8WdMot18SqJcYPWq2XaMB58VaxuN9ltqIHW2e+NiDgiQw7EqlnPOO1Peukj8Qw6ndwylsa3PoKNcUuTDj9oq4qbVZX9R2/JLNwsTbkttSc4HU2hPmoPbIUnHwJq+WmN21de9qvols+xRrrBbmg/d1l0x2/c4KDw44hzZaIsOw3WXJdPShliFIccURvgJSgkmpCVzSis3JJcUcEbarJ5KLb4MlDhZyG8fdXTmTcbcdH2hZy9NvI6HUpyMhEUHzlKwdgoITtuoVFXekFtRXsvXfRH13Epa4Dc1ntWoul+m8uTwF5XuGHCm3/5EYVOvbyOiXep3SqS5nBUhGAEtt5GyEjt9YqO9UrEMVrXb9p5R5ord9y5WGF0bReys5f3Pf8AYkeo0kio3iCc03ltu8LtKSgVPIH+Es2Os5Sk4IgJUn4jd7HoQg/bFXDR3Cc/49RfKv8A69O/oKjpDiuX8Cm/mf8A8+vd0lP6uZThQCgFAKAUAoBQH//QgStjMgFAKAUAoBQCgFAKAUAoBQGlvJw4pfLJpAnuIKk90q2S+4BukAenbuPXJ3rMMaX85U4+RpmDckp8PMkyoskzJrXIxrW8D4XCWN+/8suteof048F4GTV/6kuLPo4ccQtTaH1pA1RYHjHuVqdDiM56HEHZbTgBGULSSlQ+FfNzbQr03Ca2M/ba4nQqKcN6NH+AHMRoTixpUXKyO+z3SKlAutoeP6eI6rI32AW2og9DidiO+FZSMzxHDalnPVlue59P50Gk4fiNO7hnHet66PzpO+qPO8UAoBQH5zJkSJEdlSnURo0ZCnnnnlBCG20AqUtalYAAAySa/YxbeS3n42ks3uKmc1/P5bTbH9KcLJhfkvlTNw1E2lSUNo7KbglWCVE7F3HSB9TJIWm34Ro881UrrZzR/wD16d/QVLFtIFk6dB8Zenr3dJT5xxxxxS1qK1rJUpSjkknckk+tXNIp5/KH4KAUAoBQCgFAKA//0YErYzIBQCgFAKAUAoBQCgFAKAUBpTyYLSrlh0gUqLgEN1OVHO4lOgjsOxGBWY43yypx8kaXgvJKfDzZKFRRKGT/ABGQE8Qr8kdk3SaP3SF1rlt/SjwXgZPc/wBWXF+J41e54HqaM1vq3SWoWL5pu4P2a6xDluTFV0nGQShYOUrQce8hQKVdiCK8q9CFaLjNZpntRrzoyUoPJotDww8T6cywzD19YfbShIS5dLMtKHFEYGVRXcIye5KXEj4JqqXWiqe2lLLql6/YtFrpQ1sqxz616fcmOw8+fK9c2W1L1Cq1vuJ6jHnwpaFI+SloaW1n8Fmoapo/eR+DPg165kzTx60l8eXFP/o+m588PK5BZLi9VNPnBKW4sSa8pRAzj3GCBn06iB86+IYDeS+D6r1PqWOWcfj+j9CM9e+J/oWJ1s6QsE29OpykSbmtENnPopKUec4ofJXQalLfRWo9tSaXDb6eZGXGlFNbKcW+Oz18it/Gjmo4ycTeuNf7j7NZVLC02a2pLEMdJBT1pypbmCOoF1SsHtirNY4Tb2u2C9r+57/t2FbvcVr3Wyb2dC3fftI6qSI0UAoBQCgFAKAUAoBQH//SgStjMgFAKAUAoBQCgFAKAUAoBQGh3KZxJ4f2Llh0mL/frXZVtxnkKFxmsxyP1p7pB89aCMjt/Das4xe1q1LypqRb28yb5l0GiYTc0qdpDXkls53lzvpPQ1dzx8s1gfcjr1Gi7SWcgt2hh6WlWCU+68hHkHt6OfP1FedHAbupt1Ml15L6b/oelbHLSns1831bfru+pnprS6Q7nrG7XKH1eyXCfKlMeYML8t15S09Qyd8EZ3rRqEHGnGL3pIzyvNSqSa3Ns8yvU8hQCgFAKAUAoBQCgFAKAUAoBQCgFAKA/9OBK2MyAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUB//1IErYzIBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQH//VgStjMgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAf/9aBK2MyAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUAoBQCgFAKAUB//2Q==', 	};	var _TRESCRIPTS = 	{"lock.js":"TGE.AssetManager.SpriteSheets.lock={lock_0c030:[1,38,101,93],\"lock-top_0c030\":[1,1,66,36]},SpineAnimation.Animations.lock={version:1,uid:\"0c030\",data:{skeleton:{hash:\"rmQ7P1EdpValdO1xpoIBfC5Xxmw\",spine:\"3.8.99\",x:-48.01,y:-83.3,width:101,height:128.52},bones:[{name:\"root\",y:-50},{name:\"lockAll\",parent:\"root\",y:50},{name:\"lockBody\",parent:\"lockAll\",length:77.36,rotation:90.67,x:2.31,y:-64.92},{name:\"lock-top\",parent:\"lockBody\",length:46.1,rotation:-91.72,x:72.82,y:21.2}],slots:[{name:\"lock\",bone:\"lockBody\",attachment:\"lock\"},{name:\"lock-top\",bone:\"lock-top\",attachment:\"lock-top\"}],skins:[{name:\"default\",attachments:{lock:{lock:{x:28.11,y:-.51,rotation:-90.67,width:101,height:93}},\"lock-top\":{\"lock-top\":{x:22.65,y:19.39,width:66,height:36}}}}],animations:{lockIdle:{},lockOpen:{bones:{\"lock-top\":{rotate:[{time:.1667,curve:.155,c2:.83,c3:.75},{time:.2667,angle:61.77,curve:.088,c2:.22,c3:.75},{time:.4,angle:41,curve:.162,c2:.36,c3:.75},{time:.5333,angle:46.22}],translate:[{},{time:.1667,x:-1.01,y:.03,curve:.095,c2:.58,c3:.75},{time:.2667,x:1.77,y:-.78}]},lockBody:{rotate:[{time:.1},{time:.2,angle:9.29,curve:.149,c2:.55,c3:.75},{time:.3,angle:-15.08,curve:.149,c2:.43,c3:.75},{time:.4,angle:9.33,curve:.169,c2:.5,c3:.75},{time:.5333,angle:-5.33},{time:.6667,angle:4.08,curve:.034,c2:.53,c3:.75},{time:.8667}]}}}}}};","FuturaStd-Bold.js":"var familyName = \"FuturaStd-Bold\";window._TREFONTS = window._TREFONTS || {};_TREFONTS[familyName] = {\tversion: 1,\tdata: \"data:font\/woff2;base64,d09GMgABAAAAACxEABAAAAAAaAgAACviAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTQ\/RkZUTRwaSBuMJByHPgZgAIUCEQgKgZZY8SoLhAAAATYCJAOHfAQgBYpPB4RxG0NSE+4wbBzADOFexpEIYeMA+QfKR1FB6sn+6wRzyFQ749VMMmK6WPRYKoVl7DZS4dpCk2NeRllm9x1rSf2NzTV7efQIjX2SOzzvtv9zL6gobhwTEcdGwLEJkCW4wYUL3CgCKq6RNmyZqaGZtuWVjU3Ws209rf3L2jaWr421\/0vvP6c2XwpsZ6R4keFDbLVR0oDSuMDpPl+k7U1K91QENgkKQHtCnv\/\/\/f4399r3v29Us0iiJPFmTVxC1pAohcgg0j0UQsQP\/3y\/uPP+LKKxM6oiFUULUhFSkUXVTYEBgrK8NLGp6yrLJ3lADUkMHWO\/erW2PeJ9xSQRo4b004m6R7yvptg+eDKrECp\/b1Ob6\/bHAaQ94KJFbNorqt33N+v\/9mttWVrDSqaRQ9IGZCWsZM5L5mTk2MdYJW0qQ0DREVCFJXB1FVN7RdFjeW1\/ENV0OhxFL9VYhC5N2ktr+oVEI1FJp1nNeBxO4f\/\/1UQjzPHiG+rVjgF+bKPt+IB1huiPLSu+cNk4WnYr0OwDhrml48t+WX0BTHUuIQpjEYUymXt3v3bdv83Cje0gL7jICz4rh1yDta75deCY92Pre+z+iNIeFYMSDByQvXsWAAQAFACQjMEXThfKK+XlMgBdPqGUARRdAAAAgaEYgkYqqHV9AIDpL3MMAADH788iC140NIQKAc8\/gh4ICgpMXzNIizawxV6CvPIK7LX\/QP6YB0MCAAYABAADWL40QBeA26nIpTOV7QBwwpB4hAfrCMgg7sbpssJRaYkufQxt66EdQkbi6j74K8VHm7QHuDfjEZCxrTvVPZP9ywDd5yF5mPdwlKZJRHbwZcN8bsyQUwg\/oXqrPQnysHtr3qM7rytEmHCRHnoEnkMCJIC423NMOAILEz7YkxoPmMulM42tE8ZC9cJUraYeULLwHWj2MDUUUQY+ZqRM5xcamxvNM7nMCy2Yj49eWn1kXbzw3mzse\/QCB4AKVL6jdZQNwNJtnGrt9UAPG2rcHepZ0PDCx+Yq1InKphsAmA+BQZtK2xEWSlMKVO\/ZqkEqVzQR3iugYR\/R0SZyrKZBzS9BJTPdLgRro8ZlONzRec+Cv6K45wuiC8yClwfmD0IASEHoCkFPGPrCQYvESAyQFHRkgCLEQBaGNmPkNIbOYug8CFMYeRQb37KFEBs\/JoQBU2yZgeaIDSx2XGN9CgIJQnSMHgYwxwKDE1uQMoa4wEgs9pIxxseBIDahbCylAitpmEqPrbMQWJBGVzauzbTrpJ+R0bMV64a22cncrt9hjNrLwj4H2TtijLETTjD2t1OsMSC6RtdFYGwytuLB6LmM2IwNQYWG\/MmBKy\/+AgTdMv4eI0UGoSztOiyx1DLLbXbaWedNeRTo3j+sArXfGoAOHkrGAbt7iUGlfX8S67jfMgi6J05IlcD9bKU4HxAuS4rFILD5P\/JaZYEM0G9VK6oA5\/5HQ9WZISAdLToebrEuA1aw3AWjYEmVo4hMSFQEobFdg0C9brczZsd0QsOLK9EGRF3rl6J66kjdSUojdqAHW5wtvpszDmYF5aVGStWkmszNhaCYsWDJiisyhmQQU0hHuO+BOVALKEWRrFjXvXPken6OybXK3KwDDWBXRLBgBz84WJQ7Ro14UIuNYQ2HzrI5q1gIZQ7RMZH+DDx20DTGR+b7JHAEe9yBBwLAwxlNHwuC4DahSkpdv5vDORIHD7ODJnP4ugyxPEUgUOvMUAefjHC3eT3Jm9cb3PwiCIbcJYLpMvUKkjkMzF7erIVkwJxXswUC3NqSWd7qcksgsxBeYawN0aeNQFEMCyE4lmMFk4cahYFSLz+LYQZgqhwmeM1wMGucDsOsTDoAeLZT6Chy2QHwMgqeEcnrtwH7HwC3F8BtoW2nMwEO7g+MCCvJ5GY6jwJnAOhT5lbEQQIAYXQHP38sGLhvZGSJACBApcNCiwWINPTil7jqqqV68k+m8rh39Xif2WKBs8NhcXicO46IC8cxcHucMc54Z3dnAh7GH\/Fn\/I63xNvhsXgfPAcvwhe6Xfp\/LSwAgLNlSEOr5BJVXTVXTy5mKvci7hODs8E54HCHFEYu\/WxJgTBPfJ\/Ota72qnL6pR+SL3xeb173z88\/fn\/s\/9g8vfj0\/NNzT88+PfX06NO9T3c8jXpy98nUk4tPTs+8n\/l35tnM05n5f7yHM\/dmrswcmNkwo3pI1vkPQGCjCtIFyx0AwQcHC9ASBFJHV+\/VBvV1B\/UVyH8NzngXVzd3D08vbx9fP4I\/kUQOCAwKDgkNC4+IjKIsotLo0Qwmi82J4fJi4+ITEpOS+YKU1LT0DGFmVnZOrkgMli1fsap3YNP2bTvUI3\/t2j26Z+\/+fQcOHj56RDN2bPzvk6eeVRYUSl7UbVWUvasp\/dU5+L3q9\/+Laz9qP9\/7IW26s\/PE4nzZtys\/P5U3v8xrX9p\/4eL9BzNPHj46\/t\/Zqdl\/X7\/5M\/+8\/vHTV0tWd6xZubZ7Xdd6FegbGt547urtihs3\/9cwfesaQQAANBayJgvXCKD\/APQRsNoAAPYBUAM9DdbB4f7Jh+hAgCJ92KrJEVgF5yBFDCu2R\/CukN1VEs+DZoEWeATRGMEWshJUg4RQpLNtISdwD2GL3Y8gbx8aCtJzaoRuQnhc267XVDFfTd\/z6HPdwryasYcIfqhYNCHm\/ucm7vyKDyoV6rdIaXSAaFV2L4Z+TFGuEhBdyVV3+ld6pbZii0bniWNIUtzJUoYsD9pD9agKDQBr5VwZ2vaUDQo1vC6RlQPLk+eQXPUDb6fE8rfqBmj\/pHnXIiIwzwY3x+4ZrRKi2pCm8SYdUXvrVGBHEGHDdFgLxsO6wPtF4iUoSZ8eY0q+cWIuiJyls9wzpw4flL6xWLXKCyt2BBE2Ulcy6xqDP84ITQkiNfKXOP2SyyaCkiBEEgVIbLYMnyyZVFRh3M7dLrNvLfD0QZ4kXpjQLu5F4DSOG+Cqjfkk4o1nmhKE4i7cn2vRq01Zk9AzwGFXxsu+NmW7KG\/XB2W7f5SgPWWUkRZ6qykzmkqCCDD0Y+YpnTSbatGSGVnipAYBDkI1kBGKujR3vS6iIM+80Tf63Rl\/8H4nihFEgpfQ3wk467qo79oVRYAckPkyPt7G1kd+wS0GZe9k4obXUSs2yhBwHwVWwrz13F8L7jyjw9JGm096ys5o0xS4kEtaey0uyp8JfntKv+9gToSaGwkeH2LeYVtFBwEPcJkkbLBNXA0SqqVAtTB1nS4cRiCgwDTF8hlMMASxMEeD8P9Ciy7lub8fQ+fVSeQXiLm1smJQfmbedAOzyMwKbCSocRLmldDfCHgP1jlRCf5s33R1Hn57G51U9OX6+CFilkKtxxkFG\/g0NvbrS\/cGc8xaHWvbDf5VIj2AB1X0FiER4nW4ZWaJ33GZIjQF48YPFmzPDwGzBku14mV5sgMpAN3wY1Dja2BH98cLd8dFJqo7J6Ubo0Csay+W8UP3TLJ1xFF4+BtE1eh4pEvWCPXQAFYKakBYP6SxRtaVKTZtuFSFVBwhseqyikNYz3TcTf3hD03Y3GXYWDvxjmF3zUgeS+JCg66rfhLhkKgUlsjp64uFeNZPHpMbHLPUDTMSuQP2lgfnZOMxb7RpknmSkqeNSjMAl4MKse4+2zOtOvtEvB3md2AmL4FD6YpUmZH0weiPU3GdJu5EFoHglRlN5Teo4bDUMcPw477FIsEXN0bPHsrH0DF1qkDd0LCSshVYaZPmhr5UmyiY4VmRYI5FTc2YwVymOaDL6IWlG9jFarWvjA6hZqJgtqD2XwhnWkc3\/OSAYVC0l8kwNhAqgVNnnDcH5o1nLNrvly2aQG\/nPyWb+eSRASI0nHSn3DxiyzsjHm+ftcJe2bb5IjI4Ib+CHH7n9t37mQRWEshS0M7Owp\/DDlmqop6zj5vsvsGeBVMiZqctasW2yMjBK+\/MTq46J0NCUW0zSo5Oy29qk4aNJtQY6+NiVxFgJ4Ic\/Y6iGhndhMySFqV5psFgpq0EP890iqpAhnP5oYcEo2rS+qW58QUvIhwGVTqwf4RLPwLzbmLWXKBT1SGoadF4t3BvAxiuu8BLFHLl1nY01JHRDj\/iHt+BE+jPBSBo19q04kdp1BPa3oiZK6Oc32wsRxrRIMA9s7sNKbQrsPJwUHQLfsmzq7D6uHpOU1TfjBKOmKtFbCBKuGC5dtCQeaNDd839lUvfBvhrkZwv7fNAJZBHIOYxXS1N4n5ZXnl8iHwaeRokK4EmzbqA1LD6ckF7FepstIleOKfNmwSz\/wHobHWHr0Z\/JbjDZrZwWkajQHNwlhPWVI8mOnGgpHuqBGHdhQkR3RRsMZxGfxqMbCUrtEp2ZJslB\/J0SGWy+KB1tlsLWUqx4L4RjHm9kGzXM20Al8OwaYtVABx2FmmhmK0E8CQBpFjmgE+9dIDGQkQ2GaGJZSZskiTHDnyd9hWIACb1EzPnfnaiP53MW3b4\/unoczkiWZCnQBQpWP5WEaRhI7OBld\/AeoPr6iU48jgU46jo7juKWnMYhR8XvgrEweIUvB8fTLVEXms2M08tIRw3hF0UAD8hpWLm\/SZ\/E9Vcv6hffo4AfxZcFtCXEwHOwl4\/66wIFGgowiqjRgBaEnHEHGZqKCtnqgbOa1QcvV5Vy44yVsYxI2Y62yc81OEaRWOLmxFdQMPEl0R9tgZIc00uKIJ+lpbN7+KrHXkVgPUWChivcnD8xLtA\/iEKzWi7x4MN4iUf2GA4dwr29AEjzRFcKlH\/ntLIDJbStmMvlNMsgRIB9VSjII0sfiKOtj6cdVvqNZlz63OlgrtOe9v7LFoKahxOYKgy8+Y\/zp8J7h1bdmSjRWWp3QoO1SdQWsibXaxeGF8v0\/At\/Tp7c5ZLZcShMMxaU8OsCViF1bIZPY5lnNhOrQEcRMbgXEA85kX+2tZCooVKAvw9vRdDblMr1oEKegy53CI75jxs46f8Oba9Q89VbNTrvklPDjb504bzzdxH7jOziOGoA9OFrK1LUsUZcrVp12HCZnux7vfaohdpc6mK2kp+nwPv9F7aQkFEwZgSTRwt6NSWrx9bC\/XTn\/bGaR+o7uQS\/kq8KsEacVMlb5Y3lilQ0KvXTf5Cg7hUlv1CXZXg0ZZkUVN52dy53oFlBMXBJ7iYapTLSz0DgHmjnAWyzSgmrXWewLru0tlsfytyUvLgEFyCFiV45iXMcKngHZH8vt5abr6NOzBjxemWOOo4u0ch2ti0it3i3gqRQOGcDaOV3KXANoXHAtA2H\/U8023ukhLz0QnmnhdTJQHhrIPRmZX039B9+P3oHSyKtm0saz5ny\/IzKbHSt6FidfbovLReujZgRB4LFIP0SteD8jyWLji3qhec\/vIIazEzAwNdB0qrtzB8F95us7sXmgq9uvZdWdLZN5iPPmeuTQciwGuXtDOXCpmB9nrN28BMzVbLSxdp6Pakhk9QjRrl8rKFQ1BTRd\/YknVFf5KgQvkUb5R+5VLtPytfr+itFWoc3Vw64Mct7ZJYXCpgi\/Jy42Rac5EPeINSfcV1+JAv8f80WsqmGIp7hrxp+jucObmEUtMpAZutA0Gr71zHzUlR3UeY0G1zGupt1En2+QC32nSsczKlEyjgQGDopPMo0aJaio2psp5VMhM2icKBdPV4XhTGicwecJMhN2qc9sFb\/fhkvOsSW19OuFI6f41r7r\/FT\/XKeM8yKuKeU+GOEMfaMHw\/lFJto2BNbYJSqEhNSZ5L9toP3S83188PBVslFA6YbK0cjVqnvUsUeqgj2BZzy0eyQrAXcFZOPMdnot\/fVthGGO9xVKZUKlZCqNAUHZdKlrDTCPhD4eqgZemHmvsIzmY6hgc42u6U\/7rMU0o3wdDdmIUWBZVQCTpZb4oSR1efPIso6Y44QL+FgMcJK7zsKrV0+rvfNd\/hseZPJ6yB1IoWXlYwI2bLO98OJfS5yQ13JLj3EMeIgt9gL3ZkUNFw5t0VrcNmEPUKrTB5Shu6Mi1HJE\/psoOLsgeGi1siyUA5WZq1HCMQkJDTPBLK4MyvuFNyNT6A6\/eEFN2wU9rU00NOQpN5vs92+FAAl1KBLbussyDWRM\/QCDefdcmViRrtvK3GstQNepqZQ8q9ODK8Oydy+pqT3dKjhjktLAUGpGvBVByIodHhk3mSBRuwrfSo6I47znU3b7ZvbJwYjW7crka75XMdPT0txbJ3o\/eNntIYBM5Yfgzu2Onn9e2xmA7AlTUK1ONanntA233QJrCEw8PTRoI++6E9CA0ItyK1SWfoRtRqzR59dc\/kw3dXpVx1W08jrqckVV4Kv5ZVjV51YcSVHV8\/MoZPlwVaZxkBQ0HqTTKEjNLkMkgORECcYgyZ5JYDaVgNq\/PHS1W6gTATnZG6z85gwFeQMWyL3myfGZ5onBZiII2tSYd0Bsa\/jv9auWte8I\/PUj1f4S1w0sbmqRPQNZ0XHU0iRjM4N4NIsiqfOzkHCNpRO67yBveYDFDTpe6XCoMg6SyxIs+6MaeiBren9MILSVlmRcVxoaiiWqCIL7Qi20YQnZqkShYT\/VzUeNMf+Hdbv7HtBCn8zMoV6Tr12fVl+jH+Md1nol3RDqa2fA6L+J5BwnHIZ24GNGfXLqLZJGBB5\/8PVItS06vER8wa6amfYZYZy9S2nzuf9jI9iMs7qs0D+07UtLJ8CLhA50BjOtM9yJHjaE+2N2t48vo7ldmR0VK0qqogITk3Hm\/9DZyxOO3eFpboaKafs1JxarU8m8ZJojvn5P90lklyCjt3HgQerL\/3AIYuVtKoyjGj6vBfIYJNx8ll49Z0cDGAeJeYKZq4Y80BFWQOEdyVVBuB81ohsjQ9xJeXQ8oO8OWmhSIKhDr5giDjk0HKIvvxUoMBmndUdTS0NCrN+i7oP7X7GK8aBK7CqrCgQQVSYNtLWWv9YuNaYJpvuq2Zxa1xWx0baVVJknDipYR2QsQNe46MraHuoy1k0W3jDNhUA45tPD0X4g04xD7mFWDIk6qJcxNg+cgPdU5AfEp2pjvazf2wpwnuHrJ9aNOShp29dbHhZbNg3kZjoIhlcKi1kuVVxUQPQWEXTUFJEFS1B8et4QsCyRLjScKerL\/8vB94G6Z0WLj\/544\/7ux2AASQMlWZQ5ohWTP+HnT0NB7e7wzIPB3DlNsVqIHNtU2ihHjKmtWSaIcxUWoFkU0hLsqj0eNpWNpAJyBpZ6bnzYKDypYNSZf+3d+5NIk6HSwL76ob7tpaxOQEBjDZRRx2QCBYzItQlx3Q3gV1yxkQCxK5nw2X5eHO5DLdPc7p\/69fURRBzyHCDKvEIg43s7SFsNIiMpezx5FhYj0gogg0P7nzxyw4uGzZUHk3nssTqLeD5RGr6zaf3RrAZJdYXEFUMg5Tgi26L1IFK9Rl33I4pTNvom72qMpMCIcXVSD1PFABIVABwIu8N\/L4\/88VYIiJgQSnjU7OMfh\/gHRLs6KYHSUnZBGT8qRJtuxOtwZztbXYY4mLN4HG41a7eYWyQ\/aQED0SZvc5qjRKt35wVV3z5tElnaPqjqofSbSO6BXbnz4f3fXoxdZVuanyvOUdUUmMTAGCikuzjY8uKI8VVXQLE\/f2AaN244D2G87aO\/bam4U2CZ\/gxE8AEbLN1sbsi+TpFQuTtE\/j6tvOaHdESghhzubphCLZC96A2RPmx48nZFluyeyxIg772BKyvtgC4ZN3d4XeARny2gyhojKTmOH98l0FPmJrvaxOemCbrKKun5qQBqhzVpuePoh8+mBTEk\/tm9MgkeRXy8XgPe\/flsfqx+3\/qvfO7QWfeR9a7qrvek7MHQSjO5ZCYoflTyS9Vw89eXTw2LOZYzV7Jf4lx+PY\/EXhmSVrx0vXZNFTonO2AMQ1e5eJuYkg+6C1DRDaOTcfMKud+NPYuuYrW6ao+YQz5ozInY3MgM6J98FffApYq+f\/Y8FspRXiPGPfqffPAUyr9uxAz9ae8xUfUoMPwkcOxu9Z3SgHAXVuougKfHXCeV+FrwGLF+gHJ0XVh+XH3s5KAx+T3zSLs\/Y11yaIGtsOoSxKePM8fFt7GpoBWv5bMO7scGYqCWHv8JW\/85kjCIli4SipTW37WixiVIbTVF3t77DD9hGsRGKLhtIBnhSVH\/4wc3SdqBZcCHwf+HXMGcZPzLnVrK1SJqVWm9iMYzrHO4HPP3H9B1lONEcLk8vLsWm24pyUFXE0Pqu9qyGFP5wel+K+zC1Q4UQ0zbk\/Y8sOqly3sjKszRmU8WInYrepUWqgr53YmeXQZCrgcwOZvu44a+fEGlf\/d9tDOaHb3\/m7ggvao1OaqWmadiBSC8a17a\/h4ddDva\/hNa+vfNZOdhyBe4\/881QLsD2fc7SV5zxpJ0+rnvfD3\/Z8+wBgieXyd6uvgN5hE6UTQDASqV5WwPNUK8Cp3eSy0u+630sBdJjSbX2L0gU2LY2r9\/gV9MN1dQFR1GwIvjR9JX8F3BeyhNW7E8NBc5WUQieRKVQpxGTS\/uuQJgwu4LsSFT1bnndvVhSF0skgmKKRh9ELFeWzz9dtqSAmuyrhsB11PhTs\/TKI8Atis4NC2KzQoOTBIZZy20BVw46hBjo4Rc1BrqF8rPo7r3Fv5Q+5e+2qasK0VlZGnNqPEcT6M71zluxYu7h1qKd1ae8AQJSWacqoKiqNahZrxUwq93EeVtjgJ\/34rSogA9c3q3p6FjV4iDNbr0j2NDowiDy2DZOZLV+zXlHVu62qkMSCg0M7O1wK4jxF0wJHJRXliqsKwjV6oTgaiezLDNTTAC2ANBDRW\/D389C\/wSYulO\/jY7\/Ae1PMwsXCTQ3l2qJEsRZQ4cjEwoZA8aZscvD+y2zNN1sd+d2XVjbmNiuw1t9Ib6ET0q\/\/0P2hfn+IjoUzHgJaQIdDkqX52YqCKM1v2F4f5ZNSf+17ilFurYEGApNmyEO9\/x3qaV98uOe\/Uv2he78D4bCS7+av6Nn6vHuToijUQm0Xri7urAKQhhRCK1ZcqULT2qYgah0K4PDQh\/3RAgFMFla57L\/hzw5O5F7XQODy58iq2QALmple5thR1614XJ9jQ06XKF+eG05ruZ2ExVkGYNBbBgsHDkU9oNSMjBbkuUaIAKwerwhVxKBmsFgFoTR7cMk8W7C5Jujxo49hXMOsfnZlGShXAHBC68o2S2nbokwRqHlq43U1aAA+X\/OX3mRKLkXvbr1dsPw0uP9iPoHZ54\/VpU7dpbPraw9DV4S8udeP+vwq9gPgAeDyvIRwc6P1H05coou4ztaS74J5lplrDN+E5y3fY2dMsFWhprZ1Ype4RNYfNF5acjT\/hq4RsLplPquaBRHcEshI90b+0RIpHv2HVd3FNLQKazKDfW85zwO5xpnPMC58S2Iy508BMFBWiPyX\/sxyNO77cIFpqsn\/aOzgylfk1pOY35c6hnBCtL5OoAuD9uiG\/WsnwQr9\/BJE7yaJYvV6uUF2dn739mpiMJsRFMBgB1C+bc8mlYLHPl2dIGlwe45zkPVx6wadtLO6AuNt311LxWk2HkF97YbMLAkNqHyit8ZKw1gViXE8zvLetmVQ3zkXd467r68fZ9UQIPbTaCRaTokDjT5Dp0cHFOTdotMfzwRxcvNaaLQIKp32raCYFkyj4bcpuLGKGEZlEChA3cmuEP7F2IvYMexk7D+h\/K7YrA1vZjquWNeZwTeZQLrlt+r3+i\/jAQIHI3Vyn7PxsW22P7YnP3NFxYVdTvGmC60ow8JEe2u0teH6oW61sbMshOfKimEL+XTfFGZsQZUvI6aJmCSFucd0Jtxxh50MiDMlUv5VaDhWGVaWmcKOtqY5CZcVZBMSLejenhxg8ALnucHTqzN5ACWvbz0IxHBfvx5Rv3qjHnktnjtWrVi8Z7RjyZ7di9t3jy7tkPnx2oTJKe5htDRKJCsrxK3eXKjHlPDZefXt4sLq1gJOUSI4YE8dCx8TSW8THr7MjsnJ7czOjaGzsTWBYMeitr1F7N3fhql8Rs2B3wFwZvXWUhUIcSInG8AuH5rn7y3I3EvdlzU0mRRPig2tuhUmc7dxM9Hqii0zAPfTRNkEyJZFpadRFqWkUhzT0hdR0tMFkXZF9iFE3z4lOAWgF7p0HVUdvf76pUAFQOgMj7Ylf+XkZG2I1Rcb22s2Oo6r4fjCnNREaTqHkAsQV9rt+ZGJ9raV9kjRYkS8ke1ba4sxK+urVjW6THFcHCOdGUUPZ3sz3Fjy+Pis5GpjwHoxqkoMX717lhpK8RXGELgWHok4nAboausz6bRCaja18IoIVS9Gl+kLO4dBg9KJyuyfreqKIy4eBtsGWfkXJlqBXq\/uTmXagOGdVUZ9rUs5Fv4XVXpB4Lq2vc0H8hkCpUjGOvbv2uCTZh9csRcVvssIu3bVv6a\/qyOEETk1OR9543Z\/gV0p7W3r5H9ygp9TWsjQu3IMkHHHmsrzzaw8RqPtUZlEjsnq+6rodgccyRErxHMFBiBUeRR3M1f3z6AO21rXbOP58Ai4kk5WJt\/f\/mh7LH+tzLsWfRpdnJMNAgV6ofZKZ4zZ57yUOFpuhF2RqzX6fVjZRNr95M7kWVQcFvrlCrjR8fdpGcGREekhi6jCoLq0EBrbxtXX1cZ6+cIApm0SnwieoG2I7WaE9ut47bXIkZ9+zT8oI7+Ii39GjCDWCnh7gbbYMaqRNiEghwwjc0I0DiTzaL1Q7Jmbbgf8UadV96asRPSPFBXSpJQSTZQ5As93KSuP+pUEELxm2WA3H2Fn0\/KCBIMCl\/lDL2+N7Hhzmx3w7DlDIiIU4xPrGoXP+uoTZNCeseGTZOxXsegTeHpxCvveDt9Rdp18WEAiWd\/f13+p7lOtX79KAmQNgDB3dnAIS3vvLaGvHXLFvo\/IaGwTkRvWZqQLygdwe\/JKeVxOVlzC6U3Fz1927O2sZp0kNisTaRtWSfLzBTEMk+58kQyR7p0v2Cb91uigE3YvN+041iHoTHFdiV9zdO2Pfi9HHO9tv8OmtZStqZIE+LDPxmLZuamhnjIRl7baY+O6WFpYaDyzat3ZNB+XThc76MIiuzCNV+A6l\/40evLc\/Tf8n\/fUNywjql9EvqEdmy7SMt9VYwbY5BWuAYhZ\/fZdp4N5fkuc7rAXebfm\/Y7v7B28nbCX7LH3RXr7ku\/OjEr\/gnhZUGRgjnN0XFBqvSCD86+JsCEkzb4z3TqyhyC8LCGEL+0dWOIZGRj5Kuh792McKB0r3zCjvZT4JhnfnIhvaHvn1MKmuyOdZExKRH9jLgpp0mYQNNFinNJ+Lp5vJMVSskkLncopDr6zg53syXUoDEkMbMzglLtSyEVOmZQwKaNmpLvM1pJwYzGDxpKGdThljrQff6qVG3TN807LQB\/iy3Ox4XyIW88kI7FYBp4hp\/1scB\/bc\/wo0PRUHlCBZ8GRG56LvU5+rQEeTQ+oWFbB7y2zfR791N\/K9gZSydajujQqlVXScqi3PYfrwWIyo2iHIKfYTuhpz41x9OoMpbVUHLOMPdaScCQZgVe4d8xur5uP+Z28vwr7gJeNXrTxeUrt7vckFOGUU8X29Se8CqqNdxCYz3YlB7ImJhXsHgXryzv1fkeQxeOTm\/gBNRqDxJrHzo+BPn5e2ZrSozLJ2O0gxRtW2pOdzdypftUyrZ5uf6Vuj01rbEyX7TTta2hKS69vBJK51MkPSMRg+BMZdJG5CKK\/V9jMuonrKOkHcj0Y7SPdbS0jvW3RYudL4bGdJzwaIBiVtPVOjGCt3F\/2sYJH2\/z4jOzpyk5W6ywRt77YtbphqAyPyUp1d+mZ716n\/ZTv\/JQZ8mRkK6MEfBmFX7YCLUE57gjFeH78egtT5jWbiualY8p6bWh7oxgFiWYOQ2vcbOfUXCQCcAeMJpP7pjllP5UNedhUkXCIfi5BjkgoTVeHMwDD7aq+hMA4wH+5\/7jczIMPemJGMVZzlpnPSW4HXT0IdDBcPAHTTV4QSNPZRtP+7989weVO5FnBgKj3fzd3pq2lCAuJDYvykgepAciRFfzirtRHoKR4TUa6bLVCljj8tFiwwuN6Wi6dTjSt+Lh30XLbPrjAw9iet9c+xxMF0hK9zOSozXpg9VfVV7B41UvVSzCuHj3GVQKN9mNQ3yklJXMxNx3+qLkqyYbQqq8e7D4Yo4450H0AIB0eT9glJkVNaWEXDgT0graUlSfEb3mLtDw+AZw7aX+U7uimKZH6\/AdT+yHr0wKq\/zs13u2T2z3IKDDQ5t6AqhfD+LJumzasW6EOAqFjavb+tfNjNnVrJNThiy3W\/ujcfZI\/ysYClTL9oTk00BKzKN8OuE6zOMK\/DuRJs40TYD1Vmcono58diNVTNfYXCzOVmbm1YzUlKMcUb5+E8MdLBtfQm8iCsGgQSp7rS2fBSmagkgmz0vu6hB+FH6vjG1liVmP8+N+B8GeyR7o6M0Ybq2q27lMuoUWyxwVlf6M+7NwlrMa+wnaNmM2Y7VJWDm9W1oyaPkDpknRA\/QixMSd6Zd\/F11P\/O\/VnK7U4IDLJKdNvSd\/2SlpmBAHSsymQ9gnTm0qg0Lgm\/dg19Aj\/UJaYERTOAQ45Rudu65wR+XVKa\/xLCKskSLp362oQhK9teLHnxXvc0oYNoaC3rEFixUfHVGesK0O+MJ0PQQ5ZD1XSTjv\/PweE\/L1mDN6Kg8\/S8PbC++k16XSzaF9Ta0kx2bDDCwTRGFB2hSKuMqvNX0Slxcrk6UJ5RQolj\/Iha\/tuRjyQlKVdgb0YIRUV3A2b7QhrA\/2un3sKG6u22J2sPwfINJq\/l08gw5McQgMO+WdNK9ItPaMurBOa8Up7PGK70n0DIpMx1ZesXSzftJaZp4jy8bUlbiICcDc4rpeyyD+c61vOzTK3OdEQPrZdHC1lePQI1qGdrO2OHmfVip2V\/a9cbU+U8o63XwLBdou81pDq7twzwr0Gr7jeoo3is7T1CJFXWEesk0\/+oOgsFYVZr4m3hrYB\/l2r+ZI7\/siWbIaPfIB\/3RqxIOr7nX8k8e+MWxBH3lu22+XbgQ3vT6c7\/z398cyKpIm2BXT0FL3c9tPTX+3QWfoW\/Alkt726\/jRzyOPUSeWOnS2BYDcAtj6hMBCsugUxABAAoHnpu789mWsS+UOhEbPVXdZbSPn\/U7l1Ml3bF1Q5BKyFGzwc6fRPwNyuJy1AXxVBB4QcMZ\/jnRP+2YcBV9vXYTqRu988S4Rk+As\/pmnjVtUpKMVDEs0eaC1kax9nYqqH+Aq8D0BPqDQoks\/T7I3jM8lLOm208J8R1PSxy+eE7oZhEWxu2b9diooh8X+H1nfCT634XZiugFjLLuuFnVlSAhtLum0AIvNLGzxbcmbZT5fGh3UeunIE0qVaglbMwRrQC7yMspZocL3QNw2bPFa1hHFG2Ga9yCIgQSgHDiT078fgi0XFKgTwRXWhzA4Buyphnl5hkY+\/eikDTJKunvyhSsQ10e7ayn1IvMsZ14BgGAmh8a1bRu7QZOE1DrI2QCeTHWfAO7Tl0uJVNyJEhyAM5AFpJcPduTab8Frx7Bqko10cNOmAApMghc+Pc1foP0xlIO4KkJAZxGKwFAIGjGjJhvW59xI4AlCSk2Ypg00DgFyxrILi3FXHeg9LDRLYlAxiwDwxoL\/5Ee5V5aQgdf+ogAubAhlALrAgY85YwpQMalKy63mWlx+QUL28gGRp2Td+i8czJFOwr1U9imsqYU7J3dqWvAt5x4+8AV+u1kD80D5KGKkVVMkwySS9UrGPAHCjZgR57oiZxw5WkHOlXBZSO9j3Hl4xs\/Q095zn2XgOXW6M\/KUAR6+Hu\/ofl14luB6xSBdPIaEkDMPbGKq9flQOQYEAsAB+oQdU1YBhCdXWYptyBx2MERgVISblJMKQFSYi2FaliGRco6KOwLiIuoxTI+oJilbUh+5FIpptt4rGXPvFtZsymLAQoEkfALATOBAhWAsiDFX+IgK5KCKSQ60WdZTUcVGXQ9JFPaVZKuqzag8Rjdw80RinN9wZUxYTCkSTU6hXSaJYCSWcXbI+SZhQIXzhxGFIeQEmGdEjeVuTpoBcnkLaK1+9KkosTz3jxJDJJ1dJMeBi\/4gCBAhCqa\/CSU7NqxwsTFio1GsGjUBNMW3X93SCUn20EQKgVicthT+ntp7tb4qb80b\/lSXKqn8pMxkAlmpKgVWiq20qFcCkk\/vuywDWHWV1pRjHVxZ8ywkOvCjta+AtIy0ASAjZm2EiOM5Ax9xsS1QGjfxOlELaRiSHRVSaCEREli33i+QjxPGYW04gwII7fSsRH+4cUTwjiAJ49FleWIhDAsFwRjmxsricUhEsKYm8bhIYJwkSKotAwkEWboXjiXwckXiLEAMiqt\/vFiQEOKgW91EnVxYRpJI8EiGQQAoKDcrDUQAuOf9hDwjzYhcuLuCAMFyJwQIC8ljJBMeLJIuKVaOkbAnUU1yEuK+oJgENqpj27w5Up4guLYIH729XRhdXV+jvamryCbT38MSouvRiiTIPcw2U+a9OLpTJtBxccCUzQyGcf15tFYH4asEJVwEsb+tKWjooVwrVCWkdR\/ipwOs9UtSflCsUJ04IxfInj\/G5fy1AWqvQ\/Upgu+jnl9m4BAsdyHWx1HqfauFPC4q+tW2uhRFjJkyZMYcpKfNfpTUbtuzYc+AIywmOMzwXrty48+DJizcfvvwQ+CMiIQsQKEiwEKHChIsQKQrFIlQ0dNEYmFjYOGJw8cSKEy9BoiTJ+ARSpEqTLoNQpizZcuQSERcMtltiqZNUZi3TZZVhu+wYBFjpgQ695nyxRr9O583Q2mTUN199t81eU\/6xT5583QpcVmjSJdddcdU1\/ypyyw037Vfss3XuuG1aiXc+WKGURJlyUjJbyFVQqFSlmlKNWm\/VaVCvUbMmY7Zq1aLNYu99dMJdz71wwEEvvfK3195Qu+fZIMFDjzz21H1PRgfSBRsdcpjGMROOOOqCducst9tFp5w2PnoQCqy2efTBgJ0GbfBpDCA0GNFjyF\/W6rPecWecPVVflRCJNKLNY4wiR4cNCaBF6NHINz7emb74rEQSTCKHhukX4IQj55HJpCDQwgAAAA==\",\tverticalOffsets: {}};TGE.AssetManager.LoadFontScript(familyName);","cardDance.js":"TGE.AssetManager.SpriteSheets.cardDance={cardBase_cca96:[1,121,194,304],\"cardTop-Blue_cca96\":[196,143,172,282],\"cardTop-Green_cca96\":[369,143,172,282],\"cardTop-Red_cca96\":[542,143,172,282],\"cardTop-Yellow_cca96\":[715,143,172,282],\"eyeClosed-Blue_cca96\":[799,95,41,47],\"eyeClosed-Green_cca96\":[799,47,41,47],\"eyeClosed-Red_cca96\":[904,60,41,47],\"eyeClosed-Yellow_cca96\":[946,60,41,47],\"eyeHeart-Blue_cca96\":[139,84,45,36],\"eyeHeart-Green_cca96\":[139,47,45,36],\"eyeHeart-Red_cca96\":[728,10,45,36],\"eyeHeart-Yellow_cca96\":[774,8,45,36],\"eyeOpen-Blue_cca96\":[610,80,62,62],\"eyeOpen-Green_cca96\":[673,80,62,62],\"eyeOpen-Red_cca96\":[736,80,62,62],\"eyeOpen-Yellow_cca96\":[841,45,62,62],mouthBlue_cca96:[888,357,127,68],mouthGreen_cca96:[888,288,127,68],mouthRed_cca96:[888,219,127,68],\"mouthTeeth-Blue_cca96\":[196,68,137,74],\"mouthTeeth-Green_cca96\":[1,46,137,74],\"mouthTeeth-Red_cca96\":[334,68,137,74],\"mouthTeeth-Yellow_cca96\":[472,68,137,74],mouthYellow_cca96:[888,150,127,68],sparkBlue_cca96:[904,1,58,58],sparkGreen_cca96:[963,1,58,58],sparkRed_cca96:[610,21,58,58],sparkYellow_cca96:[669,21,58,58],tongue_cca96:[888,108,116,41]},SpineAnimation.Animations.cardDance={version:1,uid:\"cca96\",data:{skeleton:{hash:\"QOUBuFT4FwJdKVGSFoaIUzoNHII\",spine:\"3.8.99\",x:-97.21,y:-150.6,width:194.89,height:304.57},bones:[{name:\"root\"},{name:\"card\",parent:\"root\",y:-38.16},{name:\"cardBase\",parent:\"card\",length:223.72,rotation:89.83,x:-.13,y:-83.15},{name:\"eyeRight\",parent:\"cardBase\",x:160.54,y:-48},{name:\"mouth\",parent:\"cardBase\",x:109.89},{name:\"eyeLeft\",parent:\"cardBase\",x:160.54,y:48.58,scaleY:-1}],slots:[{name:\"cardBase\",bone:\"cardBase\",attachment:\"cardBase\"},{name:\"eyeClosedSkin\",bone:\"eyeRight\",attachment:\"eyeSpark\"},{name:\"eyeClosed2\",bone:\"eyeLeft\",attachment:\"eyeSpark\"},{name:\"tongue\",bone:\"mouth\",attachment:\"tongue\"},{name:\"mouthYellow\",bone:\"mouth\",attachment:\"mouthTeeth\"},{name:\"cardTop\",bone:\"cardBase\",attachment:\"cardTop\"}],skins:[{name:\"default\",attachments:{cardBase:{cardBase:{x:123,rotation:90,width:194,height:304}},tongue:{tongue:{x:-30.74,y:-.32,rotation:-90,width:116,height:41}}}},{name:\"Blue\",attachments:{cardTop:{cardTop:{name:\"cardTop-Blue\",x:123,rotation:-89.83,width:172,height:282}},eyeClosed2:{eyeClosed2Skin:{name:\"eyeClosed-Blue\",x:.5,y:.5,scaleX:-1,rotation:89.83,width:41,height:47},eyeHeart2:{name:\"eyeHeart-Blue\",x:5,rotation:-90,width:45,height:36},eyeOpen2Skin:{name:\"eyeOpen-Blue\",rotation:89.83,width:62,height:62},eyeSpark:{name:\"sparkBlue\",x:10,rotation:-90,width:58,height:58}},eyeClosedSkin:{eyeClosedSkin:{name:\"eyeClosed-Blue\",x:.5,y:-.5,rotation:-89.83,width:41,height:47},eyeHeart:{name:\"eyeHeart-Blue\",x:5,y:5,rotation:-90,width:45,height:36},eyeOpenSkin:{name:\"eyeOpen-Blue\",width:62,height:62},eyeSpark:{name:\"sparkBlue\",x:10,rotation:-90,width:58,height:58}},mouthYellow:{mouthSkin:{name:\"mouthBlue\",x:-18,y:-.76,rotation:-89.83,width:127,height:68},mouthTeeth:{name:\"mouthTeeth-Blue\",x:-25.17,y:-.76,rotation:-89.83,width:137,height:74}}}},{name:\"Green\",attachments:{cardTop:{cardTop:{name:\"cardTop-Green\",x:123.44,rotation:90,width:172,height:282}},eyeClosed2:{eyeClosed2Skin:{name:\"eyeClosed-Green\",x:.5,y:.5,rotation:-90,width:41,height:47},eyeHeart2:{name:\"eyeHeart-Green\",x:5,rotation:-90,width:45,height:36},eyeOpen2Skin:{name:\"eyeOpen-Green\",rotation:-90,width:62,height:62},eyeSpark:{name:\"sparkGreen\",x:10,rotation:-90,width:58,height:58}},eyeClosedSkin:{eyeClosedSkin:{name:\"eyeClosed-Green\",x:.5,y:-.5,rotation:-89.83,width:41,height:47},eyeHeart:{name:\"eyeHeart-Green\",x:5,rotation:-89.83,width:45,height:36},eyeOpenSkin:{name:\"eyeOpen-Green\",rotation:-89.83,width:62,height:62},eyeSpark:{name:\"sparkGreen\",x:10,rotation:-89.83,width:58,height:58}},mouthYellow:{mouthSkin:{name:\"mouthGreen\",x:-18,y:-.76,rotation:-89.83,width:127,height:68},mouthTeeth:{name:\"mouthTeeth-Green\",x:-25.17,y:-.76,rotation:-89.83,width:137,height:74}}}},{name:\"Red\",attachments:{cardTop:{cardTop:{name:\"cardTop-Red\",x:123,rotation:-90,width:172,height:282}},eyeClosed2:{eyeClosed2Skin:{name:\"eyeClosed-Red\",x:.5,y:.5,scaleX:-1,rotation:89.83,width:41,height:47},eyeHeart2:{name:\"eyeHeart-Red\",x:5,rotation:-90,width:45,height:36},eyeOpen2Skin:{name:\"eyeOpen-Red\",rotation:89.83,width:62,height:62},eyeSpark:{name:\"sparkRed\",x:10,rotation:-90,width:58,height:58}},eyeClosedSkin:{eyeClosedSkin:{name:\"eyeClosed-Red\",x:.5,y:-.5,rotation:-89.83,width:41,height:47},eyeHeart:{name:\"eyeHeart-Red\",x:5,rotation:-90,width:45,height:36},eyeOpenSkin:{name:\"eyeOpen-Red\",rotation:-89.79,width:62,height:62},eyeSpark:{name:\"sparkRed\",x:10,rotation:-90,width:58,height:58}},mouthYellow:{mouthSkin:{name:\"mouthRed\",x:-18,y:-.76,rotation:-89.83,width:127,height:68},mouthTeeth:{name:\"mouthTeeth-Red\",x:-25.18,rotation:-90,width:137,height:74}}}},{name:\"Yellow\",attachments:{cardTop:{cardTop:{name:\"cardTop-Yellow\",x:123.39,rotation:90,width:172,height:282}},eyeClosed2:{eyeClosed2Skin:{name:\"eyeClosed-Yellow\",x:.5,y:.5,rotation:-90,width:41,height:47},eyeHeart2:{name:\"eyeHeart-Yellow\",x:.5,y:.5,rotation:-90,width:45,height:36},eyeOpen2Skin:{name:\"eyeOpen-Yellow\",rotation:-89.83,width:62,height:62},eyeSpark:{name:\"sparkYellow\",x:10,y:.5,rotation:-90,width:58,height:58}},eyeClosedSkin:{eyeClosedSkin:{name:\"eyeClosed-Yellow\",x:.5,y:.5,rotation:-90,width:41,height:47},eyeHeart:{name:\"eyeHeart-Yellow\",x:.5,y:-.5,rotation:-89.83,width:45,height:36},eyeOpenSkin:{name:\"eyeOpen-Yellow\",rotation:-89.83,width:62,height:62},eyeSpark:{name:\"sparkYellow\",x:10,y:-.5,rotation:-89.83,width:58,height:58}},mouthYellow:{mouthTeeth:{name:\"mouthTeeth-Yellow\",x:-25.17,rotation:-90,width:137,height:74},mouthSkin:{name:\"mouthYellow\",x:-18,y:-.76,rotation:-89.83,width:127,height:68}}}}],animations:{dance:{slots:{eyeClosed2:{attachment:[{name:\"eyeOpen2Skin\"},{time:.7,name:\"eyeClosed2Skin\"}]},eyeClosedSkin:{attachment:[{name:\"eyeOpenSkin\"},{time:.7,name:\"eyeClosedSkin\"}]},mouthYellow:{attachment:[{name:\"mouthSkin\"}]}},bones:{cardBase:{rotate:[{angle:13.77,curve:.261,c2:.43,c3:.587,c4:.77},{time:.0667,angle:15.17,curve:.366,c2:.31,c3:.145,c4:.93},{time:.6333,angle:-14.83,curve:.366,c2:.31,c3:.182,c4:.95},{time:1.2,angle:15.17,curve:.366,c2:.31,c3:.122,c4:.96},{time:1.7667,angle:-14.83,curve:.366,c2:.31,c3:.247,c4:.93},{time:2.2667,angle:13.77}]},mouth:{scale:[{},{time:.5667,x:1.154,curve:.25,c3:.331,c4:.83},{time:1.1333,x:.93,curve:.25,c3:.338,c4:.83},{time:1.7,x:1.154,curve:.25,c3:.338,c4:.84},{time:2.2667,x:.93}]},card:{translate:[{curve:.581,c2:.01,c3:.361,c4:.77},{time:.2667,y:45.73,curve:.743,c3:.75},{time:.5667,curve:.77,c2:.01,c3:.331,c4:.83},{time:.8667,y:45.73,curve:.791,c3:.75},{time:1.1333,curve:.77,c3:.338,c4:.83},{time:1.4333,y:45.73,curve:.899,c3:.75},{time:1.7,curve:.797,c3:.338,c4:.84},{time:2,y:45.73,curve:.872,c2:.01,c3:.75},{time:2.2667}]}}},dance2:{slots:{tongue:{attachment:[{name:null}]}},bones:{cardBase:{rotate:[{angle:13.77,curve:.261,c2:.43,c3:.587,c4:.77},{time:.0667,angle:15.17,curve:.366,c2:.31,c3:.145,c4:.93},{time:.6333,angle:-14.83,curve:.366,c2:.31,c3:.182,c4:.95},{time:1.2,angle:15.17,curve:.366,c2:.31,c3:.122,c4:.96},{time:1.7667,angle:-14.83,curve:.366,c2:.31,c3:.247,c4:.93},{time:2.2667,angle:13.77}]},mouth:{scale:[{x:.93,curve:.25,c3:.361,c4:.77},{time:.5667,x:1.1,curve:.25,c3:.331,c4:.83},{time:1.1333,x:.93,curve:.25,c3:.338,c4:.83},{time:1.7,x:1.1,curve:.25,c3:.331,c4:.83},{time:2.2667,x:.93}]},card:{translate:[{curve:.581,c2:.01,c3:.361,c4:.77},{time:.2667,y:45.73,curve:.743,c3:.75},{time:.5667,curve:.77,c2:.01,c3:.331,c4:.83},{time:.8667,y:45.73,curve:.791,c3:.75},{time:1.1333,curve:.77,c3:.338,c4:.83},{time:1.4333,y:45.73,curve:.899,c3:.75},{time:1.7,curve:.797,c3:.338,c4:.84},{time:2,y:45.73,curve:.872,c2:.01,c3:.75},{time:2.2667}]},eyeLeft:{scale:[{curve:.25,c3:.75},{time:.2667,x:1.5,y:1.5,curve:.25,c3:.75},{time:.5667,curve:.25,c3:.75},{time:.8333,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.1333,curve:.25,c3:.75},{time:1.4,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.7,curve:.25,c3:.75},{time:1.9667,x:1.5,y:1.5,curve:.25,c3:.75},{time:2.2667}]},eyeRight:{scale:[{curve:.25,c3:.75},{time:.2667,x:1.5,y:1.5,curve:.25,c3:.75},{time:.5667,curve:.25,c3:.75},{time:.8333,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.1333,curve:.25,c3:.75},{time:1.4,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.7,curve:.25,c3:.75},{time:1.9667,x:1.5,y:1.5,curve:.25,c3:.75},{time:2.2667}]}}},dance3:{slots:{eyeClosed2:{attachment:[{name:\"eyeHeart2\"}]},eyeClosedSkin:{attachment:[{name:\"eyeHeart\"}]},tongue:{attachment:[{name:null}]}},bones:{cardBase:{rotate:[{angle:13.77,curve:.261,c2:.43,c3:.587,c4:.77},{time:.0667,angle:15.17,curve:.366,c2:.31,c3:.145,c4:.93},{time:.6333,angle:-14.83,curve:.366,c2:.31,c3:.182,c4:.95},{time:1.2,angle:15.17,curve:.366,c2:.31,c3:.122,c4:.96},{time:1.7667,angle:-14.83,curve:.366,c2:.31,c3:.247,c4:.93},{time:2.2667,angle:13.77}]},mouth:{scale:[{x:.93,curve:.25,c3:.361,c4:.77},{time:.5667,x:1.1,curve:.357,c3:.685,c4:.36},{time:.6333,x:1.094,y:1.006,curve:.212,c2:.16,c3:.357,c4:.85},{time:1.1333,x:.93,curve:.25,c3:.338,c4:.83},{time:1.7,x:1.1,curve:.25,c3:.331,c4:.83},{time:2.2667,x:.93}]},card:{translate:[{curve:.581,c2:.01,c3:.361,c4:.77},{time:.2667,y:45.73,curve:.743,c3:.75},{time:.5667,curve:.77,c2:.01,c3:.331,c4:.83},{time:.8667,y:45.73,curve:.791,c3:.75},{time:1.1333,curve:.77,c3:.338,c4:.83},{time:1.4333,y:45.73,curve:.899,c3:.75},{time:1.7,curve:.797,c3:.338,c4:.84},{time:2,y:45.73,curve:.872,c2:.01,c3:.75},{time:2.2667}]},eyeLeft:{scale:[{curve:.25,c3:.75},{time:.2667,x:1.5,y:1.5,curve:.25,c3:.75},{time:.5667,curve:.25,c3:.75},{time:.8333,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.1333,curve:.25,c3:.75},{time:1.4,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.7,curve:.25,c3:.75},{time:1.9667,x:1.5,y:1.5,curve:.25,c3:.75},{time:2.2667}]},eyeRight:{scale:[{curve:.25,c3:.75},{time:.2667,x:1.5,y:1.5,curve:.25,c3:.75},{time:.5667,curve:.25,c3:.75},{time:.8333,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.1333,curve:.25,c3:.75},{time:1.4,x:1.5,y:1.5,curve:.25,c3:.75},{time:1.7,curve:.25,c3:.75},{time:1.9667,x:1.5,y:1.5,curve:.25,c3:.75},{time:2.2667}]}}}}}};"};;</script> 	<script type="text/javascript">	var GameConfig = {"PATH":"\/","TGS":{"VERSION":"0.3","ENABLED":false},"SESSION_INITIALIZED":true,"HOST":"http:\/\/phase10.tresensa.com","SLUG":"phase10","COLOR_DEFS":{"promo_background_landscape_letterbox":"#000","card_green":"#2c9541","card_yellow":"#e6bd29","card_blue":"#126fc6","card_red":"#e1152c","slotBackground":"#105c83","maskOverlay":"#000000","promo_background_portrait_letterbox":"#000","promo_video_letterbox":"#000","topGradient":"#206194","promo_background_letterbox":"#000"},"EXCLUDE_FROM_COMPRESSION":[],"ADS":{},"REMOTE_SETTINGS":{"promo_video_videoUpload":{"default":false,"wasSet":false,"name":"promo_video_videoUpload","description":"","type":"boolean","value":false},"idleTimerDuration":{"default":3,"options":[{"min":1,"max":20}],"name":"idleTimerDuration","description":"","type":"number"},"promo_video_watchdogTimer":{"default":500,"wasSet":false,"name":"promo_video_watchdogTimer","description":"","type":"number","value":500},"promo_background_landscape_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_landscape_yPosition","description":"","type":"number"},"promo_muteThickness":{"default":0.5,"options":[{"min":0.1,"max":1,"interval":0.1}],"name":"promo_muteThickness","description":"","type":"number"},"promo_winOnly":{"default":false,"wasSet":false,"name":"promo_winOnly","description":"","type":"boolean","value":false},"startOnPhase":{"default":1,"type":"number"},"forceTutorialMessage":{"default":"","type":"string"},"pointerActive":{"default":true,"name":"pointerActive","description":"","type":"boolean"},"idleTimerActive":{"default":true,"name":"idleTimerActive","description":"","type":"boolean"},"handSize_phase3_run":{"default":4,"options":[{"min":4,"max":8}],"name":"handSize_phase3_run","description":"","type":"number"},"numberOfPhases":{"default":2,"options":[1,2,3],"name":"numberOfPhases","description":"","type":"number"},"promo_fullClickAction":{"default":"none","options":["none","action","replay","popwallet"],"name":"promo_fullClickAction","description":"","type":"string"},"promo_background_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_yPosition","description":"","type":"number"},"groupType_phase1":{"default":"color","options":["set","color","run"],"name":"groupType_phase1","description":"","type":"string"},"promo_fullClick":{"default":false,"name":"promo_fullClick","description":"","type":"boolean"},"groupType_phase2":{"default":"set","options":["set","color","run"],"name":"groupType_phase2","description":"","type":"string"},"promo_dualVideo":{"default":false,"name":"promo_dualVideo","description":"","type":"boolean"},"promo_video_useSafeZone":{"default":true,"wasSet":false,"name":"promo_video_useSafeZone","description":"","type":"boolean","value":true},"maskOverlayFadeDuration":{"default":0.4,"type":"number"},"groupType_phase3":{"default":"run","options":["set","color","run"],"name":"groupType_phase3","description":"","type":"string"},"promo_reason":{"default":"","wasSet":false,"name":"promo_reason","description":"","type":"string","value":""},"promo_video_safeZoneHeight":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"promo_video_safeZoneHeight","description":"","type":"number"},"handSize_phase2_run":{"default":4,"options":[{"min":4,"max":8}],"name":"handSize_phase2_run","description":"","type":"number"},"state":{"default":"tutorial","debug":true,"options":["tutorial","game","promo"],"type":"string"},"promo_previewBgFocus":{"default":false,"wasSet":false,"name":"promo_previewBgFocus","description":"","type":"boolean","value":false},"promo_testVideo":{"default":false,"wasSet":false,"name":"promo_testVideo","description":"","type":"boolean","value":false},"promo_supportScore":{"default":false,"wasSet":false,"name":"promo_supportScore","description":"","type":"boolean","value":false},"promo_background_portrait_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_portrait_yPosition","description":"","type":"number"},"promo_popwalletRedeemOnce":{"default":false,"name":"promo_popwalletRedeemOnce","description":"","type":"boolean"},"promo_video":{"default":false,"name":"promo_video","description":"","type":"boolean"},"promo_muteColor":{"default":"#ffffff","name":"promo_muteColor","description":"","type":"string"},"handSize_phase1":{"default":5,"options":[{"min":4,"max":8}],"name":"handSize_phase1","description":"","type":"number"},"promo_buttons":{"default":2,"options":[0,1,2],"name":"promo_buttons","description":"","type":"number"},"maskOverlayAlpha":{"default":0.625,"type":"number"},"handSize_phase3":{"default":6,"options":[{"min":4,"max":8}],"name":"handSize_phase3","description":"","type":"number"},"handSize_phase2":{"default":6,"options":[{"min":4,"max":8}],"name":"handSize_phase2","description":"","type":"number"},"handSize_phase1_run":{"default":4,"options":[{"min":4,"max":8}],"name":"handSize_phase1_run","description":"","type":"number"},"promo_icon":{"default":true,"name":"promo_icon","description":"","type":"boolean"},"maxStartingCards_phase2":{"default":3,"name":"maxStartingCards_phase2","description":"","type":"number"},"maxStartingCards_phase1":{"default":3,"name":"maxStartingCards_phase1","description":"","type":"number"},"promo_video_zoomedPreview":{"default":false,"name":"promo_video_zoomedPreview","description":"","type":"boolean"},"promo_video_location":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.001}],"name":"promo_video_location","description":"","type":"number"},"allowWrongCardPlacement":{"default":false,"name":"allowWrongCardPlacement","description":"","type":"boolean"},"maxStartingCards_phase3":{"default":3,"name":"maxStartingCards_phase3","description":"","type":"number"},"startingCardAmount_phase2":{"default":3,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase2","description":"","type":"number"},"tutorialMessageActive":{"default":true,"name":"tutorialMessageActive","description":"","type":"boolean"},"startingCardAmount_phase3":{"default":0,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase3","description":"","type":"number"},"startingCardAmount_phase1":{"default":3,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase1","description":"","type":"number"},"promo_background_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_aspectHandling","description":"","type":"string"},"promo_text":{"default":"header","options":["header","body","none","nofont"],"name":"promo_text","description":"","type":"string"},"groupSize_phase2_run":{"default":4,"options":[{"min":2,"max":6}],"name":"groupSize_phase2_run","description":"","type":"number"},"startingCardAmount_phase3_run":{"default":3,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase3_run","description":"","type":"number"},"maxStartingCards_phase2_run":{"default":3,"name":"maxStartingCards_phase2_run","description":"","type":"number"},"promo_muteStyle":{"default":"circle","options":["none","filled","circle","circleFilled"],"name":"promo_muteStyle","description":"","type":"string"},"promo_style":{"default":"promoPopupIconDouble","name":"promo_style","description":"","type":"string"},"groupSize_phase1":{"default":4,"options":[{"min":2,"max":4}],"name":"groupSize_phase1","description":"","type":"number"},"promo_background_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_xPosition","description":"","type":"number"},"promo_video_previewVideoCropping":{"default":false,"wasSet":false,"name":"promo_video_previewVideoCropping","description":"","type":"boolean","value":false},"groupSize_phase3":{"default":4,"options":[{"min":2,"max":6}],"name":"groupSize_phase3","description":"","type":"number"},"promo_background_landscape_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_landscape_xPosition","description":"","type":"number"},"groupSize_phase2":{"default":4,"options":[{"min":2,"max":6}],"name":"groupSize_phase2","description":"","type":"number"},"allowCorrectCardsToBeRemovedFromSlot":{"default":false,"name":"allowCorrectCardsToBeRemovedFromSlot","description":"","type":"boolean"},"promo_bg":{"default":"popup","options":["popup","full","twoBox","none"],"name":"promo_bg","description":"","type":"string"},"promo_video_aspectHandling":{"default":"crop","wasSet":false,"options":["letterbox","crop"],"name":"promo_video_aspectHandling","description":"","type":"string","value":"crop"},"promo_buttonActionA":{"default":"action","options":["action","replay","popwallet"],"name":"promo_buttonActionA","description":"","type":"string"},"promo_popwalletId":{"default":"","name":"promo_popwalletId","description":"","type":"string"},"startingCardAmount_phase2_run":{"default":2,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase2_run","description":"","type":"number"},"promo_buttonActionB":{"default":"replay","options":["action","replay","popwallet"],"name":"promo_buttonActionB","description":"","type":"string"},"promo_noVideo":{"default":false,"wasSet":false,"name":"promo_noVideo","description":"","type":"boolean","value":false},"groupSize_phase3_run":{"default":4,"options":[{"min":2,"max":6}],"name":"groupSize_phase3_run","description":"","type":"number"},"maxStartingCards_phase3_run":{"default":3,"name":"maxStartingCards_phase3_run","description":"","type":"number"},"promo_staticBackground":{"default":"single","options":["single","dual"],"name":"promo_staticBackground","description":"","type":"string"},"startingCardAmount_phase1_run":{"default":3,"options":[{"min":0,"max":3}],"name":"startingCardAmount_phase1_run","description":"","type":"number"},"maskOverlayActive":{"default":true,"name":"maskOverlayActive","description":"","type":"boolean"},"promo_video_noCropping":{"default":true,"name":"promo_video_noCropping","description":"","type":"boolean"},"promo_art":{"default":false,"name":"promo_art","description":"","type":"boolean"},"promo_background_landscape_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_landscape_aspectHandling","description":"","type":"string"},"promo_background_portrait_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_portrait_xPosition","description":"","type":"number"},"promo_background_portrait_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_portrait_aspectHandling","description":"","type":"string"},"promo_videoInterstitial":{"default":false,"name":"promo_videoInterstitial","description":"","type":"boolean"},"promo_video_safeZoneWidth":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"promo_video_safeZoneWidth","description":"","type":"number"},"promo_video_safeZoneX":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"promo_video_safeZoneX","description":"","type":"number"},"promo_type":{"default":"preset","options":["static","preset","custom"],"name":"promo_type","description":"","type":"string"},"promo_video_loop":{"default":false,"name":"promo_video_loop","description":"","type":"boolean"},"promoVariant":{"default":1,"options":[0,1],"name":"promoVariant","description":"","type":"number"},"maxStartingCards_phase1_run":{"default":3,"name":"maxStartingCards_phase1_run","description":"","type":"number"},"promo_video_safeZoneY":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"promo_video_safeZoneY","description":"","type":"number"},"logoClickable":{"default":true,"name":"logoClickable","description":"","type":"boolean"},"groupSize_phase1_run":{"default":4,"options":[{"min":2,"max":6}],"name":"groupSize_phase1_run","description":"","type":"number"}},"TEXT_DEFS":{"txt_tutorialMessage_run":{"textDef":"font_tutorialMessage","text":"Fill the slot with sequential cards!"},"txt_font_primary":{"fontFamily":"Roboto"},"font_tutorialMessage":{"strokeWidth":0,"textDef":"font_game","fontSize":35,"strokeColor":"#0b3d54","textColor":"#ffffff"},"txt_promo_bodyB":{"textDef":"txt_promo_body","text":"Lorem ipsum dolor sit amet, consectetur."},"txt_promo_headerB":{"textDef":"txt_promo_header","text":"Nice Try!"},"txt_promo_bodyA":{"textDef":"txt_promo_body","text":"Lorem ipsum dolor sit amet, consectetur."},"txt_tutorialMessage_color":{"textDef":"font_tutorialMessage","text":"Fill the slot with cards of the same color!"},"txt_promo_headerA":{"textDef":"txt_promo_header","text":"Nice Job!"},"txt_gameplayCTA":{"strokeWidth":13.6,"textDef":"font_game","fontSize":57,"text":"Play Now! ","strokeColor":"#105c83","textColor":"white"},"txt_promo_header":{"strokeWidth":0,"hAlign":"center","textDef":"txt_font_primary","fontSize":84,"strokeColor":"#ffffff","textColor":"#5c5f6a","lineSpacing":0.2,"fontWeight":"bold"},"txt_promoBlurb":{"strokeWidth":0,"textDef":"font_game","fontSize":49,"text":"Train Your Brain with \n500+ Levels to Beat","strokeColor":"#2e640b","textColor":"#ffffff"},"font_game":{"fontFamily":"FuturaStd-Bold"},"txt_promoCTA":{"strokeWidth":7,"textDef":"font_game","fontSize":38,"text":"Play Now!","strokeColor":"#2e640b","textColor":"#ffffff"},"popup_txt":{"strokeWidth":0,"fontFamily":"Roboto","fontSize":52,"strokeColor":"#ffffff","textColor":"#494B54","fontWeight":"bold"},"font_tutorialEG":{"textDef":"font_tutorialMessage","fontSize":30},"font_phaseObjective":{"strokeWidth":10,"textDef":"font_game","fontSize":35,"strokeColor":"#105c83","textColor":"white"},"txt_tutorialMessage_set":{"textDef":"font_tutorialMessage","text":"Fill the slot with cards of the same number!"},"txt_font_secondary":{"fontFamily":"Roboto"},"txt_promo_body":{"strokeWidth":0,"hAlign":"center","textDef":"txt_font_secondary","fontSize":56,"strokeColor":"#ffffff","textColor":"#5c5f6a","lineSpacing":0.2},"txt_promo_buttonA":{"strokeWidth":0,"textDef":"txt_font_primary","fontSize":84,"text":"Learn More","strokeColor":"#ffffff","textColor":"#5c5f6a","fontWeight":"bold"},"txt_promo_buttonB":{"strokeWidth":0,"textDef":"txt_font_primary","fontSize":84,"text":"Play Again","strokeColor":"#ffffff","textColor":"#5c5f6a","fontWeight":"bold"}},"LOG_LEVEL":3,"CSS":[],"GAME_ID":"phase10","DEBUG":false,"UNVERSIONED_LOAD":true,"IMAGE_COMPRESSION":{"assets\/images\/promoCommon.png":{"type":"tinypng"},"assets\/images\/promoPopupIcon.png":{"type":"tinypng"}},"PROD_ENV":true,"ELX_DEFS":{},"TGE":{"VERSION":"1.1","ENABLED":true},"BUILDER":"1.7.64","CB_INITIALIZED":true,"ORIENTATION":"unspecified","EXCLUDE":["assets\/source-images\/\/**","js\/lib-debug\/\/**"],"VERSION":"3.7.6","SOURCE":["js\/modules\/BuilderGame\/BuilderGame.js","js\/modules\/ELXDisplay\/ELXDisplay.js","promobuilder\/js\/PromoBuilder.js","js\/modules\/Math\/Math.js","js\/modules\/PropertyCombine\/PropertyCombine.js","js\/modules\/StateManager\/StateManager.js","js\/modules\/ParticleEffects\/ParticleEffects.js","js\/modules\/Pointer\/Pointer.js","js\/modules\/PromoScreen\/PromoScreen.js","js\/modules\/SpineAnimation\/SpineAnimation.js","js\/modules\/Popup\/Popup.js","js\/game\/phase10\/Phase10.js","js\/game\/phase10\/Phase10.Gameplay.js","js\/game\/phase10\/Phase10.TutorialManager.js","js\/game\/phase10\/Phase10.Card.js","js\/game\/phase10\/Phase10.Card.Visual.js","js\/game\/phase10\/Phase10.Hand.js","js\/game\/phase10\/Phase10.CardSlot.js","js\/game\/phase10\/Phase10.DancingCardsPromo.js","js\/game\/GameConstructor.js","js\/game\/screens\/GameScreen.js","js\/game\/util\/ColorDefUpdater.js","js\/game\/sheets\/initial.js","js\/game\/sheets\/game.js","js\/game\/sheets\/engagement.js","js\/game\/sheets\/promo.js","js\/game\/particleEffects\/particleEffect_sparkle.js","js\/game\/particleEffects\/particleEffect_confettiBurst1.js","js\/game\/elx\/ELX_promo.js"],"TGL":{"VERSION":"1.0"},"CPE":{},"TITLE":"Phase 10","CONSTRUCTOR":"GameConstructor","CPI":{}};</script>	<script type="text/javascript">	/* TreSensa Game Engine, TGE-SDK, Version 1.1.196 *//* Copyright (c) 2014 TreSensa, Inc. All Rights Reserved. */function extend(a,b){var c=a.prototype,d=function(){};d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b);for(var e in c)c.hasOwnProperty(e)&&(a.prototype[e]=c[e])}function getQueryString(){if(window.TreSensa)return TreSensa.Playable.getParameters();if(window.GameConfig&&GameConfig.DIRECT_AD)return GameConfig.DIRECT_AD;for(var a,b={},c=location.search.substring(1),d=/([^&=]+)=([^&]*)/g;a=d.exec(c);)b[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return b}function getDistributionPartner(){var a=getQueryString().dst;return"string"==typeof a?a:null}function loadScript(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript",d.src=a,d.onreadystatechange=b,d.onload=b,c.appendChild(d)}function generateUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})}function trimmedFilename(a){var b=a.lastIndexOf("/")+1;return a.substr(b,a.lastIndexOf(".")-b)}var TGE=TGE||{};if(TGE.log=function(){},TGE.debugLog=function(){},TGE.Debug=TGE.Debug||{},TGE.Debug.LOG_NONE=0,TGE.Debug.LOG_ERROR=1,TGE.Debug.LOG_WARNING=2,TGE.Debug.LOG_INFO=3,TGE.Debug.LOG_VERBOSE=4,"undefined"!=typeof GameConfig&&"number"==typeof GameConfig.LOG_LEVEL){var debugMode=getQueryString().tgedebug;TGE.Debug.LogLevel="3"===debugMode||"4"===debugMode?4:GameConfig.LOG_LEVEL}else TGE.Debug.LogLevel=TGE.Debug.LOG_INFO;TGE.Debug.Log=function(a){if(window.console&&a<=TGE.Debug.LogLevel){var b="TGE: ",c="log";a===TGE.Debug.LOG_ERROR?(b+="**ERROR** ",c="error"):a===TGE.Debug.LOG_WARNING&&(b+="**WARNING** ",c="warn"),window.console[c](b+Array.prototype.slice.call(arguments,1))}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var merge=function(a){return Array.prototype.forEach.call(Array.prototype.slice.call(arguments,1),function(b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}),a};TGE.InCreativeBuilder=function(){return void 0!==window._selfServe&&!window.__gameOnly},TGE.BrowserDetect={DEVICES:{IPAD:"iPad",IPHONE_4:"iPhone 4",IPHONE_5:"iPhone 5",IPHONE_6:"iPhone 6",IPHONE_6_PLUS:"iPhone 6+"},init:function(){this.browser=this.searchString(this.dataBrowser)||"an unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.platform=this.searchString(this.dataPlatform)||"an unknown OS or Device",this.OSversion=this.detectOSversion(this.platform),this.onFirefoxMobile=/Firefox/i.test(navigator.userAgent)&&(/Android/i.test(navigator.userAgent)||/Mobile/i.test(navigator.userAgent)),this.oniOS="iPhone"===this.platform||"iPad"===this.platform,this.iOSDevice=this.detectiOSDevice(screen.height),this.onAndroid="Android"===this.platform,this.onWindowsMobile="Windows Phone"===this.platform||"Windows Tablet"===this.platform,this.isMobileDevice=!("Windows"===this.platform||"Mac"===this.platform||"Linux"===this.platform),this.clickEvent=!this.isMobileDevice||this.onWindowsMobile?"click":"touchstart",this.oniOS&&"10_"==this.OSversion&&(this.OSversion="8_")},detectiOSDevice:function(a){if(!this.oniOS)return!1;switch(a){case 1024:return this.DEVICES.IPAD;case 480:return this.DEVICES.IPHONE_4;case 568:return this.DEVICES.IPHONE_5;case 667:return this.DEVICES.IPHONE_6;case 736:return this.DEVICES.IPHONE_6_PLUS}},detectOSversion:function(a){var b="-1",c="",d=navigator.userAgent.toString();switch(a){case"Windows Phone":c=/Windows Phone OS\s+[\d\.]+/,b=String(d.match(c)).substring(17,20);break;case"iPhone":case"iPad":c=/OS\s+[\d\_]+/,b=String(d.match(c)).substring(3).match(/[^_]*/i)[0];break;case"Windows":c=/Windows NT\s+[\d\.]+/;var e=String(d.match(c)).substring(11,14);"6.1"==e?b="7":"5.1"==e?b="XP":"5.2"==e?b="XP":"6.0"==e?b="Vista":"5.01"==e?b="2000 SP1":"5.0"==e&&(b="2000");break;case"Mac":c=/Mac OS X\s+[\d\_]+/,b=String(d.match(c)).substring(9,13);break;case"Android":c=/ndroid\s+[\d\.]+/,b=String(d.match(c)).substring(7,10)}return b},searchString:function(a){for(var b=0;b<a.length;b++)if(null!=a[b]){var c=a[b].string,d=a[b].prop;if(this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(-1!==c.indexOf(a[b].subString))return"Mozilla"===a[b].identity&&navigator.userAgent.match(/Trident\/7\./)?"Explorer":a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!==b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Explorer",identity:"Explorer",versionSearch:"Explorer"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Silk",identity:"Silk",versionSearch:"Silk"},{string:navigator.userAgent,subString:"Kindle Fire",identity:"Amazon Web App",versionSearch:"AppleWebKit"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.vendor,subString:"BlackBerry",identity:"BlackBerry"}],dataPlatform:[{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.userAgent,subString:"Tablet PC",identity:"Windows Tablet"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"Silk",identity:"Kindle Fire"},{string:navigator.userAgent,subString:"Kindle Fire",identity:"Kindle Fire"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"webOS",identity:"webOS"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},TGE.BrowserDetect.init();var _vp=document.querySelector("meta[name=viewport]");_vp&&_vp.setAttribute("content"," initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui");var TGL=window.TGL||{};TGL.PREVIEW||(TGL.PREVIEW={NONE:0,AD_300X250:1,AD_FULLSCREEN:2},TGL.getPreviewMode=function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"this game is using the deprecated TGL sdk. These references should be removed.");var a=getQueryString().previewMode;return"1"==a?TGL.PREVIEW.AD_300X250:"2"==a?TGL.PREVIEW.AD_FULLSCREEN:TGL.PREVIEW.NONE}),TGE.Loader=function(a){a=a||{},this.assetManager=TGE.AssetManager.sAssetManagerInstance,null==a.statusInterval&&(a.statusInterval=5e3),null==a.loggingDelay&&(a.loggingDelay=2e4),null==a.noProgressTimeout&&(a.noProgressTimeout=1/0);var b,c=[],d=[],e=+new Date,f={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4};this.add=function(a){c.push({resource:a,state:f.QUEUED})},this.addProgressListener=function(a){d.push({callback:a})},this.addCompletionListener=function(a){d.push({callback:function(b){b.completedCount===b.totalCount&&a()}})},this.start=function(){b=+new Date;for(var a=0,d=c.length;a<d;a++){var e=c[a];e.status=f.WAITING,e.resource.start(this)}setTimeout(g,100)};var g=function(){for(var b=!1,d=+new Date-e,h=d>=a.noProgressTimeout,i=d>=a.loggingDelay,k=0,l=c.length;k<l;k++){var m=c[k];m.status===f.WAITING&&(m.resource.checkStatus(),m.status===f.WAITING&&(h?m.resource.onTimeout():b=!0))}i&&b&&j(),b&&setTimeout(g,a.statusInterval)};this.isBusy=function(){for(var a=0,b=c.length;a<b;a++)if(c[a].status===f.QUEUED||c[a].status===f.WAITING)return!0;return!1};var h=function(a,b){for(var g=null,h=0,j=c.length;h<j;h++)if(c[h].resource===a){g=c[h];break}if(null!=g&&g.status===f.WAITING){g.status=b,e=+new Date;for(var h=0,k=d.length;h<k;h++){var l=d[h];i(g,l)}}};this.onLoad=function(a){if(a.url&&(this.assetManager._recordAsset(a.url),!TGE.InCreativeBuilder()&&this.assetManager.allLoaded)){if(GameConfig.PACKAGE_ASSETS)for(var b=0;b<GameConfig.PACKAGE_ASSETS.length;b++)if(a.url===this.assetManager._mRootLocation+GameConfig.PACKAGE_ASSETS[b])return;TGE.Debug.Log(TGE.Debug.LOG_WARNING,"asset "+a.url+" will not be included in packaged builds unless included in GameConfig.PACKAGE_ASSETS")}h(a,f.LOADED)},this.onError=function(a){h(a,f.ERROR)},this.onTimeout=function(a){h(a,f.TIMEOUT)};var i=function(a,b){for(var d=0,e=0,g=0,h=c.length;g<h;g++){var i=c[g];e++,i.status!==f.LOADED&&i.status!==f.ERROR&&i.status!==f.TIMEOUT||d++}b.callback({resource:a.resource,loaded:a.status===f.LOADED,error:a.status===f.ERROR,timeout:a.status===f.TIMEOUT,completedCount:d,totalCount:e})},j=this.log=function(a){if(window.console){var d=Math.round((+new Date-b)/1e3);window.console.log("TGE.Loader elapsed: "+d+" sec");for(var e=0,g=c.length;e<g;e++){var h=c[e];if(a||h.status===f.WAITING){var i="TGE.Loader: #"+e+" "+h.resource.getName();switch(h.status){case f.QUEUED:i+=" (Not Started)";break;case f.WAITING:i+=" (Waiting)";break;case f.LOADED:i+=" (Loaded)";break;case f.ERROR:i+=" (Error)";break;case f.TIMEOUT:i+=" (Timeout)"}h.resource.log&&(i+=" "+h.resource.log()),window.console.log(i)}}}}},Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),TGE.ElementLoader=function(a,b,c,d){var e,f=this,g=null,h=c&&c.preload||"auto";this.url=a;var i=a.split("/"),j=i[i.length-1],k=document.getElementById(j);this.el=k||document.createElement(b),this.bind=function(a,b){f.el.addEventListener?f.el.addEventListener(a,b,!1):f.el.attachEvent&&f.el.attachEvent("on"+a,b)},this.unbind=function(a,b){f.el.removeEventListener?f.el.removeEventListener(a,b,!1):f.el.detachEvent&&f.el.detachEvent("on"+a,b)};var l=function(a){f.unbind("canplay",l);var b=TGE.Game.GetInstance();this.muted=TGE.AudioManager._sMuted||TGE.InCreativeBuilder()&&b&&!b.timeSinceLastInteraction()};if("video"==b){if(e="none"===h||"metadata"===h?"loadstart":"auto"===h?"canplaythrough":h,c&&"false"===c.playsinline||(this.el.setAttribute("webkit-playsinline",""),this.el.setAttribute("playsinline","")),this.bind("canplay",l),c)for(var m in c){var n=c[m];"preload"===m&&"none"!==n&&"metadata"!==n&&(n="auto"),this.el.setAttribute(m,n)}if(d)for(var o in d)this.bind(o,d[o])}else this.img=this.el,e="load";var p=function(){"complete"==f.el.readyState&&(u(),g.onLoad(f))},q=function(){TGE.Game.GetInstance()._mFullStage.addEventListener("mouseup",r)},r=function(){TGE.Game.GetInstance()._mFullStage.removeEventListener("mouseup",r);var a=f.el;a.muted=!0;var b=a.play();b?b.then(function(){a.pause()}).catch(function(a){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"video preload failed: "+a),s()}):a.pause()},s=function(){u(),g.onLoad(f)},t=function(){u(),g.onError(f)},u=function(){f.unbind(e,s),f.unbind("error",t),"img"===b?f.unbind("readystatechange",p):TGE.BrowserDetect.isMobileDevice&&"auto"===h&&f.unbind("loadstart",q)},v=function(){return"video"===b?f.el.readyState>=1:f.el.complete};this.start=function(c){g=c,f.bind(e,s),f.bind("error",t),"img"===b?f.bind("readystatechange",p):TGE.BrowserDetect.isMobileDevice&&"auto"===h&&f.bind("loadstart",q),getQueryString().draft&&(f.el.crossOrigin="anonymous");var d=a.split("/"),i=d[d.length-1];if(f.el.width)s();else if(window._TREIMAGES&&_TREIMAGES[i])f.el.src=_TREIMAGES[i];else{if(window.TreSensa&&window.TreSensa.Playable.inlinedAssets&&"false"!==getQueryString().inlinedAssets)return void t();f.el.src=TGE.AssetManager._sFullPathTransformation(a)}},this.checkStatus=function(){v()&&(u(),g.onLoad(f))},this.log=function(){return"readyState: "+this.el.readyState},this.onTimeout=function(){u(),v()?g.onLoad(f):g.onTimeout(f)},this.getName=function(){return a}},TGE.Loader.prototype.addImage=function(a){var b=new TGE.ElementLoader(a,"img");return this.add(b),b.el},TGE.Loader.prototype.addVideo=function(a,b){var c=new TGE.ElementLoader(a,"video",b.attributes,b.listeners);return this.add(c),c.el},TGE.MapValue=function(a,b,c,d,e,f){var g=(a-b)/(c-b)*(e-d)+d;return f&&(g=e>d?Math.min(Math.max(g,d),e):Math.min(Math.max(g,e),d)),g},TGE.GetClass=function(a){if("string"==typeof a){for(var b=window,c=a.split("."),d=0,e=c.length;d<e;d++)if(!(b=b[c[d]]))return null;return b}return null},TGE.DeepClone=function(a,b){if(b||(b=a),a&&"object"==typeof a){if(Array.isArray(a)){for(var c=[],d=0;d<a.length;++d)c.push(TGE.DeepClone(a[d],b[d]));return c}var e={};for(var f in b)b.hasOwnProperty(f)&&(e[f]=TGE.DeepClone(a[f],b[f]));return e}return a},TGE.DeepCopy=function(a,b,c){c||(c=a);for(var d in c)c.hasOwnProperty(d)&&(b[d]=TGE.DeepClone(a[d]))},TGE.getClass=function(a){return TGE.GetClass(a)},TGE.mapValue=function(a,b,c,d,e,f){return TGE.MapValue(a,b,c,d,e,f)},TGE.clamp=function(a,b,c){return TGE.Math.Clamp(a,b,c)},TGE.Vector2=function(a,b){return this.x=a||0,this.y=b||0,this},TGE.Vector2.Lerp=function(a,b,c){return c<=0?new TGE.Vector2(a.x,a.y):c>=1?new TGE.Vector2(b.x,b.y):new TGE.Vector2(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y))},TGE.Vector2.Distance=function(a,b){return Math.abs(a.subtract(b).magnitude())},TGE.Vector2.SqrDistance=function(a,b){return Math.abs(a.subtract(b).sqrMagnitude())},TGE.Vector2.Dot=function(a,b){return a.dotProduct(b)},TGE.Vector2.Cross=function(a,b){return a.crossProduct(b)},TGE.Vector2.prototype={toString:function(){return"("+this.x+","+this.y+")"},setTo:function(a,b){this.x=a,this.y=b},copyFrom:function(a){return this.x=a.x,this.y=a.y,this},add:function(a){return new this.constructor(this.x+a.x,this.y+a.y)},subtract:function(a){return new this.constructor(this.x-a.x,this.y-a.y)},multiplyNumber:function(a){return"number"!=typeof a&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Only a number type is accepted as a scalar when multiplying a vector."),new this.constructor(this.x*a,this.y*a)},divideNumber:function(a){return"number"!=typeof a&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Only a number type is accepted as a scalar when dividing a vector."),new this.constructor(this.x/a,this.y/a)},offset:function(a,b){return this.x+=a,this.y+=b,this},rotate:function(a){var b=a*TGE.DEG2RAD;return new this.constructor(this.x*Math.cos(b)-this.y*Math.sin(b),this.y*Math.cos(b)+this.x*Math.sin(b))},rotateThis:function(a){var b=a*TGE.DEG2RAD,c=this.x*Math.cos(b)-this.y*Math.sin(b),d=this.y*Math.cos(b)+this.x*Math.sin(b);return this.setTo(c,d),this},magnitude:function(){return Math.sqrt(this.sqrMagnitude())},sqrMagnitude:function(){return this.x*this.x+this.y*this.y},dotProduct:function(a){return this.x*a.x+this.y*a.y},crossProduct:function(a){return this.x*a.y-this.y*a.x},angleBetween:function(a){var b=this.magnitude()*a.magnitude();return 0===b?0:Math.acos(this.dotProduct(a)/b)*TGE.RAD2DEG},normalized:function(){var a=this.magnitude();return 0!==a?this.divideNumber(a):new this.constructor(0,0)}},TGE.Point=function(a,b){TGE.Point.superclass.constructor.call(this,a,b)},extend(TGE.Point,TGE.Vector2),TGE.Vector2D=function(a,b){TGE.Vector2D.superclass.constructor.call(this,a,b)},extend(TGE.Vector2D,TGE.Vector2),TGE.Matrix=function(a,b,c,d,e,f){a=void 0!==a?a:1,d=void 0!==d?d:1,this._internal=[a,c||0,e||0,b||0,d,f||0]},TGE.Matrix.RotationMatrix=function(a){var b=new TGE.Matrix;return b._internal[0]=Math.cos(a),b._internal[1]=-Math.sin(a),b._internal[3]=Math.sin(a),b._internal[4]=Math.cos(a),b},TGE.Matrix.ScaleMatrix=function(a,b){return(new TGE.Matrix).scale(a,b)},TGE.Matrix.TranslationMatrix=function(a,b){return(new TGE.Matrix).translate(a,b)},TGE.Matrix.prototype={_internal:null,toString:function(){var a=this._internal;return"TGE.Matrix["+a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+"]"},identity:function(){var a=this._internal;return a[1]=a[2]=a[3]=a[5]=0,a[0]=a[4]=1,this},copyFrom:function(a){var b=this._internal,c=a._internal;return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],this},concat:function(a){var b=this._internal,c=a._internal,d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return b[0]=d*j+e*m,b[1]=d*k+e*n,b[2]=d*l+e*o+f,b[3]=g*j+h*m,b[4]=g*k+h*n,b[5]=g*l+h*o+i,this},rotate:function(a){return this.concat(TGE.Matrix.RotationMatrix(a*TGE.DEG2RAD))},scale:function(a,b){var c=this._internal;return c[0]*=a,c[1]*=b,c[3]*=a,c[4]*=b,this},translate:function(a,b){return this._internal[2]+=a,this._internal[5]+=b,this},transformPoint:function(a){var b=this._internal,c=a.x,d=a.y;return a.x=c*b[0]+d*b[1]+b[2],a.y=c*b[3]+d*b[4]+b[5],a},inverseTransformPoint:function(a){var b=this._internal,c=1/(b[0]*b[4]-b[3]*b[1]),d=a.x,e=a.y;return a.x=b[4]*c*d+-b[1]*c*e+(b[5]*b[1]-b[2]*b[4])*c,a.y=b[0]*c*e+-b[3]*c*d+(-b[5]*b[0]+b[2]*b[3])*c,a}},TGE.Rectangle=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},TGE.Rectangle.prototype={toString:function(){return"TGE.Rectangle["+this.x+","+this.y+","+this.width+","+this.height+"]"},intersects:function(a,b,c){b=void 0===b?1:b,c=void 0===c?1:c;var d=this.width*(1-b)/2,e=this.height*(1-b)/2,f=this.x+d,g=this.y+e,h=this.x+this.width-d,i=this.y+this.height-e;d=a.width*(1-c)/2,e=a.height*(1-c)/2;var j=a.x+d,k=a.y+e,l=a.x+a.width-d,m=a.y+a.height-e;return j>=f&&l<=h&&k>=g&&m<=i||!(h<j||f>l||i<k||g>m)},union:function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y);var f=Math.max(b,d),g=Math.max(c,e);this.width=f-this.x,this.height=g-this.y},contains:function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},lineIntersects:function(a,b,c,d,e){if(this.contains(a,b))return e&&(e.x=a,e.y=b),!0;var f,g,h,i=this.x+this.width,j=this.y+this.height;return c>=this.x&&a<this.x&&(f=(this.x-a)/(c-a),g=this.x,(h=b+(d-b)*f)>=this.y&&h<=j)?(e&&(e.x=g,e.y=h),!0):c<=i&&a>i&&(f=(i-a)/(c-a),g=i,(h=b+(d-b)*f)>=this.y&&h<=j)?(e&&(e.x=g,e.y=h),!0):d<=j&&b>j&&(f=(j-b)/(d-b),g=a+(c-a)*f,h=j,g>=this.x&&g<=i)?(e&&(e.x=g,e.y=h),!0):d>=this.y&&b<this.y&&(f=(this.y-b)/(d-b),g=a+(c-a)*f,h=this.y,g>=this.x&&g<=i)&&(e&&(e.x=g,e.y=h),!0)}},Math.trunc=Math.trunc||function(a){return a<0?Math.ceil(a):Math.floor(a)},Math.sign=Math.sign||function(a){return a=+a,0===a||isNaN(a)?Number(a):a>0?1:-1},Math.cbrt=Math.cbrt||function(a){var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b},Number.isNaN=Number.isNaN||function(a){return"number"==typeof a&&a!==a},Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},Number.isSafeInteger=Number.isSafeInteger||function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER},Number.MAX_SAFE_INTEGER=9007199254740991,Number.MIN_SAFE_INTEGER=-9007199254740991,Number.EPSILON=2.220446049250313e-16,TGE.Math={},TGE.Math.Clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},TGE.Math.Clamp01=function(a){return TGE.Math.Clamp(a,0,1)},TGE.Math.Lerp=function(a,b,c){return a+TGE.Math.Clamp01(c)*(b-a)},TGE.Math.InverseLerp=function(a,b,c){return TGE.Math.Clamp01((c-a)/(b-a))},TGE.Math.IsSameSign=function(a,b){return Math.sign(a)===Math.sign(b)},TGE.Math.Root=function(a,b){var c=Math.pow(Math.abs(a),1/(b||2));return a<0?-c:c},TGE.Math.Mod=function(a,b){return(a%b+b)%b},TGE.Math.ModRange=function(a,b,c){var d=c-b,e=(a-b)%d;return e<0&&(e+=d),b+e},TGE.Math.GetAngleDifference=function(a,b){return Math.atan2(Math.sin(b-a),Math.cos(b-a))},TGE.Math.Sort=function(a,b,c,d){c="number"==typeof c?c:0,d="number"==typeof d?d:a.length-1,b||(b="number"==typeof a[0]?function(a,b){return a-b}:function(a,b){return(""+a).localeCompare(b)});var e=null;if(c<d){e=a[d];for(var f=c-1,g=c;g<=d-1;g++)if(b(a[g],e)<=0){f+=1;var h=a[f];a[f]=a[g],a[g]=h}var h=a[f+1];a[f+1]=a[d],a[d]=h,e=f+1,TGE.Math.Sort(a,b,c,e-1),TGE.Math.Sort(a,b,e+1,d)}},TGE.PI=Math.PI,TGE.TWO_PI=TGE.TAU=6.2831853072,TGE.RAD2DEG=57.2957795,TGE.DEG2RAD=.0174532925,TGE.IDENTITY=new TGE.Matrix,TGE.POSITIVE_X_VECTOR=new TGE.Vector2(1,0),TGE.NEGATIVE_X_VECTOR=new TGE.Vector2(-1,0),TGE.POSITIVE_Y_VECTOR=new TGE.Vector2(0,1),TGE.NEGATIVE_Y_VECTOR=new TGE.Vector2(0,-1),TGE.Random=function(a){this.setSeed(a)},TGE.Random.prototype={setSeed:function(a){this._boolMask=null,this._s0=0,this._s1=0,this._s2=0,this._c=1,"number"==typeof a?a=[a]:a||(a=[+new Date]),this._seed=a;var b=this._mash();this._s0=b(" "),this._s1=b(" "),this._s2=b(" ");for(var c=0;c<a.length;c++)this._s0-=b(a[c]),this._s0<0&&(this._s0+=1),this._s1-=b(a[c]),this._s1<0&&(this._s1+=1),this._s2-=b(a[c]),this._s2<0&&(this._s2+=1);return this},getSeed:function(){return this._seed},next:function(){var a=2091639*this._s0+2.3283064365386963e-10*this._c;return this._s0=this._s1,this._s1=this._s2,this._s2=a-(this._c=0|a)},nextFloat:function(a){return a&&"number"==typeof a?this.next()*a:this.next()*Math.MAX_VALUE},nextInt:function(a){return a&&"number"==typeof a?Math.floor(this.next()*a):4294967296*this.next()},range:function(a,b){return"object"==typeof a&&(a=a.min,b=a.max),a=a||0,b=b||0,a+(b-a)*this.next()},rangeInt:function(a,b){return Math.floor(this.range(a,b))},nextBoolean:function(){return this._boolMask&&1!==this._boolMask||(this._boolBuffer=this.nextInt(),this._boolMask=268435456),this._boolMask>>=1,0!=(this._boolBuffer&this._boolMask)},nextChance:function(a){return this.next()<a},getWeightedElement:function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].weight;var d=this.nextFloat(c);for(b=0;b<a.length;b++){if(d<a[b].weight)return a[b].value;d-=a[b].weight}return null},getElementInArray:function(a){if(Array.isArray(a))return a[this.nextInt(a.length)];TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Cannot get random element from an object that is not an array.")},getColor:function(a){if(a){var b=360*TGE.Math.Clamp01(this.range(a.minH||0,a.maxH||1)),c=100*TGE.Math.Clamp01(this.range(a.minS||0,a.maxS||1)),d=100*TGE.Math.Clamp01(this.range(a.minL||0,a.maxL||1));if(void 0!==a.minA||void 0!==a.maxA){return"hsla("+b+","+c+"%,"+d+"%,"+TGE.Math.Clamp01(this.range(a.minA||0,a.maxA||1))+")"}return"hsl("+b+","+c+"%,"+d+"%)"}return"#"+Math.floor(16777216*this.next()).toString(16)},getPointInCircle:function(a,b,c){a=a||0,b=b||0,c=c||1,c*=Math.sqrt(this.next());var d=2*Math.PI*this.next();return new TGE.Vector2(a+Math.cos(d)*c,b+Math.sin(d)*c)},getPointInRectangle:function(a,b,c,d){return a=a||0,b=b||0,c=c||1,d=d||1,new TGE.Vector2(this.range(a,a+c),this.range(b,b+d))},_mash:function(){var a=4022871197;return function(b){b=b.toString();for(var c=0;c<b.length;c++){a+=b.charCodeAt(c);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=4294967296*d}return 2.3283064365386963e-10*(a>>>0)}}},TGE.Random._sInstance=null,TGE.Random.GetInstance=function(){return TGE.Random._sInstance||(TGE.Random._sInstance=new TGE.Random),TGE.Random._sInstance},TGE.Random.SetSeed=function(a){TGE.Random.GetInstance().setSeed(a)},TGE.Random.GetSeed=function(){return TGE.Random.GetInstance().getSeed()},TGE.Random.Next=function(){return TGE.Random.GetInstance().next()},TGE.Random.NextFloat=function(a){return TGE.Random.GetInstance().nextFloat(a)},TGE.Random.NextInt=function(a){return TGE.Random.GetInstance().nextInt(a)},TGE.Random.NextBoolean=function(){return TGE.Random.GetInstance().nextBoolean()},TGE.Random.NextChance=function(a){return TGE.Random.GetInstance().nextChance(a)},TGE.Random.GetWeightedElement=function(a){return TGE.Random.GetInstance().getWeightedElement(a)},TGE.Random.Range=function(a,b){return TGE.Random.GetInstance().range(a,b)},TGE.Random.RangeInt=function(a,b){return TGE.Random.GetInstance().rangeInt(a,b)},TGE.Random.GetElementInArray=function(a){return TGE.Random.GetInstance().getElementInArray(a)},TGE.Random.Color=function(a){return TGE.Random.GetInstance().getColor(a)},TGE.Random.GetPointInCircle=function(a,b,c){return TGE.Random.GetInstance().getPointInCircle(a,b,c)},TGE.Random.GetPointInRectangle=function(a,b,c,d){return TGE.Random.GetInstance().getPointInRectangle(a,b,c,d)},TGE.Renderer=function(a){return this.isTGERenderer=!0,this.deprecatedDrawCycle=!1,this.textures=[],this.imageToTextureMap={},this},TGE.Renderer._sIgnoreOrientationLock=!1,TGE.Renderer.prototype={type:function(){return"Abstract"},functional:function(){return!1},getCanvasContext:function(){return null},resizedGameDiv:function(){},processImage:function(a,b){var c=this.imageToTextureMap[a.src];if("number"==typeof c)return this.textures[c];var d=this.createTexture();return d.htmlImageElement=a,d.htmlImageWidth=a.width,d.htmlImageHeight=a.height,d.spriteSheet=b,this.rendererProcessImage(d,a,b),this.imageToTextureMap[a.src]=d.id,d},rendererProcessImage:function(a,b,c){},getImageSize:function(a){return a},beginScene:function(a){},endScene:function(){},resetTransform:function(){this.setWorldTransform(TGE.IDENTITY,1)},setWorldTransform:function(a,b){},setAlpha:function(a){},fillRectangle:function(a,b,c,d,e){},gradientFill:function(a,b,c,d,e,f){},drawImage:function(a,b,c,d,e,f,g,h,i){},alphamapOffscreenText:function(){return!1},updateTextImage:function(a,b){return null},drawTextImage:function(a,b,c,d,e,f,g){},createTexture:function(){var a=new TGE.Renderer.Texture;return this.textures[a.id]=a,a},getTextureByID:function(a){return this.textures[a]}},TGE.Renderer.Texture=function(){return this.id=TGE.Renderer.Texture._sNextID++,this.htmlImageElement=null,this.htmlImageWidth=0,this.htmlImageHeight=0,this.glTexture=null,this.spriteSheet=!1,this},TGE.Renderer.Texture._sNextID=0,TGE.CanvasRenderer=function(a,b){return b=!1!==b,TGE.CanvasRenderer.superclass.constructor.call(this),TGE.CanvasRenderer._sNumInstances++,this._mFunctional=!1,a&&(this._mCanvasContext=a.getContext("2d",{alpha:b}),this._mFunctional=!0),this},TGE.CanvasRenderer._sNumInstances=0,TGE.CanvasRenderer.prototype={type:function(){return"Canvas"},functional:function(){return this._mFunctional},swapContext:function(a){this._mCanvasContext=a,this._mFunctional=!0,this.deprecatedDrawCycle=!1},getCanvasContext:function(){return this._mCanvasContext},beginScene:function(a){this._mCanvasContext.globalAlpha=1,this._mCanvasContext.globalCompositeOperation="source-over"},setWorldTransform:function(a,b){var c=a._internal;if(TGE.GameStage._sOrientationLock.active&&!0!==TGE.Renderer._sIgnoreOrientationLock){var d=new TGE.Matrix,c=d._internal,e=TGE.GameStage._sOrientationLock;e.gameHeight<e.gameWidth?(c[2]=e.gameHeight,d.rotate(90)):(c[5]=e.gameWidth,d.rotate(-90)),d.concat(a)}1!==b?this._mCanvasContext.setTransform(c[0]*b,c[3]*b,c[1]*b,c[4]*b,c[2]*b,c[5]*b):this._mCanvasContext.setTransform(c[0],c[3],c[1],c[4],c[2],c[5])},setAlpha:function(a){this._mCanvasContext.globalAlpha=a},fillRectangle:function(a,b,c,d,e){this._mCanvasContext.fillStyle=e,this._mCanvasContext.fillRect(a,b,c,d)},gradientFill:function(a,b,c,d,e,f){if("circular"===a)var g=Math.max(e,f),h=this._mCanvasContext.createRadialGradient(e/2,f/2,0,e/2,f/2,g*(.5*d+.5));else if("vertical"===a)var h=this._mCanvasContext.createLinearGradient(0,2*f*d,0,0);else if("horizontal"===a)var h=this._mCanvasContext.createLinearGradient(0,0,2*e*d,0);else if("leftDiagonal"===a)var h=this._mCanvasContext.createLinearGradient(0,2*f*d,2*e*d,0);else var h=this._mCanvasContext.createLinearGradient(0,0,2*e*d,2*f*d);h.addColorStop(0,b),h.addColorStop(1,c),this._mCanvasContext.fillStyle=h,this._mCanvasContext.fillRect(0,0,e,f)},drawImage:function(a,b,c,d,e,f,g,h,i){this._mCanvasContext.drawImage(a.htmlImageElement,b,c,d,e,f,g,h,i)},updateTextImage:function(a,b){return b},drawTextImage:function(a,b,c,d,e,f,g){this._mCanvasContext.drawImage(a,-e,-e,c+2*e,d+2*e)}},extend(TGE.CanvasRenderer,TGE.Renderer),TGE.DisplayObject=function(){return this.x=0,this.y=0,this.worldX=0,this.worldY=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this.colorDef=null,this.backgroundColor=null,this.visible=!0,this.width=0,this.height=0,this.registrationX=TGE.DisplayObject.DefaultRegistrationX,this.registrationY=TGE.DisplayObject.DefaultRegistrationY,this.parent=null,this.stage=TGE.Game.GetInstance().stage,this.mouseEnabled=!1,this.cameraShakeTag="DEFAULT",this.instanceName="",this.pointerLocal=new TGE.Vector2(0,0),this.pointerStage=new TGE.Vector2(0,0),this.mouseX=0,this.mouseY=0,this._mPreviousX=0,this._mPreviousY=0,this._mPreviousScaleX=1,this._mPreviousScaleY=1,this._mPreviousRotation=0,this._mPreviousRegistrationX=0,this._mPreviousRegistrationY=0,this._mPreviousWidth=0,this._mPreviousHeight=0,this._mPreviousVisibility=!1,this._mPreviousAlpha=1,this._mRegistrationOffset=new TGE.Vector2(0,0),this._mLocalTransformNoReg=new TGE.Matrix,this._mLocalTransformDirty=!0,this._mWorldTransform=new TGE.Matrix,this._mWorldTransformNoReg=new TGE.Matrix,this._mWorldTransformUpdated=!0,this._mTopLeft=new TGE.Vector2,this._mTopRight=new TGE.Vector2,this._mBottomLeft=new TGE.Vector2,this._mBottomRight=new TGE.Vector2,this._mAABB=new TGE.Rectangle,this._mBoundingInfoDirty=!0,this._mWorldAlpha=1,this._mIgnoreProperties=!1,this._mMouseDown=!1,this._mMouseDownX=0,this._mMouseDownY=0,this._mMouseDownTime=0,this._mMouseOver=null,this._mVisibilityChanged=!1,this._mMarkedForRemoval=!1,this._mEventListeners={},this._mUseDrawEvents=!1,this._mLastUpdate=-1,this._mViewportCulling=null,this._mWorldPositionListener=-1,this._mTweens=[],this._mTweenListener=null,this._mShakes=[],this._mShakeListener=null,this._mActions=[],this._mActionsListener=null,this._mBackgroundGradient=null,this._mAddedToStage=!1,this._mPreviousParent=null,this._mLayoutResizeListener=null,this._mLayout=null,this._mFullStage=TGE.Game.GetInstance()._mFullStage,this},TGE.DisplayObject.DefaultRegistrationX=.5,TGE.DisplayObject.DefaultRegistrationY=.5,TGE.DisplayObject._sNextEventListenerID=0,TGE.DisplayObject.prototype={setup:function(a){return"string"==typeof a.instanceName&&(this.instanceName=a.instanceName),"boolean"==typeof a.visible&&(this.visible=a.visible),"boolean"==typeof a.mouseEnabled&&(this.mouseEnabled=a.mouseEnabled),"number"==typeof a.x&&(this.x=a.x),"number"==typeof a.y&&(this.y=a.y),"number"==typeof a.worldX&&(this.worldX=a.worldX),"number"==typeof a.worldY&&(this.worldY=a.worldY),"number"==typeof a.width&&(this.width=a.width),"number"==typeof a.height&&(this.height=a.height),"number"==typeof a.scaleX&&(this.scaleX=a.scaleX),"number"==typeof a.scaleY&&(this.scaleY=a.scaleY),"number"==typeof a.scale&&(this.scaleX=this.scaleY=a.scale),"number"==typeof a.rotation&&(this.rotation=a.rotation),"string"==typeof a.colorDef&&(this.colorDef=a.colorDef),"string"==typeof a.backgroundColor&&(this.backgroundColor=a.backgroundColor),"object"==typeof a.backgroundGradient&&(this._mBackgroundGradient=this._makeGradient(a.backgroundGradient)),"number"==typeof a.alpha&&(this.alpha=a.alpha),"number"==typeof a.registrationX&&(this.registrationX=a.registrationX),"number"==typeof a.registrationY&&(this.registrationY=a.registrationY),"string"==typeof a.cameraShakeTag&&(this.cameraShakeTag=a.cameraShakeTag),void 0!==a.parent&&a.parent.addChild(this),a.layout&&this._setLayout(a.layout),a.onResize&&this._setLayout(a.onResize),this},_setLayout:function(a){if(this._mLayoutResizeListener&&(this.removeEventListener("resize",this._mLayoutResizeListener),this._mLayoutResizeListener=null,this._mLayout=null),a){if("object"==typeof a){var b=0;for(var c in a)a[c]&&("object"==typeof a[c]&&this._checkLayout(a[c],c.toString()),"object"!=typeof a[c]&&"string"!=typeof a[c]&&"function"!=typeof a[c]||b++);b<2&&this._checkLayout(a,"default")}this._mLayout=TGE.DeepClone(a),this._mLayoutResizeListener=this.addEventListener("resize",this._resize.bind(this,null)),this.parent&&(this._resize(null,TGE._ResizeEvent),this._dispatchToChildren(TGE._ResizeEvent))}},_checkLayout:function(a,b){var c=!0===a.useCustomPosition,d=!0===a.useCustomScale,e="number"==typeof a.xPercentage,f="number"==typeof a.yPercentage,g="number"==typeof a.scaleToWidth,h="number"==typeof a.scaleToHeight,i="number"==typeof a.matchWidth,j="number"==typeof a.matchHeight,k="number"==typeof a.topAnchor||"number"==typeof a.anchorTop,l="number"==typeof a.bottomAnchor||"number"==typeof a.anchorBottom,m="number"==typeof a.leftAnchor||"number"==typeof a.anchorLeft,n="number"==typeof a.rightAnchor||"number"==typeof a.anchorRight;m||n||e||c||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's horizontal position in "+b+" responsive layout strategy"),a.xPercentage=0),k||l||f||c||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's vertical position in "+b+" responsive layout strategy"),a.yPercentage=0),g||h||i||j||d||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's scale in "+b+" responsive layout strategy"),a.scaleToWidth=a.scaleToHeight=1),"number"!=typeof a.anchorLeft&&"number"!=typeof a.anchorRight&&"number"!=typeof a.anchorTop&&"number"!=typeof a.anchorBottom||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using deprecated layout code! Use topAnchor, bottomAnchor, leftAnchor, and rightAnchor instead of anchorTop, anchorBottom, anchorLeft, and anchorRight."),i&&h&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchWidth with scaleToHeight. Use matchHeight with matchWidth"),j&&g&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchHeight with scaleToWidth. Use matchHeight with matchWidth"),0==this.width&&j&&!i&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchHeight without matchWidth or defining object’s width"),0==this.height&&i&&!j&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchWidth without matchHeight or defining object’s height")},_resize:function(a,b){if(this.parent)if(a||(a=this._mLayout),"string"==typeof a){var c=this.parent.width/this.width,d=this.parent.height/this.height;"match"===a?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.width=this.parent.width,this.height=this.parent.height,this.scale=1):"fill"===a?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.scaleX=c,this.scaleY=d):"aspect-fill"===a?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.scale=Math.max(c,d)):"fit-width"===a||"best-fit"===a&&c<=d?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=(this.parent.height-this.height*c)/2+this.registrationY*this.height*c,this.scale=c):("fit-height"===a||"best-fit"===a&&d<c)&&(this.x=(this.parent.width-this.width*d)/2+this.registrationX*this.width*d,this.y=this.parent.percentageOfHeight(this.registrationY),this.scale=d)}else if("function"==typeof a)this._executeLayoutFunction(a,b);else if("object"==typeof a){if(a.pickLayout){var e=a.pickLayout.call(this,b.height/b.width);if(a[e])return void this._resize(a[e],b);TGE.Debug.Log(TGE.Debug.LOG_ERROR,e+" layout substrategy is not defined")}else{if(a.portrait&&b.height>=b.width)return void this._resize(a.portrait,b);if(a.landscape&&b.height<b.width)return void this._resize(a.landscape,b)}"number"==typeof a.percentageX&&(a.xPercentage=a.percentageX,a.percentageX=void 0),"number"==typeof a.percentageY&&(a.yPercentage=a.percentageY,a.percentageY=void 0),"number"==typeof a.scaleWidthToFit&&(a.scaleToWidth=a.scaleWidthToFit,a.scaleWidthToFit=void 0),"number"==typeof a.scaleHeightToFit&&(a.scaleToHeight=a.scaleHeightToFit,a.scaleHeightToFit=void 0),"number"==typeof a.xPercentage&&(this.x=this.parent.percentageOfWidth(a.xPercentage)),"number"==typeof a.yPercentage&&(this.y=this.parent.percentageOfHeight(a.yPercentage));var f=this.parent.height>this.parent.width?this.parent.height:this.parent.width;if("number"==typeof a.anchorTop&&(this.registrationY=0,this.y=a.anchorTop*f),"number"==typeof a.anchorBottom&&(this.registrationY=1,this.y=this.parent.height-a.anchorBottom*f),"number"==typeof a.anchorLeft&&(this.registrationX=0,this.x=a.anchorLeft*f),"number"==typeof a.anchorRight&&(this.registrationX=1,this.x=this.parent.width-a.anchorRight*f),!0!==a.allowSubPixel&&(this.x=Math.round(this.x),this.y=Math.round(this.y)),!a.useCustomScale){var c,d;c=d=!1===a.useMinScale?-Number.MAX_VALUE:Number.MAX_VALUE,"number"==typeof a.scaleToWidth&&(c=this.parent.width/this.width*a.scaleToWidth),"number"==typeof a.scaleToHeight&&(d=this.parent.height/this.height*a.scaleToHeight),this.scale=!1===a.useMinScale?Math.max(Math.abs(c),Math.abs(d)):Math.min(Math.abs(c),Math.abs(d)),this.scaleX*=c<0?-1:1,this.scaleY*=d<0?-1:1}"number"==typeof a.matchWidth&&(this.scale=1,this.width=this.parent.width*a.matchWidth),"number"==typeof a.matchHeight&&(this.scale=1,this.height=this.parent.height*a.matchHeight),"number"==typeof a.topAnchor&&(this.y=a.topAnchor*this.parent.height+this.height*this.scaleY*this.registrationY),"number"==typeof a.bottomAnchor&&(this.y=this.parent.height*(1-a.bottomAnchor)-this.height*this.scaleY*(1-this.registrationY)),"number"==typeof a.leftAnchor&&(this.x=a.leftAnchor*this.parent.width+this.width*this.scaleX*this.registrationX),"number"==typeof a.rightAnchor&&(this.x=this.parent.width*(1-a.rightAnchor)-this.width*this.scaleX*(1-this.registrationX)),"function"==typeof a.custom&&this._executeLayoutFunction(a.custom,b)}},_executeLayoutFunction:function(a,b){var c=a.call(this,b);c&&(this._checkLayout(c,"custom function"),this._resize(c,b))},_layoutHasDynamicDimensions:function(a){return!!a&&("match"===a||(!(!a.matchWidth&&!a.matchHeight)||(this._layoutHasDynamicDimensions(a.portrait)||this._layoutHasDynamicDimensions(a.landscape))))},isResponsive:function(){return null!==this._mLayout||this._mEventListeners.resize&&this._mEventListeners.resize.length>0},reapplyLayout:function(){this.dispatchEvent(TGE._ResizeEvent)},setLocalTransform:function(a,b,c,d,e,f){var g=this._mLocalTransformNoReg._internal;g[0]=a,g[1]=c,g[2]=e,g[3]=b,g[4]=d,g[5]=f,this._mIgnoreProperties=!0,this._mLocalTransformDirty=!0},useDisplayProperties:function(){this._mIgnoreProperties=!1,this._mLocalTransformDirty=!0},getBounds:function(a){return a=!0===a,this._checkVisibilityChange(),(this._mBoundingInfoDirty||a)&&(this._updateAABB(a),a&&(this._mBoundingInfoDirty=!0)),this._mAABB},hitTestPoint:function(a,b){var c=this.getBounds();return a>c.x&&a<c.x+c.width&&b>c.y&&b<c.y+c.height},markForRemoval:function(){this._mMarkedForRemoval||(this._mMarkedForRemoval=!0,this._mFullStage._trashObject(this))},markedForRemoval:function(){return this._mMarkedForRemoval},removeChildByName:function(a){var b;if("string"==typeof a)for(b=this._mChildren.length;--b>=0;){var c=this._mChildren[b];c.instanceName===a&&this.removeChild(c)}else for(b=a.length;--b>=0;)this.removeChildByName(a[b])},removeFromScene:function(){this.handleEvent({type:"remove"}),this.clearEventListeners(),null!==this.parent&&(this.parent._setBoundingInfoDirty(),this.parent.removeChild(this),this.parent=null),this._mMarkedForRemoval=!0},numChildren:function(a){return 0},isDescendantOf:function(a,b){return this===a||!(!1===b||!this.parent)&&this.parent.isDescendantOf(a,b)},isCached:function(){return!1},getIndex:function(){return null!==this.parent?this.parent.getChildIndex(this):-1},bringForward:function(){if(null!==this.parent){var a=this.parent.getChildIndex(this);if(a<this.parent._mChildren.length-1){var b=this.parent._mChildren[a+1];this.parent._mChildren[a+1]=this,this.parent._mChildren[a]=b}}},bringToFront:function(){if(null!==this.parent){var a=this.parent.getChildIndex(this);this.parent._mChildren.splice(a,1),this.parent._mChildren.push(this)}},sendBackward:function(){if(null!==this.parent){var a=this.parent.getChildIndex(this);if(a>0){var b=this.parent._mChildren[a-1];this.parent._mChildren[a-1]=this,this.parent._mChildren[a]=b}}},sendToBack:function(){if(null!==this.parent){var a=this.parent.getChildIndex(this);this.parent._mChildren.splice(a,1),this.parent._mChildren.unshift(this)}},isPointerDown:function(){return this._mMouseDown},isPointerOver:function(){return!0===this._mMouseOver},isMouseOver:function(){return!0===this._mMouseOver},addEventListener:function(a,b){this._mEventListeners[a]||(this._mEventListeners[a]=[]);var c={id:++TGE.DisplayObject._sNextEventListenerID,listener:b};return this._mEventListeners[a].push(c),"mouse"===a.substring(0,5)||"click"===a?(this.mouseEnabled=!0,this instanceof TGE.GameStage&&TGE.Game.GetUpdateRoot()&&TGE.Game.GetUpdateRoot()!==this&&!TGE.Game.GetInstance()._mBufferingScreen&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Adding mouse event listener to stage when SetUpdateRoot is pointing elsewhere. See PAN-1239.")):"drawbegin"===a||"drawend"===a?this._mUseDrawEvents=!0:"update"===a&&this.stage&&this._mFullStage._addUpdateObj(this),c.id},removeEventListener:function(a,b){if(this._mEventListeners[a])for(var c=this._mEventListeners[a].length;--c>=0;){var d=this._mEventListeners[a][c];if(d.id===b||d.listener===b)return d.id=0,void(this._mFullStage._mListenerRemovals.indexOf(this)<0&&this._mFullStage._mListenerRemovals.push(this))}this._mMarkedForRemoval||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeEventListener could not find listener specified for "+a+" event")},removeEventListenersFor:function(a){this._mEventListeners[a]&&(this._mEventListeners[a]=[])},clearEventListeners:function(){this._mEventListeners={}},dispatchEvent:function(a){void 0===a.target&&(a.target=this),a.currentTarget=this,this.handleEvent(a)},handleEvent:function(a){var b=this._mEventListeners[a.type];if(b&&b.length){a.currentTarget=this;for(var c=b.length,d=0;d<c&&(b[d].id&&b[d].listener.call(this,a),this._mEventListeners[a.type]&&!this._mMarkedForRemoval);++d);}},_handleMouseEvent:function(a){var b=this._mMouseDown;switch(a.type){case"mousedown":this._mMouseDown=!0,this._mMouseDownX=a.x,this._mMouseDownY=a.y,this._mMouseDownTime=+new Date;break;case"mouseup":case"mouseupoutside":this._mMouseDown=!1}if(this.handleEvent(a),"mouseup"===a.type){var c=Math.max(this.stage.width,this.stage.height);if(c){var d=Math.abs(a.x-this._mMouseDownX)/c,e=Math.abs(a.y-this._mMouseDownY)/c;b&&+new Date-this._mMouseDownTime<1e3*TGE.CLICK_TIME&&d<TGE.CLICK_DISTANCE_FRACTION&&e<TGE.CLICK_DISTANCE_FRACTION&&(a.type="click",this.handleEvent(a),a.type="mouseup")}}},percentageOfWidth:function(a){return this.width*a},percentageOfHeight:function(a){return this.height*a},pixelsFromLeft:function(a){return a},pixelsFromRight:function(a){return this.width-a},pixelsFromTop:function(a){return a},pixelsFromBottom:function(a){return this.height-a},cullToViewport:function(a,b,c,d){null===this._mViewportCulling&&this.addEventListener("camerachange",this._checkViewportCulling.bind(this)),this._mViewportCulling=[a,b,c,d]},useWorldPosition:function(a){a&&-1===this._mWorldPositionListener?this._mWorldPositionListener=this.addEventListener("camerachange",this._updateScreenPosition.bind(this)):a||-1===this._mWorldPositionListener||(this.removeEventListener("camerachange",this._mWorldPositionListener),this._mWorldPositionListener=-1)},tweenTo:function(a){a.target=a.target||this;var b=(new TGE.Tween).setup(a);return this._mTweens.push(b),"number"!=typeof this._mTweenListener&&(this._mTweenListener=this.addEventListener("update",this._updateTweens.bind(this))),b},tweenFrom:function(a){return a.startFromEnd=!0,this.tweenTo(a)},removeTween:function(a,b,c){b=void 0===b||b,c=void 0===c||c;for(var d=0;d<this._mTweens.length;d++)if(this._mTweens[d].id===a)return void this._mTweens[d].endTween(b,c);TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeTween could not find tween with id: "+a)},clearTweens:function(){this._mTweens.length>0&&(this._mTweens=[],this.removeEventListener("update",this._mTweenListener),this._mTweenListener=null)},addCameraShake:function(a,b){if("function"==typeof a){b.target=this;var c=(new a).setup(b);return this._mShakes.push(c),"number"!=typeof this._mShakeListener&&(this._mShakeListener=this.addEventListener("update",this._updateShakes.bind(this))),c}},clearCameraShakes:function(){this._mShakes.length>0&&(this._mShakes=[],this.removeEventListener("update",this._mShakeListener),this._mShakeListener=null)},performAction:function(a){a._timer=0,a._prev=0,a.delay="number"==typeof a.delay?a.delay:0,a.interval="number"==typeof a.interval?a.interval:a.delay>0?a.delay:1,a.repeat="number"==typeof a.repeat?a.repeat:!0===a.repeat?Number.MAX_VALUE:1,this._mActions.push(a),"number"!=typeof this._mActionsListener&&(this._mActionsListener=this.addEventListener("update",this._updateActions.bind(this)))},removeAction:function(a,b){for(var c=0;c<this._mActions.length;c++)if(this._mActions[c].id===a)return this._mActions.splice(c,1),void this._removeActionsListener();b&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeAction could not find action with id: "+a)},clearAction:function(a){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"clearAction is deprecated, use removeAction instead!"),this.removeAction(a)},clearActions:function(){this._mActions.length>0&&(this._mActions=[],this._removeActionsListener())},_removeActionsListener:function(){0===this._mActions.length&&"number"==typeof this._mActionsListener&&(this.removeEventListener("update",this._mActionsListener),this._mActionsListener=null)},doesDrawing:function(){return!!(this._mUseDrawEvents||this.backgroundColor||this._mBackgroundGradient||this._mRendererTexture||this._mPreviousText)},localToStage:function(a,b){return a||(a=new TGE.Vector2),this._updateWorldTransform(),b?this._mWorldTransformNoReg.transformPoint(a):this._mWorldTransform.transformPoint(a),a},stageToLocal:function(a,b){return a||(a=new TGE.Vector2),this._updateWorldTransform(),b?this._mWorldTransformNoReg.inverseTransformPoint(a):this._mWorldTransform.inverseTransformPoint(a),a},localToObject:function(a,b,c){return b=this.localToStage(b,c),a.stageToLocal(b,c),b},stageTolocal:function(a){this.stageToLocal(a)},_injectTween:function(a){this._mTweens.push(a)},_updateTweens:function(a){for(var b=this._mTweens.length-1;b>=0;b--){var c=this._mTweens[b];c._update(a.elapsedTime),c.finished()&&c===this._mTweens[b]&&this._mTweens.splice(b,1)}0===this._mTweens.length&&"number"==typeof this._mTweenListener&&(this.removeEventListener("update",this._mTweenListener),this._mTweenListener=null)},_updateShakes:function(a){for(var b=this._mShakes.length-1;b>=0;b--){var c=this._mShakes[b];c._update(a.elapsedTime),c.finished()&&c===this._mShakes[b]&&this._mShakes.splice(b,1)}0===this._mShakes.length&&(this.removeEventListener("update",this._mShakeListener),this._mShakeListener=null)},_updateActions:function(a){for(var b=this._mActions.length-1;b>=0;b--){var c=this._mActions[b];c._timer+=a.elapsedTime;var d=TGE.clamp(Math.ceil(c._timer-c.delay),0,1)+Math.max(0,Math.floor((c._timer-c.delay)/c.interval));d!==c._prev&&(c.action.call(this),c._prev=d),d>=c.repeat&&this._mActions.splice(b,1)}this._removeActionsListener()},_updateScreenPosition:function(a){var b=this.stage.width/2+(this.worldX-a.cx),c=this.stage.height/2-(this.worldY-a.cy);this.x=b,this.y=c},_checkViewportCulling:function(a){if(null!==this._mViewportCulling){var b=this.getBounds(),c=!1;this._mViewportCulling[0]&&b.y+b.height<0&&(c=!0),this._mViewportCulling[1]&&b.x>this.stage.width&&(c=!0),this._mViewportCulling[2]&&b.y>this.stage.height&&(c=!0),this._mViewportCulling[3]&&b.x+b.width<0&&(c=!0),c&&this.markForRemoval()}},_draw:function(a){if(!a.isTGERenderer)return this._mFullStage._mSpareCanvasRenderer.swapContext(a),this._draw(this._mFullStage._mSpareCanvasRenderer);if(this._checkVisibilityChange(),this.visible){this._updateTransforms(),null!==this.stage&&this.mouseEnabled&&this._mFullStage._mMouseTargets.push(this);var b=null!==this._mFullStage&&1!==this._mFullStage._mScale?this._mFullStage._mScale:1;if(a.setWorldTransform(this._mWorldTransform,b),a.setAlpha(this._mWorldAlpha),this.colorDef&&GameConfig.COLOR_DEFS){var c=GameConfig.COLOR_DEFS[this.colorDef];"string"==typeof c?this.backgroundColor=c:this._mBackgroundGradient=c}if(this._mBackgroundGradient){var d=this._mBackgroundGradient;a.gradientFill(d.direction,d.color1,d.color2,d.transitionPoint,this.width,this.height)}else this.backgroundColor&&a.fillRectangle(0,0,this.width,this.height,this.backgroundColor);this._mUseDrawEvents?(this.handleEvent({type:"drawbegin",renderer:a,canvasContext:a.getCanvasContext()}),this._objectDraw(a),this.handleEvent({type:"drawend",renderer:a,canvasContext:a.getCanvasContext()})):this._objectDraw(a),this._mFullStage._mNumVisibleObjects++,this._mFullStage._mNumDrawnObjects+=this.doesDrawing()?1:0}},_objectDraw:function(a){this._drawClass(a.getCanvasContext(),!0)},_drawClass:function(a,b){b||(this._mFullStage._mSpareCanvasRenderer.swapContext(a),this._mFullStage._mSpareCanvasRenderer.deprecatedDrawCycle=!0,this._objectDraw(this._mFullStage._mSpareCanvasRenderer))},_updateTransforms:function(){this._mWorldTransformUpdated=!1;var a=this.x!==this._mPreviousX||this.y!==this._mPreviousY||this.scaleX!==this._mPreviousScaleX||this.scaleY!==this._mPreviousScaleY||this.rotation!==this._mPreviousRotation||this._mVisibilityChanged,b=this._mPreviousParent&&this.parent!=this._mPreviousParent;if(a&&!this._mIgnoreProperties&&(this._mVisibilityChanged=!1,this._mPreviousX=this.x,this._mPreviousY=this.y,this._mPreviousScaleX=this.scaleX,this._mPreviousScaleY=this.scaleY,this._mPreviousRotation=this.rotation,this._mLocalTransformDirty=!0),this.registrationX===this._mPreviousRegistrationX&&this.registrationY===this._mPreviousRegistrationY&&this.width===this._mPreviousWidth&&this.height===this._mPreviousHeight||(this._mPreviousRegistrationX=this.registrationX,this._mPreviousRegistrationY=this.registrationY,this._mPreviousWidth=this.width,this._mPreviousHeight=this.height,this._mRegistrationOffset.x=-this.width*this.registrationX,this._mRegistrationOffset.y=-this.height*this.registrationY,this._mLocalTransformDirty=!0),this.alpha!==this._mPreviousAlpha&&(this.alpha=Math.min(Math.max(this.alpha,0),1),this._mPreviousAlpha=this.alpha),this._mLocalTransformDirty&&!this._mIgnoreProperties){this._mLocalTransformNoReg.identity();var c=this._mLocalTransformNoReg._internal;c[2]=this.x,c[5]=this.y,0!==this.rotation&&this._mLocalTransformNoReg.rotate(this.rotation),c[0]*=this.scaleX,c[1]*=this.scaleY,c[3]*=this.scaleX,c[4]*=this.scaleY}if(null!==this.parent){if(this._mLocalTransformDirty||this.parent._mWorldTransformUpdated||b){var d=this.parent._mWorldTransformNoReg._internal,e=this._mLocalTransformNoReg._internal,f=this._mWorldTransform._internal,g=this._mWorldTransformNoReg._internal,h=d[0],i=d[1],j=d[2],k=d[3],l=d[4],m=d[5],n=e[0],o=e[1],p=e[2],q=e[3],r=e[4],s=e[5],t=n*this._mRegistrationOffset.x+o*this._mRegistrationOffset.y,u=q*this._mRegistrationOffset.x+r*this._mRegistrationOffset.y;f[0]=g[0]=h*n+i*q,f[1]=g[1]=h*o+i*r,g[2]=h*p+i*s+j,f[2]=g[2]+h*t+i*u,f[3]=g[3]=k*n+l*q,f[4]=g[4]=k*o+l*r,g[5]=k*p+l*s+m,f[5]=g[5]+k*t+l*u,this._mWorldTransformUpdated=!0,this._mPreviousParent=this.parent}}else this._mWorldTransformUpdated=this._mLocalTransformDirty;this._mWorldTransformUpdated&&this._setBoundingInfoDirty(),this._mWorldAlpha=null!==this.parent?this.parent._mWorldAlpha*this.alpha:this.alpha,this._mLocalTransformDirty=!1},_updateWorldTransform:function(){this._mWorldTransformUpdated&&this._updateTransforms()},_updateAABB:function(){this._updateWorldTransform(),this._mTopLeft.x=this._mBottomLeft.x=0,this._mBottomRight.x=this._mTopRight.x=this.width,this._mTopLeft.y=this._mTopRight.y=0,this._mBottomLeft.y=this._mBottomRight.y=this.height,this._mWorldTransform.transformPoint(this._mTopLeft),this._mWorldTransform.transformPoint(this._mTopRight),this._mWorldTransform.transformPoint(this._mBottomLeft),this._mWorldTransform.transformPoint(this._mBottomRight);var a=Math.min(this._mTopLeft.x,this._mTopRight.x,this._mBottomLeft.x,this._mBottomRight.x),b=Math.max(this._mTopLeft.x,this._mTopRight.x,this._mBottomLeft.x,this._mBottomRight.x),c=Math.min(this._mTopLeft.y,this._mTopRight.y,this._mBottomLeft.y,this._mBottomRight.y),d=Math.max(this._mTopLeft.y,this._mTopRight.y,this._mBottomLeft.y,this._mBottomRight.y);this._mAABB.x=a,this._mAABB.y=c,this._mAABB.width=b-a,this._mAABB.height=d-c,this._mBoundingInfoDirty=!1},_setBoundingInfoDirty:function(){this._mBoundingInfoDirty=!0,null!==this.parent&&this.parent._setBoundingInfoDirty()},_checkVisibilityChange:function(){this.visible!==this._mPreviousVisibility&&(this._mVisibilityChanged=!0,this._mPreviousVisibility=this.visible,this._setBoundingInfoDirty())},_setStage:function(a,b){this.stage=a,this._mAddedToStage=b,this._mFullStage=this._mFullStage||a._mFullStage},_makeGradient:function(a){var b="vertical";return a.direction="string"==typeof a.direction?a.direction:b,a.color1="string"==typeof a.color1?a.color1:"#fff",a.color2="string"==typeof a.color2?a.color2:"#000",a.transitionPoint="number"==typeof a.transitionPoint?a.transitionPoint:.5,"vertical"!=a.direction&&"horizontal"!=a.direction&&"leftDiagonal"!=a.direction&&"rightDiagonal"!=a.direction&&"circular"!=a.direction&&(a.direction=b,TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Invalid gradient direction.  Valid directions are 'circular', 'vertical', 'horizontal', 'rightDiagonal', and 'leftDiagonal'.")),(a.transitionPoint<0||a.transitionPoint>1)&&(a.transitionPoint=Math.min(Math.max(a.transitionPoint,0),1),TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Transition point must be between 0 and 1.")),a}},Object.defineProperty(TGE.DisplayObject.prototype,"scale",{set:function(a){this.scaleX=this.scaleY=a}}),Object.defineProperty(TGE.DisplayObject.prototype,"layout",{get:function(){return this._mLayout},set:function(a){this._setLayout(a)}}),Object.defineProperty(TGE.DisplayObject.prototype,"backgroundGradient",{set:function(a){this._mBackgroundGradient=this._makeGradient(a)}}),TGE.DisplayObjectContainer=function(){return TGE.DisplayObjectContainer.superclass.constructor.call(this),this._mChildren=[],this._mCached=!1,this._mCacheDirty=!1,this.canvas=null,this.offscreenRenderer=null,this},TGE.DisplayObjectContainer.prototype={setup:function(a){return TGE.DisplayObjectContainer.superclass.setup.call(this,a),this.canvasScale=a.canvasScale?a.canvasScale:1,this},addChild:function(a){return this.addChildAt(a,this._mChildren.length)},addChildAt:function(a,b,c){if(b<0||b>this._mChildren.length){if(1!=c)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.DisplayObjectContainer.addChildAt called with invalid index: "+b),a;b=Math.min(this._mChildren.length,Math.max(0,b))}return a.parent&&(a._mPreviousParent=a.parent,a.parent.removeChild(a)),a.parent=this,this._mChildren.splice(b,0,a),a._setStage(this.stage,this._mAddedToStage),a.dispatchEvent(TGE._ResizeEvent),this._mAddedToStage&&a.dispatchEvent(TGE._AddedToStageEvent),TGE.Game.GetInstance().debugResizeMode&&this._layoutHasDynamicDimensions(this._mLayout)&&a.doesDrawing()&&!a.isResponsive()&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"adding a child without a layout strategy to an object with responsive dimensions"),a},getChildAt:function(a){return this._mChildren[a]},getChildByName:function(a,b){b=!0===b;for(var c=this._mChildren.length,d=0;d<c;d++){if(this._mChildren[d].instanceName===a)return this._mChildren[d];if(b){var e=this._mChildren[d].getChildByName(a,!0);if(null!==e)return e}}return null},getChildIndex:function(a){for(var b=this._mChildren.length,c=0;c<b;c++)if(this._mChildren[c]===a)return c;return-1},removeChild:function(a){var b=this.getChildIndex(a);return-1!==b&&(this._mChildren[b].parent=null,this._mChildren.splice(b,1)),a},removeFromScene:function(){this.removeChildren(),TGE.DisplayObjectContainer.superclass.removeFromScene.call(this)},removeChildren:function(){for(;this._mChildren.length;)this._mChildren.pop().removeFromScene()},clearChildren:function(){this.removeChildren()},numChildren:function(a){a=!0===a;var b=this._mChildren.length;if(a)for(var c=b;--c>=0;)b+=this._mChildren[c].numChildren(!0);return b},sortChildren:function(a){a&&this._mChildren.sort(a)},eachChild:function(a){if(a)for(var b=Array.prototype.slice.call(arguments,1),c=this._mChildren.length,d=0;d<c;++d)a.apply(this._mChildren[d],b)},dispatchEvent:function(a){TGE.DisplayObjectContainer.superclass.dispatchEvent.call(this,a),this._dispatchToChildren(a),a.endEvent&&this.handleEvent(a.endEvent)},_dispatchToChildren:function(a){for(var b=this._mChildren.length,c=0;c<b;c++)this._mChildren[c]&&this._mChildren[c].dispatchEvent(a)},cache:function(a){if(a&&a._mCached)return this.canvas=a.canvas,this.offscreenRenderer=a.offscreenRenderer,this.width=a.width,this.height=a.height,this._mCached=!0,void(this._mCacheDirty=!1);if(!this.canvas){if(!this.width||!this.height){var b=this.getBounds();this.width=b.width,this.height=b.height}this.canvas=document.createElement("canvas"),this.offscreenRenderer=new TGE.CanvasRenderer(this.canvas)}this._mWorldTransformNoReg=TGE.Matrix.TranslationMatrix(this.width*this.registrationX,this.height*this.registrationY),this._mWorldAlpha=1,this.canvas.width=Math.ceil(this.width*this.canvasScale)||1,this.canvas.height=Math.ceil(this.height*this.canvasScale)||1,this.offscreenRenderer.getCanvasContext().clearRect(0,0,this.canvas.width,this.canvas.height),this._mFullStage._mScale=this.canvasScale,this._mCached=!1,this._objectDraw(this.offscreenRenderer),this._mCached=!0,this._mCacheDirty=!1,this._resetTransforms(),this._mFullStage._mScale=1},updateCache:function(){this.isCached()&&this.cache(),this.parent&&this.parent!=this.stage&&this.parent.updateCache()},_resetTransforms:function(){this._mLocalTransformDirty=!0;for(var a=this._mChildren.length;--a>=0;)this._mChildren[a]._resetTransforms&&this._mChildren[a]._resetTransforms()},isCached:function(){return this._mCached},_objectDraw:function(a){if(this._mCached){if(this._mCacheDirty&&this.cache(),this.canvas){var b=a.getCanvasContext();b&&b.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,this.width,this.height)}}else{a.deprecatedDrawCycle||TGE.DisplayObjectContainer.superclass._objectDraw.call(this,a);for(var c=this._mChildren.length,d=0;d<c;d++){var e=this._mChildren[d];e._checkVisibilityChange(),e.visible&&e._draw(a)}}},_updateAABB:function(a){if(TGE.DisplayObjectContainer.superclass._updateAABB.call(this),!(a=!0===a)&&!this._mCached)for(var b=this._mChildren.length,c=0;c<b;c++)this._mChildren[c].visible&&this._mAABB.union(this._mChildren[c].getBounds())},_setStage:function(a,b){TGE.DisplayObjectContainer.superclass._setStage.call(this,a,b);for(var c=this._mChildren.length;--c>=0;)this._mChildren[c]._setStage(a,b)}},extend(TGE.DisplayObjectContainer,TGE.DisplayObject),TGE.GameStage=function(a){return TGE.GameStage.superclass.constructor.call(this),this.stage=this,this._mFullStage=a,this._mRenderer=a._mRenderer,this._mHeightRatio=1,this._mScale=1,this.mouseEnabled=!0,this.registrationX=this.registrationY=0,this.layout=this._layoutFunction.bind(this),this},TGE.GameStage._sOrientationLock={active:!1,gameWidth:1,gameHeight:1},TGE.GameStage.prototype={numVisibleObjects:function(){return this._mFullStage.numVisibleObjects()},numDrawnObjects:function(){return this._mFullStage.numDrawnObjects()},maxDrawnObjects:function(){return this._mFullStage.maxDrawnObjects()},averageDrawnObjects:function(){return this._mFullStage.averageDrawnObjects()},isLandscape:function(){return this.height<this.width},isMouseDown:function(){return this._mMouseDown},dispatchResize:function(){this._layoutFunction(),TGE._ResizeEvent.width=TGE._ResizeEvent.endEvent.width=this.width,TGE._ResizeEvent.height=TGE._ResizeEvent.endEvent.height=this.height,this.dispatchEvent(TGE._ResizeEvent)},forceOrientationLock:function(a){TGE.GameStage._sOrientationLock.active=a},getHeight:function(){return this._mHeightRatio},setHeight:function(a){this._mHeightRatio=a,this.dispatchResize()},_draw:function(a){TGE.Renderer._sIgnoreOrientationLock=!1,TGE.GameStage.superclass._draw.call(this,a),TGE.Renderer._sIgnoreOrientationLock=!0},_layoutFunction:function(){TGE.GameStage._sOrientationLock.active?(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"orientation lock is being applied"),this.width=TGE.GameStage._sOrientationLock.gameWidth=this.parent.height,this.height=TGE.GameStage._sOrientationLock.gameHeight=this.parent.width):(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.width=this.parent.width,this.height=this.parent.height*this._mHeightRatio,this.scale=1)},getBounds:function(){return TGE.GameStage.superclass.getBounds.call(this,!0)}},extend(TGE.GameStage,TGE.DisplayObjectContainer),TGE.FullStage=function(a,b,c){TGE.FullStage.superclass.constructor.call(this),this._mRenderer=null,this._mMouseTargets=[],this._mListenerRemovals=[],this._mObjectTrash=[],this._mUpdateGroup=[],this._mUpdateCycle=0,this._mNumVisibleObjects=0,this._mNumDrawnObjects=0,this._mMaxDrawnObjects=0,this._mTotalDrawnObjects=0,this._mTotalFramesDrawn=0,this._mSpareCanvasRenderer=new TGE.CanvasRenderer,this.mouseEnabled=!0,this._mAddedToStage=!0;var d=!1;a&&(a instanceof HTMLDivElement?d=!1:a instanceof HTMLCanvasElement?d=!0:a=document.body);var e;d?e=a:(e=document.createElement("canvas"),a.appendChild(e)),this.registrationX=0,this.registrationY=0,e.width=a.clientWidth,e.height=a.clientHeight;var f=a.clientWidth,g=a.clientHeight;return"number"==typeof b||"number"==typeof c?(f=b,g=c):0!=a.clientWidth&&0!=a.clientHeight||(f=640,g=1138),this.width=this._mOriginalWidth=f,this.height=this._mOriginalHeight=g,TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"TGE.FullStage initialized with dimensions: "+this.width+"x"+this.height),this._mAABB.x=this._mAABB.y=0,this._mAABB.width=this.width,this._mAABB.height=this.height,this._mScale=1,this._mCanvas=e,"webgl"===getQueryString().renderer&&(window.TGE.WebGLRenderer?"file:"!=document.location.protocol?this._mRenderer=new TGE.WebGLRenderer(this._mCanvas):TGE.Debug.Log(TGE.Debug.LOG_INFO,"WebGL can only be used when running on a webserver!"):TGE.Debug.Log(TGE.Debug.LOG_INFO,"WebGL is not available in this build of TGE.")),this._mRenderer&&this._mRenderer.functional()||(this._mRenderer=new TGE.CanvasRenderer(this._mCanvas,!1)),TGE.Debug.Log(TGE.Debug.LOG_INFO,"created "+this._mRenderer.type()+" renderer."),this._mRenderer.resizedGameDiv(),this.stage=this._mFullStage=this,this.gameStage=this.addChild(new TGE.GameStage(this)),this.gameStage.stage=this.gameStage,this},TGE.FullStage.prototype={setGameStageHeight:function(a){this.gameStage.setHeight(a)},forceOrientationLock:function(a){this.gameStage.forceOrientationLock(a)},draw:function(){TGE.Renderer._sIgnoreOrientationLock=!0,this._mMouseTargets=[],this._mRenderer.beginScene(this.backgroundColor),this._mNumVisibleObjects=0,this._mNumDrawnObjects=0,this._draw(this._mRenderer),this._mRenderer.endScene(),this._mTotalDrawnObjects+=this._mNumDrawnObjects,this._mTotalFramesDrawn++,this._mNumDrawnObjects>this._mMaxDrawnObjects&&(this._mMaxDrawnObjects=this._mNumDrawnObjects)},numVisibleObjects:function(){return this._mNumVisibleObjects},numDrawnObjects:function(){return this._mNumDrawnObjects},maxDrawnObjects:function(){return this._mMaxDrawnObjects},averageDrawnObjects:function(){return Math.round(this._mTotalDrawnObjects/this._mTotalFramesDrawn)},setSize:function(a,b){this._mScale=1,this._mCanvas.width=a,this._mCanvas.height=b,this.width=this._mAABB.width=a,this.height=this._mAABB.height=b,this._mRenderer.resizedGameDiv(),this.dispatchResize()},isMouseDown:function(){return this._mMouseDown},getBounds:function(){return this._mAABB},dispatchUpdate:function(a,b){if(b===this.gameStage)this._updateAllObjects(a);else{var c=this.gameStage;this.eachChild(function(){this!==c&&this.dispatchEvent(a)}),b.stage!==this&&b.dispatchEvent(a)}},dispatchResize:function(){TGE._ResizeEvent.width=TGE._ResizeEvent.endEvent.width=this.width,TGE._ResizeEvent.height=TGE._ResizeEvent.endEvent.height=this.height;var a=this.gameStage;this.eachChild(function(){this!==a&&this.dispatchEvent(TGE._ResizeEvent)}),this.gameStage.dispatchResize()},_pruneListeners:function(){var a=this._mListenerRemovals.length;if(a){for(;--a>=0;){var b=this._mListenerRemovals[a];for(var c in b._mEventListeners)for(var d=b._mEventListeners[c],e=d.length;--e>=0;)d[e].id||d.splice(e,1)}this._mListenerRemovals=[]}},_updateAllObjects:function(a){for(var b=this._mUpdateGroup.length;--b>=0;){var c=this._mUpdateGroup[b];c._mMarkedForRemoval||c._mLastUpdate===this._mUpdateCycle?this._mUpdateGroup.splice(b,1):(c.handleEvent(a),c._mLastUpdate=this._mUpdateCycle)}this._mUpdateCycle++},_addUpdateObj:function(a){this._mUpdateGroup.push(a)},_trashObject:function(a){this._mObjectTrash.push(a)},_emptyTrash:function(){for(;this._mObjectTrash.length;)this._mObjectTrash.pop().removeFromScene()},_notifyObjectsOfMouseEvent:function(a,b,c,d){var e="mouse"+a,f={type:e,x:b,y:c,stageX:b,stageY:c,identifier:d};this._handleMouseEvent(f);var g=TGE.Game.GetUpdateRoot();g.mouseEnabled&&g.visible&&this._processMouseTarget(g,f);for(var h=this._mMouseTargets.length;--h>=0;){var i=this._mMouseTargets[h];if(i!==g&&i!==this){if(this._processMouseTarget(i,f))return}else if(i!==this&&i.hitTestPoint(b,c))return}},_processMouseTarget:function(a,b){if(a===this)a._handleMouseEvent(b);else{if(this._setPointerPositionsForObject(a,b.x,b.y),a.hitTestPoint(b.x,b.y))return a._handleMouseEvent(b),!0;"mouseup"===b.type&&a._mMouseDown&&(b.type="mouseupoutside",a._handleMouseEvent(b),b.type="mouseup")}return!1},_updateObjectMouseOverStates:function(a,b){for(var c=this._mMouseTargets.length;--c>=0;){var d=this._mMouseTargets[c],e={x:a,y:b,stageX:a,stageY:b},f=(!TGE.BrowserDetect.isMobileDevice||this._mMouseDown)&&d.hitTestPoint(a,b);f!==d._mMouseOver&&(d._mMouseOver=f,e.type=f?"mouseover":"mouseout",d.handleEvent(e)),this._setPointerPositionsForObject(d,a,b)}},_setPointerPositionsForObject:function(a,b,c){a._mLocalTransformDirty&&a._updateTransforms(),a.pointerLocal.setTo(b,c),a._mWorldTransform.inverseTransformPoint(a.pointerLocal),a.pointerStage.x=b,a.pointerStage.y=c,a.mouseX=a.pointerLocal.x,a.mouseY=a.pointerLocal.y},_notifyObjectsOfKeyEvent:function(a,b){var c={type:a,keyCode:b};this.dispatchEvent(c)}},extend(TGE.FullStage,TGE.DisplayObjectContainer),TGE.Sprite=function(){return TGE.Sprite.superclass.constructor.call(this),this._mRendererTexture=null,this._mCellWidth=0,this._mCellHeight=0,this._mSpriteIndex=0,this._mOffsetX=0,this._mOffsetY=0,this._mCoordinateCache=null,this._mColorize=null,this._mImage=null,TGE.Sprite.UseCorrectGridCuts?(this._mSplitFunc1=function(a){return a},this._mSplitFunc2=function(a){return Math.round(a)},this._mSplitFunc3=function(a){return Math.round(a)}):(this._mSplitFunc1=function(a){return Math.floor(a)},this._mSplitFunc2=function(a){return a},this._mSplitFunc3=function(a){return Math.floor(a)}),this},TGE.Sprite.UseCorrectGridCuts=!0,TGE.Sprite.prototype={setup:function(a){return TGE.Sprite.superclass.setup.call(this,a),void 0!==a.image&&this.setSizedImage(a.image,a.width,a.height),a.colorize&&this.colorize(a.colorize),this},setSizedImage:function(a,b,c){this.setImage(a,1,1,b,c)},setImage:function(a,b,c,d,e){if(b=void 0===b?1:b,c=void 0===c?1:c,d="number"==typeof d?d:null,e="number"==typeof e?e:null,this._mSourceImage=a,this._mNumRows=b,this._mNumColumns=c,this._mOffsetX=0,this._mOffsetY=0,this._mRendererTexture=null,"string"==typeof a)this._mRendererTexture=TGE.AssetManager.GetTexture(a);else if(a instanceof Image)this._mRendererTexture=this._mFullStage._mRenderer.processImage(a,!1);else if(a&&a.spriteSheet instanceof Image){this._mRendererTexture=this._mFullStage._mRenderer.processImage(a.spriteSheet,!0);var f=a}if(this._mRendererTexture){if(this._mRendererTexture.spriteSheet){var g=f||TGE.AssetManager.Get(a);this._mCellWidth=this._mSplitFunc1(g.width/c),this._mCellHeight=this._mSplitFunc1(g.height/b),this._mCoordinateCache=[];for(var h,i,j=0;j<b*c;j++)h=this._mSplitFunc2(g.x+(j%c|0)*this._mCellWidth),i=this._mSplitFunc2(g.y+(j/c|0)*this._mCellHeight),this._mCoordinateCache.push([h,i]);this._mDrawWidth=this._mOriginalWidth=this._mSplitFunc2(this._mCellWidth),this._mDrawHeight=this._mOriginalHeight=this._mSplitFunc2(this._mCellHeight),g.hasOwnProperty("offsetX")&&(this._mOffsetX=g.offsetX,this._mOffsetY=g.offsetY,this._mDrawWidth=g.drawWidth/c,this._mDrawHeight=g.drawHeight/b)}else this._mDrawWidth=this._mOriginalWidth=this._mSplitFunc3(this._mRendererTexture.htmlImageWidth/c),this._mDrawHeight=this._mOriginalHeight=this._mSplitFunc3(this._mRendererTexture.htmlImageHeight/b),this._resetCoordinateCache();this.width=d||this._mOriginalWidth,this.height=e||this._mOriginalHeight,(this._mRendererTexture.htmlImageWidth<=0||this._mRendererTexture.htmlImageHeight<=0)&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Sprite.setImage: HTMLImageElement has invalid dimensions ("+this._mRendererTexture.htmlImageWidth+"x"+this._mRendererTexture.htmlImageHeight+"), image likely did not load"),this._mRendererTexture=null)}this._mSpriteIndex=0,this._mImage=this._mRendererTexture?this._mRendererTexture.htmlImageElement:null,this.updateCache(),this.parent&&this.dispatchEvent(TGE._ResizeEvent)},setSpriteIndex:function(a){if(null===this._mRendererTexture)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempt to call TGE.Sprite.setSpriteIndex on null image");this._mSpriteIndex=a,this._mSpriteIndex>=this._mCoordinateCache.length&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempt to call TGE.Sprite.setSpriteIndex with an out of range index ("+a.toString()+")"),this._mSpriteIndex=0)},colorize:function(a){a!=this._mColorize&&(a||(this._mCacheDirty=!0),this._mColorize=a,this.cache(this.isCached()&&!this._mCacheDirty?this:void 0))},cache:function(a){if(TGE.Sprite.superclass.cache.call(this,a),this._mColorize&&this.canvas){var b=this.offscreenRenderer.getCanvasContext();b.save(),b.globalCompositeOperation="source-atop",b.setTransform(1,0,0,1,0,0),b.fillStyle=this._mColorize,b.fillRect(0,0,this.width,this.height),b.restore()}},_objectDraw:function(a){if(null!==this._mRendererTexture&&!this._mCached){var b=this.width/this._mOriginalWidth,c=this.height/this._mOriginalHeight,d=this._mCoordinateCache[this._mSpriteIndex][0]>>0,e=this._mCoordinateCache[this._mSpriteIndex][1]>>0,f=this._mOffsetX*b,g=this._mOffsetY*c,h=this._mDrawWidth*b,i=this._mDrawHeight*c;a.drawImage(this._mRendererTexture,d,e,this._mDrawWidth,this._mDrawHeight,f,g,h,i)}TGE.Sprite.superclass._objectDraw.call(this,a)},_resetCoordinateCache:function(){this._mCellWidth=this._mSplitFunc1(this._mRendererTexture.htmlImageWidth/this._mNumColumns),this._mCellHeight=this._mSplitFunc1(this._mRendererTexture.htmlImageHeight/this._mNumRows),this._mCoordinateCache=[];for(var a,b,c=0;c<this._mNumRows*this._mNumColumns;c++)a=this._mSplitFunc2((c%this._mNumColumns|0)*this._mCellWidth),b=this._mSplitFunc2((c/this._mNumColumns|0)*this._mCellHeight),this._mCoordinateCache.push([a,b])}},extend(TGE.Sprite,TGE.DisplayObjectContainer),Object.defineProperty(TGE.Sprite.prototype,"image",{get:function(){return this._mSourceImage},set:function(a){a!==this.image&&this.setImage(a)}}),Object.defineProperty(TGE.Sprite.prototype,"originalWidth",{get:function(){return this._mOriginalWidth}}),Object.defineProperty(TGE.Sprite.prototype,"originalHeight",{get:function(){return this._mOriginalHeight}}),TGE.RectMask=function(){TGE.RectMask.superclass.constructor.apply(this,arguments)},TGE.RectMask.prototype={setup:function(a){return TGE.RectMask.superclass.setup.call(this,a),this.maskX=a.maskX||0,this.maskY=a.maskY||0,this.maskWidth=a.maskWidth,this.maskHeight=a.maskHeight,this},_objectDraw:function(a){var b=a._mCanvasContext;b.save(),b.beginPath(),b.rect(this.maskX,this.maskY,void 0!==this.maskWidth?this.maskWidth:this.width,void 0!==this.maskHeight?this.maskHeight:this.height),b.clip(),TGE.RectMask.superclass._objectDraw.call(this,a),b.restore()},_updateAABB:function(){TGE.DisplayObject.prototype._updateAABB.call(this)}},extend(TGE.RectMask,TGE.Sprite),TGE.SpriteSheetAnimation=function(){return TGE.SpriteSheetAnimation.superclass.constructor.call(this),this.fps=24,this.totalFrames=1,this.looping=!0,this._mAge=0,this._mPlaying=!1,this._mCurrentFrame=-1,this.addEventListener("update",this._updateAnimation.bind(this)),this},TGE.SpriteSheetAnimation.prototype={setup:function(a){TGE.SpriteSheetAnimation.superclass.setup.call(this,a);var b="number"==typeof a.rows?b=a.rows:1,c="number"==typeof a.columns?c=a.columns:1;return 1===b&&1===c||void 0===a.image||this.setImage(a.image,b,c),"number"==typeof a.fps&&(this.fps=a.fps),"number"==typeof a.totalFrames&&(this.totalFrames=a.totalFrames),"boolean"!=typeof a.looping||(this.looping=a.looping),void 0!==a.width&&(this.width=a.width),void 0!==a.height&&(this.height=a.height),this},play:function(){this._mPlaying=!0},stop:function(){this._mPlaying=!1},gotoAndStop:function(a){this._jumpToFrame(a),this.stop()},gotoAndPlay:function(a){this._jumpToFrame(a),this.play()},currentFrame:function(){return this._mCurrentFrame},_jumpToFrame:function(a){this._setFrame(a),this._mAge=this._mCurrentFrame*(1/this.fps)},_setFrame:function(a){a!==this._mCurrentFrame&&(this._mCurrentFrame=a,this.setSpriteIndex(a),this.handleEvent({type:"frame"+this._mCurrentFrame.toString(),frame:this._mCurrentFrame}),this.looping||a!==this.totalFrames-1||this.handleEvent({type:"finished",frame:this._mCurrentFrame}))},_updateAnimation:function(a){if(this._mPlaying){this._mAge+=a.elapsedTime;var b=1/this.fps,c=Math.floor(this._mAge/b),d=this._mCurrentFrame;d=this.looping||c<this.totalFrames?c%this.totalFrames:this.totalFrames-1,this._setFrame(d)}}},extend(TGE.SpriteSheetAnimation,TGE.Sprite),TGE.TFXAnimationSet=function(){return TGE.TFXAnimationSet.superclass.constructor.call(this),this.imageSet=null,this.fps=24,this.looping=!0,this.onComplete=null,this._mAnimationsData=null,this._mInverseGlobalScale=1,this._mPartInstances=[],this._mCurrentAnimationID=null,this._mAge=0,this._mPlaying=!1,this._mAnimationDir=1,this._mCurrentFrame=-1,this._mTotalFrames=1,this._mChainedAnimations=[],this._mStopFrame=-1,this._mOldImageSet=null,this._mAccessedParts={},this._mRepeats=-1,this.addEventListener("update",this._updateAnimation.bind(this)),this},TGE.TFXAnimationSet.AddRequiredImagesToAssetList=function(a,b){var c=b.imageList,d=b.location||b.imagePath,e=b.imageSet,f="string"==typeof b.sheet?b.sheet:"string"==typeof b.spriteSheet?b.spriteSheet:null;if(e=void 0===e?null:e,c){void 0===d&&(d="");for(var g in a.parts)if(a.parts.hasOwnProperty(g)){var h=a.parts[g];if(h.width>0&&h.height>0){var i=null===e?g:e+"_"+g;g.indexOf(".")<0&&(g+=".png"),null!==f?c.push({id:i,url:d+"/"+g,sheet:f}):c.push({id:i,url:d+"/"+g})}}}},TGE.TFXAnimationSet.ExpandData=function(a){return"object"==typeof a&&"f"in a&&"cjson"===a.f?TGE.TFXAnimationSet._expand(a.t,a.v):a},TGE.TFXAnimationSet.prototype={setup:function(a){TGE.TFXAnimationSet.superclass.setup.call(this,a),"number"==typeof a.fps&&(this.fps=a.fps),"string"==typeof a.imageSet&&(this.imageSet=a.imageSet);var b=null;"boolean"==typeof a.looping?b=a.looping:(a.looping,b=a.loop,this._mRepeats=a.looping);var b="boolean"==typeof a.looping?a.looping:a.loop;return this.setCurrentAnimation(a.currentAnimation,b),"function"==typeof a.onComplete&&(this.onComplete=a.onComplete),a.playAndRemove?this.playAndRemove():(a.playAnimation||a.play)&&this.play(),this},animationExists:function(a){return null!==this._mAnimationsData&&void 0!==this._mAnimationsData.animations[a]},partExists:function(a){return null!==this._mAnimationsData&&void 0!==this._mAnimationsData.parts[a]},setCurrentAnimation:function(a,b,c){if(a=a||this.getAnimationNames()[0],c=0!=c,b=0!=b,!this.animationExists(a))return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"animation not found: '"+a+"'");this.looping=b,c&&(this._mChainedAnimations=[]),a!==this._mCurrentAnimationID&&(this._mCurrentAnimationID=a,this._mAge=0,this._mCurrentFrame=-1,this._mTotalFrames=this._mAnimationsData.animations[a].frames.length)},setNextAnimation:function(a,b,c,d){this._mChainedAnimations.push({anim:a,looping:b,startFrame:c,endFrame:d})},play:function(){this.gotoAndPlay(this._mCurrentFrame)},playAndRemove:function(){this._mRemoveWhenFinished=!0,this.play()},playFromStart:function(){this.gotoAndPlay(0)},playUntilFrame:function(a){this._playBegin(this._mCurrentFrame,a)},playReverse:function(){this._playBegin(this._mTotalFrames-1,-1,!0)},playFromTo:function(a,b){this._playBegin(a,b,b-a<0)},gotoAndPlay:function(a){this._playBegin(a,-1)},_playBegin:function(a,b,c){this._mStopFrame=b,this._mCurrentFrame=-1,this._mPlaying=!0,this._jumpToFrame(Math.max(0,a),c)},removeWhenFinished:function(){this._mRemoveWhenFinished=!0},isPlaying:function(){return this._mPlaying},stop:function(){this._mPlaying=!1},gotoAndStop:function(a){this._mStopFrame=-1,this._mPlaying=!1,this._jumpToFrame(a)},gotoPercent:function(a){this.gotoAndStop(Math.round(a*(this._mTotalFrames-1)))},currentFrame:function(){return Math.max(0,this._mCurrentFrame)},totalFrames:function(){return this._mTotalFrames},currentAnimation:function(){return this._mCurrentAnimationID},getAnimationNames:function(){var a=[],b=this._mAnimationsData.animations;for(var c in b)b.hasOwnProperty(c)&&a.push(c);return a},accessPart:function(a,b,c){if(void 0===this._mAnimationsData.parts[a])return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TFX part not found: '"+a+"'"),null;b="boolean"!=typeof b||b,c="boolean"!=typeof c||c,this._mAccessedParts[a]||(this._mAccessedParts[a]={sprite:new TGE.Sprite});var d=this._mAnimationsData.parts[a];return b&&d.width>0&&d.height>0?this._mAccessedParts[a].sprite.setImage(null===this.imageSet?a:this.imageSet+"_"+a):this._mAccessedParts[a].sprite.setImage(null),this._mAccessedParts[a].animate=c,this._mCurrentAnimationID&&this._mCurrentFrame>=0&&this._posePartInstances(this._mCurrentFrame),this._mAccessedParts[a].sprite},extractMovementData:function(a,b){var c=this._mAnimationsData.animations[a],d=c.frames[0],e=this._getPartInstance(d,b);if(e)for(var f=e.x?e.x:0,g=e.y?e.y:0,h=0,i=0,j=1;j<c.frames.length;++j)if(d=c.frames[j],e=this._getPartInstance(d,b)){var k=(e.x?e.x:0)-f,l=(e.y?e.y:0)-g;d.movement={x:k-h,y:l-i},h=k,i=l;for(var m=d.instances.length;--m>=0;)e=d.instances[m],"number"==typeof e.x&&(e.x-=k),"number"==typeof e.y&&(e.y-=l)}},_setAnimationData:function(a){for(this._mAnimationsData=a,this.fps=a.framerate,this._mInverseGlobalScale=1/a.image_scale;this._mPartInstances.length;)this._mPartInstances.pop().markForRemoval()},_getPartInstance:function(a,b){for(var c=0;c<a.instances.length;++c){var d=a.instances[c];if(void 0===b||this._mAnimationsData.part_instances[d.i]==b)return d}return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"partID not found: '"+b+"'"),null},_posePartInstances:function(a){if(null!==this._mAnimationsData){this._mOldImageSet=this.imageSet;var b=this._mAnimationsData.animations[this._mCurrentAnimationID],c=b.frames[a];if(!c)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"invalid frame "+a+" for animation '"+this._mCurrentAnimationID+"'");for(var d in this._mAccessedParts)this._mAccessedParts.hasOwnProperty(d)&&this._mAccessedParts[d].animate&&(this._mAccessedParts[d].sprite.visible=!1);for(var e=this._mPartInstances.length,f=c.instances.length;e<f;)this._mPartInstances.push(this.addChild(new TGE.Sprite)),++e;for(var g=0;g<e;g++){var h=this._mPartInstances[g],i=g<f;if(h.visible=i,i){var j=c.instances[g],k=this._mAnimationsData.part_instances[j.i],l=this._mAnimationsData.parts[k],m=!0;if(this._mAccessedParts[k])h.visible=!1,h.parent.addChildAt(this._mAccessedParts[k].sprite,h.getIndex()),h=this._mAccessedParts[k].sprite,this._mAccessedParts[k].animate?h.visible=!0:m=!1;else if(l.width>0&&l.height>0){var n=null===this.imageSet?k:this.imageSet+"_"+k;h.setImage(n)}else h.setImage(null);if(m){h.registrationX=l.regx,h.registrationY=l.regy;var o=void 0===j.a?1:j.a,p=j.b||0,q=j.c||0,r=void 0===j.d?1:j.d,s=j.x||0,t=j.y||0,u=void 0===j.o?1:j.o;o*=this._mInverseGlobalScale,p*=this._mInverseGlobalScale,q*=this._mInverseGlobalScale,r*=this._mInverseGlobalScale,h.setLocalTransform(o,p,q,r,s,t),h.alpha=u}}}}},_jumpToFrame:function(a,b){(a<0||a>=this._mTotalFrames)&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"invalid frame "+a+" for animation '"+this._mCurrentAnimationID+"'"),this._mAnimationDir=b?-1:1,this._setFrame(a),this._mAge=this._mTotalFrames<=1?0:this._mCurrentFrame/(this._mTotalFrames-1)},_setFrame:function(a){if(a!==this._mCurrentFrame){a=Math.max(0,Math.min(a,this._mTotalFrames-1)),this._mCurrentFrame=a;var b=!1;this._mStopFrame>=0&&(this._mCurrentFrame-this._mStopFrame)*this._mAnimationDir>=0&&(this._mCurrentFrame=this._mStopFrame,this._mPlaying=!1,b=!0),this.handleEvent({type:"enterFrame",frame:this._mCurrentFrame}),this._posePartInstances(this._mCurrentFrame),this.handleEvent({type:"frame"+this._mCurrentFrame.toString(),frame:this._mCurrentFrame,rendered:!0});var c=this._mAnimationDir>0?this._mTotalFrames-1:0;if((!this.looping||this._mRepeats>0)&&this._mPlaying&&(a===c||b)){if(this._mRepeats>1)return void(this._mRepeats-=1);if(this._mPlaying=!1,this.onComplete){var d=this.onComplete;this.onComplete=null,d()}if(this.handleEvent({type:"finished",frame:this._mCurrentFrame}),0!==this._mChainedAnimations.length){var e=this._mChainedAnimations.shift();this.setCurrentAnimation(e.anim,e.looping,!1),"number"==typeof e.endFrame?this.playFromTo(e.startFrame,e.endFrame):(this._mPlaying=!0,e.startFrame&&this._jumpToFrame(e.startFrame))}else this._mRemoveWhenFinished&&this.markForRemoval()}}},_updateAnimation:function(a){if(!this._mPlaying&&this.fps>0)return void(this.imageSet!==this._mOldImageSet&&this._posePartInstances(this._mCurrentFrame));var b=1/this.fps,c=b*this._mTotalFrames;this._mAge+=a.elapsedTime*this._mAnimationDir/c,this._mAge<0&&(this._mAge=this._mAge%1+1,this.looping||(this._mAge=0)),this._mAge>=1&&(this._mAge%=1,this.looping||(this._mAge=1));var d=Math.round(this._mAge*(this._mTotalFrames-1)),e=this._mCurrentFrame;if(e!=d)for(;;){e+=this._mAnimationDir,e>=this._mTotalFrames&&(e=0),e<0&&(e=this._mTotalFrames-1);var f=this._mAnimationsData.animations[this._mCurrentAnimationID],g=f.frames[e].movement;if(g&&(this.x+=g.x*this.scaleX,this.y+=g.y*this.scaleY),e==d)break;this.handleEvent({type:"frame"+e,frame:e,rendered:!1})}this._setFrame(d)}},extend(TGE.TFXAnimationSet,TGE.DisplayObjectContainer),TGE.TFXAnimationSet._getKeys=function(a,b){for(var c=[];b>0;)c=a[b-1].slice(1).concat(c),b=a[b-1][0];return c},TGE.TFXAnimationSet._expand=function(a,b){var c,d,e,f;if("object"==typeof b)if("[object Array]"===Object.prototype.toString.apply(b))for(c=[],d=0;d<b.length;d++)c.push(TGE.TFXAnimationSet._expand(a,b[d]));else for(c={},f=TGE.TFXAnimationSet._getKeys(a,b[""][0]),d=0;d<f.length;d++)c[f[d]]=TGE.TFXAnimationSet._expand(a,b[""][d+1]);else c=b;if(c.version&&2===c.version){for(var e in c.animations)if(c.animations.hasOwnProperty(e))for(var g={},h=c.animations[e],i=0;i<h.frames.length;i++)for(var j=h.frames[i],d=0;d<j.instances.length;d++){var k=j.instances[d],l=.001;void 0===k.a&&Math.abs(g[k.i].a-1)>l&&(k.a=g[k.i].a),void 0===k.b&&Math.abs(g[k.i].b)>l&&(k.b=g[k.i].b),void 0===k.c&&Math.abs(g[k.i].c)>l&&(k.c=g[k.i].c),void 0===k.d&&Math.abs(g[k.i].d-1)>l&&(k.d=g[k.i].d),void 0===k.x&&Math.abs(g[k.i].x)>l&&(k.x=g[k.i].x),void 0===k.y&&Math.abs(g[k.i].y)>l&&(k.y=g[k.i].y),void 0===k.o&&Math.abs(g[k.i].o-1)>l&&(k.o=g[k.i].o),g[k.i]=k}}else if(c.version&&3===c.version)for(var e in c.animations)if(c.animations.hasOwnProperty(e))for(var g={},m=null,h=c.animations[e],i=0;i<h.frames.length;i++){var j=h.frames[i];j.instances_map?m=j.instances_map:j.instances_map=m,j.instances||(j.instances=[]);for(var n=j.instances.length,d=n-1;d>=0;d--){var k=j.instances[d],o=j.instances_map[k.i];d!==o&&(j.instances[o]=k,j.instances[d]=null)}for(var p in j.instances_map)if(j.instances_map.hasOwnProperty(p)){var q=j.instances_map[p];j.instances[q]||(j.instances[q]={i:p})}for(var d=0;d<j.instances.length;d++){var k=j.instances[d],l=.001;void 0===k.a&&Math.abs(g[k.i].a-1)>l&&(k.a=g[k.i].a),void 0===k.b&&Math.abs(g[k.i].b)>l&&(k.b=g[k.i].b),void 0===k.c&&Math.abs(g[k.i].c)>l&&(k.c=g[k.i].c),void 0===k.d&&Math.abs(g[k.i].d-1)>l&&(k.d=g[k.i].d),void 0===k.x&&Math.abs(g[k.i].x)>l&&(k.x=g[k.i].x),void 0===k.y&&Math.abs(g[k.i].y)>l&&(k.y=g[k.i].y),void 0===k.o&&Math.abs(g[k.i].o-1)>l&&(k.o=g[k.i].o),g[k.i]=k}}return c},TGE.Window=function(a,b){TGE.Window.superclass.constructor.call(this),this._mLayers={},this._mFadeDuration=0,this._mFadeColor=null,this._mFadePanel=null,this._mFadingOut=!1,this._mCallback=null,this._mUpdateListenerID=null,this.registrationX=0,this.registrationY=0,this.width=a,this.height=b,this.mouseEnabled=!0},TGE.Window._sTrackWindows=!1,TGE.Window._sActiveWindows=[],TGE.Window.prototype={setup:function(a){return void 0!==a.layout||void 0!==a.onResize||this._mEventListeners.resize&&0!==this._mEventListeners.resize.length||(a.layout="match"),TGE.Window.superclass.setup.call(this,a),this},transitionToWindow:function(a){var b=this._createNewWindow(a);return this._mFadeDuration=0,b.show(this.stage,this.close.bind(this)),b},overlayWindow:function(a){var b=this._createNewWindow(a);return b.show(this),b},resetToWindow:function(a){var b=this._createNewWindow(a);return this.stage.removeChildren(),b.show(this.stage),b},createLayer:function(a){var b=this.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:this.width,height:this.height,instanceName:a,layout:"match"}));this._mLayers[a]=b},getLayer:function(a){return a in this._mLayers?this._mLayers[a]:null},show:function(a,b){if(a.addChild(this),this._mCallback="function"==typeof b?b:null,this._mFadeDuration>0?(this.alpha=0,this._mUpdateListenerID=this.addEventListener("update",this._updateTransitions.bind(this))):null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null),TGE.Window._sTrackWindows){var c=this._windowName();TGE.Window._sActiveWindows.push(c),this.addEventListener("remove",this._removeFromDebugList.bind(this,c))}},close:function(a){this._mCallback="function"==typeof a?a:null,this._mFadeDuration>0?(this._mFadingOut=!0,"number"!=typeof this._mUpdateListenerID&&(this._mUpdateListenerID=this.addEventListener("update",this._updateTransitions.bind(this)))):this._forceClose()},setupFade:function(a,b){this._mFadeColor=b||null,this._mFadeDuration=a,null!==this._mFadePanel&&null===this._mFadeColor&&this._destroyFadePanel(),null!==this._mFadePanel&&(this._mFadePanel.backgroundColor=this._mFadeColor)},_createNewWindow:function(a){var b=new a.windowClass(this.width,this.height);return b.setup(a),"number"==typeof a.fadeTime&&b.setupFade(a.fadeTime),b},_forceClose:function(){this.markForRemoval(),null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null)},_windowName:function(){for(var a in window)if(window[a]==this.constructor)return a;return"TGE.Window"},_removeFromDebugList:function(a){if(TGE.Window._sTrackWindows)for(var b=TGE.Window._sActiveWindows.length-1;b>=0;b--)if(TGE.Window._sActiveWindows[b]===a)return void TGE.Window._sActiveWindows.splice(b,1)},_updateTransitions:function(a){var b=!1,c=a.elapsedTime;null!==this._mFadeColor&&null===this._mFadePanel&&this._setupFadePanel();var d=null===this._mFadePanel?this.alpha:1-this._mFadePanel.alpha;this._mFadeDuration>0?this._mFadingOut?(d-=c*(1/this._mFadeDuration))<0&&(d=0,this._forceClose()):d<1&&(d+=c*(1/this._mFadeDuration))>=1&&(d=1,b=!0,this.removeEventListener("update",this._mUpdateListenerID),this._mUpdateListenerID=null):(d=1,b=!0),null===this._mFadePanel?this.alpha=d:(this._mFadePanel.visible=!0,this._mFadePanel.alpha=1-d,this.alpha=1),b&&null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null)},_setupFadePanel:function(){this._mFadePanel=(new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,backgroundColor:this._mFadeColor}),this._mFadePanel.registrationX=this._mFadePanel.registrationY=0,this.addChild(this._mFadePanel)},_destroyFadePanel:function(){null!==this._mFadePanel&&(this._mFadePanel.markForRemoval(),this._mFadePanel=null)}},extend(TGE.Window,TGE.Sprite),TGE.Button=function(){TGE.Button.superclass.constructor.call(this),this.enabled=!0,this.idleColor=TGE.Button.DefaultIdleColor,this.hoverColor=TGE.Button.DefaultHoverColor,this.downColor=TGE.Button.DefaultDownColor,this.disableColor=TGE.Button.DefaultDisableColor,this.verticalPressOffset=TGE.Button.DefaultVerticalPressOffset,this._mState="idle",this._mNumStates=1,this._mTextObject=null,this.addEventListener("mousedown",this._setButtonState.bind(this,"down")),this.addEventListener("mouseup",this._setButtonState.bind(this,"hover")),this.addEventListener("mouseupoutside",this._setButtonState.bind(this,"idle")),this.addEventListener("mouseout",this._setButtonState.bind(this,"idle")),this.addEventListener("mouseover",this._buttonMouseOver),this.addEventListener("click",this._onClick),this.addEventListener("update",this._update),this.pressFunction=null},TGE.Button.DefaultWidth=250,TGE.Button.DefaultHeight=60,TGE.Button.DefaultFont="bold 40px Arial",TGE.Button.DefaultTextColor="#000",TGE.Button.DefaultIdleColor="#ddd",TGE.Button.DefaultHoverColor="#ffc",TGE.Button.DefaultDownColor="#ccf",TGE.Button.DefaultDisableColor="#888",TGE.Button.DefaultVerticalPressOffset=0,TGE.Button.prototype={setup:function(a){TGE.Button.superclass.setup.call(this,a),"number"==typeof a.numStates&&(this._mNumStates=a.numStates),this._mNumStates>1&&void 0!==a.image&&this.setImage(a.image,1,this._mNumStates),"function"==typeof a.pressFunction&&(this.pressFunction=a.pressFunction);"object"==typeof a.text&&(this._mTextObject=this.addChild((new TGE.Text).setup(a.text)));return a.image||(this.width="number"==typeof a.width?a.width:TGE.Button.DefaultWidth,this.height="number"==typeof a.height?a.height:TGE.Button.DefaultHeight,this.idleColor="string"==typeof a.idleColor?a.idleColor:TGE.Button.DefaultIdleColor,this.hoverColor="string"==typeof a.hoverColor?a.hoverColor:TGE.Button.DefaultHoverColor,this.downColor="string"==typeof a.downColor?a.downColor:TGE.Button.DefaultDownColor,this.disableColor="string"==typeof a.disableColor?a.disableColor:TGE.Button.DefaultDisableColor,this.backgroundColor=this.idleColor),this.verticalPressOffset="number"==typeof a.verticalPressOffset?a.verticalPressOffset:TGE.Button.DefaultVerticalPressOffset,"boolean"==typeof a.enabled&&(this.enabled=a.enabled),this},_update:function(a){if(!this.enabled)return void this._setButtonState("disable")},_buttonMouseOver:function(a){this._setButtonState(this._mMouseDown?"down":"hover")},_onClick:function(a){this.enabled&&null!==this.pressFunction&&this.pressFunction.call(this,a.currentTarget)},_setButtonState:function(a){if(a!=this._mState)if(this._mState=a,null!==this._mRendererTexture){var b=0;switch(this._mState){case"disable":b=3;break;case"down":b=2;break;case"hover":b=1;break;case"idle":default:b=0}b<this._mNumStates&&this.setSpriteIndex(b)}else switch(this._mState){case"disable":this.backgroundColor=this.disableColor;break;case"down":this.backgroundColor=this.downColor;break;case"hover":this.backgroundColor=this.hoverColor;break;case"idle":default:this.backgroundColor=this.idleColor}},_draw:function(a){var b=0!==this.verticalPressOffset&&this.mouseEnabled&&this.isMouseOver()&&"down"===this._mState;b&&(this.y+=this.verticalPressOffset),TGE.Button.superclass._draw.call(this,a),b&&(this.y-=this.verticalPressOffset)}},extend(TGE.Button,TGE.Sprite),Object.defineProperty(TGE.Button.prototype,"text",{get:function(){return this._mTextObject},set:function(a){this._mTextObject=a}}),TGE.Text=function(){return TGE.Text.superclass.constructor.call(this),this.text="",this.textID="",this.fontFamily="Arial",this.fontSize=20,this.fontWeight="normal",this.fontStyle="normal",this.hAlign="center",this.vAlign="middle",this.textColor=null,this.wrapWidth=-1,this.lineSpacing=.05,this.strokeWidth=0,this.strokeColor=null,this.cacheAsBitmap=TGE.Text.CacheByDefault,this.cacheBitmapScale=1,this._mPreviousText=null,this._mPreviousTextID=null,this._mPreviousFont=null,this._mPreviousWrapWidth=null,this._mPreviousLineSpacing=0,this._mLines=[],this._mLineHeight=0,this._mLineSpace=0,this._mCachePadding=0,this._mFontFallbacks=[],this._mVerticalPosition=0,this._mOffscreenCanvas=null,this._mOffscreenContext=null,this._mTx=1,this._mTy=1,this._mRendererImage=null,this.cacheAsBitmap&&(this._mOffscreenCanvas=document.createElement("canvas"),this._mOffscreenContext=this._mOffscreenCanvas.getContext("2d")),this},TGE.Text.CacheByDefault=!1,TGE.Text.DefaultBitmapScale=2,TGE.Text.CachePaddingPercent=.4,TGE.Text.LoggedFontDeprecated=!1,TGE.Text._sAsianLanguages=["ja","zh","tw","ko","th"],TGE.Text._sRightToLeftLangages=["ar","he","he-il","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-sa"],TGE.Text.TextIDs=null,TGE.Text.Language="en",TGE.Text.LocalizedStrings=null,TGE.Text.GetString=function(a){TGE.Text.TextIDs=TGE.Text.LocalizedStrings=TGE.Text.LocalizedStrings||TGE.Text.TextIDs||{};var b=TGE.Text.TextIDs[a];return b?"string"==typeof b?b:b[TGE.RemoteSettings("lang")]||b.en||"":(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Text.TextIDs has no translations for id '"+a+"'"),"")},TGE.Text.prototype={setup:function(a){if(TGE.Text.superclass.setup.call(this,a),this.textDef=a.textDef||null,("string"==typeof a.text||"number"==typeof a.text)&&(this.text=a.text),"string"==typeof a.textID&&(this.textID=a.textID),"string"==typeof a.fontFamily&&(this.fontFamily=a.fontFamily),"number"==typeof a.fontSize&&(this.fontSize=a.fontSize),"string"==typeof a.fontStyle&&(this.fontStyle=a.fontStyle),"string"==typeof a.hAlign&&(this.hAlign=a.hAlign),"string"==typeof a.vAlign&&(this.vAlign=a.vAlign),"string"==typeof a.color&&(this.textColor=a.color),"string"==typeof a.textColor&&(this.textColor=a.textColor),"number"==typeof a.wrapWidth&&(this.wrapWidth=a.wrapWidth),"number"==typeof a.lineSpacing&&(this.lineSpacing=a.lineSpacing),"number"==typeof a.strokeWidth&&(this.strokeWidth=a.strokeWidth),"string"==typeof a.strokeColor&&(this.strokeColor=a.strokeColor),this.cacheAsBitmap="boolean"==typeof a.cacheAsBitmap?a.cacheAsBitmap:TGE.Text.CacheByDefault,this.cacheBitmapScale="number"==typeof a.cacheBitmapScale?a.cacheBitmapScale:TGE.Text.DefaultBitmapScale,Array.isArray(a.fontFallbacks)&&(this.fontFallbacks=a.fontFallbacks),"string"!=typeof a.fontWeight||"bold"!==a.fontWeight&&"bolder"!==a.fontWeight&&"lighter"!==a.fontWeight&&"normal"!==a.fontWeight){if("number"==typeof a.fontWeight){var b=parseInt(this.fontWeight);b&&(b<100||b>900)?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"fontWeight must be bold, bolder, lighter, normal, or an int between 100 and 900"):this.fontWeight=a.fontWeight}}else this.fontWeight=a.fontWeight;return"string"==typeof a.font&&this._splitUpFont(a.font),"string"==typeof a.textDef&&(GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS[a.textDef]?this._applyTextDef(a.textDef):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"GameConfig.TEXT_DEFS is missing entry for: "+a.textDef)),this.cacheAsBitmap&&!this._mOffscreenCanvas&&(this._mOffscreenCanvas=document.createElement("canvas"),this._mOffscreenContext=this._mOffscreenCanvas.getContext("2d")),this.text=this._getText(),this._textChanged(),this.text=this._rtlLanguage()?this._reverseSymbols():this.text,this._textChanged(),this},_getText:function(){return this.textID?TGE.Text.GetString(this.textID):this.text.toString()},_textChanged:function(a){if(!TGE.GameWorldEntity||this._mOffscreenCanvas){var b=this._mOffscreenContext?this._mOffscreenContext:this._mFullStage._mRenderer.getCanvasContext();b.save(),b.font=this.font,this._mLines=[],this._mLineHeight=30,this._mLineSpace=0;try{var c=this.font.indexOf("px"),d=this.font.substring(0,c).replace(/[^\d.]/g,"");this._mLineHeight=parseInt(d,10),this._mLineSpace=this._mLineHeight*this.lineSpacing>>0,this._mLineHeight+=this._mLineSpace}catch(v){}if(this.wrapWidth>0||-1!==this.text.indexOf("\n")){var e=this._asianLanguage(),f=1;if("justify"===this.hAlign)var f=b.measureText("     ").width/5;this.width=this.wrapWidth;var g=this.wrapWidth>0?this.wrapWidth:Number.MAX_VALUE;this.textWidth=0;for(var h=this.text.split("\n"),i=0;i<h.length;++i){for(var j,k=this._splitLine(h[i]),l=k[0],m=b.measureText(l).width,n=1;n<k.length;n++){var o=l+(e?"":" ")+k[n];j=b.measureText(o),j.width>g?(this._addLine(l,m,f,!1),l=k[n],m=b.measureText(l).width):(l=o,m=j.width)}this._addLine(l,m,f,!0)}}else{this._mLines.push(this.text);var j=b.measureText(this.text);this.textWidth=this.width=j.width}if(this.height=this._mLineHeight*this._mLines.length-this._mLineSpace,this.registrationX=null===this.hAlign||"center"===this.hAlign?.5:"left"===this.hAlign||"justify"===this.hAlign?0:1,this.registrationY=null===this.vAlign||"middle"===this.vAlign?.5:"top"===this.vAlign?0:1,this._mLocalTransformDirty=!0,this._mVerticalPosition=0,"top"===this.vAlign){var p=this.measureTextAdvanced(b,this._mLines[0]);this._mVerticalPosition=p.actualBoundingBoxAscent}else if("middle"===this.vAlign){var q=(this._mLines.length-1)*this._mLineHeight,p=this.measureTextAdvanced(b,this._mLines[this._mLines.length-1]);this._mVerticalPosition=-q/2+p.actualBoundingBoxAscent/2}else if("bottom"===this.vAlign){var q=(this._mLines.length-1)*this._mLineHeight,p=this.measureTextAdvanced(b,this._mLines[this._mLines.length-1]);q+=p.actualBoundingBoxDescent,this._mVerticalPosition=-q}if(b.restore(),this.cacheAsBitmap)if(a){this._mCachePadding=this._mLineHeight*TGE.Text.CachePaddingPercent,this._mOffscreenCanvas.width=0;var n=(this.width+2*this._mCachePadding)*this.cacheBitmapScale,r=(this.height+2*this._mCachePadding)*this.cacheBitmapScale,s=a.getImageSize(n),t=a.getImageSize(r);if(this._mTx=n/s,this._mTy=r/t,this._mOffscreenCanvas.width=s,this._mOffscreenCanvas.height=t,this._mOffscreenContext.clearRect(0,0,this._mOffscreenCanvas.width,this._mOffscreenCanvas.height),a.alphamapOffscreenText()){this._mOffscreenContext.fillStyle="#000",this._mOffscreenContext.fillRect(0,0,this._mOffscreenCanvas.width,this._mOffscreenCanvas.height);var u=this.textColor;this.textColor="#fff",this._objectDraw(null,this._mOffscreenContext),this.textColor=u}else this._objectDraw(null,this._mOffscreenContext);this._mRendererImage=a.updateTextImage(this._mRendererImage,this._mOffscreenCanvas)}else this._mPreviousText=this._mPreviousTextID=null;this.parent&&this.handleEvent(TGE._ResizeEvent)}},_rtlLanguage:function(){return-1!==TGE.Text._sRightToLeftLangages.indexOf(TGE.RemoteSettings("lang"))&&this._endPunctuation()},_asianLanguage:function(){var a=TGE.RemoteSettings("lang").split("-")[0];return-1!==TGE.Text._sAsianLanguages.indexOf(a)},_endPunctuation:function(){if("!"==this.text[this.text.length-1]||"."==this.text[this.text.length-1]||"?"==this.text[this.text.length-1]||":"==this.text[this.text.length-1])return!0},_reverseSymbols:function(){for(var a="",b=this._mLines[this._mLines.length-1],c="",d=this.text[this.text.length-1],e=0;e<b.length-1;e++)a+=b[e];for(var e=0;e<this._mLines.length;e++)e!=this._mLines.length-1&&(c+=this._mLines[e],c+=" ");return c+d+a},_splitLine:function(a){return this._asianLanguage()?a:a.split(" ")},_addLine:function(a,b,c,d){if(this.wrapWidth>0&&"justify"===this.hAlign&&!d){var e=this.wrapWidth-b,f=Math.round(e/c),g=a.split(" "),h=g.length;if(h>1){for(var i=[],j=1;j<=h-1;j++){var k=Math.floor(f/(h-1)),l=Array(k+2).join(" ");i.push(l)}var m=f-k*i.length;if(m>0){for(var n=[],o=i.length,p=0;p<o;p++)n.push(p);for(p=0;p<o;p++){var q=Math.floor(Math.random()*o),r=n[p];n[p]=n[q],n[q]=r}for(p=0;p<m;p++)i[n[p]]=i[n[p]]+" "}a="";for(var j=0;j<h-1;j++)a=a.concat(g[j]),a=a.concat(i[j]);a=a.concat(g[j])}b+=f*c}this._mLines.push(a),this.width=Math.max(this.width,b),this.textWidth=Math.max(this.textWidth,b)},_applyTextDef:function(a){var b,c=a;if("string"==typeof a&&(GameConfig.TEXT_DEFS?(c=GameConfig.TEXT_DEFS[a],(b=GameConfig.TEXT_DEFS[a+"_"+TGE.RemoteSettings("lang")])&&b.textDef===a&&(b=null)):c=null),c)if(c.textDef&&this._applyTextDef(c.textDef),c.pickTextDef){var d=c.pickTextDef.call(this,this.stage.height/this.stage.width);c[d]?this._applyTextDef(c[d]):TGE.Debug.Log(TGE.Debug.LOG_ERROR,d+" sub-object is not defined for textDef: "+a)}else if(c.portrait)this._applyTextDef(this.stage.isLandscape()?c.landscape:c.portrait);else{for(var e in c)"textDef"!==e&&null!=c[e]&&(this[e]=c[e]);if(b)for(e in b)"textDef"!==e&&null!=b[e]&&(this[e]=b[e])}},_objectDraw:function(a,b){if(this.textDef&&this._applyTextDef(this.textDef),this.textID||null!==this.text&&""!==this.text)if(this._mPreviousText===this._getText()&&this._mPreviousTextID===this.textID&&this._mPreviousLineSpacing===this.lineSpacing&&this._mPreviousFont===this.font&&this._mPreviousWrapWidth===this.wrapWidth||(this._mPreviousTextID=this.textID,this._mPreviousText=this.text=this._getText(),this._mPreviousLineSpacing=this.lineSpacing,this._mPreviousFont=this.font,this._mPreviousWrapWidth=this.wrapWidth,this._mLines=[],b||this._textChanged(a)),0===this._mLines.length&&this._mLines.push(this.text),this.cacheAsBitmap&&!b)this._mRendererImage||(this._mRendererImage=a.updateTextImage(this._mRendererImage,this._mOffscreenCanvas)),a.drawTextImage(this._mRendererImage,this.textColor,this.width,this.height,this._mCachePadding,this._mTx,this._mTy);else{var c=b||a.getCanvasContext();if(b){var d="center"===this.hAlign?this.width/2:"justify"===this.hAlign||"left"===this.hAlign?0:this.width;d+=this._mCachePadding,d*=this.cacheBitmapScale;var e=(this.height/2+this._mCachePadding)*this.cacheBitmapScale;c.setTransform(this.cacheBitmapScale,0,0,this.cacheBitmapScale,d,e)}else{var f=null!==this._mFullStage&&1!==this._mFullStage._mScale?this._mFullStage._mScale:1;a.setWorldTransform(this._mWorldTransformNoReg,f)}c.textAlign=null!==this.hAlign?"justify"===this.hAlign?"left":this.hAlign:"center",c.textBaseline="alphabetic",c.font=null!==this.font?this.font:"Arial",c.fillStyle=null!==this.textColor?this.textColor:"#000",this.strokeWidth>0&&(c.lineWidth=this.strokeWidth,c.strokeStyle=null!==this.strokeColor?this.strokeColor:"#fff",c.lineJoin="round");for(var e=this._mVerticalPosition,g=0;g<this._mLines.length;g++)this.strokeWidth>0&&c.strokeText(this._mLines[g],0,e),null===this.textColor&&0!==this.strokeWidth||c.fillText(this._mLines[g],0,e),e+=this._mLineHeight;this.strokeWidth>0&&(c.lineJoin="miter")}},measureTextAdvanced:function(a,b){var c=a.measureText(b);if("number"==typeof c.actualBoundingBoxAscent&&"number"==typeof c.actualBoundingBoxDescent)return c;var d=Math.ceil(c.width),e=2*this._mLineHeight,f=document.createElement("canvas");f.width=d,f.height=e;var g=f.getContext("2d");g.beginPath(),g.rect(0,0,d,e),g.fillStyle="white",g.fill();var h=Math.floor(d/2),i=Math.floor(e/2);g.font=this.font,g.fillStyle="black",g.textAlign="center",g.textBaseline="alphabetic",g.fillText(b,h,i);for(var j=h,k=i,l=g.getImageData(0,0,d,e),m=0;m<e;m++)for(var n=0;n<d;n++){var o=m*(4*d)+4*n;l.data[o]<=100&&(m<j&&(j=m),m>k&&(k=m))}return{width:c.width,actualBoundingBoxAscent:i-j,actualBoundingBoxDescent:k-i}},_splitUpFont:function(a){var b=/^(normal\s|italic\s|)(bolder\s|bold\s|lighter\s|normal\s|[0-9]{3}\s|)[0-9]+\.?[0-9]*(px|pt)\s[A-z0-9-,\s]+$/,c=/^(bolder\s|bold\s|lighter\s|normal\s|)(normal\s|italic\s|[0-9]{3}\s|)[0-9]+\.?[0-9]*(px|pt)\s[A-z0-9-,\s]+$/;a.match(b)||a.match(c)||TGE.Debug.Log(TGE.Debug.LOG_ERROR,a+" is incorrect font format. Correct format is: [fontStyle](optional) [fontWeight](optional) [fontSize]px [fontFamily]"),TGE.Text.LoggedFontDeprecated||(TGE.Text.LoggedFontDeprecated=!0,TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Font property is deprecated. Use fontFamily, fontSize, fontWeight, and fontStyle."));var d=/\bitalic\b/,e=a.match(d);e&&(this.fontStyle=e[0]);var f=/\b(bolder|bold|lighter|[0-9]{1,3})(?=\s)/g,g=a.match(f);g&&(this.fontWeight=isNaN(g[0])?g[0]:parseFloat(g[0]));var h=/[0-9]+\.?[0-9]*(?=(px|pt))/g,i=a.match(h);i&&(this.fontSize=parseFloat(i[0]));var j=/(?:px\s|pt\s)([A-z0-9-,\s]+)$/,k=a.match(j);k&&(this.fontFamily=k[1])}},extend(TGE.Text,TGE.DisplayObjectContainer),Object.defineProperty(TGE.Text.prototype,"font",{get:function(){var a=window._TREFONTS&&_TREFONTS[this.fontFamily],b=TGE.BrowserDetect.oniOS&&"bold"===this.fontWeight&&a&&("string"==typeof a.data||void 0===a.data[700]);return this.fontStyle+" "+(b?"":this.fontWeight+" ")+this.fontSize+"px '"+this.fontFamily+"'"+this.fontFallbacks+", sans-serif"},set:function(a){this._splitUpFont(a)}}),Object.defineProperty(TGE.Text.prototype,"color",{get:function(){return this.textColor},set:function(a){this.textColor=a}}),Object.defineProperty(TGE.Text.prototype,"fontFallbacks",{get:function(){var a="";for(var b in this._mFontFallbacks)a+=", '"+this._mFontFallbacks[b]+"'";return a},set:function(a){this._mFontFallbacks=a}}),TGE.CachedContainer=function(){TGE.CachedContainer.superclass.constructor.apply(this,arguments),this.canvas=document.createElement("canvas"),this.offscreenRenderer=new TGE.CanvasRenderer(this.canvas),this.canvasScale=1},TGE.CachedContainer.prototype={setup:function(a){return TGE.CachedContainer.superclass.setup.call(this,a),a.width&&a.height?(this.width=a.width,this.height=a.height):(this.width=this.height=100,TGE.Debug.Log(TGE.Debug.LOG_WARNING,"width and height need to be defined for cached containers. Cached containers will clip any child that's outside of its width and height bounds.")),this.centerRegistration=!!a.centerRegistration&&a.centerRegistration,this.canvasScale=a.canvasScale?a.canvasScale:1,this},cache:function(){var a=this._mWorldTransform,b=this._mWorldTransformNoReg;this._mWorldTransform=TGE.IDENTITY,this._mWorldTransformNoReg=TGE.IDENTITY,this.canvas.width=this.width*this.canvasScale,this.canvas.height=this.height*this.canvasScale,this.offscreenRenderer.getCanvasContext().clearRect(0,0,this.width,this.height),this.stage._mScale=this.canvasScale;for(var c=0;c<this.numChildren();++c){var d=this.getChildAt(c);this.centerRegistration&&!d._centeredRegistration&&(0==this.width||0==this.height?TGE.Debug.Log(TGE.Debug.LOG_WARNING,"width and height were not defined when the cache function was called on a cached container."):(d.x+=this.width*this.registrationX,d.y+=this.height*this.registrationY,d._centeredRegistration=!0)),d._draw(this.offscreenRenderer)}this.stage._mScale=1,this._mWorldTransform=a,this._mWorldTransformNoReg=b},_objectDraw:function(a){var b=a.getCanvasContext();b&&b.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,this.width,this.height)},_updateAABB:function(){TGE.DisplayObject.prototype._updateAABB.call(this)}},extend(TGE.CachedContainer,TGE.DisplayObjectContainer),TGE.AdHeader=function(){if(null!==TGE.AdHeader._sInstance)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"there can be only one instance of a TGE.AdHeader object"),TGE.AdHeader._sInstance;TGE.AdHeader._sInstance=this,TGE.AdHeader.superclass.constructor.call(this),this.closeButtonImage=null,this.closeFunction=null,this.width=this.height=100},TGE.AdHeader._sInstance=null,TGE.AdHeader._sCustomSettings={},TGE.AdHeader._sButtonSize=100,TGE.AdHeader.Create=function(a,b){if(!TGE.Game.GetInstance()||!TGE.Game.GetInstance().stage)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AdHeader.Create was called too early - wait until the TGE game object has been launched"),null;null!==TGE.AdHeader._sInstance&&(TGE.AdHeader._sInstance.markForRemoval(),TGE.AdHeader._sInstance=null);var c=TGE.Game.GetInstance()._mFullStage.addChild((new TGE.AdHeader).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.rotation=0,this.x=this.y=0,this.width=this.stage.width,this.height=this.stage.height}}));c.header=c.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.x=this.y=0,this.width=this.stage.width,this.height=Math.min(.1*this.stage.width,.1*this.stage.height)}})),c.closeButton=c.header.addChild((new TGE.DisplayObjectContainer).setup({width:TGE.AdHeader._sButtonSize,height:TGE.AdHeader._sButtonSize,layout:{topAnchor:0,rightAnchor:0,scaleToHeight:1},visible:!0===b})),c.closeFunction=a,c.closeButton.addEventListener("mousedown",a),c.closeButton.addEventListener("drawbegin",function(a){if(!this.parent.parent.closeButtonImage){var b=a.canvasContext;b.save(),this.offscreenContext||(this.offscreenCanvas=document.createElement("canvas"),this.offscreenContext=this.offscreenCanvas.getContext("2d"),this.offscreenCanvas.width=0,this.offscreenCanvas.width=100,this.offscreenCanvas.height=100,this.offscreenContext.strokeStyle="white",this.offscreenContext.lineWidth=16,this.offscreenContext.lineCap="round",this.offscreenContext.shadowColor="black",this.offscreenContext.shadowBlur=21,this.offscreenContext.moveTo(25,25),this.offscreenContext.lineTo(75,75),this.offscreenContext.moveTo(75,25),this.offscreenContext.lineTo(25,75),this.offscreenContext.stroke()),b.globalAlpha=.3*this.alpha,b.drawImage(this.offscreenCanvas,22,22,57,57),b.restore()}}),c.applyCustomSettings()},TGE.AdHeader.GetInstance=function(){return TGE.AdHeader._sInstance},TGE.AdHeader.ShowClose=function(){TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.showCloseButton()},TGE.AdHeader.ShowCountdown=function(a){TGE.AdHeader._sInstance&&a>0&&TGE.AdHeader._sInstance.showCountdown(a)},TGE.AdHeader.ShowRewardedPlayableOverlay=function(){TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.showRewardedPlayableOverlay()},TGE.AdHeader.CustomSettings=function(a){TGE.AdHeader._sCustomSettings=a,TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.applyCustomSettings()},TGE.AdHeader.prototype={applyCustomSettings:function(){var a=TGE.AdHeader._sCustomSettings;a.closeImage&&(this.closeButtonImage=this.closeButton.addChild((new TGE.Sprite).setup({image:a.closeImage,scale:a.closeImageScale?a.closeImageScale:1}))),this.closeButton.layout={topAnchor:a.closeBoxTop?a.closeBoxTop:0,rightAnchor:a.closeBoxRight?a.closeBoxRight:0,scaleToHeight:a.closeBoxScale?a.closeBoxScale:1}},showCloseButton:function(){this.closeButton.visible||(this.closeButton.visible=!0,this.closeButton.tweenFrom({alpha:0,duration:1}))},showCountdown:function(a){this.closeButton.visible||(this.countdown=a,this.countdownText=this.header.addChild((new TGE.Text).setup({text:a.toString(),fontFamily:"Arial",fontSize:25,fontWeight:"bold",fontStyle:"normal",textColor:"#fff",hAlign:"left",vAlign:"top",layout:{topAnchor:.013,leftAnchor:.017,scaleToHeight:.6}})),this.countdownText.addEventListener("drawbegin",function(a){var b=a.canvasContext;b.save(),b.shadowColor="rgba(0, 0, 0, 1)",b.shadowBlur=4*this.scaleY}),this.countdownText.addEventListener("drawend",function(a){a.canvasContext.restore()}),this._countdownSecond())},showRewardedPlayableOverlay:function(){this.rewardedOverlay=this.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.x=this.y=0,this.width=this.stage.width,this.height=this.stage.height}})),this.rewardedOverlay.sendToBack(),this.rewardedOverlay.timeVisible=3,this.rewardedOverlay.timer=0,this.rewardedOverlay.addEventListener("mousedown",function(){this.exitRewardedPlayableOverlay()}.bind(this)),this.rewardedOverlay.addEventListener("update",function(a){this.rewardedOverlay.timer+=a.elapsedTime,this.rewardedOverlay.timer>=this.rewardedOverlay.timeVisible&&this.exitRewardedPlayableOverlay()}.bind(this));var a=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"black",alpha:.8,width:125,height:125,layout:"match"})),b=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({width:65,height:15,layout:{xPercentage:.5,yPercentage:.59,scaleToWidth:.25,scaleToHeight:.08}}));b.fillStyle="#5c8c43",b.strokeStyle="white";var c=b.addChild((new TGE.Text).setup({text:"Play this game to earn your reward!",fontFamily:"Arial",fontSize:20,color:"white",layout:{xPercentage:0,yPercentage:-2,scaleToWidth:3,scaleToHeight:1}})),d=b.addChild((new TGE.Text).setup({text:"Play Now",fontFamily:"Arial",fontSize:8,color:"white",layout:{xPercentage:.07,yPercentage:.05,scaleToWidth:.5,scaleToHeight:.7}})),e=b.addChild((new TGE.DisplayObjectContainer).setup({width:40,height:50,layout:{anchorLeft:-.35,yPercentage:0,scaleToWidth:.2,scaleToHeight:.6}})),f=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({width:240,height:30,layout:{anchorLeft:0,anchorBottom:0,scaleToWidth:.4,scaleToHeight:.05}}));f.addChild((new TGE.Text).setup({text:"Playable Ads by",fontFamily:"Arial",fontSize:16,color:"white",y:-15,x:65,scaleX:.9})),f.addChild((new TGE.Text).setup({text:"TRESENSA",fontFamily:"Arial",fontSize:16,fontStyle:"bold",color:"white",y:-15,x:160,scaleX:.9})),b.addEventListener("drawbegin",function(a){this.cornerRadius=1;var b=a.canvasContext,c=0,d=0,e=this.width,f=this.height,g=this.cornerRadius;e<2*g&&(g=e/2),f<2*g&&(g=f/2),b.beginPath(),b.moveTo(c+g,d),b.arcTo(c+e,d,c+e,d+f,g),b.arcTo(c+e,d+f,c,d+f,g),b.arcTo(c,d+f,c,d,g),b.arcTo(c,d,c+e,d,g),b.closePath(),b.fillStyle=this.fillStyle,b.strokeStyle=this.strokeStyle,b.lineWidth=2,b.stroke(),b.fill()}),e.addEventListener("drawbegin",function(a){var b=this.width,c=this.height,d=a.canvasContext;d.beginPath(),d.moveTo(0,0),d.lineTo(0,c),d.lineTo(b,c/2),d.closePath(),d.fillStyle="white",d.fill()}),f.addEventListener("drawbegin",function(a){var b=this.width,c=this.height,d=a.canvasContext;d.beginPath(),d.moveTo(0,c),d.lineTo(0,0),d.lineTo(b,0),d.lineTo(b-20,c),d.lineTo(0,c),d.closePath(),d.fillStyle="#ef2e24",d.fill()});var g=TGE.AdHeader._sCustomSettings;g.rewardedOverlayMessageText&&(c.text=g.rewardedOverlayMessageText),g.rewardedOverlayButtonText&&(d.text=g.rewardedOverlayButtonText),g.rewardedOverlayButtonColor&&(b.fillStyle=g.rewardedOverlayButtonColor),g.rewardedOverlayBackgroundColor&&(a.backgroundColor=g.rewardedOverlayBackgroundColor),g.rewardedOverlayBackgroundOpacity&&(a.alpha=g.rewardedOverlayBackgroundOpacity),g.rewardedOverlayTimeVisible&&(this.rewardedOverlay.timeVisible=g.rewardedOverlayTimeVisible),this.enterRewardedPlayableOverlay()},enterRewardedPlayableOverlay:function(){this.rewardedOverlay.tweenFrom({alpha:0,duration:.3})},exitRewardedPlayableOverlay:function(){this.rewardedOverlay.tweenTo({y:this.rewardedOverlay.height,duration:.8,easing:TGE.Tween.Back.Out})},_countdownSecond:function(){this.countdown<=0?(this.countdownText.markForRemoval(),this.countdownText=null):(this.countdownText.text=this.countdown,this.countdownText.clearTweens(),this.countdownText.alpha=1,this.countdownText.tweenTo({alpha:0,delay:.7,duration:.25}),this.performAction({delay:1,action:this._countdownSecond})),this.countdown--}},extend(TGE.AdHeader,TGE.DisplayObjectContainer),TGE.AdFooter=function(){TGE.AdFooter.__sInstance=this,TGE.AdFooter.superclass.constructor.call(this),this.instanceName="tge_isi_text",this.style="none",this.expandable=!1,this.expanded=!1,this.previousUpdateRoot=TGE.Game.GetUpdateRoot(),this.htmlPanel=null,this.panelSettings=null,this.panelHeaderText=null},TGE.AdFooter.__sInstance=null,TGE.AdFooter.Create=function(){var a=TGE.Game.GetInstance();if(!a||!a._mFullStage)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AdFooter.Create was called too early - wait until the TGE game object has been launched"),null;TGE.AdFooter.Destroy();var b;if(TGE.RemoteSettings.HasSetting("legalTextStyle")?b=TGE.RemoteSettings("legalTextStyle"):(b=getQueryString().legalTextStyle)||(b=TGE.RemoteSettings.HasSetting("useLegalText")&&TGE.RemoteSettings("useLegalText")?"simple":"none"),"none"===b)return null;a._mFullStage.addChild((new TGE.AdFooter).setup({style:b}))},TGE.AdFooter.GetInstance=function(){return TGE.AdFooter.__sInstance},TGE.AdFooter.Destroy=function(){null!==TGE.AdFooter.__sInstance&&(TGE.AdFooter.__sInstance.removeFromScene(),TGE.Game.GetInstance()._mFullStage.setGameStageHeight(1))},TGE.AdFooter.prototype={setup:function(a){switch(this.style=a.style,this.style){case"isiPanel":this.expandable=!0,this.panelSettings={expandedSize:.92,padding:4,toggleButtonRadius:.03};break;case"simple":case"promo":default:this.expandable=!1,this.panelSettings=null}if(this.expandable){var b=this.panelSettings;TGE.Game.GetInstance()._mFullStage.setGameStageHeight(1-this._panelCollapsedSize()),GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_background?a.colorDef="tge_isi_background":a.backgroundColor="#ffffff",a.registrationX=0,a.registrationY=0,a.layout=function(){this.adjustPanelPosition()};var c={registrationX:0,registrationY:0,layout:function(){this.x=this.y=0,this.width=this.parent.width,this.height=this.parent._headerBarSize()}};GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_header?c.colorDef="tge_isi_header":c.backgroundColor="#dadada",this.addChild((new TGE.DisplayObjectContainer).setup(c)),this.panelHeaderText=this.addChild((new TGE.Text).setup({text:"IMPORTANT SAFETY INFORMATION",textColor:this._headerTextColor(),textDef:GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS.tge_isi_header?"tge_isi_header":void 0,fontSize:11,fontWeight:"bold",hAlign:"left",vAlign:"middle",fontFamily:"Arial",layout:function(){var a=this.parent._uiScalingDimension(),c=a*(b.padding/100);this.x=c,this.y=.5*this.parent._headerBarSize(),this.scale=a/300}})),this.addChild((new TGE.DisplayObject).setup({registrationX:1,registrationY:0,layout:function(){this.x=this.parent.width,this.y=0,this.width=this.height=this.parent._headerBarSize()}})).addEventListener("drawend",this._drawButton),this.makeHtmlPanel(),this.addEventListener("click",this._onClick),this.addEventListener("resize",this._onResize)}else a.registrationX=.5,a.registrationY=1,a.width=125,a.height=125,a.layout=function(){this.x=this.stage.width/2,this.y=.995*this.stage.height,this.width=this.stage.width,this.height=.05*this.stage.height},this.addChild((new TGE.Text).setup({textDef:"tge_legal_footer",textColor:"#ffffff",fontSize:6,text:"",hAlign:"center",vAlign:"bottom",fontFamily:"Arial",layout:function(){var a=Math.max(this.stage.width,this.stage.height)/Math.min(this.stage.width,this.stage.height),b=1+Math.max(a-2,0),c=Math.max(this.stage.height,this.stage.width)/(640*b);this.scale=c,this.wrapWidth=.96*this.parent.width*(1/c)}})),"promo"===this.style&&(this.visible=this._footerShouldBeVisible(),this.addEventListener("update",this._updateFooterVisibility));return TGE.AdFooter.superclass.setup.call(this,a),this},makeHtmlPanel:function(){this.expanded?this.expandPanel():this.collapsePanel()},togglePanel:function(){this.expanded?this.collapsePanel():this.expandPanel()},collapsePanel:function(){this.panelSettings;this._removeIFrame(),this.expanded=!1,TGE.Game.SetUpdateRoot(this.previousUpdateRoot||this._mFullStage),this.adjustPanelPosition();var a=1,b=Math.floor(this._panelCollapsedSize()*this.height),c=Math.floor(this.width),d=this._headerBarSize();this.htmlPanel=document.createElement("iframe"),this.htmlPanel.setAttribute("style","user-select: none; pointer-events: none; border: none; margin: 0px; padding: 0px; position: absolute; top: 0px; left: "+a+"px; overflow: hidden; width: "+(c-2*a)+"px; height: "+this.height+"px;"),TGE.Game.GameDiv().appendChild(this.htmlPanel);var e=this.htmlPanel.contentWindow.document;e.open(),e.write("<style>body {margin: 0px; overflow: hidden;}</style><div style='position: absolute; top: "+(this.height-b+d)+"px; height: "+(b-d-5)+"px; color: black; overflow-x: hidden; overflow-y: hidden; font-family: Arial; font-size: "+this._fontSize()+"px; padding: 0% "+this.panelSettings.padding+"%  0% "+this.panelSettings.padding+"%;'>"+this._panelText()+"</div>"),e.close()},expandPanel:function(){this.panelSettings;this._removeIFrame(),this.expanded=!0,!TGE.Game.GetUpdateRoot()instanceof TGE.AdFooter&&(this.previousUpdateRoot=TGE.Game.GetUpdateRoot()),TGE.Game.SetUpdateRoot(this),this.adjustPanelPosition();var a=1,b=Math.floor(this.width),c=Math.floor(this.height-this._panelExpandedSize()*this.height),d=this._headerBarSize(),e=Math.floor(this.height-c-d);this.htmlPanel=document.createElement("iframe"),this.htmlPanel.setAttribute("style","border: none; margin: 0px; padding: 0px; position: absolute; top: "+(c+d)+"px; left: "+a+"px; overflow: hidden; width: "+(b-2*a)+"px; height: "+(e-a)+"px;"),TGE.Game.GameDiv().appendChild(this.htmlPanel);var f=this.htmlPanel.contentWindow.document;f.open(),f.write("<style>body {margin: 0px;}</style><div style='color: black; height: 98%; overflow-x: hidden; overflow-y: scroll; font-family: Arial; font-size: "+this._fontSize()+"px; padding: 0% "+this.panelSettings.padding+"%  0% "+this.panelSettings.padding+"%;'>"+this._panelText()+"</div>"),f.close()},adjustPanelPosition:function(){this.x=0,this.y=this._mFullStage.height*(1-(this.expanded?this._panelExpandedSize():this._panelCollapsedSize())),this.width=this._mFullStage.width,this.height=this._mFullStage.height},cleanup:function(){this._removeIFrame()},isCached:function(){return!0},cache:function(a){this.makeHtmlPanel()},_removeIFrame:function(){this.htmlPanel&&(this.htmlPanel.remove(),this.htmlPanel=null)},_drawButton:function(a){var b=a.canvasContext,c=this.parent,d=(c._uiScalingDimension(),c.panelSettings.padding,c._uiScalingDimension()*c.panelSettings.toggleButtonRadius),e=this.width/2,f=this.height/2,g=.6*d;b.beginPath(),b.arc(e,f,d,0,2*Math.PI,!1),b.fillStyle=c._headerTextColor(),b.fill(),b.beginPath(),b.strokeStyle=c._headerColor(),b.lineWidth=Math.round(1.75*window.devicePixelRatio),b.lineCap="round",b.moveTo(e-g,f),b.lineTo(e+g,f),c.expanded||(b.moveTo(e,f-g),b.lineTo(e,f+g)),b.stroke()},_onClick:function(a){if(this.expandable){var b=a.x-this.x,c=a.y-this.y,d=.15*this._uiScalingDimension();c<=d&&b>=this.width-d&&(TGE.Analytics.CustomEvent("footer"+(this.expanded?"Collapse":"Expand")),this.togglePanel())}},_onResize:function(a){var b=this._mFullStage.gameStage.getHeight(),c=this.expandable?1-this._panelCollapsedSize():1;b!==c&&this._mFullStage.setGameStageHeight(c),this.expandable&&this.makeHtmlPanel()},_panelText:function(){var a="tge_isi_text";if(GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS[a]){var b=a+"_"+TGE.RemoteSettings("lang");return GameConfig.TEXT_DEFS[b]?GameConfig.TEXT_DEFS[b].text:GameConfig.TEXT_DEFS[a].text}return""},_uiScalingDimension:function(){return Math.min(this._portraitTablet()?.8*this.width:this.width,this.height)},_panelCollapsedSize:function(){return this._mFullStage.width>this._mFullStage.height||this._portraitTablet()?.2:.25},_panelExpandedSize:function(){return this.panelSettings.expandedSize*(this._mFullStage.width>this._mFullStage.height?.9:1)},_fontSize:function(){var a=this._mFullStage.width>this._mFullStage.height||this._portraitTablet(),b=this.htmlPanel.offsetWidth,c=a?62:32;return Math.round(b/c)},_headerBarSize:function(){return Math.floor(3.5*this.panelSettings.toggleButtonRadius*this._uiScalingDimension())},_backgroundColor:function(){return GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_background||"#ffffff"},_headerColor:function(){return GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_header||"#dadada"},_headerTextColor:function(){var a=GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS.tge_isi_header;return a?a.textColor:"#000"},_footerShouldBeVisible:function(){return"promo"!==this.style||(window.TreSensa&&"boolean"==typeof TreSensa.Playable.promoScreenShowing?TreSensa.Playable.promoScreenShowing:TGE.RemoteSettings.HasSetting("state")&&"promo"===TGE.RemoteSettings("state")||!(!window.PromoBuilder||!PromoBuilder._sInstance))},_updateFooterVisibility:function(){this.visible=this._footerShouldBeVisible()},_portraitTablet:function(){return this._mFullStage.width<=this._mFullStage.height&&1.34*this._mFullStage.width>this._mFullStage.height},removeFromScene:function(){TGE.AdFooter.superclass.removeFromScene.call(this),this.cleanup(),TGE.AdFooter.__sInstance===this&&(TGE.AdFooter.__sInstance=null)}},extend(TGE.AdFooter,TGE.DisplayObjectContainer),TGE.PromoScreen=function(a){return"object"!=typeof a&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.PromoScreen requires gamescreen to be passed into its constructor.  For example, if you were calling this from gamescreen, it'd look like this:\nnew TGE.PromoScreen(this).setup({})"),TGE.PromoScreen.superclass.constructor.call(this,a.width,a.height),TGE.Game.SetUpdateRoot(this),this.type=TGE.PromoScreen.DefaultType,this.reason=TGE.PromoScreen.DefaultReason,this.entrance=TGE.PromoScreen.DefaultEntrance,this.delayBeforeClickable=TGE.PromoScreen.DefaultDelayBeforeClickable,this.pressFunction=this._openAppStore.bind(this),this.overlay=null,this.popup=null,this.icon=null,this.button=null,this.buttonText=null,this.popupText=null,this._mPopupBackground=null,this._mPossibleEntrances=["fade","none","bounce","grow","slide"],this._mAcceptingClicks=!0,this._mOldWindow=a,this},TGE.PromoScreen.DefaultType="final",TGE.PromoScreen.DefaultReason=null,TGE.PromoScreen.DefaultEntrance="bounce",TGE.PromoScreen.DefaultDelayBeforeClickable=.5,TGE.PromoScreen.DefaultDelayBetweenClickable=3,TGE.PromoScreen.DefaultOverlayBackgroundColor="#000",TGE.PromoScreen.DefaultOverlayAlpha=.5,TGE.PromoScreen.DefaultPopupLayout={xPercentage:.5,yPercentage:.5,scaleToWidth:.75,scaleToHeight:.95},TGE.PromoScreen.DefaultPopupBackgroundColor="#1852ae",TGE.PromoScreen.DefaultPopupWidth=450,TGE.PromoScreen.DefaultPopupHeight=550,TGE.PromoScreen.DefaultIconY=-145,TGE.PromoScreen.DefaultButtonBackgroundColor="#ff0a1b",TGE.PromoScreen.DefaultButtonY=150,TGE.PromoScreen.DefaultButtonWidth=290,TGE.PromoScreen.DefaultButtonHeight=65,TGE.PromoScreen.DefaultButtonTextText="GET THE APP",TGE.PromoScreen.DefaultButtonTextColor="#fff";TGE.PromoScreen.DefaultButtonTextFontFamily="Arial",TGE.PromoScreen.DefaultButtonTextFontSize=28,TGE.PromoScreen.DefaultButtonTextFontWeight="normal",TGE.PromoScreen.DefaultPopupTextText="Put your promo text here. Put your promo text here. Put your promo text here. Put your promo text here",TGE.PromoScreen.DefaultPopupTextWrapWidthPercentage=.8,TGE.PromoScreen.DefaultPopupTextFontFamily="Arial",TGE.PromoScreen.DefaultPopupTextFontSize=30,TGE.PromoScreen.DefaultPopupTextFontWeight="normal",TGE.PromoScreen.DefaultPopupTextColor="#fff",TGE.PromoScreen.DefaultPopupTextY=20,TGE.PromoScreen.prototype={setup:function(a){if(TGE.PromoScreen.superclass.setup.call(this,a),"string"==typeof a.type&&(this.type=a.type),"string"==typeof a.reason&&(this.reason=a.reason),"number"==typeof a.delayBeforeClickable&&(this.delayBeforeClickable=a.delayBeforeClickable),("function"==typeof a.pressFunction||null===a.pressFunction)&&(this.pressFunction=a.pressFunction),"string"==typeof a.entrance)if(-1!==this._mPossibleEntrances.indexOf(a.entrance))this.entrance=a.entrance;else{var b="";for(var c in this._mPossibleEntrances)b+=this._mPossibleEntrances[c]+(c!=this._mPossibleEntrances.length-1?", ":"");TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Not a valid TGE.PromoScreen entrance type. Valid entrances are: "+b)}return this._makeObjectsAndApplyParams(a),null!==this.pressFunction&&this.performAction({delay:this.delayBeforeClickable,action:this.popup.addEventListener.bind(this.popup,"click",this.pressFunction)}),TGE.Completion(this.reason),this._transitionIn(this.entrance),this.show(this._mOldWindow),this},_makeObjectsAndApplyParams:function(a){if(this.overlay=this.addChild((new TGE.Sprite).setup({backgroundColor:TGE.PromoScreen.DefaultOverlayBackgroundColor,alpha:TGE.PromoScreen.DefaultOverlayAlpha,layout:"match"})),"object"==typeof a.popup?"string"==typeof a.popup.image?this.popup=this.addChild((new TGE.Sprite).setup({image:a.popup.image,layout:TGE.PromoScreen.DefaultPopupLayout})):(this.popup=this.addChild((new TGE.DisplayObjectContainer).setup({width:TGE.PromoScreen.DefaultPopupWidth,height:TGE.PromoScreen.DefaultPopupHeight,layout:TGE.PromoScreen.DefaultPopupLayout})),this._mPopupBackground=this.popup.addChild((new TGE.DisplayObjectContainer).setup({width:100,height:100,backgroundColor:TGE.PromoScreen.DefaultPopupBackgroundColor,layout:function(){this.width=this.parent.width,this.height=this.parent.height}}))):(this.popup=this.addChild((new TGE.DisplayObjectContainer).setup({width:TGE.PromoScreen.DefaultPopupWidth,height:TGE.PromoScreen.DefaultPopupHeight,layout:TGE.PromoScreen.DefaultPopupLayout})),this._mPopupBackground=this.popup.addChild((new TGE.DisplayObjectContainer).setup({width:100,height:100,layout:function(){this.width=this.parent.width,this.height=this.parent.height}}))),"object"==typeof a.icon&&"string"==typeof a.icon.image&&(this.icon=this.popup.addChild((new TGE.Sprite).setup({image:a.icon.image,y:TGE.PromoScreen.DefaultIconY}))),"object"==typeof a.button&&("string"==typeof a.button.image?this.button=this.popup.addChild((new TGE.Sprite).setup({image:a.button.image,y:TGE.PromoScreen.DefaultButtonY})):(a.button.backgroundColor,this.button=this.popup.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:TGE.PromoScreen.DefaultButtonBackgroundColor,width:TGE.PromoScreen.DefaultButtonWidth,height:TGE.PromoScreen.DefaultButtonHeight,y:TGE.PromoScreen.DefaultButtonY})),this.buttonText=this.button.addChild((new TGE.Text).setup({text:TGE.PromoScreen.DefaultButtonTextText,fontFamily:TGE.PromoScreen.DefaultButtonTextFontFamily,fontSize:TGE.PromoScreen.DefaultButtonTextFontSize,fontWeight:TGE.PromoScreen.DefaultButtonTextFontWeight,color:TGE.PromoScreen.DefaultButtonTextColor})))),"object"==typeof a.buttonText&&(this.buttonText&&this.buttonText.markForRemoval(),"string"==typeof a.buttonText.image?"object"==typeof a.button?this.buttonText=this.button.addChild((new TGE.Sprite).setup({image:a.buttonText.image})):this.buttonText=this.popup.addChild((new TGE.Sprite).setup({image:a.buttonText.image,y:TGE.PromoScreen.DefaultButtonY})):"object"==typeof a.button?this.buttonText=this.button.addChild((new TGE.Text).setup({text:TGE.PromoScreen.DefaultButtonTextText,fontFamily:TGE.PromoScreen.DefaultButtonTextFontFamily,fontSize:TGE.PromoScreen.DefaultButtonTextFontSize,fontWeight:TGE.PromoScreen.DefaultButtonTextFontWeight,color:TGE.PromoScreen.DefaultButtonTextColor})):this.buttonText=this.popup.addChild((new TGE.Text).setup({text:TGE.PromoScreen.DefaultButtonTextText,fontFamily:TGE.PromoScreen.DefaultButtonTextFontFamily,fontSize:TGE.PromoScreen.DefaultButtonTextFontSize,fontWeight:TGE.PromoScreen.DefaultButtonTextFontWeight,color:TGE.PromoScreen.DefaultButtonTextColor,y:TGE.PromoScreen.DefaultButtonY}))),"object"==typeof a.popupText&&("string"==typeof a.popupText.image?this.popupText=this.popup.addChild((new TGE.Sprite).setup({image:a.popupText.image,y:TGE.PromoScreen.DefaultPopupTextY})):this.popupText=this.popup.addChild((new TGE.Text).setup({text:TGE.PromoScreen.DefaultPopupTextText,wrapWidth:TGE.PromoScreen.DefaultPopupTextWrapWidthPercentage*this.popup.width,fontFamily:TGE.PromoScreen.DefaultPopupTextFontFamily,fontSize:TGE.PromoScreen.DefaultPopupTextFontSize,fontWeight:TGE.PromoScreen.DefaultPopupTextFontWeight,color:TGE.PromoScreen.DefaultPopupTextColor,y:TGE.PromoScreen.DefaultPopupTextY}))),"object"==typeof a.overlay)for(var b in a.overlay)a.overlay.hasOwnProperty(b)&&(this.overlay[b]=a.overlay[b]);if("object"==typeof a.popup)for(var b in a.popup)a.popup.hasOwnProperty(b)&&"image"!==b&&("backgroundColor"===b||"backgroundGradient"===b||"alpha"===b?null!==this._mPopupBackground&&(this._mPopupBackground[b]=a.popup[b]):(this.popup[b]=a.popup[b],!this._mPopupBackground||"width"!==b&&"height"!==b||(this._mPopupBackground[b]=a.popup[b]))),(a.popup.hasOwnProperty(b)&&"width"===b||"height"===b)&&this.popup.handleEvent(TGE._ResizeEvent),"scale"===b&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Scale is not a valid parameter for PromoScreen popup.  Since popup is a responsive object, use a layout parameter to manipulate its size.");if("object"==typeof a.icon)for(var b in a.icon)a.icon.hasOwnProperty(b)&&"image"!==b&&(this.icon[b]=a.icon[b]);if("object"==typeof a.button)for(var b in a.button)a.button.hasOwnProperty(b)&&"image"!==b&&(this.button[b]=a.button[b]);if("object"==typeof a.buttonText)for(var b in a.buttonText)a.buttonText.hasOwnProperty(b)&&(this.buttonText[b]=a.buttonText[b]);if("object"==typeof a.popupText)for(var b in a.popupText)a.popupText.hasOwnProperty(b)&&"image"!==b&&(this.popupText[b]=a.popupText[b])},_openAppStore:function(){this._mAcceptingClicks&&(this._mAcceptingClicks=!1,this.performAction({delay:TGE.PromoScreen.DefaultDelayBetweenClickable,action:function(){this._mAcceptingClicks=!0}.bind(this)}),TGE.Game.AppstoreClickthrough())},_transitionIn:function(a){"none"!==a&&this.overlay.tweenFrom({alpha:0,duration:.2}),"none"===a||("bounce"===a?this.popup.tweenFrom({duration:1,y:-this.height/2,easing:TGE.Tween.Bounce.Out}):"slide"===a?this.popup.tweenFrom({x:-this.width/2,duration:.4,easing:TGE.Tween.Back.Out}):"grow"===a?this.popup.tweenFrom({scale:0,duration:.3,easing:TGE.Tween.Back.Out}):"fade"===a&&this.popup.tweenFrom({alpha:0,duration:.5}))}},extend(TGE.PromoScreen,TGE.Window),TGE.CrossfadeSprite=function(){return TGE.CrossfadeSprite.superclass.constructor.call(this),this._mCrossfadeTexture=null,this._mCrossfadeCellWidth=0,this._mCrossfadeCellHeight=0,this._mCrossfadeOffsetX=0,this._mCrossfadeOffsetY=0,this._mCrossfadeCoordinateCache=null,this._mCrossfadeImg=null,this._mCrossfadeAlpha=0,this._mCrossfadeDuration=0,this._mCrossfadeDefaultDuration=.5,this._mCrossfadeUpdate=null,this},TGE.CrossfadeSprite.prototype={setup:function(a){return TGE.CrossfadeSprite.superclass.setup.call(this,a),this.intendedWidth="number"==typeof a.width?a.width:null,this.intendedHeight="number"==typeof a.height?a.height:null,this},crossfade:function(a,b){if(this._mCrossfadeTexture=null,"string"==typeof a&&(this._mCrossfadeTexture=TGE.AssetManager.GetTexture(a)),this._mCrossfadeTexture&&(this._mCrossfadeTexture.htmlImageWidth<=0||this._mCrossfadeTexture.htmlImageHeight<=0)&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Crossfade sprite has invalid dimensions ("+this._mCrossfadeTexture.htmlImageWidth+"x"+this._mCrossfadeTexture.htmlImageHeight+"), image likely did not load"),this._mCrossfadeTexture=null),this._mCrossfadeTexture){if(this._mCrossfadeDuration="number"==typeof b?b:this._mCrossfadeDefaultDuration,this._mCrossfadeImg=a,this._mCrossfadeOffsetX=0,this._mCrossfadeOffsetY=0,this._mCrossfadeTexture.spriteSheet){var c=TGE.AssetManager.Get(a);this._mCrossfadeCellWidth=c.width,this._mCrossfadeCellHeight=c.height,this._mCrossfadeCoordinateCache=[],this._mCrossfadeCoordinateCache=[[Math.round(c.x),Math.round(c.y)]],this._mCrossfadeDrawWidth=this._mCrossfadeOriginalWidth=Math.round(this._mCrossfadeCellWidth),this._mCrossfadeDrawHeight=this._mCrossfadeOriginalHeight=Math.round(this._mCrossfadeCellHeight),c.hasOwnProperty("offsetX")&&(this._mCrossfadeOffsetX=c.offsetX,this._mCrossfadeOffsetY=c.offsetY,this._mCrossfadeDrawWidth=c.drawWidth,this._mCrossfadeDrawHeight=c.drawHeight)}else this._mCrossfadeDrawWidth=this._mCrossfadeOriginalWidth=Math.round(this._mCrossfadeTexture.htmlImageWidth),this._mCrossfadeDrawHeight=this._mCrossfadeOriginalHeight=Math.round(this._mCrossfadeTexture.htmlImageHeight),this._mCrossfadeCellWidth=this._mCrossfadeTexture.htmlImageWidth,this._mCrossfadeCellHeight=this._mCrossfadeTexture.htmlImageHeight,this._mCrossfadeCoordinateCache=[],this._mCrossfadeCoordinateCache=[[0,0]];null===this._mRendererTexture&&(this.width=this.intendedWidth?this.intendedWidth:this._mCrossfadeCellWidth,this.height=this.intendedHeight?this.intendedHeight:this._mCrossfadeCellHeight,this.parent&&this.handleEvent(TGE._ResizeEvent)),this._mCrossfadeUpdate&&this.removeEventListener("update",this._mCrossfadeUpdate),this._mCrossfadeUpdate=this.addEventListener("update",this._updateCrossfade.bind(this))}},_updateCrossfade:function(a){this._mCrossfadeAlpha+=a.elapsedTime/this._mCrossfadeDuration*this.alpha,this._mCrossfadeAlpha>=this.alpha&&this._finishCrossfade()},_finishCrossfade:function(){this.removeEventListener("update",this._mCrossfadeUpdate),this._mCrossfadeTexture=null,this._mCrossfadeUpdate=null,this._mCrossfadeAlpha=0;var a=this.intendedWidth?this.intendedWidth:this.width,b=this.intendedHeight?this.intendedHeight:this.height;this.setSizedImage(this._mCrossfadeImg,a,b)},_objectDraw:function(a){if(this.alpha<1&&(a._mCanvasContext.globalAlpha=this.alpha-this._mCrossfadeAlpha),TGE.CrossfadeSprite.superclass._objectDraw.call(this,a),null!==this._mCrossfadeTexture){var b=this.width/this._mCrossfadeOriginalWidth,c=this.height/this._mCrossfadeOriginalHeight,d=this._mCrossfadeCoordinateCache[0][0]>>0,e=this._mCrossfadeCoordinateCache[0][1]>>0,f=this._mCrossfadeOffsetX*b,g=this._mCrossfadeOffsetY*c,h=this._mCrossfadeDrawWidth*b,i=this._mCrossfadeDrawHeight*c;a._mCanvasContext.globalAlpha=this._mCrossfadeAlpha,a.drawImage(this._mCrossfadeTexture,d,e,this._mCrossfadeDrawWidth,this._mCrossfadeDrawHeight,f,g,h,i)}}},extend(TGE.CrossfadeSprite,TGE.Sprite),TGE.ProgressiveLoadingSprite=function(){return TGE.ProgressiveLoadingSprite.superclass.constructor.call(this),this},TGE.ProgressiveLoadingSprite.prototype={setup:function(a){a.image="string"!=typeof a.lowResImage||getQueryString().draft?null:a.lowResImage,TGE.ProgressiveLoadingSprite.superclass.setup.call(this,a);var b="number"==typeof a.assetList?a.assetList:null,c="number"==typeof a.duration?a.duration:null;return"string"==typeof a.highResImage&&this.setHighResImage(a.highResImage,b,c),this},setHighResImage:function(a,b,c){a&&(TGE.Game.GetInstance().isAssetLoaded(a)?this.image=a:TGE.Game.GetInstance().waitForAsset(a,this.crossfade.bind(this,a,c),!1))}},extend(TGE.ProgressiveLoadingSprite,TGE.CrossfadeSprite),Object.defineProperty(TGE.ProgressiveLoadingSprite.prototype,"highResImage",{set:function(a){this.setHighResImage(a)}}),TGE.NoAudio=function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"NoAudio..."),_mSoundInstances=[]},TGE.NoAudio.prototype={type:function(){return"NoAudio"},playSound:function(a,b,c){return new TGE.NoAudioSoundInstance},mute:function(a,b){},stopAll:function(){},pauseAll:function(){},resumeAll:function(){},soundDuration:function(a){return 0}},TGE.NoAudioLoader=function(a,b,c){this.loader=null,this.complete=!1,this.start=function(a){this.loader=a,this.complete=!0,a.onLoad(this)},this.checkStatus=function(){!0===this.complete&&this.loader.onLoad(self)},this.getName=function(){return b}},TGE.NoAudioSoundInstance=function(){},TGE.NoAudioSoundInstance.prototype={init:function(a,b){return!0},play:function(a,b){},resume:function(){},restart:function(){},seek:function(a){},stop:function(){},pause:function(){},mute:function(){},unmute:function(a){},duration:function(){return 0},_cleanup:function(a){}},TGE.WebAudioAPIPlugin=function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"creating WebAudioAPIPlugin..."),this._mSoundInstances=[],this._mFunctioning=!1,this._mUnlockedAudio=!TGE.BrowserDetect.oniOS,this._mContext=null;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this._mContext=new AudioContext,"suspended"===this._mContext.state&&(this._mUnlockedAudio=!1),this._backwardCompatibility(),this._mMasterCompressorNode=this._mContext.createDynamicsCompressor(),this._mMasterCompressorNode.connect(this._mContext.destination),this._mMasterGainNode=this._mContext.createGain(),this._mMasterGainNode.connect(this._mMasterCompressorNode),this._mVolume=1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(a){this._mVolume=a,this._mMasterGainNode&&(this._mMasterGainNode.gain.value=a)}}),this._mFunctioning=!0}catch(a){return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error creating WebAudio context: "+a.toString())}},TGE.WebAudioAPIPlugin.prototype={type:function(){return"WebAudioAPI"},playSound:function(a,b,c){if(this._mFunctioning){var d=new TGE.WebAudioAPIPlugin.SoundInstance(this);return d.init(a,c)?(this._mSoundInstances.push(d),d.play(b,c),c||(d._mTimeout=setTimeout(d._cleanup.bind(d),1e3*d._mBuffer.duration)),d):null}},mute:function(a,b){this._mFunctioning&&(this._mMasterGainNode.gain.value=a?0:b)},stopAll:function(){for(var a=0;a<this._mSoundInstances.length;a++)this._mSoundInstances[a]._cleanup(!1);this._mSoundInstances=[]},pauseAll:function(){for(var a=0;a<this._mSoundInstances.length;a++)this._mSoundInstances[a].pause()},resumeAll:function(){for(var a=0;a<this._mSoundInstances.length;a++)this._mSoundInstances[a].resume()},soundDuration:function(a){var b=TGE.AssetManager.Get(a),c=b?b.buffer:null;return c?c.duration:0},unlockAudioOnTouch:function(){this._mTouchListenerDown=TGE.Game.GetInstance()._mFullStage.addEventListener("mousedown",this.testUnlock.bind(this)),this._mTouchListenerUp=TGE.Game.GetInstance()._mFullStage.addEventListener("mouseup",this.testUnlock.bind(this))},testUnlock:function(){if(!this._mUnlockedAudio){if("running"===this._mContext.state)return void this.unlockAudio();if(TGE.BrowserDetect.oniOS){var a=this._mContext.createBuffer(1,1,22050),b=this._mContext.createBufferSource();b.onended=this.unlockAudio.bind(this),b.buffer=a,b.connect(this._mContext.destination),b.start(0)}else if("suspended"===this._mContext.state){var c=this;this._mContext.resume().then(function(){c.unlockAudio()}).catch(function(a){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"AudioContext.resume() failed: "+a)})}}},unlockAudio:function(){this._mUnlockedAudio=!0,this._mTouchListenerUp&&(TGE.Game.GetInstance()._mFullStage.removeEventListener("mousedown",this._mTouchListenerDown),TGE.Game.GetInstance()._mFullStage.removeEventListener("mouseup",this._mTouchListenerUp),this._mTouchListenerUp=null,this._mTouchListenerDown=null)},_removeInstance:function(a){for(var b=0;b<this._mSoundInstances.length;b++)if(this._mSoundInstances[b]===a)return void this._mSoundInstances.splice(b,1)},_backwardCompatibility:function(){if(!this._mContext.createGain){if(!this._mContext||!this._mContext.createGainNode||!this._mContext.createBufferSource)return void TGE.Debug.Log(TGE.Debug.LOG_INFO,"unable to setup WebAudio API backward compatibility mode");TGE.Debug.Log(TGE.Debug.LOG_INFO,"deprecated WebAudio API detected - using backward compatibility mode"),this._mContext.createGain=this._mContext.createGainNode;var a=this._mContext.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff}}},TGE.WebAudioAPIPlugin.SoundInstance=function(a){this._mID=null,this._mPlugin=a,this._mBuffer=null,this._mAudioNode=null,this._mTimeout=null,this._mStartedAt=null,this._mPausedAt=null,this._mVolume=1,this._mLoop=!1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(a){this._mVolume=a,this._mGainNode&&(this._mGainNode.gain.value=a)}})},TGE.WebAudioAPIPlugin.SoundInstance.prototype={init:function(a,b){return TGE.AssetManager.Exists(a)?(this._mBuffer=TGE.AssetManager.Get(a).buffer,this._mBuffer?(this._mID=a,!0):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Trying to play a sound that didn't load correctly: "+a),!1)):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Unknown audio id: "+a),!1)},play:function(a,b){this._mVolume=a,this._mLoop=b;try{this._mAudioNode=this._mPlugin._mContext.createBufferSource(),this._mAudioNode.buffer=this._mBuffer,this._mAudioNode.loop=this._mLoop,this._mGainNode=this._mPlugin._mContext.createGain(),this._mGainNode.gain.value=a,this._mAudioNode.connect(this._mGainNode),this._mGainNode.connect(this._mPlugin._mMasterGainNode),this._mPausedAt?(this._mAudioNode.start(0,this._mPausedAt,b?3600:this._mBuffer.duration-this._mPausedAt),this._mStartedAt=Date.now()/1e3-this._mPausedAt):(TGE.BrowserDetect.oniOS||"Safari"===TGE.BrowserDetect.browser?this._mAudioNode.start(0,0,this._mBuffer.duration):this._mAudioNode.start(),this._mStartedAt=Date.now()/1e3),this._mPausedAt=null}catch(c){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error playing webaudio buffer: "+c.toString())}},seek:function(a){if(a>this._mBuffer.duration)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"AudioManager.seek offset > sound duration");this._mPausedAt?this._mPausedAt=a:(this.pause(),this._mPausedAt=a,this.play(this._mVolume,this._mLoop))},stop:function(){this._cleanup()},restart:function(){this._cleanup(!1),this.play(this._mVolume,this._mLoop)},pause:function(){this._mPausedAt=Date.now()/1e3-this._mStartedAt,this._mPausedAt>this._mBuffer.duration&&(this._mPausedAt=this._mPausedAt-Math.floor(this._mPausedAt/this._mBuffer.duration)*this._mBuffer.duration),this._cleanup(!1)},resume:function(){this._mPausedAt&&this.play(this._mVolume,this._mLoop)},mute:function(){},unmute:function(a){},duration:function(){return this._mBuffer.duration},_cleanup:function(a){a=void 0===a||a,this._mAudioNode&&(this._mAudioNode.stop(0),this._mAudioNode.disconnect(0),this._mAudioNode=null),this._mGainNode&&(this._mGainNode.disconnect(0),this._mGainNode=null),null!==this._mTimeout&&(clearTimeout(this._mTimeout),this._mTimeout=null),a&&this._mPlugin._removeInstance(this)}},TGE.AudioManager=function(){return null!==TGE.AudioManager._sInstance?(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"you can only create one instance of the TGE.AudioManager"),this):(TGE.AudioManager._sInstance=this,this.enabled=TGE.RemoteSettings("audio"),this._mVolume=1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(a){this._mVolume=a,this._mPlugin&&(this._mPlugin.volume=a)}}),this._mPlugin=null,this._initPlugin(),this._mPlugin.mute(this.isMuted(),this.volume),"function"==typeof TGE.Loader&&(this.enabled&&"WebAudioAPI"===this.pluginType()?TGE.Loader.prototype.addAudio=function(a,b,c){var d=new TGE.WebAudioLoader(a,b,c);return this.add(d),d.audio}:TGE.Loader.prototype.addAudio=function(a,b,c){var d=new TGE.NoAudioLoader(a,b,c);return this.add(d),null}),this)},TGE.AudioManager._sInstance=null,TGE.AudioManager._sMuted=!1,TGE.AudioManager.GetInstance=function(){return TGE.AudioManager._sInstance},TGE.AudioManager.prototype={mute:function(a){a!==this.isMuted()&&(TGE.AudioManager._sMuted=a,this._mPlugin.mute(a,this.volume))},toggleMute:function(){this.mute(!this.isMuted())},isMuted:function(){return TGE.AudioManager._sMuted},playSound:function(a,b,c){if(!(window.GameConfig&&GameConfig.NATIVE_APP&&TGE.BrowserDetect.onAndroid&&"4.2"==TGE.BrowserDetect.OSversion)){b=void 0!==b&&b,c="number"==typeof c?c:1;return this._mPlugin.playSound(a,c,b)}},pause:function(){this._mPlugin.pauseAll()},resume:function(){this._mPlugin.resumeAll()},stop:function(){this._mPlugin.stopAll()},pluginType:function(){return this._mPlugin.type()},soundDuration:function(a){return this._mPlugin.soundDuration(a)},_initPlugin:function(){this.enabled&&(window.AudioContext||window.webkitAudioContext)?(this._mPlugin=new TGE.WebAudioAPIPlugin,this._mPlugin.volume=this.volume):this._mPlugin=new TGE.NoAudio},_cleanupSound:function(a){a._cleanup()},_unlockAudioOnTouch:function(){this._mPlugin instanceof TGE.WebAudioAPIPlugin&&this._mPlugin.unlockAudioOnTouch()},canPlayAudio:function(){return this._mPlugin instanceof TGE.WebAudioAPIPlugin&&!0===this._mPlugin._mUnlockedAudio},Play:function(a){a.loop=!0===a.loop||"1"===a.loop||1===a.loop,a.callbackFunction,this.playSound(a.id,a.loop)},Pause:function(a){for(var b=0;b<this._mPlugin._mSoundInstances.length;b++)if(this._mPlugin._mSoundInstances[b]._mID===a)return void this._mPlugin._mSoundInstances[b].stop();TGE.Debug.Log(TGE.Debug.LOG_WARNING,"could not find audio to pause: "+a)},Mute:function(){this.mute(!0)},Unmute:function(){this.mute(!1)},ToggleMute:function(){this.toggleMute()},StopAll:function(){this.stop()},PauseAll:function(){this.pause()},ResumeAll:function(){this.resume()}},Object.defineProperty(TGE.AudioManager.prototype,"mMuted",{get:function(){return this.isMuted()},set:function(a){this.mute(a)}}),TGE.WebAudioLoader=function(a,b,c){if(this.loader=null,this.audio={},this.id=a,this.pollCount=0,c&&c.indexOf(".mp3")===c.length-4)this.url=c;else{var d=b.split(".");d[d.length-1]="mp3",this.url=d.join(".")}this.start=function(a){this.loader=a;var b=this,c=function(a){b.audio.buffer=a,b.loader.onLoad(b)},d=function(){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error decoding audio file: "+b.url),b.loader.onError(b)},e=this.url;if(window._TREAUDIO){var f=e.split("/"),g=f[f.length-1];e=_TREAUDIO[g]}else e=TGE.AssetManager._sFullPathTransformation(e);fetch(e).then(function(a){return a.arrayBuffer()}).then(function(a){TGE.AudioManager.GetInstance()._mPlugin._mContext.decodeAudioData(a,c,d)}).catch(function(a){d()})},this.checkStatus=function(){if(this.pollCount>=3)return void this.loader.onTimeout(this);this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.Events={debugMode:!0,engagements:0,countedEvents:{},customEventWarnings:{},_notifyAdContainer:function(){return void 0!==window.TreSensa},logInteraction:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"first user interaction"),this._notifyAdContainer()&&TreSensa.Playable.interaction(),window.TGS&&(TGS.Analytics.engagementTime=(new Date).getTime())},logEngagement:function(){1===++this.engagements&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"user engagement event triggered"),this._notifyAdContainer()&&TreSensa.Playable.engagement())},logCompletion:function(a){a||(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"completion events require a reason parameter"),a="unknown"),TGE.Debug.Log(TGE.Debug.LOG_INFO,"completion event triggered, reason is: "+a),TGE.Game.GetInstance()._mCompletionCount++,this._notifyAdContainer()&&TreSensa.Playable.promoScreenShown(a)},logReplay:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"replay event triggered"),this._sendAdContainerEvent("replay",{})},logCustomEvent:function(a,b){if(!a||a.length>50)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"custom events require a name parameter of 50 or fewer characters");if("replay"===a&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"do not log replay as a custom event, use TGE.Analytics.Replay instead"),this.countedEvents.hasOwnProperty(a)){var c=this.countedEvents[a];if(++c.counted%c.interval!=0)return}!0!==this.customEventWarnings[a]&&void 0!==b&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"sub-parameters are no longer supported on custom events: "+a),this.customEventWarnings[a]=!0),TGE.Debug.Log(TGE.Debug.LOG_INFO,"custom event triggered: "+a),this._sendAdContainerEvent("custom",{name:a})},setEventInterval:function(a,b){var c=this.countedEvents[a];b=b||c&&c.interval||1,this.countedEvents[a]={interval:b,counted:0}},logVideoProgress:function(a){if(-1===[0,25,50,75,100].indexOf(a))return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video progress events must specify progress of either 0, 25, 50, 75, or 100");TGE.Debug.Log(TGE.Debug.LOG_INFO,"video progress: "+a+"%"),this._sendAdContainerEvent("video",{progress:a})},doClickthrough:function(a,b){window.TreSensa?TreSensa.Playable.clickthrough(a,b):window.mraid?window.mraid.open(b):window.open(b,"_blank")},doAppstoreClickthrough:function(){this.doClickthrough("default")},_sendAdContainerEvent:function(a,b){this._notifyAdContainer()&&TreSensa.Playable.logEvent(a,b)}},TGE.Analytics={},TGE.Analytics.Interaction=function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"games should not be calling TGE.Analytics.Interaction")},TGE.Analytics.Engagement=function(){TGE.Events.logEngagement.call(TGE.Events)},TGE.Analytics.Completion=function(a){TGE.Events.logCompletion.call(TGE.Events,a)},TGE.Analytics.Replay=function(){TGE.Events.logReplay.call(TGE.Events)},TGE.Analytics.CustomEvent=function(a,b){TGE.Events.logCustomEvent.call(TGE.Events,a,b)},TGE.Analytics.SetEventInterval=function(a,b){TGE.Events.setEventInterval(a,b)},TGE.Analytics.VideoProgress=function(a){TGE.Events.logVideoProgress.call(TGE.Events,a)},TGE.Game=function(){if(null!==TGE.Game._sInstance)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"you can only create one instance of a TGE.Game object"),this;TGE.Game._sInstance=this,TGS.Analytics||TGE.SetupTGSProxy(),this._mLanguage="en",this.mCanvasDiv=null,this.mLoadingScreen=null,this._mAssetListLoaded={},this._mWaitingForAssets=[],this._mBuffering=!1,this._mShowBuffering=!1,this._mBufferingScreen=null,this._mBufferingOccurrences={},this._mNumInteractions=0,this._mLastInteraction=(new Date).getTime(),this._mGameViewableReceived=!1,this._mAdInactivityTimeLimit=0,this._mAdInactivityTimer=0,this._mCompletionCount=0,this._mFinalScore=null,window.GameConfig=window.GameConfig||{},GameConfig.REMOTE_SETTINGS=GameConfig.REMOTE_SETTINGS||{},TGS.Language.SupportedLanguages&&!GameConfig.REMOTE_SETTINGS.lang&&(GameConfig.REMOTE_SETTINGS.lang={type:"string",default:"en",options:TGS.Language.SupportedLanguages}),this._initializeRemoteSettings(),this.stage=null,this._mFullStage=null,this.assetManager=new TGE.AssetManager,TGE.AudioManager&&(this.audioManager=new TGE.AudioManager(this.assetManager)),this._mUnmuteOnActivate=!1,this.onLoad=null,this.mGameTime=0,this._mFilterStrength=10,this._mFrameTime=0,this._mLastLoop=(new Date).getTime(),this._mLastDisplay=(new Date).getTime(),this._mThisLoop=0,this._mCurrentFPS=0,this._mLaunchTime=0,this.slowMotion=0,this._mUpdateSkips=0,this.mMaxTickTime=.25,this.mMinTickTime=Number.MIN_VALUE,this._mPointerX=0,this._mPointerY=0,this._mPointerDown=!1,this._mCurrentPointer=-1,this._mKeysDown={},this._mActive=!0,this._mUpdateRoot=null,this.canvasWidth=0,this.canvasHeight=0,this._isiFramed=window.self!=window.top,this.scaleToFitOnDesktop=this._isiFramed,this.horizontalAlignment="center",this.verticalAlignment=isNaN(getQueryString()["padding-top"])?TGE.BrowserDetect.isMobileDevice||this.scaleToFitOnDesktop?"middle":"top":"bottom",this.resizeCanvasToParent=!1,this.desktopMaxCanvasWidth=Number.MAX_VALUE,this.desktopMaxCanvasHeight=Number.MAX_VALUE,this.maxCanvasWidth=Number.MAX_VALUE,this.maxCanvasHeight=Number.MAX_VALUE,this.blockBrowserKeys=!0,this.blockTGEKeys=!1,this.allowMultitouch=!0,this._mResizeCanvasToFit=!1,this._mViewportScale=1,this._mDivResized=!1,this._mOldScreenWidth=-1,this._mOldScreenHeight=-1,this._mSnapchatSession="B0135"===getDistributionPartner(),TGE.BrowserDetect.onWindowsMobile&&(window.devicePixelRatio=window.screen.deviceXDPI/window.screen.logicalXDPI,-1!==navigator.userAgent.indexOf("Lumia 920")&&(window.devicePixelRatio=2));var a=getQueryString();this._mAdInactivityTimeLimit=parseInt(a.adanimation)||0,this.debugResizeMode=this._mDebugResize="4"===a.tgedebug,this._mTestBuffering=parseInt(a.testbuffering)||("3"===a.tgedebug?1:0),this._mPreviewMode=a.simulateBanner?1:parseInt(a.previewMode)||0,this._mTestAdHeader=parseInt(a.testadheader)||0,this._mCustomLoader=parseInt(a.customloader)||0,this._mTestGameViewable=parseInt(a.testgameviewable)||0,this._mPortraitGame=null,this.setLanguage(this.preferredLanguage())},TGE.LoadingWindow=null,TGE.FirstGameWindow=null,TGE.GameViewableParameter=null,TGE.CLICK_TIME=1,TGE.CLICK_DISTANCE_FRACTION=.025,TGE._ResizeEvent={type:"resize",width:0,height:0,endEvent:{type:"resizeEnd",width:0,height:0}},TGE._AddedToStageEvent={type:"addedToStage"},TGE.DisableViewportResizing=!1,TGE.DisableLostFocusPause=!1,TGE.Game._sInstance=null,TGE.Game.GetInstance=function(){return TGE.Game._sInstance},TGE.Game.OpenURL=function(a){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Game.OpenURL is deprecated, use TGE.Game.Clickthrough"),TGE.Game.Clickthrough("deprecated",a)},TGE.Game.GameDiv=function(){return TGE.Game.GetInstance().mCanvasDiv},TGE.Game.IsViewable=function(){return TGE.Game.GetInstance()._mGameViewableReceived},TGE.Game.SetUpdateRoot=function(a){TGE.Game.GetInstance()._mUpdateRoot=a},TGE.Game.GetUpdateRoot=function(){return TGE.Game.GetInstance()._mUpdateRoot},TGE.Game.Hibernate=function(a){var b=TGE.Game.GetInstance();b&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,(a?"hibernating":"waking up")+" game..."),b._mFullStage._mCanvas.style.display=a?"none":"block",b.halt=a)},TGE.Game.prototype={halt:!1,_mPauseObject:null,_mViewportScale:1,setLanguage:function(a){TGE.RemoteSettings.GetSettings().lang.value=a,TGE.Text.Language=a,this._mLanguage=a},getLanguage:function(){return TGE.RemoteSettings("lang")},setFinalScore:function(a){this._mFinalScore=a},getFinalScore:function(){return null===this._mFinalScore&&window.PromoBuilder&&PromoBuilder._sInstance&&"number"==typeof PromoBuilder._sInstance.score?PromoBuilder._sInstance.score:this._mFinalScore},pause:function(){this._mPauseObject||(this._mPauseObject=this._mFullStage.addChild((new TGE.DisplayObject).setup({layout:"match",mouseEnabled:!0})),this._mPauseObject.previousUpdateRoot=TGE.Game.GetUpdateRoot(),TGE.Game.SetUpdateRoot(this._mPauseObject),this.audioManager.pause())},resume:function(){this._mPauseObject&&(TGE.Game.SetUpdateRoot(this._mPauseObject.previousUpdateRoot),this._mPauseObject.markForRemoval(),this._mPauseObject=null,this.audioManager.resume())},requiredAssetsAvailable:function(a,b,c){if(!isNaN(parseInt(a))){var d=this.assetManager.getAssetListFromNumber(a);return this.waitForAssetList(d,b,c)}console.error("A number must be passed into requiredAssetsAvailable")},assetListAvailable:function(a,b,c){c=!1!==c;var d=this.assetManager._mLoadingOrder.indexOf(a);if(1===this._mTestBuffering&&void 0!==b&&d>0)for(var e=1;e<=d;e++){var f=this.assetManager._mLoadingOrder[e];this._mAssetListLoaded[f]||(this._mAssetListLoaded[f]="queued")}var g="loaded"===this._mAssetListLoaded[a],h=1==this._mTestBuffering&&"required"!==a&&(!this._mBufferingOccurrences[a]||this._mBufferingOccurrences[a].testTimer>0);if(g&&!h)return b&&b.call(),!0;if(this._mBuffering=!0,this._mBufferingOccurrences[a]){if(b){var i=this._mBufferingOccurrences[a];i.callbacks.push(b),i.showBuffering=c||i.showBuffering}}else this._mBufferingOccurrences[a]={completeFired:!1,callbacks:b?[b]:[],testTimer:.5,showBuffering:c},1!=this._mTestBuffering&&c&&TGE.Analytics.CustomEvent("buffering_"+a);return c&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"buffering, waiting for assetList: "+a),this._mShowBuffering=!0,this._showBufferingScreen()),!1},assetAvailable:function(a,b,c){var d=this.getAssetList(a);return d?this.waitForAssetList(d,b,c):(null!=b&&(this._mWaitingForAssets.push({id:a,callback:b,showBuffering:c}),1===this._mTestBuffering&&this._loadNextAssetList()),!1)},isAssetLoaded:function(a){return this.assetAvailable(a,void 0,!1)},isAssetListLoaded:function(a){return this.assetListAvailable(a,void 0,!1)},isAssetGroupLoaded:function(a){var b=this.assetManager.getAssetListFromGroup(a);return this.assetListAvailable(b,void 0,!1)},isRequiredAssetsLoaded:function(a){return this.requiredAssetsAvailable(a,void 0,!1)},waitForAsset:function(a,b,c){return this.assetAvailable(a,b||null,c)},waitForAssetList:function(a,b,c){return this.assetListAvailable(a,b||null,c)},waitForAssetGroup:function(a,b,c){var d=this.assetManager.getAssetListFromGroup(a);return d?this.waitForAssetList(d,b,c):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"waitForAssetGroup() could not find asset group '"+a+"'.  It was never queued for load OR it was never used in GameConfig.ASSETS"),!1)},waitForRequiredAssets:function(a,b,c){return this.requiredAssetsAvailable(a,b||null,c)},_loadNextAssetList:function(){for(var a=1;a<this.assetManager._mLoadingOrder.length;++a){var b=this.assetManager._mLoadingOrder[a],c=this._mAssetListLoaded[b];if("loaded"!==c&&"loading"!==c){this.waitForAssetList(b,null,!1);break}}},getAssetList:function(a){if(!a)return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"attempting to check for a  null asset id"),"required";for(var b in this.assetManager._mAssetLists)for(var c=this.assetManager._mAssetLists[b].list,d=0;d<c.length;d++)if(c[d].id===a||c[d].sheet&&trimmedFilename(c[d].sheet)===a)return b},_showBufferingScreen:function(){if(!this._mBufferingScreen){this._mBufferingScreen=this.stage.addChild((new TGE.DisplayObjectContainer).setup({layout:"match",registrationX:0,registrationY:0,mouseEnabled:!0})),this._mBufferingScreen.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"#fff",alpha:.4,layout:"match"}));var a=this._mBufferingScreen.addChild((new TGE.DisplayObject).setup({width:25,height:25,layout:{xPercentage:.5,yPercentage:.5,scaleToWidth:.25}}));a.addEventListener("drawend",function(a){var b=a.canvasContext,c=16;b.translate(this.width/2,this.height/2);for(var d=0;d<c;d++)b.beginPath(),b.rotate(2*Math.PI/c),b.moveTo(this.width/6,0),b.lineTo(this.width/4,0),b.lineWidth=this.width/30,b.strokeStyle="rgba(255, 0, 0,"+d/c+")",b.stroke()}),a.tweenTo({rotation:360,duration:1.2,loop:!0,repeat:!0}),TGE.Game.SetUpdateRoot(this._mBufferingScreen)}},_closeBufferingScreen:function(){this._mBufferingScreen&&(this._mBufferingScreen.markForRemoval(),this._mBufferingScreen=null)},gameAsAd:function(){return this._mPreviewMode>0},gameAsBannerAd:function(){return 1===this._mPreviewMode},getCampaignID:function(){return getQueryString().campaign},timeSinceLastInteraction:function(){return this._mNumInteractions?Math.max(Number.MIN_VALUE,((new Date).getTime()-this._mLastInteraction)/1e3):0},getVideoKeyframes:function(){return{}},launch:function(a){var b="string"==typeof a.gameDiv?a.gameDiv:null,c="number"==typeof a.width?a.width:-1,d="number"==typeof a.height?a.height:-1,e="number"==typeof a.initialWidth?parseInt(a.initialWidth):-1,f="number"==typeof a.initialHeight?parseInt(a.initialHeight):-1;switch(getQueryString().simulateBanner){case"mrec":c=300,d=250}if(this.onLoad="function"==typeof a.onLoad?a.onLoad:this.onLoad,this.mCanvasDiv=document.getElementById(b),null==this.mCanvasDiv)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Could not find canvas div '"+b+"'"),!1;var g=this.mCanvasDiv.getAttribute("style")||"",h="B0039"===getDistributionPartner()?"":"z-index: 1; ";if(this.mCanvasDiv.setAttribute("style",g+" "+h+"overflow: hidden; touch-action: none; -webkit-user-select: none; -ms-touch-action:none; -webkit-tap-highlight-color: transparent; -moz-tap-highlight-color: transparent; -webkit-transform: translateZ(0);"),c>0&&d>0&&(this.mCanvasDiv.style.width=c+"px",this.mCanvasDiv.style.height=d+"px"),this.canvasWidth=this.mCanvasDiv.clientWidth,this.canvasHeight=this.mCanvasDiv.clientHeight,window.addEventListener("resize",this._onResize.bind(this),!1),!TGE.DisableLostFocusPause){var i;void 0!==document.hidden?i="visibilitychange":void 0!==document.mozHidden?i="mozvisibilitychange":void 0!==document.msHidden?i="msvisibilitychange":void 0!==document.webkitHidden&&(i="webkitvisibilitychange"),i?(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"using "+i+" visibility change event"),document.addEventListener(i,this._onVisibilityChange.bind(this),!1),this._mSnapchatSession&&(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden)&&this._onDeactivate()):(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"using blur/focus and pagehide/show for visibility change events"),window.addEventListener("blur",this._onDeactivate.bind(this),!1),window.addEventListener("focus",this._onActivate.bind(this),!1),window.addEventListener("pagehide",this._onDeactivate.bind(this),!1),window.addEventListener("pageshow",this._onActivate.bind(this),!1))}if("ontouchstart"in window?(this.mCanvasDiv.addEventListener("touchstart",this._mouseDown.bind(this),!1),this.mCanvasDiv.addEventListener("touchmove",this._mouseMove.bind(this),!1),this.mCanvasDiv.addEventListener("touchend",this._mouseUp.bind(this),!1)):(this.mCanvasDiv.addEventListener("click",this._preventBehavior.bind(this),!1),this.mCanvasDiv.addEventListener("mousedown",this._mouseDown.bind(this),!1),this.mCanvasDiv.addEventListener("mouseup",this._mouseUp.bind(this),!1),this.mCanvasDiv.addEventListener("mousemove",this._mouseMove.bind(this),!1)),document.addEventListener("keydown",this._keyDown.bind(this),!1),document.addEventListener("keyup",this._keyUp.bind(this),!1),getQueryString().tgedebug){var j=document.createElement("div");j.id="debug_widget",j.style.backgroundColor="#0c0",j.style.position="absolute",j.style.display="block",j.style.top=0,j.style.padding="6px",j.style.zIndex=200,document.body.insertBefore(j,document.body.firstChild),"2"===getQueryString().tgedebug&&(TGE.Window._sTrackWindows=!0);var k=function(){var a=TGE.Game.GetInstance(),b="<div style='font-weight: bold; font-size: 14px; padding-bottom: 3px;'>"+a._mCurrentFPS+" fps</div>";if("2"===getQueryString().tgedebug){b+=(a._mFullStage?a._mFullStage.numChildren(!0):0)+" scene objects<br>"+(a._mFullStage?a._mFullStage.numVisibleObjects():0)+" visible objects<br>"+(a._mFullStage?a._mFullStage.numDrawnObjects():0)+" drawn objects<br>"+(a._mFullStage?a._mFullStage._mUpdateGroup.length:0)+" updating objects<br>",b+="<div style='font-weight: bold; font-size: 14px; padding-top: 4px; padding-bottom: 2px;'>Active Windows:</div>";for(var c=0;c<TGE.Window._sActiveWindows.length;c++)b+=TGE.Window._sActiveWindows[c]+"<br>"}else if("3"===getQueryString().tgedebug){a._mCompletionCount>0&&(b+="<div style='font-weight: normal; font-size: 12px; padding-bottom: 3px;'>COMPLETION FIRED</div>");var d=TGE.TestPlayableAdRequirements("code");if(0===d){j.style.backgroundColor="#c00";var e=TGE.TestPlayableAdRequirements("errors"),f=e.length>1?"s":"";b+="<div style='font-weight: bold; font-size: 12px; padding-top: 4px; padding-bottom: 2px;'>Playable Ad Violation"+f+" Detected!</div>";for(var g=0;g<e.length;g++)b+="<div style='font-weight: normal; font-size: 10px;'>"+e[g]+"</div>"}else if(2===d){j.style.backgroundColor="#fa0";var e=TGE.TestPlayableAdRequirements("errors"),f=e.length>1?"s":"";b+="<div style='font-weight: bold; font-size: 12px; padding-top: 4px; padding-bottom: 2px;'>Playable Ad Warning"+f+" Detected</div>";for(var g=0;g<e.length;g++)b+="<div style='font-weight: normal; font-size: 10px;'>"+e[g]+"</div>"}}j.innerHTML=b};k(),setInterval(k,250)}if(this._mDebugResize?this._initializeRenderer(this._innerWidth(),this._innerHeight()):e>0&&f>0?this._initializeRenderer(e,f):this._initializeRenderer(),TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"game launch calling _resizeViewport"),this._resizeViewport(),!window.TreSensa){var l=function(){document.addEventListener("touchmove",function(a){a.preventDefault()},!1)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){l()},!1):l()}return this.assetManager._setRootLocation(a.imageRoot),this._beginLoad(),!0},gameMadeViewable:function(){this._mGameViewableReceived||(this._mGameViewableReceived=!0,document.dispatchEvent(new Event("tgeGameViewable")),TGE.GameViewableCallback&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.GameViewableCallback, use TGE.Game.AddEventListener('tgeGameViewable') instead"),TGE.GameViewableCallback.call()),(window.applovinMraid||this._mSnapchatSession)&&this._resizeViewport())},preferredLanguage:function(){var a=navigator.language||navigator.userLanguage||"en",b=TGE.RemoteSettings.WasSet("lang")?TGE.RemoteSettings("lang"):null,c=(b||a).toLowerCase();TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"language first pick is: "+c);var d="en",e=c.split("-")[0],f=TGE.RemoteSettings.GetSettings().lang.options||[];return d=-1!==f.indexOf(c)?c:-1!==f.indexOf(e)?e:TGE.RemoteSettings("lang"),d=d.toLowerCase(),TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"language best fit is: "+d),d},_updateFPS:function(){this._mThisLoop-this._mLastDisplay<500||(this._mLastDisplay=this._mThisLoop,this._mFrameTime>0&&(this._mCurrentFPS=Math.floor(1e3/this._mFrameTime).toFixed(0)))},_onResize:function(){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_onResize"),this._resizeViewport()},_scaleByCSS2D:function(a){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing game using a 2D CSS transform"),this._mViewportScale=a;var b=this.mCanvasDiv.getAttribute("style")||"";this.mCanvasDiv.setAttribute("style",b+" -ms-transform-origin: 0% 0%; -webkit-transform-origin: 0% 0%; -moz-transform-origin: 0% 0%; -o-transform-origin: 0% 0%; transform-origin: 0% 0%; -ms-transform: scale("+a+"); -webkit-transform: scale("+a+"); -moz-transform: scale("+a+"); -o-transform: scale("+a+"); transform: scale("+a+");"),this._mDivResized=!1},_scaleByCSS3D:function(a){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing game using a 3D CSS transform");var b=a+","+a;this._mViewportScale=a;var c=this.mCanvasDiv.getAttribute("style")||"";this.mCanvasDiv.setAttribute("style",c+" -webkit-transform: rotateZ(360deg); -ms-transform-origin: left top; -webkit-transform-origin: left top; -moz-transform-origin: left top; -o-transform-origin: left top; transform-origin: left top; -ms-transform: scale("+b+"); -webkit-transform: scale3d("+b+", 1); -moz-transform: scale("+b+"); -o-transform: scale("+b+"); transform: scale("+b+");"),this._mDivResized=!1},_innerWidth:function(){if(this._mDebugResize)return getQueryString().debug_resize_width?parseInt(getQueryString().debug_resize_width):1;var a=getDistributionPartner();return this._mResizeCanvasToFit&&this.resizeCanvasToParent&&this.mCanvasDiv.parentNode?this.mCanvasDiv.parentNode.offsetWidth:window.applovinMraid&&applovinMraid.getMaxSize?applovinMraid.getMaxSize().width:"B0099"===a&&window.mraid&&mraid.getMaxSize&&mraid.getMaxSize().width?Math.min(mraid.getMaxSize().width,document.documentElement.clientWidth):"B0159"===a&&window.dapi&&dapi.getScreenSize&&dapi.isViewable()&&dapi.getScreenSize().width?dapi.getScreenSize().width:"B0119"===a?document.body.clientWidth:window.innerWidth&&!TGE.BrowserDetect.oniOS?window.innerWidth:document.documentElement&&0!=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:0},_innerHeight:function(){if(this._mDebugResize)return getQueryString().debug_resize_height?parseInt(getQueryString().debug_resize_height):1;var a=getDistributionPartner();return this._mResizeCanvasToFit&&this.resizeCanvasToParent&&this.mCanvasDiv.parentNode?this.mCanvasDiv.parentNode.offsetHeight:window.applovinMraid&&applovinMraid.getMaxSize?applovinMraid.getMaxSize().height:"B0099"===a&&window.mraid&&mraid.getMaxSize&&mraid.getMaxSize().height?Math.min(mraid.getMaxSize().height,document.documentElement.clientHeight):"B0159"===a&&window.dapi&&dapi.getScreenSize&&dapi.isViewable()&&dapi.getScreenSize().height?dapi.getScreenSize().height:"B0119"===a?document.body.clientHeight:window.innerWidth&&!TGE.BrowserDetect.oniOS?window.innerHeight:document.documentElement&&0!=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:0},_getBrowserWidth:function(){return this._innerWidth()},_getBrowserHeight:function(){return this._innerHeight()},mraidResized:function(a,b){(window.applovinMraid||"B0099"===getDistributionPartner()||"B0159"===getDistributionPartner())&&this._resizeViewport()},_centerCanvasDiv:function(a,b,c,d){var e=c||(1===this._mPreviewMode?"left":this.horizontalAlignment),f=d||(1===this._mPreviewMode?"top":this.verticalAlignment),g=0;if("center"===e?g=Math.floor(this._getBrowserWidth()/2-a/2):"right"===e&&(g=Math.floor(this._getBrowserWidth()-a)),"none"!==e){this.mCanvasDiv.style.position="absolute",this.mCanvasDiv.style.align="left",this.mCanvasDiv.style.left=g+"px";var h=document.getElementById("viewporter");h&&(h.style.align="left")}var i=0;"middle"===f?i=Math.floor(this._getBrowserHeight()/2-b/2):"bottom"===f&&(i=Math.floor(this._getBrowserHeight()-b)),"none"!==f&&(this.mCanvasDiv.style.position="absolute",this.mCanvasDiv.style.top=i+"px")},_resizeViewport:function(){if(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport"),TGE.DisableViewportResizing)return void TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"abandoning _resizeViewport - viewport resizing disabled");if(!this._mFullStage)return void TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"abandoning _resizeViewport - stage not ready");maximize="boolean"!=typeof maximize||maximize;var a=this.mCanvasDiv,b=(a.getAttribute("style"),getQueryString()["padding-top"]),b=isNaN(b)?0:parseInt(b),c=this._mFullStage._mOriginalWidth,d=this._mFullStage._mOriginalHeight,e=this._innerWidth(),f=this._innerHeight()-b;if(0==e||0==f)return void TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport abandoned due to invalid screen dimensions: "+e+"x"+f);if(this._mOldScreenWidth=e,this._mOldScreenHeight=f,this._mResizeCanvasToFit){var g=c,h=d,i=TGE.BrowserDetect.isMobileDevice?Number.MAX_VALUE:this.desktopMaxCanvasWidth,j=TGE.BrowserDetect.isMobileDevice?Number.MAX_VALUE:this.desktopMaxCanvasHeight,k=window.devicePixelRatio||1;c=Math.min(Math.max(e*k,0),i),d=Math.min(Math.max(f*k,0),j),c>this.maxCanvasWidth||d>this.maxCanvasHeight?this.maxCanvasWidth/c<=this.maxCanvasHeight/d?(d=Math.round(d*this.maxCanvasWidth/c),c=this.maxCanvasWidth):(c=Math.round(c*this.maxCanvasHeight/d),d=this.maxCanvasHeight):TGE.BrowserDetect.isMobileDevice&&(e>=700||f>=700)&&(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"clamping large screen game size..."),c<d?(d=Math.round(640*d/c),c=640):(d=Math.round(1024*d/c),c=1024));var l=getDistributionPartner();if("B0099"===l||"B0159"===l||c!==g||d!==h){if(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing canvas to: "+c+"x"+d+"..."),this.mCanvasDiv.style.width=c+"px",this.mCanvasDiv.style.height=d+"px",this.canvasWidth=c,this.canvasHeight=d,this._mFullStage){var m=TGE.RemoteSettings("orientationLock"),n=f<e?"landscape":"portrait";this._mFullStage.forceOrientationLock("responsive"!==m&&n!==m),this._mFullStage.setSize(c,d)}}else TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"no change in game size detected");this._mDivResized=!0}TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport::game size: "+c+"x"+d+", \nscreen size: "+e+"x"+f);var o=this._determineViewportScale(c,d,e,f),p=c*o,q=d*o;TGE.BrowserDetect.isMobileDevice?TGE.BrowserDetect.onAndroid&&parseInt(TGE.BrowserDetect.OSversion.charAt(0))<4?(this._scaleByCSS2D(o),this._centerCanvasDiv(p,q)):(this._scaleByCSS3D(o),this._centerCanvasDiv(p,q)):this._mResizeCanvasToFit||this.scaleToFitOnDesktop?(this._scaleByCSS2D(o),this._centerCanvasDiv(p,q)):this._centerCanvasDiv(c,d)},_determineViewportScale:function(a,b,c,d){var e={x:1,y:1};e.x=c/a,e.y=d/b;var f=!TGE.BrowserDetect.isMobileDevice||TGE.BrowserDetect.onAndroid&&"chrome"===TGE.BrowserDetect.browser.toLowerCase()?1e3:100;e.x=Math.ceil(e.x*f)/f,e.y=Math.ceil(e.y*f)/f;var g=1;return g=e.x<e.y?e.x:e.y,Math.abs(1-g)<=.01&&(g=1),g},_active:function(a){a!==this._mActive&&(this._mActive=a,this._mFullStage&&this._mFullStage.dispatchEvent({type:a?"activate":"deactivate"}))},_onVisibilityChange:function(a){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"game visibility has changed"),document.hidden||document.mozHidden||document.msHidden||document.webkitHidden?this._onDeactivate():this._onActivate()},_onDeactivate:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"game has been put in the background, killing audio and sending deactivate event..."),this._mCurrentPointer=-1,this._active(!1),this.audioManager&&!this.audioManager.isMuted()&&(this.audioManager.Mute(),this._mUnmuteOnActivate=!0)},_onActivate:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"game has been put to foreground, restoring audio and sending activate event..."),this._mCurrentPointer=-1,this._active(!0),this.audioManager&&this._mUnmuteOnActivate&&(this.audioManager.Unmute(),this._mUnmuteOnActivate=!1)},_initializeRenderer:function(a,b){this._mFullStage=new TGE.FullStage(this.mCanvasDiv,a,b),this.stage=this._mFullStage.gameStage,this.audioManager.canPlayAudio()||this.audioManager._unlockAudioOnTouch(),document.dispatchEvent(new Event("tgeStageReady")),TGE.StageReady&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.StageReadyCallback, use TGE.Game.AddEventListener('tgeStageReady') instead"),TGE.StageReady.call())},_beginLoad:function(){this.gameAsAd()&&0===this._mCustomLoader?this._loadRequiredAssets():this.assetManager.loadAssetList("loading",null,this._loadRequiredAssets.bind(this))},_loadRequiredAssets:function(){if(!this.assetManager._mLoadingOrder.length)for(var a=1;;++a){var b=this.assetManager.getAssetListFromNumber(a);if(!this.assetManager._assetListExists(b))break;this.assetManager._mLoadingOrder.push(b)}var c=null;TGE.LoadingWindow=this.gameAsAd()&&0===this._mCustomLoader?TGE.GenericLoadingWindow:TGE.LoadingWindow||TGE.GenericLoadingWindow,TGE.LoadingWindow?(this.mLoadingScreen=new TGE.LoadingWindow(this.stage.width,this.stage.height).setup({}),this.mLoadingScreen.show(this.stage)):this.mLoadingScreen=this.showManagedScreen("loading"),null!==this.mLoadingScreen&&(c=this._loadRequiredAssetsCallback.bind(this)),this._update(),this.assetManager.loadAssetList("required",c,this._finishedLoadingRequiredAssets.bind(this,0))},_loadRequiredAssetsCallback:function(a){null!==this.mLoadingScreen&&this.mLoadingScreen.handleEvent({type:"progress",percentComplete:a})},_logFinishedLoadingRequiredAssets:function(a){var b="Finished loading "+a,c=this.assetManager.getAssetGroupsFromList(a);if(c.length){b+=" groups: ";for(var d in c)b+=c[d],d!=c.length-1&&(b+=", ")}TGE.Debug.Log(TGE.Debug.LOG_INFO,b)},_finishedLoadingRequiredAssets:function(a){var b=this.assetManager._mLoadingOrder[a];if(this._mAssetListLoaded[b]="loaded",this._logFinishedLoadingRequiredAssets(b),0===a){document.dispatchEvent(new Event("tgeGameReady"));var c=window.TreSensa&&TreSensa.Playable.sessionID;this._mTestGameViewable>0?c?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"the testgameviewable parameter is not supported in production"):setTimeout(this.gameMadeViewable.bind(this),1e3*this._mTestGameViewable):c||this.gameMadeViewable(),null!==TGE.GameReadyCallback?(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.GameReadyCallback, use TGE.Game.AddEventListener('tgeGameReady') instead"),TGE.GameReadyCallback.call()):this._startGame()}var d=a+1;if(d<this.assetManager._mLoadingOrder.length)this._mTestBuffering||this._loadRequiredAssetList(d);else if(this.assetManager.allLoaded=!0,this.assetManager._mLoadedAssetsCallback&&TGE.AssetManager.GetLoadedAssets(this.assetManager._mLoadedAssetsCallback),document.dispatchEvent(new Event("tgeAssetListsLoaded")),"4"===getQueryString().tgedebug&&setTimeout(function(){var a=TGE.Game.GetInstance();a._mDebugResize=!1,a._onResize()},getQueryString().debug_resize_delay?parseInt(getQueryString().debug_resize_delay):250),this._mWaitingForAssets.length){for(var e="",f=0;f<this._mWaitingForAssets.length;++f)f&&(e+=", "),e+=this._mWaitingForAssets[f].id;TGE.Debug.Log(TGE.Debug.LOG_WARNING,"These assetAvailable() ids were not found in any asset list: "+e)}},_loadRequiredAssetList:function(a){var b=this.assetManager._mLoadingOrder[a];if("loading"===this._mAssetListLoaded[b]||"loaded"===this._mAssetListLoaded[b])return void TGE.Debug.Log(TGE.Debug.LOG_WARNING,"attempted to load asset list "+b+" more than once");this.assetManager._assetListExists(b)&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"loading asset list "+b+"..."),this._mAssetListLoaded[b]="loading",this.assetManager.loadAssetList(b,null,this._finishedLoadingRequiredAssets.bind(this,a)))},_update:function(){if(this.halt)return void requestAnimationFrame(this._update.bind(this));var a=(this._mThisLoop=(new Date).getTime())-this._mLastLoop;if(this._mFrameTime+=(a-this._mFrameTime)/this._mFilterStrength,this._mLastLoop=this._mThisLoop,!(this._mUpdateSkips<0)){if(this._mUpdateSkips>0&&this._mUpdateSkips-- >0)return void requestAnimationFrame(this._update.bind(this));this._mUpdateSkips=this.slowMotion,this._doUpdate(a)}},_doUpdate:function(a){if(this._updateFPS(),a/=1e3,this._mBuffering){this._mBuffering=!1,this._mShowBuffering=!1;for(var b in this._mBufferingOccurrences){var c=this._mBufferingOccurrences[b];1==this._mTestBuffering&&(c.testTimer-=a);var d=1!=this._mTestBuffering||c.testTimer<=0,e=this._mAssetListLoaded[b];if("queued"===e)for(var f=this.assetManager._mLoadingOrder.indexOf(b),g=1;g<=f;g++){var h=this._mAssetListLoaded[this.assetManager._mLoadingOrder[g]];if("queued"===h&&this._loadRequiredAssetList(g),"loading"===h)break}if("loaded"===e&&d){if(!c.completeFired){!this._mTestBuffering&&c.showBuffering&&TGE.Analytics.CustomEvent("buffering_complete_"+b);for(var i=0;i<c.callbacks.length;i++)c.callbacks[i].call();c.completeFired=!0}}else this._mBuffering=!0,this._mShowBuffering=this._mShowBuffering||c.showBuffering}this._mShowBuffering||this._closeBufferingScreen()}a=Math.max(this.mMinTickTime,a),a=Math.min(this.mMaxTickTime,a),this._mAdInactivityTimer+=!this._mGameViewableReceived||this._mNumInteractions>0?0:a;var j=0===this._mNumInteractions&&this._mAdInactivityTimeLimit>0&&this._mAdInactivityTimer>=this._mAdInactivityTimeLimit;if(this._mLaunchTime>0&&(this.mGameTime+=a),!j){this._mBufferingScreen||this._mFullStage._updateObjectMouseOverStates(this._mPointerX,this._mPointerY);var k={type:"update",elapsedTime:a};this._mUpdateRoot&&!this._mUpdateRoot.markedForRemoval()&&null!==this._mUpdateRoot.parent||(this._mUpdateRoot=this.stage),this._mFullStage.dispatchUpdate(k,this._mUpdateRoot)}this._mFullStage._emptyTrash(),this._mFullStage._pruneListeners(),requestAnimationFrame(this._update.bind(this)),this._mFullStage.draw()},_startGame:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"starting game..."),this._mLaunchTime=(new Date).getTime(),this._resetGame(),null!==this.onLoad&&this.onLoad.call(this),window.TreSensa&&TreSensa.Playable.initialGameLoadComplete(),1===this._mTestAdHeader?(TGE.AdHeader.Create(function(){alert("AD CLOSE")}),TGE.AdHeader.ShowCountdown(5),setTimeout(function(){TGE.AdHeader.ShowClose()},5e3)):2===this._mTestAdHeader&&(TGE.AdHeader.Create(function(){alert("AD CLOSE")}),TGE.AdHeader.ShowCountdown(30),TGE.AdHeader.ShowRewardedPlayableOverlay(),setTimeout(function(){TGE.AdHeader.ShowClose()},5e3))},_resetGame:function(){if(this.stage.removeChildren(),TGE.FirstGameWindow){var a=new TGE.FirstGameWindow(this.stage.width,this.stage.height);a.setup({}),a.show(this.stage)}},_processMousePosition:function(a,b){if(this._mPointerX=a,this._mPointerY=b,TGE.GameStage._sOrientationLock.active){var c=TGE.GameStage._sOrientationLock;c.gameHeight<c.gameWidth?(this._mPointerX=b,this._mPointerY=c.gameHeight*this._mViewportScale-a):(this._mPointerX=c.gameWidth*this._mViewportScale-b,this._mPointerY=a)}this._mPointerX/=this._mViewportScale,this._mPointerY/=this._mViewportScale},_preventBehavior:function(a){a.stopPropagation(),a.preventDefault()},_handleMouseEvent:function(a,b){for(var c,d,e=b.changedTouches?b.changedTouches.length:0;;){var f=b.target.getBoundingClientRect();--e>=0?(c=b.changedTouches[e].clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=b.changedTouches[e].clientY+document.body.scrollTop+document.documentElement.scrollTop):(c=b.clientX,d=b.clientY),c-=f.left,d-=f.top;var g=b.changedTouches&&e>=0?b.changedTouches[e].identifier:b.button;if((this.allowMultitouch||this._mCurrentPointer<0||g===this._mCurrentPointer)&&(this._processMousePosition(c,d),this._mFullStage._notifyObjectsOfMouseEvent(a,this._mPointerX,this._mPointerY,g),this.allowMultitouch||("down"===a&&this._mCurrentPointer<0?this._mCurrentPointer=g:"up"===a&&g===this._mCurrentPointer&&(this._mCurrentPointer=-1))),e<=0)break}this._preventBehavior(b)},_mouseDown:function(a){this._interaction(),window.focus(),this._mPointerDown=!0,this._handleMouseEvent("down",a)},_mouseUp:function(a){this._mPointerDown=!1,this._handleMouseEvent("up",a)},_mouseMove:function(a){this._handleMouseEvent("move",a)},_keyDown:function(a){this.blockTGEKeys||(this._interaction(),this._mKeysDown[a.keyCode]=!0,this._mFullStage._notifyObjectsOfKeyEvent("keydown",a.keyCode)),this.blockBrowserKeys&&[8,32,37,38,39,40].indexOf(a.keyCode)>-1&&a.preventDefault()},_keyUp:function(a){this.blockTGEKeys||(this._mKeysDown[a.keyCode]=!1,this._mFullStage._notifyObjectsOfKeyEvent("keyup",a.keyCode)),this.blockBrowserKeys&&[8,32,37,38,39,40].indexOf(a.keyCode)>-1&&a.preventDefault()},isKeyDown:function(a){return!0===this._mKeysDown[a]},_interaction:function(){this._mNumInteractions++,this._mLastInteraction=(new Date).getTime(),1===this._mNumInteractions&&(this._mFullStage.dispatchEvent({type:"engagement",name:"primary"}),TGE.Events.logInteraction())}},TGE.KEY_ARROW_LEFT=37,TGE.KEY_ARROW_RIGHT=39,TGE.KEY_ARROW_UP=38,TGE.KEY_ARROW_DOWN=40,TGE.KEY_SPACEBAR=32,TGE.TestCPIRequirements=function(a){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.TestCPIRequirements is deprecated, use TGE.TestPlayableAdRequirements instead.")},TGE.TestPlayableAdRequirements=function(a){if(!TGE.AssetManager.TrackAssets||"file:"===document.location.protocol)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TestPlayableAdRequirements can only be run from a webserver and with the trackassets querystring parameter set, tgedebug=3, or TGE.AssetManager.TrackAssets set to true in code.");if(window.console){var b=TGE.Game.GetInstance(),c=!0,d=!1,e=[],f=void 0===a?function(a,b){console.log(a,b)}:function(a,b){};f("",""),f("%cTEST RESULTS FOR PLAYABLE AD REQUIREMENTS:","font-weight: bold"),f("","");for(var g={pass:"#00aa00",warn:"#f69c00",fail:"#ff0000"},h={pass:"pass",fail:"fail",warn:"warn"},i=function(){var a={};return b.resizeCanvasToFit?(a.message="#1 Responsive Layout: PASS (note this does not guarantee layouts are visually acceptable across all screen sizes)",a.conclusion=h.pass):(a.message="#1 Responsive Layout: FAIL",a.conclusion=h.fail),a},j=function(){var a={},c=Math.round(b.assetManager.totalAssetFootprint(!0)/1024);return c<200?(a.message="#2 Asset Footprint: PASS ("+c+" KB)",a.conclusion=h.pass):200===c?(a.message="#2 Asset Footprint: PASS with warning ("+c+" KB)",a.conciseMessage="Asset Footprint: WARNING ("+c+" KB)",a.conclusion=h.warn):(a.message="#2 Asset Footprint: FAIL ("+c+" KB)",a.conclusion=h.fail),a},k=function(){var a={},c=3,d=b.assetManager.totalImagesLoadedBeforeStart();return d<=c?(a.message="#3 Initial Load Image Count: PASS ("+d+" images, max "+c+")",a.conclusion=h.pass):(a.message="#3 Initial Load Image Count: FAIL ("+d+" images, max "+c+")",a.conclusion=h.fail),a},l=function(){var a={},c=8,d=b.assetManager.totalImagesLoadedAfterStart();return d<=c?(a.message="#4 Progressive Load Image Count: PASS ("+d+" images, max "+c+")",a.conclusion=h.pass):(a.message="#4 Progressive Load Image Count: FAIL ("+d+" images, max "+c+")",a.conclusion=h.fail),a},m=function(){var a={},c=1,d=b.assetManager.totalFontsLoadedBeforeStart();return d<=c?(a.message="#5 Initial Load Font Count: PASS ("+d+" fonts, max "+c+")",a.conclusion=h.pass):(a.message="#5 Initial Load Font Count: FAIL ("+d+" fonts, max "+c+")",a.conclusion=h.fail),a},n=function(){var a={},c=1,d=b.assetManager.totalFontsLoadedAfterStart();return d<=c?(a.message="#6 Progressive Load Font Count: PASS ("+d+" fonts, max "+c+")",a.conclusion=h.pass):(a.message="#6 Progressive Load Font Count: FAIL ("+d+" fonts, max "+c+")",a.conclusion=h.fail),a},o=function(){var a={};return b.assetManager.largestImageDimension()<=1024?(a.message="#7 Image Dimension Cap: PASS",a.conclusion=h.pass):(a.message="#7 Image Dimension Cap: FAIL (an image exists that has width/height greater than 1024px)",a.conclusion=h.fail),a},p=function(){var a={},c=TGE.Events.engagements||TGS.Analytics.engagementLevel&&TGS.Analytics.engagementLevel()-1;return 0===b._mNumInteractions||c>=1?(a.message="#8 Secondary Engagement: PASS "+(0===b._mNumInteractions?"(not required yet)":"(event was fired)"),a.conclusion=h.pass):b._mNumInteractions<=2&&c<1?(a.message="#8 WARNING: Secondary engagement event has not been fired yet",a.conclusion=h.warn):(a.message="#8 FAIL: Secondary engagement event has not been fired",a.conclusion=h.fail),a},q=function(){var a={};0!==Object.keys(TGE.AdHeader._sCustomSettings).length?b.assetManager.getAsset(TGE.AdHeader._sCustomSettings.closeImage,!1)?(a.message="#9 Custom Close Button: PASS (asset was loaded)",a.conclusion=h.pass):(a.message="#9 Custom Close Button: FAIL (custom close image not loaded)",a.conclusion=h.fail):(a.message="#9 Custom Close Button: PASS (asset not required)",a.conclusion=h.pass);return a},r=function(){var a={};return b._mLaunchTime>0&&window.GameConfig&&GameConfig.TGE.FONT_LOADER&&0===TGE.AssetManager._sTotalFonts&&(a.message="WARNING: No fonts have been loaded but FONT_LOADER is true",a.conclusion=h.warn),a},s=function(){var a={},b=TGE.AssetManager._sTotalAssetsOverFootprintLimit;return b>0&&(a.message="WARNING: "+b+" image"+(b>1?"s":"")+" over 400KB.  Check if all images are getting TinyPNGed.",a.conclusion=h.warn),a},t=function(a){var b=a();if(b.message&&f("%c"+b.message,"color: "+g[b.conclusion]),"string"==typeof b.conclusion&&b.conclusion!==h.pass)if(c=!1,b.conciseMessage)e.push(b.conciseMessage);else if(b.message){var i=b.message.replace(/^#[0-9]+\s+(.*)/,"$1");e.push(i)}b.conclusion===h.warn&&(d=!0)},u=[i,j,k,l,m,n,o,p,q,r,s],v=0;v<u.length;v++)t(u[v]);return f("",""),c||(f("%cThis game does not meet Playable Ad Technical Requirements and is NOT production ready!","color: "+g.fail+"; font-weight: bold"),f("","")),"errors"===a?e:"code"===a?c?d?2:1:0:c?"PASS":"FAIL"}},TGE.Completion=function(a){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.Completion is deprecated, use TGE.Analytics.Completion"),TGE.Analytics.Completion(a)},TGE._DefaultTimeBetweenClicks=1,TGE._ReadyForNextClick={},TGE.Game.Clickthrough=function(a,b,c){if(!a||!b&&"default"!==a)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Game.Clickthrough requires name and URL parameters");if(!1!==TGE._ReadyForNextClick[a]){TGE._ReadyForNextClick[a]=!1,c="number"==typeof c?c:TGE._DefaultTimeBetweenClicks;var d=function(){TGE._ReadyForNextClick[a]=!0};if(setTimeout(d,1e3*c),"object"==typeof b){var e=TGE.Game.GetInstance().getCampaignID();if("string"==typeof b[e])b=b[e];else{if("string"!=typeof b.default)return;b=b.default}}else if("string"==typeof b){var f=Math.round((new Date).getTime()/1e3);b=b.replace("=[timestamp]","="+f)}TGE.Events.doClickthrough.call(TGE.Events,a,b)}},TGE.Game.AppstoreClickthrough=function(){TGE.Game.Clickthrough("default")},TGE.GetFromStorage=function(a){try{return"B0153"===getDistributionPartner()?null:window.localStorage.getItem(a)}catch(b){return null}},TGE.SetInStorage=function(a,b){try{return"B0153"===getDistributionPartner()?null:window.localStorage.setItem(a,b)}catch(c){}},Object.defineProperty(TGE.Game.prototype,"resizeCanvasToFit",{get:function(){return this._mResizeCanvasToFit},set:function(a){this._mResizeCanvasToFit=1!==this._mPreviewMode&&a}}),TGE.RedirectUser=TGE.ClickThrough=function(a,b,c){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.ClickThrough and TGE.RedirectUser are deprecated, use TGE.Game.Clickthrough"),TGE.Game.Clickthrough(a,b,c)},TGE.GameState={PROMO:"promo",GAME:"game",TUTORIAL:"tutorial",_mState:getQueryString().state,RegisterStates:function(){},GetInstance:function(){return TGE.GameState},GetState:function(){return TGE.GameState._mState}},TGE.GameReadyCallback=null,TGE.GameViewableCallback=null,TGE.SessionEndedCallback=null,TGE.StageReady=null,TGE.Game._sEventListeners={},TGE.Game.AddEventListener=function(a,b){document.addEventListener(a,b),TGE.Game._sEventListeners[a]||(TGE.Game._sEventListeners[a]=[]),TGE.Game._sEventListeners[a].push(b);var c=TGE.Game.GetInstance();"tgeGameReady"===a&&"loaded"===c._mAssetListLoaded.required?b.call():"tgeGameViewable"===a&&c._mGameViewableReceived?b.call():"tgeStageReady"===a&&c.stage?b.call():"tgeAssetListsLoaded"===a&&c.assetManager.allLoaded?b.call():"tresensaSessionEnded"===a&&window.TreSensa&&TreSensa.Playable.sessionEnded&&b.call()},TGE.Game.RemoveEventListener=function(a,b){if(b){document.removeEventListener(a,b);for(var c=TGE.Game._sEventListeners[a],d=b.toString(),e=0;c&&e<c.length;e++)if(c[e].toString()===d)return void c.splice(e,1)}},TGE.Game.RemoveAllListeners=function(){for(var a in TGE.Game._sEventListeners)TGE.Game._sEventListeners[a].forEach(function(b){document.removeEventListener(a,b)});TGE.Game._sEventListeners={}},TGE.Game._sServerRequestId=0,TGE.Game.prototype._mServerRequests={},TGE.Game.ServerMode="POST",TGE.Game.prototype.accumulatorIncrement=function(a,b,c){var d={index:a,value:b};this._accumulatorRequest("increment",d,c)},TGE.Game.prototype.accumulatorGetTotals=function(a){var b={};this._accumulatorRequest("getTotals",b,a)},TGE.Game.prototype._accumulatorRequest=function(a,b,c){if(!window._TRESETTINGS)return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"accumulator server requests will not work locally"),void("function"==typeof c&&c.call(null,{success:!0,result:{}}));b.creativeId=_TRESETTINGS.gameId,this.serverRequest(a,b,c,5,!0)},TGE.Game.prototype.serverRequest=function(a,b,c,d,e){c="function"==typeof c?c:function(){};var f=null;if("string"==typeof a&&"object"==typeof b||(f="invalid arguments"),null!==f)return void("function"==typeof c?c.call(null,{success:!1,error:f}):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"serverRequest failed, "+f));var g=!!window.TreSensa&&TreSensa.Playable.onDevServer(),h=e?"accumulators":"brandgame",i="https://"+h+(g?"-dev":"")+".tresensa.com/";i+=a,d="number"==typeof d&&d>.1?1e3*d:8e3;var j=TGE.Game._sServerRequestId++;b._id=j;var k=this._mServerRequests[j]={complete:!1,callback:c},l="request="+btoa(JSON.stringify(b));setTimeout(this._serverRequestTimeout.bind(this,j),d),"POST"===TGE.Game.ServerMode?this._corsRequest(k,i,l):this._jsonpRequest(k,i,l)},TGE.Game.prototype._serverRequestTimeout=function(a){this._mServerRequests[a]&&!this._mServerRequests[a].complete&&(this._mServerRequests[a].complete=!0,this._mServerRequests[a].callback.call(null,{success:!1,error:"request timed out"}))},window._tgeJsonpCallback=function(a){var b=TGE.Game.GetInstance()._mServerRequests[a._id];"object"!=typeof b?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"server request returned bad data, unable to link to original request"):b.complete||(b.complete=!0,b.callback.call(null,a))},TGE.Game.prototype._jsonpRequest=function(a,b,c){var d=b+"?"+c,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=d,document.getElementsByTagName("head")[0].appendChild(e)},TGE.Game.prototype._corsRequest=function(a,b,c,d,e){var f=null,g=null;d=d||{"Content-type":"application/x-www-form-urlencoded"};var h=function(b){a.complete||(a.complete=!0,a.callback.call(null,b))},i=function(a,b){b=b||{};for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])},j=function(a,b){b=b||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};try{window.XMLHttpRequest&&"withCredentials"in(f=new XMLHttpRequest)&&(f.open("POST",b,!0),i(f,d),j(f,e),f.send(c))}catch(k){h({success:!1,error:"server failed to respond"})}try{f.onreadystatechange=function(){if(4==f.readyState)if(200!=f.status)h({success:!1,error:"the server returned error code "+f.status});else try{g=JSON.parse(f.responseText),h(g)}catch(a){h({success:!1,error:"server returned bad data"})}}}catch(l){h({success:!1,error:"unknown server error"})}},TGE.AssetLoader=function(){return this.mAssetList=null,this.mUpdateCallback=null,this.mCompleteCallback=null,this},TGE.AssetLoader.prototype={getAssetURL:function(a,b,c){return(!0===a.absolutePath?"":b)+(a.localized?c:"")+a.url},loadAssetFromAssetList:function(a,b,c,d,e,f){var g,h=c.url?c.url.split(".").pop().toLowerCase():null,i="audio"===c.assetType||"ogg"===h||"mp3"===h;d&&(g=d.slice(0,-c.url.length));var j=null;if(i)f&&(j=b.addAudio(c.id,d,g+c.backup_url));else if(c.googleFamilies)j=b.addFont(c.googleFamilies);else if("font"===c.assetType||"ttf"===h||"woff"===h||"woff2"===h||"otf"===h)j=b.addFont(c.id,d);else if("js"===h)j=b.addJavascript(d);else if("json"===h)c.id!==trimmedFilename(d)&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"id field not supported for JSON asssets"),j=b.addJSON(d);else if("mp4"===h)j=b.addVideo(d,c);else if(a.useSpriteSheets&&c.sheet){var k=c.sheet,l=a._mSpriteSheets[k];l&&!e||(l=b.addImage(g+c.sheet),null!==l&&a.addLoadedAsset(trimmedFilename(c.sheet),l),a._mSpriteSheets[c.sheet]=l);var m=TGE.AssetManager.SpriteSheets[trimmedFilename(k)];if(m){var n=m[trimmedFilename(d)];n&&(j={spriteSheet:l,x:n[0],y:n[1],width:n[2],height:n[3]},n.length>4&&(j.offsetX=n[4],j.offsetY=n[5],j.drawWidth=j.width,j.drawHeight=j.height,n.length>6&&(j.width=n[6],j.height=n[7])))}}else j=b.addImage(d);null!==j&&a.addLoadedAsset(c.id,j)},loadAssetList:function(a,b,c,d,e,f,g){function h(a,b){return a="string"==typeof a?a:b,a.length>0&&"/"!==a.charAt(a.length-1)?a+"/":a}if(null===(c=c||a._mRootLocation))return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"asset list manually loaded before game launch, will be deferred until after all required assets have loaded"),void TGE.Game.AddEventListener("tgeAssetListsLoaded",this.loadAssetList.bind(this,a,b,c,d,e,f,g));var i=!0===b.errors;if(b.errors=!1,b.loaded=!1,0===b.list.length)return f&&f(1),void(g&&g({errors:!1}));c=h(c,""),d=h(d,c.length>0?"/":""),d+=e+"/",this.mAssetList=b,this.mUpdateCallback=f,this.mCompleteCallback=g;for(var j=new TGE.Loader({statusInterval:3e3}),k=!1,l=0;l<b.list.length;l++){var m=b.list[l];if(i||!a._mAssetCache[m.id]){var n=m.url?m.url.split(".").pop().toLowerCase():null,o=(m.assetType,m.url?this.getAssetURL(m,c,d):null);this.loadAssetFromAssetList(a,j,m,o,i,a.loadAudio),k=!0}}k||(f&&f(1),g&&g({errors:!1})),j.addProgressListener(TGE.AssetLoader.prototype._loaderCallback.bind(this)),j.addCompletionListener(TGE.AssetLoader.prototype._completeCallback.bind(this)),j.start()},_loaderCallback:function(a){if(a.error)TGE.Debug.Log(TGE.Debug.LOG_ERROR,"could not load asset '"+a.resource.getName()+"'"),this.mAssetList.errors=!0;else if(TGE.AssetManager.TrackAssets){var b=!TGE.Game.GetInstance().assetManager._mAssetLists.required.loaded,c=a.resource&&a.resource.img,d=a.resource&&a.resource.font;if(c?b?TGE.AssetManager._sTotalImagesLoadedBeforeStart++:TGE.AssetManager._sTotalImagesLoadedAfterStart++:d&&(b?TGE.AssetManager._sTotalFontsLoadedBeforeStart++:TGE.AssetManager._sTotalFontsLoadedAfterStart++),a.resource&&a.resource.img){var e=Math.max(a.resource.img.width,a.resource.img.height);e>TGE.AssetManager._sLargestImageDimension&&(TGE.AssetManager._sLargestImageDimension=e)}this._trackFilesize(a.resource,b)}if(this.mUpdateCallback){var f=a.completedCount/a.totalCount;this.mUpdateCallback(f)}},_completeCallback:function(){for(var a=TGE.Game.GetInstance().assetManager,b=TGE.Game.GetInstance()._mFullStage._mRenderer,c=0;c<this.mAssetList.list.length;c++){var d=this.mAssetList.list[c];if(!d.assetType){var e=a.getAsset(d.id,!1);if(e&&(e.src||e.spriteSheet)){var f=b.processImage(e.spriteSheet?e.spriteSheet:e,!!e.spriteSheet);f&&(a._mRendererTextures[d.id]=f)}}}var g=!1;null!==this.mAssetList&&(this.mAssetList.loaded=!0,g=this.mAssetList.errors,this.mAssetList=null),this.mCompleteCallback&&this.mCompleteCallback({errors:g})},_trackFilesize:function(a,b){var c=new XMLHttpRequest;c.open("HEAD",a.getName(),!0),c.onreadystatechange=function(){if(this.readyState==this.DONE){var d=parseInt(c.getResponseHeader("Content-Length"));TGE.AssetManager._sTotalAssetFootprint+=d,b&&(TGE.AssetManager._sTotalAssetFootprintBeforeStart+=d);var e=d/1024>400,f=a.img;e&&f&&TGE.AssetManager._sTotalAssetsOverFootprintLimit++}},c.send()}},TGE.FontLoader=function(a,b){this.loader=null,this.font=null,this.id=a,this.url=b,this.pollCount=0,this.start=function(a){this.loader=a;var b=this;if("[object Array]"===Object.prototype.toString.call(this.id))if(this.url=this.id,window._TREFONTS){for(var c=function(){},d=0;d<this.id.length;d++){var e=!1,f="could not parse Google Font entry",g=this.id[d].split(":"),h=g[0];if(g.length<=2)if(f="no inlined font found for '"+h+"'",_TREFONTS[h])if(1===g.length)TGE.AssetManager.LoadFontData(h,_TREFONTS[h].data,null,c);else for(var i=g[1].split(","),j=0;j<i.length;j++)_TREFONTS[h].data[i[j]]?TGE.AssetManager.LoadFontData(h,_TREFONTS[h].data[i[j]],parseInt(i[j]),c):(e=!0,f+=" weight "+i[j]);else e=!0;else e=!0;e&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,f),this.loader.onError(this))}b.loader.onLoad(b)}else{WebFontConfig={google:{families:this.id},active:function(){b.loader.onLoad(b)},fontinactive:function(){b.loader.onError(b)}};var k=document.createElement("script");k.src=("https:"==document.location.protocol?"https":"http")+"://googleapis.tresensa.com/ajax/libs/webfont/1/webfont.js",k.type="text/javascript",k.async="true";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(k,l)}else{TGE.AssetManager._sTotalFonts++;try{var m=this.url;if(window._TREFONTS&&_TREFONTS[n]){var g=this.url.split("/"),n=g[g.length-1];m=_TREFONTS[n]}TGE.AssetManager.LoadFontData(this.id,m,null,b.loader.onLoad.bind(b.loader,b))}catch(o){return void b.loader.onError(b)}}},this.checkStatus=function(){if(this.pollCount>=3)return void this.loader.onTimeout(this);this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.ScriptLoader=function(url){this.loader=null,this.scriptNode=null,this.url=url,this.pollCount=0,this.scriptLoaded=function(){if(this.scriptNode&&(this.scriptNode.onreadystatechange=null,this.scriptNode.onload=null),-1!==this.url.indexOf("assets/fonts/")){var a=this.url.match(/([^\/]+)(?=\.\w+$)/)[0];return a=a.replace(/_/g," "),void TGE.AssetManager.LoadFontScript(a,!0,this.loader.onLoad.bind(this.loader,this))}this.loader.onLoad(this)},this.start=function(loader){if(this.loader=loader,window._TRESCRIPTS){var parts=this.url.split("/"),filename=parts[parts.length-1],script=_TRESCRIPTS[filename];if(script)try{window.Function?Function(script)():eval(script),this.scriptLoaded()}catch(e){this.loader.onError(this)}else this.loader.onError(this)}else{var h=document.getElementsByTagName("head")[0];this.scriptNode=document.createElement("script"),this.scriptNode.type="text/javascript",this.scriptNode.src=TGE.AssetManager._sFullPathTransformation(this.url),this.scriptNode.onreadystatechange=this.scriptLoaded.bind(this),this.scriptNode.onload=this.scriptLoaded.bind(this),h.appendChild(this.scriptNode)}},this.checkStatus=function(){if(this.pollCount>=3)return void this.loader.onTimeout(this);this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.JSONLoader=function(a){this.loader=null,this.json={},this.url=a,this.pollCount=0,this.start=function(b){if(this.loader=b,window._TREJSON){var c=this.url.split("/"),d=c[c.length-1],e=_TREJSON[d];e?this.jsonData(e):this.loader.onError(this)}else{var f=this;fetch(TGE.AssetManager._sFullPathTransformation(a)).then(function(a){return a.json()}).then(f.jsonData.bind(f)).catch(function(a){TGE.Debug.Log(TGE.Debug.LOG_ERROR,a),f.loader.onError(f)})}},this.jsonData=function(a){TGE.DeepCopy(a,this.json),this.loader.onLoad(this)},this.checkStatus=function(){if(this.pollCount>=3)return void this.loader.onTimeout(this);this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},"function"==typeof TGE.Loader&&(TGE.Loader.prototype.addFont=function(a,b){var c=new TGE.FontLoader(a,b);return this.add(c),c.font},TGE.Loader.prototype.addJSON=function(a){var b=new TGE.JSONLoader(a);return this.add(b),b.json},TGE.Loader.prototype.addJavascript=function(a){var b=new TGE.ScriptLoader(a);return this.add(b),b.scriptNode}),TGE.AssetManager=function(a){return null!==TGE.AssetManager.sAssetManagerInstance?TGE.AssetManager.sAssetManagerInstance:(TGE.AssetManager.sAssetManagerInstance=this,void 0===a&&(a=!0),this.useSpriteSheets=!0,this.loadAudio=a,this.allLoaded=!1,this.languagesFolder="languages",this._mSpriteSheets={},this._mAssetLists={},this._mLoadingOrder=[],this._mAssetCache={},this._mRendererTextures={},this._mGroupToListKey=null,this._mListToGroupKey=null,this._mLoadedAssetsCallback=null,this._mLoadedAssets=[],this._mRootLocation=null,this._verifyAssetListExists("loading"),this._verifyAssetListExists("required"),"1"!==getQueryString().trackassets&&"true"!==getQueryString().trackassets&&"3"!==getQueryString().tgedebug||(TGE.AssetManager.TrackAssets=!0),this._parseAssets(),this)},TGE.AssetManager.TrackAssets=!1,TGE.AssetManager.SpriteSheets={},TGE.AssetManager.sAssetManagerInstance=null,TGE.AssetManager._sTotalFonts=0,TGE.AssetManager._sTotalImagesLoadedBeforeStart=0,TGE.AssetManager._sTotalImagesLoadedAfterStart=0,TGE.AssetManager._sTotalFontsLoadedBeforeStart=0,TGE.AssetManager._sTotalFontsLoadedAfterStart=0,TGE.AssetManager._sTotalAssetFootprint=0,TGE.AssetManager._sTotalAssetFootprintBeforeStart=0,TGE.AssetManager._sTotalAssetsOverFootprintLimit=0,TGE.AssetManager._sLargestImageDimension=0,TGE.AssetManager._sFullPathTransformation=function(a){return a},TGE.AssetManager.SetFullPathTransformation=function(a){TGE.AssetManager._sFullPathTransformation=a},TGE.AssetManager.GetImage=function(a){return TGE.AssetManager.Get(a)},TGE.AssetManager.Get=function(a){return null===TGE.AssetManager.sAssetManagerInstance?null:TGE.AssetManager.sAssetManagerInstance.getAsset(a)},TGE.AssetManager.Exists=function(a){return null!==TGE.AssetManager.sAssetManagerInstance&&null!==TGE.AssetManager.sAssetManagerInstance.getAsset(a,!1)},TGE.AssetManager.GetTexture=function(a){return null===TGE.AssetManager.sAssetManagerInstance?null:TGE.AssetManager.sAssetManagerInstance.getTexture(a)},TGE.AssetManager.GetLoadedAssets=function(a){var b=TGE.AssetManager.sAssetManagerInstance;b&&(b._mLoadedAssetsCallback=a,b.allLoaded&&a(b._mLoadedAssets))},TGE.AssetManager.LoadFontScript=function(a,b,c){if(!window._TREFONTS||!_TREFONTS[a]){var d=a.replace(/ /g,"_");if(!window._TREFONTS||!_TREFONTS[d])return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"inlined font '"+a+"' was not found");a=d}var e=_TREFONTS[a];if("string"==typeof e.data)b?TGE.AssetManager.WaitForFont(a,null,c):TGE.AssetManager.LoadFontData(a,e.data);else if("object"==typeof e.data){var f=0,g=Object.keys(e.data).length;for(var h in e.data)e.data.hasOwnProperty(h)&&(b?TGE.AssetManager.WaitForFont(a,h,function(){++f===g&&c()}):TGE.AssetManager.LoadFontData(a,e.data[h],h))}return e},TGE.AssetManager.LoadFontData=function(a,b,c,d){var e=document.createElement("style"),f=c?"font-weight: "+c+";":"";e.appendChild(document.createTextNode("@font-face {font-family: '"+a+"'; "+f+" src: url('"+b+"');}")),TGE.AssetManager.WaitForFont(a,c,d),document.head.appendChild(e)},TGE.AssetManager.WaitForFont=function(a,b,c){var d=b?{weight:b}:null,e=new FontFaceObserver(a,d),f=1e3;e.load(null,f).then(function(){c&&c()},function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"could not load '"+a+(b?":"+b:"")+"' font within "+f+"ms, is it too big?")})},TGE.AssetManager.prototype={_setRootLocation:function(a){this._mRootLocation=a,window.GameConfig&&GameConfig.PACKAGE_ASSETS&&GameConfig.PACKAGE_ASSETS.forEach(function(a){this._recordAsset(this._mRootLocation+a)}.bind(this))},loadAssets:function(a){if(null!==this._mGroupToListKey)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"assetManager.loadAssets() should only be called once");if(!Array.isArray(a)||0===a.length)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Parameter passed into loadAssets() must be an array and can't be an empty array");this._buildAssetGroupListAssociations(a),getQueryString().assetLoaderDebug&&this._printAssetManagerDebug();var b,c,d,e=["assetGroup","tinypng","googleuac","facebook","assetName","fileName","fileType"];for(var f in this._assetConfigs)if(c=this._assetConfigs[f],c.assetGroup,d=this._getFileTypeFromAssetConfig(c),b=this.getAssetListFromGroup(c.assetGroup)){for(var g in e)delete c[e[g]];"sheet"===d?this.addSheetImages(b,c):this.addAsset(b,c)}},addAssetSettings:function(a,b){if(!this._assetConfigs[a])return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager can't find asset '"+a+"' to change its settings");for(var c in b)this._assetConfigs[a].hasOwnProperty(c)?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"assetManager.addAssetSettings can only be add new settings, not modify ones defined in GameConfig. '"+c+"' was previously defined in GameConfig, therefore cannot be modified using 'addAssetSettings'"):this._assetConfigs[a][c]=b[c]},getAssetListFromGroup:function(a){return this._mGroupToListKey[a]},getAssetGroupsFromList:function(a){return this._mListToGroupKey?this._mListToGroupKey[a]:[]},getAssetListFromNumber:function(a){return"required"+(a>1?a:"")},_parseAssets:function(){this._assetConfigs=[];var a=window.TreSensa&&TreSensa.Playable.packagedBuild;if(window.GameConfig&&GameConfig.ASSETS){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"GameConfig.ASSETS is no longer supported, switch to code-based asset loading");for(var b=0;b<GameConfig.ASSETS.length;b++){var c=GameConfig.ASSETS[b];if(c.url&&c.assetGroup){if(c.remoteSetting){var d=c.remoteSetting.name,e=c.remoteSetting.options,f=TGE.RemoteSettings(d);if(!(-1!==e.indexOf(f)))continue}if(!a||!1!==c.packageBuild){if(c.url=this._doRemoteSettingStringReplace(c.url),"string"==typeof c.subsheetURL)c.subsheetURL=this._doRemoteSettingStringReplace(c.subsheetURL);else if(Array.isArray(c.subsheetURL))for(var g in c.subsheetURL)c.subsheetURL[g]=this._doRemoteSettingStringReplace(c.subsheetURL[g]);c.layoutURL&&(c.layoutURL=this._doRemoteSettingStringReplace(c.layoutURL)),c.id=c.assetName?c.assetName:trimmedFilename(c.url),this._assetConfigs.push(c)}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"every asset object in GameConfig.ASSETS must have 'url' and 'assetGroup' properties")}GameConfig.ASSETS=null}},_getFileTypeFromAssetConfig:function(a){var b=null,c=a.url?a.url.split(".").pop().toLowerCase():null,d={image:["png","jpg"],audio:["ogg","mp3"],font:["ttf","woff","woff2","otf"],script:["js"],video:["mp4"]};if(c){for(var e in d)if(-1!==d[e].indexOf(c)){b=e;break}"image"===b&&(TGE.AssetManager.SpriteSheets[trimmedFilename(a.url)]||a.layoutURL||a.subsheetURL)&&(b="sheet")}return b},_printAssetManagerDebug:function(){var a=this._mListToGroupKey,b="\n\nASSET LIST TO ASSET GROUP KEY\n";for(var c in a){b+=c+":";for(var d in a[c])b+=" "+a[c][d]+",";b=b.slice(0,-1),b+="\n"}b+="\n\nASSET INFO";var e,f,g;for(var c in this._assetConfigs)if(e=this._assetConfigs[c],f=this._getFileTypeFromAssetConfig(e),g=this.getAssetListFromGroup(e.assetGroup)){var h=Math.max(0,25-e.id.length);b+="\n"+e.id+":"+Array(h).join(" ")+"list="+g+", type="+f+", group="+e.assetGroup+", url="+e.url}b+="\n\n\n",console.log(b)},_doRemoteSettingStringReplace:function(a){for(var b=this._getNextRemoteSettingToStringReplace(a);b;)TGE.RemoteSettings.HasSetting(b)?(a=a.replace("["+b+"]",TGE.RemoteSettings(b)),TGE.RemoteSettings.GetSettings()[b].options||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"remote setting' "+b+"' is mentioned in an asset url, but doesn't have an 'options' array passed in.  An options array is required for remote settings refrenced in asset urls so the grunt script knows what assets to package during deploy.")):(a=a.replace("["+b+"]",b),TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting'"+b+"' mentioned in asset url '"+a+"' doesn't exist")),b=this._getNextRemoteSettingToStringReplace(a);return a},_getNextRemoteSettingToStringReplace:function(a){var b=/\[[^\[]*\]/g,c=b.exec(a);return c&&(c=c[0],c=c.substring(1,c.length-1)),c},_cleanAssetGroupArray:function(a){var b=[],c=[],d=[];for(var e in this._assetConfigs){var f=this._assetConfigs[e].assetGroup;-1===d.indexOf(f)&&d.push(f)}for(var e=0;e<a.length;e++){b[e]=[];var g=a[e];g=Array.isArray(g)?g:[g];for(var h in g)-1!==d.indexOf(g[h])&&b[e].push(g[h])}for(var e in b)b[e].length>0&&c.push(b[e]);return c},_buildAssetGroupListAssociations:function(a){this._mGroupToListKey={},this._mListToGroupKey={},a=this._cleanAssetGroupArray(a);for(var b,c,d=0;d<a.length;d++){b=this.getAssetListFromNumber(d+1);for(var e in a[d])c=a[d][e],this._buildAssetGroupListAssociation(c,b)}},_buildAssetGroupListAssociation:function(a,b){this._mGroupToListKey[a]=b,this._mListToGroupKey[b]||(this._mListToGroupKey[b]=[]),this._mListToGroupKey[b].push(a)},_assetListExists:function(a){return this._mAssetLists.hasOwnProperty(a)},_verifyAssetListExists:function(a){this._assetListExists(a)||(this._mAssetLists[a]={loaded:!1,list:[]})},_recordAsset:function(a){-1===this._mLoadedAssets.indexOf(a)&&this._mLoadedAssets.push(a)},registerAssetLists:function(a){if(!Array.isArray(a)||"required"!==a[0])return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,'registerAssetLists must be called with an Array, and the first entry must be "required"');for(var b=a.length;--b>=0;)this._assetListExists(a[b])||TGE.Debug.Log(TGE.Debug.LOG_ERROR,"assetList '"+a[b]+"', listed in registerAssetLists, does not exist");this._mLoadingOrder=a.slice()},assignImageAssetList:function(a,b){this._verifyAssetListExists(a),this._mAssetLists[a]={loaded:!1,list:b}},addAssets:function(a,b){if(this._verifyAssetListExists(a),Array.isArray(b))for(var c=0;c<b.length;++c)this.addAsset(a,b[c]);else this.addAsset(a,b)},addAsset:function(a,b){this._verifyAssetListExists(a),!b.id&&b.url&&(b.id=trimmedFilename(b.url)),this._mAssetLists[a].list.push(b)},addSheetImages:function(a,b,c,d){var e;"object"==typeof b&&(e=b.subsheetURL,c=c||b.layoutURL,d=void 0!==d?d:b.localized||!1,b=b.sheetURL||b.url),2==parseInt(getQueryString().testbuffering)&&(a="required"),this._verifyAssetListExists(a);var f=this._mAssetLists[a];!0===c?(f.localizedSheets=f.localizedSheets||[],f.localizedSheets.push(b)):"string"==typeof c||e?(f.layoutFiles=f.layoutFiles||[],f.layoutFiles.push({sheetURL:b,subsheetURL:e,layoutURL:c,localized:d})):this._addSheetImagesToAssetList(f,b,d)},_prepSubsheet:function(a,b){var c=TGE.AssetManager.SpriteSheets[b];if(c){var d=TGE.AssetManager.SpriteSheets[a];if(d){var e=c[a];if(e){for(var f in d){var g=d[f].slice();g[0]+=e[0],g[1]+=e[1],c[f]=g}delete TGE.AssetManager.SpriteSheets[a]}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"subsheet '"+a+"' not found in main sheet "+b)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager can't find subsheet '"+a+"'")}},addTFXImages:function(a,b){this._verifyAssetListExists(a);for(var c=0;c<b.length;c++){var d=b[c];d.imageList=this._mAssetLists[a].list,d.tfxClass.AddRequiredImagesToAssetList(d)}},addTFXAssets:function(a,b){this.addTFXImages(a,b)},loadAssetList:function(a,b,c){var d=this._mAssetLists[a];d?this._loadAssetList(d,b,c):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager could not locate asset list '"+a+"'"),c&&c({errors:!1}))},loadAssetGroup:function(a,b,c){var d=this.getAssetListFromGroup(a);this.loadAssetList(d,b,c)},addImage:function(a,b){this.addLoadedAsset(a,b)},addLoadedAsset:function(a,b){this._mAssetCache[a]=b},trimAsset:function(a,b){"string"!=typeof b&&(b="top bottom left right");var c=this.getAsset(a);c.spriteSheet&&(b.indexOf("top")>=0&&(++c.y,--c.height),b.indexOf("bottom")>=0&&--c.height,b.indexOf("left")>=0&&(++c.x,--c.width),b.indexOf("right")>=0&&--c.width)},getImage:function(a,b){return this.getAsset(a,b)},getAsset:function(a,b){b=void 0===b||b;var c=this._mAssetCache[a];return b&&null!=a&&!c&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.getAsset could not find the asset '"+a+"'"),c||null},getTexture:function(a,b){b=void 0===b||b;var c=this._mRendererTextures[a];return b&&null!=a&&!c&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.getTexture could not find a texture for '"+a+"'"),c||null},addSheetImagesToAssetList:function(a,b){this.addSheetImages(a,b)},totalAssetFootprint:function(a){return a?TGE.AssetManager._sTotalAssetFootprintBeforeStart:TGE.AssetManager._sTotalAssetFootprint},totalImagesLoadedBeforeStart:function(){return TGE.AssetManager._sTotalImagesLoadedBeforeStart},totalImagesLoadedAfterStart:function(){return TGE.AssetManager._sTotalImagesLoadedAfterStart},totalFontsLoadedBeforeStart:function(){return TGE.AssetManager._sTotalFontsLoadedBeforeStart},totalFontsLoadedAfterStart:function(){return TGE.AssetManager._sTotalFontsLoadedAfterStart},largestImageDimension:function(){return TGE.AssetManager._sLargestImageDimension},_addSheetImagesToAssetList:function(a,b,c){var d=trimmedFilename(b),e=TGE.AssetManager.SpriteSheets[d];if(!e)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.addSheetImages could not locate sheet '"+b+"'");for(var f in e)if(e.hasOwnProperty(f)&&(a.list.push({id:f,url:f+".png",sheet:b,localized:!0===c}),a.layoutFiles))for(var g=TGE.Game.GetInstance(),h=g._mWaitingForAssets,i=h.length;--i>=0;){var j=h[i];if(j.id===f||j.id===d)for(var k in this._mAssetLists)this._mAssetLists[k]===a&&(g.waitForAssetList(k,j.callback,j.showBuffering),h.splice(i,1))}},_loadAssetList:function(a,b,c){function d(a,b){TGE.AssetManager.SpriteSheets[trimmedFilename(b)]||a.list.push({url:b})}if(!0===a.loaded&&!0!==a.errors)b&&b(1),c&&c({errors:!1});else{var e=TGE.RemoteSettings("lang");if(a.localizedSheets)for(var f=0;f<a.localizedSheets.length;f++){var g=a.localizedSheets[f],h=trimmedFilename(g),i=h+("en"!==e?"_"+e:""),j=TGE.AssetManager.SpriteSheets[i];j?(TGE.AssetManager.SpriteSheets[h]=j,this._addSheetImagesToAssetList(a,a.localizedSheets[f],!0)):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.addSheetImages could not locate localized layout file '"+i+".js'")}if(a.layoutFiles){for(var k={loaded:!1,list:[]},l=0;l<a.layoutFiles.length;l++){var m=a.layoutFiles[l];if(m.subsheetURL)if(Array.isArray(m.subsheetURL))for(var n=m.subsheetURL.length;--n>=0;)d(k,m.subsheetURL[n]);else d(k,m.subsheetURL);m.layoutURL&&k.list.push({url:m.layoutURL,localized:m.localized})}this._loadAssetList(k,null,this._processSheetLayouts.bind(this,a,b,c))}else{(new TGE.AssetLoader).loadAssetList(this,a,this._mRootLocation,this.languagesFolder,e,b,c)}}},_processSheetLayouts:function(a,b,c){for(var d=0;d<a.layoutFiles.length;d++){var e=a.layoutFiles[d];if(e.subsheetURL)if(Array.isArray(e.subsheetURL))for(var f=e.subsheetURL.length;--f>=0;)this._prepSubsheet(trimmedFilename(e.subsheetURL[f]),trimmedFilename(e.sheetURL));else this._prepSubsheet(trimmedFilename(e.subsheetURL),trimmedFilename(e.sheetURL));this._addSheetImagesToAssetList(a,e.sheetURL,e.localized)}(new TGE.AssetLoader).loadAssetList(this,a,this._mRootLocation,this.languagesFolder,TGE.RemoteSettings("lang"),b,c);var g=TGE.Game.GetInstance();1===g._mTestBuffering&&g._mWaitingForAssets.length&&g._loadNextAssetList()}},TGE.Tracking={warn:function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.Tracking URLs can no longer be set in game code")}},TGE.Tracking.FireOnImpression=TGE.Tracking.FireOnGameViewable=TGE.Tracking.FireOnInteraction=TGE.Tracking.FireOnEngagement=TGE.Tracking.FireOnCompletion=TGE.Tracking.FireOnClickThrough=TGE.Tracking.FireOnCustomEvent=TGE.Tracking.warn,TGE.Tween=function(){this.id=null,this.target=null,this.duration=1,this.easing=TGE.Tween.Linear,this.delay=0,this.loop=!1,this.rewind=!1,this.onBegin=null,this.onComplete=null,this.onLoopComplete=null,this.startFromEnd=!1,this.removeOnComplete=!1,this._mAge=0,this._mForward=!0,this._mSetup=!1,this._mFinished=!1,this._mStartValues={},this._mEndValues={},this._mChainedTweens=[],this._mEaseParam=0,this._mRepeats=-1},TGE.Tween.prototype={setup:function(a){this.id=a.id;for(var b in a)this.hasOwnProperty(b)?this[b]=a[b]:this._mEndValues["layout"===b?"_mLayout":b]="object"==typeof a[b]?TGE.DeepClone(a[b]):a[b];var c=this.easing===TGE.Tween.Back.In||this.easing===TGE.Tween.Back.Out||this.easing===TGE.Tween.Back.InOut?1.70158:1;return this._mEaseParam=void 0!==a.easingParam?a.easingParam:c,"number"==typeof a.loop&&(this._mRepeats=2*a.loop),this.startFromEnd&&this._setupValues(),this},finished:function(){return this._mFinished},thenTweenTo:function(a){a.target=this.target;var b=(new TGE.Tween).setup(a);return this._mChainedTweens.push(b),b},_setupValues:function(){if(!this._mSetup){null!==this.onBegin&&this.onBegin();for(var a in this._mEndValues){var b=this.target.hasOwnProperty(a)||"scale"!==a?this.target[a]:this.target.scaleX;this._mStartValues[a]=TGE.DeepClone(b,this._mEndValues[a])}if(this.startFromEnd){var c=this._mStartValues;this._mStartValues=this._mEndValues,this._mEndValues=c;for(var a in this._mStartValues)this._setProp(this.target,this._mStartValues,this._mEndValues,a,0)}this._mSetup=!0}},_update:function(a){if(!(this.finished()||(this._mAge+=a,this._mAge<this.delay))){this._mSetup||this._setupValues();var b=(this._mAge-this.delay)/this.duration;b>=1&&(!0===this.loop||this._mRepeats>=2?(this._mAge=this._mAge-this.duration,b-=1,this.rewind&&(this._mForward=!this._mForward),null!==this.onLoopComplete&&this.onLoopComplete(),this._mRepeats--):(null!==this.onLoopComplete&&this.onLoopComplete(),this._mFinished=!0));var c=this._mFinished?1:this.easing(b,this._mEaseParam);c=this._mForward?c:1-c;for(var d in this._mStartValues)this._setProp(this.target,this._mStartValues,this._mEndValues,d,c);this._mFinished&&this.endTween()}},_setProp:function(a,b,c,d,e){if("object"==typeof b[d]){if(a[d]){for(var f in b[d])this._setProp(a[d],b[d],c[d],f,e);"_mLayout"===d&&a._setLayout(a._mLayout)}}else a[d]=b[d]+(c[d]-b[d])*e},endTween:function(a,b){if(a=void 0===a||a,b=void 0===b||b,this._mFinished=!0,a&&this._mChainedTweens.length>0)for(var c=0;c<this._mChainedTweens.length;c++)this.target._injectTween(this._mChainedTweens[c]);this._mChainedTweens=null,b&&null!==this.onComplete&&this.onComplete(),this.removeOnComplete&&this.target.markForRemoval()}},TGE.Tween.To=function(a){return TGE.Game.GetInstance().stage.tweenTo(a)},TGE.Tween.From=function(a){return TGE.Game.GetInstance().stage.tweenFrom(a)},TGE.Tween.Linear=function(a){return a},TGE.Tween.Quadratic={In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},TGE.Tween.Cubic={In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},TGE.Tween.Quartic={In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},TGE.Tween.Quintic={In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},TGE.Tween.Sine={In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},TGE.Tween.Exponential={In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(2-Math.pow(2,-10*(a-1)))}},TGE.Tween.Circular={In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},TGE.Tween.Elastic={In:function(a,b){return-b*Math.pow(2,10*(a-=1))*Math.sin(2*(a-.3/(2*Math.PI)*(Math.asin(1/b)||0))*Math.PI/.3)},Out:function(a,b){return b*Math.pow(2,-10*a)*Math.sin(2*(a-.3/(2*Math.PI)*(Math.asin(1/b)||0))*Math.PI/.3)+1},InOut:function(a,b){var c=.3/(2*Math.PI)*(Math.asin(1/b)||0),d=2*Math.PI;return(a*=2)<1?-.5*b*Math.pow(2,10*(a-=1))*Math.sin((a-c)*d/.45):b*Math.pow(2,-10*(a-=1))*Math.sin((a-c)*d/.45)*.5+1}},TGE.Tween.Back={In:function(a,b){return a*a*((b+1)*a-b)},Out:function(a,b){return(a-=1)*a*((b+1)*a+b)+1},InOut:function(a,b){var c=1.525*b;return(a*=2)<1?.5*a*a*((c+1)*a-c):.5*((a-=2)*a*((c+1)*a+c)+2)}},TGE.Tween.Bounce={In:function(a){return 1-TGE.Tween.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return a<.5?.5*TGE.Tween.Bounce.In(2*a):.5*TGE.Tween.Bounce.Out(2*a-1)+.5}},TGE.CameraShake=function(){this.target=null,this.duration=1,this.delay=0,this.loop=!1,this.exclusionList=[],this.onComplete=null,this._mPreviousX=0,this._mPreviousY=0,this._mX=0,this._mY=0,this._mTimeElapsed=0,this._mFinished=!1},TGE.CameraShake.prototype={setup:function(a){this.target=a.target,"number"==typeof a.duration&&(this.duration=a.duration),"number"==typeof a.delay&&(this.delay=a.delay),"boolean"==typeof a.loop&&(this.loop=a.loop),"function"==typeof a.onComplete&&(this.onComplete=a.onComplete),Array.isArray(a.exclusionList)&&(this.exclusionList=a.exclusionList);for(var b=0;b<this.exclusionList.length;b++){var c=this.exclusionList[b];"object"!=typeof c||c.isDescendantOf(this.target)||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"One or more objects in the TGE.CameraShake exclusion list are not direct children of the object")}return this},finished:function(){return this._mFinished},updateMembers:function(a){console.log("updateMembers should be overridden by a subclass")},stop:function(){if(this.target.x-=this._mX,this.target.y-=this._mY,null!=this.exclusionList&&this.exclusionList.length>0)for(var a=0;a<this.target.numChildren(!1);a++){var b=this.target.getChildAt(a);-1==this.exclusionList.indexOf(b.cameraShakeTag)&&-1==this.exclusionList.indexOf(b)||(b.x+=this._mX,b.y+=this._mY)}this._mFinished=!0},_update:function(a){if(!(this._mFinished||(this._mTimeElapsed+=a,this._mTimeElapsed<this.delay))){this.updateMembers(a);var b=this._mX-this._mPreviousX,c=this._mY-this._mPreviousY;if(this.target.x+=b,this.target.y+=c,null!=this.exclusionList&&this.exclusionList.length>0)for(var d=0;d<this.target.numChildren(!1);d++){var e=this.target.getChildAt(d);-1==this.exclusionList.indexOf(e.cameraShakeTag)&&-1==this.exclusionList.indexOf(e)||(e.x-=b,e.y-=c)}this._mFinished&&null!=this.onComplete&&this.onComplete()}}},TGE.NoiseShake=function(){TGE.NoiseShake.superclass.constructor.call(this),this.intensityX=0,this.intensityY=0,this.easeInTime=0,this.easeOutTime=0,this.period=-1,this._mPeriodsExecuted=0,this._mIntensityX=0,this._mIntensityY=0},TGE.NoiseShake.prototype={setup:function(a){return TGE.NoiseShake.superclass.setup.call(this,a),"number"==typeof a.intensity&&(this.intensityX=a.intensity,this.intensityY=a.intensity),"number"==typeof a.intensityX?this.intensityX=a.intensityX:this.intensityX,"number"==typeof a.intensityY?this.intensityY=a.intensityY:this.intensityY,"number"==typeof a.period?this.period=a.period:this.period,"number"==typeof a.easeInTime?this.easeInTime=a.easeInTime:this.easeInTime,"number"==typeof a.easeOutTime?this.easeOutTime=a.easeOutTime:this.easeOutTime,this},updateMembers:function(a){if(this._mPreviousX=this._mX,this._mPreviousY=this._mY,this._mTimeElapsed>this.delay+this.duration)this._mX=0,this._mY=0,this.loop?this._mTimeElapsed=this.delay:this._mFinished=!0;else{if(this._mTimeElapsed-this.delay<this.easeInTime)this._mIntensityX=this.intensityX*((this._mTimeElapsed-this.delay)/this.easeInTime),this._mIntensityY=this.intensityY*((this._mTimeElapsed-this.delay)/this.easeInTime);else if(this._mTimeElapsed-this.delay>this.duration-this.easeOutTime){var b=this._mTimeElapsed-this.delay-(this.duration-this.easeOutTime);this._mIntensityX=this.intensityX-this.intensityX*(b/this.easeOutTime),this._mIntensityY=this.intensityY-this.intensityY*(b/this.easeOutTime)}else this._mIntensityX=this.intensityX,this._mIntensityY=this.intensityY;this._mTimeElapsed>this._mPeriodsExecuted*this.period&&(this._mX=Math.random()*this._mIntensityX*this.target.width*2-this._mIntensityX*this.target.width,this._mY=Math.random()*this._mIntensityY*this.target.width*2-this._mIntensityY*this.target.width,this._mPeriodsExecuted++)}}},extend(TGE.NoiseShake,TGE.CameraShake),TGE.SpringShake=function(){TGE.SpringShake.superclass.constructor.call(this),this.initialDeflectionX=0,this.initialDeflectionY=0,this.initialVelocityX=0,this.initialVelocityY=0,this.mass=0,this.springConstant=0,this.dampingConstant=0,this.finishThreshold=5,this._mAccelerationX=0,this._mAccelerationY=0,this._mVelocityX=0,this._mVelocityY=0,this._mInitiallyDeflected=!1},TGE.SpringShake.prototype={setup:function(a){return TGE.SpringShake.superclass.setup.call(this,a),"number"==typeof a.initialDeflection&&(this.initialDeflectionX=a.initialDeflection,this.initialDeflectionY=a.initialDeflection),"number"==typeof a.initialDeflectionX?this.initialDeflectionX=a.initialDeflectionX:this.initialDeflectionX,"number"==typeof a.initialDeflectionY?this.initialDeflectionY=a.initialDeflectionY:this.initialDeflectionY,"number"==typeof a.initialVelocity&&(this.initialVelocityX=a.initialVelocity,this.initialVelocityY=a.initialVelocity),"number"==typeof a.initialVelocityX?this.initialVelocityX=a.initialVelocityX:this.initialVelocityX,"number"==typeof a.initialVelocityY?this.initialVelocityY=a.initialVelocityY:this.initialVelocityY,"number"==typeof a.mass?this.mass=a.mass:this.mass,"number"==typeof a.springConstant?this.springConstant=a.springConstant:this.springConstant,"number"==typeof a.dampingConstant?this.dampingConstant=a.dampingConstant:this.dampingConstant,"number"==typeof a.finishThreshold?this.finishThreshold=a.finishThreshold:this.finishThreshold,this},updateMembers:function(a){a=Math.min(a,.03),this._mPreviousX=this._mX,this._mPreviousY=this._mY,0==this._mInitiallyDeflected?(this._mX=this.initialDeflectionX,this._mY=this.initialDeflectionY,this._mVelocityX=this.initialVelocityX,this._mVelocityY=this.initialVelocityY,this._mInitiallyDeflected=!0):(this._mVelocityX+=this._mAccelerationX*a,this._mVelocityY+=this._mAccelerationY*a,this._mX+=this._mVelocityX*a,this._mY+=this._mVelocityY*a,this._mAccelerationX=-(this.springConstant*this._mX+this.dampingConstant*this._mVelocityX)/this.mass,this._mAccelerationY=-(this.springConstant*this._mY+this.dampingConstant*this._mVelocityY)/this.mass),Math.abs(this._mAccelerationX)<=this.finishThreshold&&Math.abs(this._mAccelerationY)<=this.finishThreshold&&Math.abs(this._mVelocityX)<=this.finishThreshold&&Math.abs(this._mVelocityY)<=this.finishThreshold&&Math.abs(this._mX)<=this.finishThreshold&&Math.abs(this._mY)<=this.finishThreshold&&(this._mX=0,this._mY=0,this.loop?this._mInitiallyDeflected=!1:this._mFinished=!0)}},extend(TGE.SpringShake,TGE.CameraShake),TGE.GenericLoadingWindow=function(a,b){TGE.GenericLoadingWindow.superclass.constructor.apply(this,arguments),this.backgroundColor="#000";var c=300,d=25,e=this.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"#fff",width:c,height:d,layout:{xPercentage:.5,yPercentage:.5,scaleToWidth:.5,scaleToHeight:.05}})),f=3;bar=e.addChild((new TGE.DisplayObjectContainer).setup({registrationX:1,x:e.width/2-f/2,backgroundColor:"#000",width:c-f,height:d-f,scaleX:1})),this.addEventListener("progress",function(a){bar.scaleX=1-a.percentComplete})},extend(TGE.GenericLoadingWindow,TGE.Window),TGE.Game.prototype._mRemoteSettings=null,TGE.RemoteSettings=function(a){return TGE.Game.GetInstance()._getRemoteSetting(a)},TGE.RemoteSettings._getDefaultAudioSetting=function(){var a=!1;switch(getDistributionPartner()){case"B0039":case"B0113":case"B0119":case"B0134":case"B0135":case"B0149":case"B0154":case"B0159":a=!0;break;case"B0003":case"B0158":a=!0;try{window.fetch("data:@file/x-empty;base64,")}catch(b){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Fetch API not supported, disabling audio"),a=!1}break;case"B0094":default:a=!1}return a},TGE.RemoteSettings._persistentSettings=null,TGE.RemoteSettings._initPersistentSettings=function(){TGE.RemoteSettings._persistentSettings={audio:{type:"boolean",default:TGE.RemoteSettings._getDefaultAudioSetting(),description:"enable audio",persistent:!0},lang:{type:"string",default:"en",description:"game language",options:["en"],persistent:!0},orientationLock:{type:"string",default:"responsive",description:"orientation settings",options:["responsive","portrait","landscape"],persistent:!0}}},TGE.RemoteSettings.GetSettings=function(){return TGE.Game.GetInstance()._mRemoteSettings},TGE.RemoteSettings.Print=function(){return TGE.Game.GetInstance()._printRemoteSettings()},TGE.RemoteSettings.HasSetting=function(a){if("string"==typeof a){var b=TGE.Game.GetInstance()._mRemoteSettings;return b&&!!b[a]}return!1},TGE.RemoteSettings.AddSetting=function(a,b){"string"==typeof a&&"object"==typeof b&&(TGE.Game.GetInstance()._initRemoteSetting(a,b),TGE.Game.GetInstance()._mRemoteSettings[a]=b)},TGE.RemoteSettings.WasSet=function(a){if("string"==typeof a){var b=TGE.Game.GetInstance()._mRemoteSettings;return b&&b[a].wasSet}return!1},TGE.Game.prototype._getRemoteSetting=function(a){return this._mRemoteSettings&&this._mRemoteSettings[a]?this._mRemoteSettings[a].value:(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting ["+a+"] does not exist"),null)},TGE.Game.prototype._initializeRemoteSettings=function(){var a=GameConfig.REMOTE_SETTINGS;TGE.RemoteSettings._initPersistentSettings(),GameConfig.REMOTE_SETTINGS=null;for(var b in TGE.RemoteSettings._persistentSettings)a[b]||(a[b]=TGE.RemoteSettings._persistentSettings[b]);if(window.TreSensa&&window.TreSensa.Playable.getSetting("remoteSettings")){var c=window.TreSensa.Playable.getSetting("remoteSettings");for(var d in c)void 0===a[d]&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,'dashboard specified remote setting "'+d+'" is invalid')}for(var b in a)this._initRemoteSetting(b,a[b]);this._mRemoteSettings=a},TGE.Game.prototype._initRemoteSetting=function(a,b){"qa"===getQueryString().env?TGE.Debug.LOG_WARNING:TGE.Debug.LOG_ERROR;b.name=a,b.description=b.description||"",b.wasSet=!1,this._errorHandleRemoteSettings(b),b.value=b.default;var c,d=window.TreSensa&&window.TreSensa.Playable.getSetting("remoteSettings");if(d)c=d[b.name];else{var e=getQueryString()[b.name];void 0!==e&&(c=this._convertStringToType(e,b.type))}null!=c&&this.validateSettingValue(c,b)===c&&(b.value=c,b.wasSet=!0)},TGE.Game.prototype._errorHandleRemoteSettings=function(a){if("lang"!==a.name&&"orientationLock"!==a.name&&!a.persistent&&TGE.RemoteSettings._persistentSettings[a.name])return TGE.Debug.Log(TGE.Debug.LOG_ERROR,'remote setting "'+a.name+'" is reserved as a persistent TGE setting'),!0;var b=this.validateSettingValue(a.default,a),c=b!==a.default;return a.default=b,c},TGE.Game.prototype.validateSettingValue=function(a,b){var c;if(!("Array"===b.type&&Array.isArray(a)||typeof a===b.type||null==a))switch(TGE.Debug.Log(TGE.Debug.LOG_WARNING,'replacing remote setting "'+b.name+'", which has a value that does not match the required data type'),b.type){case"string":a="";break;case"number":a=0;break;case"boolean":a=!1;break;case"Array":a=[];break;case"object":a={}}if(Array.isArray(b.options)&&b.options.length){var d=!1,e=!1;(b.options.indexOf(a)>=0||null==a)&&(e=!0);for(var f=b.options.length;--f>=0;)"number"==typeof b.options[f].min||"number"==typeof b.options[f].max?"number"!==b.type?d=!0:(e=e||this._numberExistsInRange(b.options[f].min,b.options[f].max,a,b.options[f].interval),c=b.options[f].min||0):d=d||typeof b.options[f]!==b.type;d&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,'remote setting "'+b.name+'" has an option that is not the correct data type'),e||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,'replacing remote setting "'+b.name+'", which has a default value that is not in the valid options array'),a=void 0!==c?c:b.options[0])}return a},TGE.Game.prototype._numberExistsInRange=function(a,b,c,d){"number"!=typeof d&&(d=1),"number"!=typeof a&&(a=0),"number"!=typeof b&&(b=Number.MAX_SAFE_INTEGER);var e=(c-a)%d,f=1e3*Number.EPSILON;return c>=a&&c<=b&&(e<=f||d-e<=f)},TGE.Game.prototype._convertStringToType=function(a,b){var c=null;switch(b){case"string":c=a;break;case"number":isNaN(a)||(c=parseFloat(a));break;case"boolean":"true"==a&&(c=!0),"false"==a&&(c=!1);break;case"object":case"Array":try{c=JSON.parse(a)}catch(d){}}return c},TGE.Game.prototype._printRemoteSettings=function(){var a="\nREMOTE SETTINGS (includes replacement of invalid values)\n";for(var b in this._mRemoteSettings){var c=this._mRemoteSettings[b];if(a+="\nName: "+b,a+="\nValue: "+c.value,c.options){a+="\nOptions: ";for(var d=0;d<c.options.length;d++){var e=c.options[d];if("object"==typeof e&&(e.min||e.max)){a+=("number"==typeof e.min?e.min.toString():"0")+"-"+("number"==typeof e.max?e.max.toString():"infinity")}else a+=e;a+=d==c.options.length-1?"":", "}}a+="\nDescription: "+c.description,a+="\n"}return console.log("%c "+a,"color: green"),""};var TGS=TGS||{};TGS.Language=TGS.Language||{},TGS.OpenAppstoreURL=TGS.OpenDefaultAppstoreURL=TGS.openDefaultAppstoreURL=function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGS appstore calls are deprecated, use TGE.Game.AppstoreClickthrough"),TGE.Game.AppstoreClickthrough()},TGE.SetupTGSProxy=function(){TGS.IsReady=function(){return!0},TGS.Player={numPreviousPlays:function(){return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"call to deprecated TGS.Player.numPreviousPlays"),0},played:function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"call to deprecated TGS.Player.played")}},TGS.Game={requestRemoteVariables:function(a){a.call()},getVariable:function(a){return GameConfig.REMOTE_VARIABLES[a]}},TGS.Analytics={engagementWarning:!1,customWarning:!1,engagementTime:null,logEngagement:function(){this.engagementWarning||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGS.Analytics.logEngagement is deprecated, use TGE.Analytics.Engagement"),this.engagementWarning=!0),TGE.Analytics.Engagement()},logEngagementEvent:function(){this.engagementWarning||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGS.Analytics.logEngagementEvent is deprecated, use TGE.Analytics.Engagement"),this.engagementWarning=!0),TGE.Analytics.Engagement()},logCustomEvent:function(a,b){this.customWarning||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGS.Analytics.logCustomEvent is deprecated, use TGE.Analytics.CustomEvent"),this.customWarning=!0),TGE.Analytics.CustomEvent(a,b)},logScreen:function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"ignoring deprecated TGS.Analytics.logScreen call")},logLevelEvent:function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"ignoring deprecated TGS.Analytics.logLevelEvent call")}},TGS.Language.languageWarning=!1,TGS.Language.PreferredLanguage=function(){return this.languageWarning||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGS.Languages is deprecated"),this.languageWarning=!0),TGE.Game.GetInstance().preferredLanguage()},TGS.localStorage={_warning:function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"do not use TGS.localStorage, use TGE.GetFromStorage/SetInStorage")},getItem:function(a){return this._warning(),TGE.GetFromStorage(a)},setItem:function(a,b){return this._warning(),TGE.SetInStorage(a,b)},removeItem:function(){this._warning()}}},function(){function a(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function b(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function b(){document.removeEventListener("DOMContentLoaded",b),a()}):document.attachEvent("onreadystatechange",function b(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",b),a())})}function c(a){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(a)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function d(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function e(a){var b=a.a.offsetWidth,c=b+100;return a.f.style.width=c+"px",a.c.scrollLeft=c,a.b.scrollLeft=a.b.scrollWidth+100,a.g!==b&&(a.g=b,!0)}function f(b,c){function d(){var a=f;e(a)&&a.a.parentNode&&c(a.g)}var f=b;a(b.b,d),a(b.c,d),e(b)}function g(a,b){var c=b||{};this.family=a,this.style=c.style||"normal",this.weight=c.weight||"normal",this.stretch=c.stretch||"normal"}function h(){if(null===m)if(i()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);m=!!a&&603>parseInt(a[1],10)}else m=!1;return m}function i(){return null===o&&(o=!!document.fonts),o}function j(){if(null===n){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}n=""!==a.style.font}return n}function k(a,b){return[a.style,a.weight,j()?a.stretch:"","100px",b].join(" ")}var l=null,m=null,n=null,o=null;g.prototype.load=function(a,e){var g=this,j=a||"BESbswy",m=0,n=e||3e3,o=(new Date).getTime();return new Promise(function(a,e){if(i()&&!h()){var p=new Promise(function(a,b){function c(){(new Date).getTime()-o>=n?b(Error(n+"ms timeout exceeded")):document.fonts.load(k(g,'"'+g.family+'"'),j).then(function(b){1<=b.length?a():setTimeout(c,25)},b)}c()}),q=new Promise(function(a,b){m=setTimeout(function(){b(Error(n+"ms timeout exceeded"))},n)});Promise.race([q,p]).then(function(){clearTimeout(m),a(g)},e)}else b(function(){function b(){var b;(b=-1!=r&&-1!=s||-1!=r&&-1!=t||-1!=s&&-1!=t)&&((b=r!=s&&r!=t&&s!=t)||(null===l&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=l&&(r==u&&s==u&&t==u||r==v&&s==v&&t==v||r==w&&s==w&&t==w)),b=!b),b&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(m),a(g))}function h(){if((new Date).getTime()-o>=n)x.parentNode&&x.parentNode.removeChild(x),e(Error(n+"ms timeout exceeded"));else{var a=document.hidden;!0!==a&&void 0!==a||(r=i.a.offsetWidth,s=p.a.offsetWidth,t=q.a.offsetWidth,b()),m=setTimeout(h,50)}}var i=new c(j),p=new c(j),q=new c(j),r=-1,s=-1,t=-1,u=-1,v=-1,w=-1,x=document.createElement("div");x.dir="ltr",d(i,k(g,"sans-serif")),d(p,k(g,"serif")),d(q,k(g,"monospace")),x.appendChild(i.a),x.appendChild(p.a),x.appendChild(q.a),document.body.appendChild(x),u=i.a.offsetWidth,v=p.a.offsetWidth,w=q.a.offsetWidth,h(),f(i,function(a){r=a,b()}),d(i,k(g,'"'+g.family+'",sans-serif')),f(p,function(a){s=a,b()}),d(p,k(g,'"'+g.family+'",serif')),f(q,function(a){t=a,b()}),d(q,k(g,'"'+g.family+'",monospace'))})})},"object"==typeof module?module.exports=g:(window.FontFaceObserver=g,window.FontFaceObserver.prototype.load=g.prototype.load)}();TGE.version = '1.1.196';;</script>	<script type="text/javascript">	var BuilderGame=function(){if(window.__isLocal&&window._selfServe&&(!getQueryString().reset||"false"===getQueryString().reset)){var t=_selfServe.loadData("_settings");if(t)for(var e in t){var i,a="object"==typeof t[e]?t[e].default:t[e],o=GameConfig.REMOTE_SETTINGS[e];o?(i=getQueryString()[e],o.default=void 0===i?a:i):"object"==typeof t[e]&&(GameConfig.REMOTE_SETTINGS[e]=t[e])}}if(TGE.InCreativeBuilder()&&GameConfig.ASSETS&&!1!==GameConfig.CB_EXPAND_ASSETS&&this._expandAssets(),BuilderGame.superclass.constructor.call(this),this._fontsLoaded={},GameConfig.PROMO_ASSET_PATH=window.__isLocal?"../promobuilder/assets/":"","object"==typeof BuilderConfig&&this.mergeConfig(BuilderConfig),this._mergeModules(),"object"==typeof PromoConfig&&!1!==GameConfig.PROMO_BUILDER){if(window.__isLocal){for(var n in PromoConfig.PAGE_DEFS)!function t(e){for(var i=e.length;0<=--i;)e[i].steps?t(e[i].steps):s(e[i])}(PromoConfig.PAGE_DEFS[n].steps);for(n in PromoConfig.THEME_DEFS)s(PromoConfig.THEME_DEFS[n])}if(window.PromoBuilder)for(var e in PromoBuilder.REMOTE_SETTINGS)TGE.RemoteSettings.HasSetting(e)||TGE.RemoteSettings.AddSetting(e,PromoBuilder.REMOTE_SETTINGS[e]);GameConfig.PAGE_ORDER=GameConfig.PAGE_ORDER||[];for(var r=GameConfig.PAGE_ORDER.length;0<=--r;)if(0<=GameConfig.PAGE_ORDER[r].indexOf("promo")){delete PromoConfig.PAGE_ORDER;break}this.mergeConfig(PromoConfig)}function s(t){t.path&&(t.path="promobuilder/"+t.path)}!window.__isLocal||!window._selfServe||getQueryString().reset&&"false"!==getQueryString().reset||_selfServe.loadLocalGameConfig(),GameConfig.ELX_DEFS=GameConfig.ELX_DEFS||{},GameConfig.TEXT_DEFS=GameConfig.TEXT_DEFS||{}};BuilderGame.LayoutHandler=function(t,e){t.layout||(t.layout={portrait:l(this,"portrait"),landscape:l(this,"landscape")});var a,o,g=t.remoteSettingPrefix||this.image,n=this.stage.isLandscape()?"landscape":"portrait",r=TGE.DeepClone(t.layout[n]||t.layout);function f(t,e,i){var a=e+"_"+i+"_"+t;return TGE.RemoteSettings.HasSetting(a)?a:(a=e+"_"+t,TGE.RemoteSettings.HasSetting(a)?a:null)}function s(t,e,i,a,o){var n,r=o.ranges&&o.ranges[e],s=r?r[a]||r:"size"===e?{min:.5,max:2}:{min:0,max:1},l=(n=f(e,g,a))?TGE.RemoteSettings(n):.5;null==l&&"size"===e&&(l=.5);var p=null;null!=l&&(p=TGE.Math.Lerp(s.min,s.max,l));for(var c,h,m,u,d=i.length;0<=--d;)t.hasOwnProperty(i[d])&&("size"===e?t[i[d]]*=p:null!=p?t[i[d]]=p:(l=TGE.Math.InverseLerp(s.min,s.max,t[i[d]]),l=Math.round(100*l)/100,c=l,u=m=h=void 0,(u=f(e,g,a))&&(h=TGE.RemoteSettings.GetSettings()[u],TGE.Game.GetInstance().validateSettingValue(c,h)===c&&(h.default=h.value=c,!TGE.InCreativeBuilder()||(m=_selfServe.settingsWidgets[u])&&$("#"+m.id).slider("setValue",c)))))}function l(t,e){var a=function t(e){if(!e||e instanceof ELXDisplay)return e;return t(e.parent)}(t);if(a){var o=a.getObjectName(t),n=a._elxsList[e].data;for(i=n.length;0<=--i;)if(n[i].name===o)return n[i].layout}return null}s(r,"size",["scaleToWidth","matchWidth","scaleToHeight","matchHeight"],n,t),s(r,"xPosition",["xPosition","xPercentage","leftAnchor","rightAnchor"],n,t),s(r,"yPosition",["yPosition","yPercentage","topAnchor","bottomAnchor"],n,t),void 0!==r.xPosition||void 0!==r.yPosition?(this._resize(r,e),a=r.xOffset||0,o=r.yOffset||0,"number"==typeof r.xPosition&&(this.x=this.parent.width*r.xPosition-(r.xPosition-.5)*this.width*this.scaleX+(this.registrationX-.5)*this.width*this.scaleX-this.parent.width*this.parent.registrationX+a*this.parent.width),"number"==typeof r.yPosition&&(this.y=this.parent.height*r.yPosition-(r.yPosition-.5)*this.height*this.scaleY+(this.registrationY-.5)*this.height*this.scaleY-this.parent.height*this.parent.registrationY+o*this.parent.height)):this._resize(r,e)},BuilderGame.prototype={_getAssetListName:function(t){var e=t;return this.assetManager._mGroupToListKey&&this.assetManager._mGroupToListKey[t]&&(e=this.assetManager.getAssetListFromGroup(t)),e},addAudio:function(t,e){if(Array.isArray(e))for(var i=0;i<e.length;++i)this.addAudio(t,e[i]);else{var a=[];if(window.AudioList){if(TGE.RemoteSettings.HasSetting("audioEnabled")&&TGE.RemoteSettings("audioEnabled")||TGE.InCreativeBuilder()){for(var o=0;o<AudioList.length;++o){var n=AudioList[o];n.audioGroup===e&&a.push(n)}a.length||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no assets found matching audioGroup: "+e)}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"addAudio requires an AudioList.js file, produced by `grunt convertaudio`");this.assetManager.addAssets(t,a)}},addFonts:function(t,e){var i,a,o=window._TREFONTS||{};if(t=this._getAssetListName(t),!e)for(var n in e=[],GameConfig.TEXT_DEFS){window.PromoConfig&&!1!==GameConfig.PROMO_BUILDER&&PromoConfig.TEXT_DEFS[n]||(a=GameConfig.TEXT_DEFS[n]).hasOwnProperty("fontFamily")&&!this._fontsLoaded[a.fontFamily]&&e.push(n)}if(Array.isArray(e))for(i=0;i<e.length;++i)this.addFonts(t,e[i]);else{var r,s=this.findFontFamily(GameConfig.TEXT_DEFS[e]);!s||this._fontsLoaded[s]||o[s]||(this._fontsLoaded[s]=!0,r=window.__isLocal&&0<=getSupportedFonts().indexOf(s)?"../creativebuilder/local/fonts/":"fonts/",this.assetManager.addAsset(t,{url:r+s.replace(/ /g,"_")+".js"}))}},findFontFamily:function(t){if(t){if(t.fontFamily)return t.fontFamily;if(t.textDef)return this.findFontFamily(GameConfig.TEXT_DEFS[t.textDef])}return null},addPromoAssets:function(t){window.PromoBuilder&&(t=this._getAssetListName(t),PromoBuilder.AddPromoAssets(t))},addPromoScreen:function(t,e){return window.PromoBuilder?PromoBuilder.AddPromoScreen(t,e):(new TGE.DisplayObjectContainer).setup({width:700,height:862,backgroundColor:"black",alpha:.5,layout:"fill"})},getAssetSize:function(t){var e=GameConfig.ELX_DEFS[t];if(e&&e.cropWidth)return{width:e.cropWidth,height:e.cropHeight};var i=this.assetManager.getAsset(t);return i?{width:i.width,height:i.height}:{width:0,height:0}},_expandAssets:function(){for(var t=GameConfig.ASSETS.length;0<=--t;){var e=GameConfig.ASSETS[t],i=this._expandEntry(e);GameConfig.ASSETS.splice(t,1);for(var a=i.length;0<=--a;){var o=PropertyCombine.clone(e);o.url=i[a].url,o.subsheetURL&&(o.subsheetURL=i[a].subsheetURL),GameConfig.ASSETS.splice(t,0,o)}}},_expandEntry:function(t){var o=/\[[^\[]*\]/g,n=t.url.match(o)||[];if(t.subsheetURL)if(Array.isArray(t.subsheetURL))for(i=t.subsheetURL.length;0<=--i;)m(t.subsheetURL[i]);else m(t.subsheetURL);for(var e=[t],i=n.length;0<=--i;){var a=n[i].substr(1,n[i].length-2),r=GameConfig.REMOTE_SETTINGS&&GameConfig.REMOTE_SETTINGS[a];if(r){var s=t.remoteSetting?t.remoteSetting.options:r.options;if(s)for(var l=e.length;0<=--l;)for(var p=e.splice(l,1)[0],c=s.length;0<=--c;){var h=PropertyCombine.clone(p);h.url=p.url.replace(n[i],s[c]),h.subsheetURL&&(h.subsheetURL=p.subsheetURL.replace(n[i],s[c])),e.push(h)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting' "+a+"' doesn't have an 'options' array (needed for ASSETS processing).")}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting'"+a+"' mentioned in asset url '"+t.url+"' doesn't exist")}return e;function m(t){var e=t.match(o);if(e)for(var i=e.length;0<=--i;){var a=e[i];n.indexOf(a)<0&&n.push(a)}}},mergeConfig:function(t){for(key in t){var e,i;Array.isArray(t[key])?(e=t[key],void 0===GameConfig[key]&&(GameConfig[key]=[]),e.push.apply(GameConfig[key],e)):(i=t[key],void 0===GameConfig[key]&&(GameConfig[key]={}),PropertyCombine.combineProperties(i,GameConfig[key],PropertyCombine.Strategy.REPLACE_IF_NULL))}},_mergeModules:function(){if(window._TREMERGES)for(var t in _TREMERGES)this.mergeData(_TREMERGES[t]);if(GameConfig.SOURCE)for(var e=GameConfig.SOURCE.length;0<=--e;){var i,a=GameConfig.SOURCE[e];0===a.indexOf("js/module")&&(i=trimmedFilename(a),this.mergeData(window[i]&&window[i].MERGE_DATA))}},mergeData:function(t){t&&(this.deepMerge(t.GameConfig,GameConfig),this.deepMerge(t.BuilderConfig,GameConfig))},deepMerge:function(t,e,i){if(t&&e&&"object"==typeof t&&"object"==typeof e)for(var a in i=i||"_MERGE_",t){var o=t[a];switch(a){case"_MERGE_":case"_REPLACE_":case"_CONCAT_":case"_ADD_":case"_DELETE_":this.deepMerge(o,e,a);break;default:if("REMOTE_SETTINGS"===a&&e===GameConfig){this._mergeRemoteSettings(o,i);break}var n,r=e[a];if(e.hasOwnProperty(a))switch(i){case"_ADD_":if(Array.isArray(r))if(Array.isArray(o))for(var s=0;s<o.length;++s)r.indexOf(o[s])<0&&r.push(o[s]);else r.indexOf(o)<0&&r.push(o);break;case"_DELETE_":delete e[a];break;case"_REPLACE_":e[a]=PropertyCombine.deepClone(o);break;default:r&&"object"==typeof r?Array.isArray(r)?Array.isArray(o)?"_CONCAT_"===i?r.push.apply(r,o):e[a]=PropertyCombine.deepClone(o):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"MERGE_DATA attempting to merge non-Array source key '"+a+"' into destination Array"):this.deepMerge(o,r,i):o&&"object"==typeof o?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"MERGE_DATA attempting to merge source object key '"+a+"' into non-object destination: "+r):e[a]=t[a]}else"_DELETE_"!==i&&(Array.isArray(o)?n=[]:o&&"object"==typeof o&&(n={}),n?(this.deepMerge(o,n,i),e[a]=n):e[a]=o)}}},_mergeRemoteSettings:function(t,e){TGE.RemoteSettings.GetSettings();for(var i in t)switch(i){case"_MERGE_":case"_REPLACE_":case"_ADD_":case"_DELETE_":this._mergeRemoteSettings(t[i],i);break;default:switch(e){case"_DELATE_":TGE.Debug.Log(TGE.Debug.LOG_ERROR,"_DELETE_ operation not currently supported for REMOTE_SETTINGS");break;case"_ADD_":if(TGE.RemoteSettings.HasSetting(i))break;default:var a=t[i];TGE.RemoteSettings.HasSetting(i)&&((a=PropertyCombine.deepClone(a)).default=TGE.RemoteSettings(i)),TGE.RemoteSettings.AddSetting(i,a)}}}},extend(BuilderGame,TGE.Game);var CroppedSprite=function(){CroppedSprite.superclass.constructor.apply(this,arguments)};CroppedSprite.prototype={setup:function(t){var e,i=t.image;return TGE.Game.GetInstance().isAssetLoaded(i)||(delete t.image,TGE.Game.GetInstance().waitForAsset(i,this._setImage_.bind(this,i),!1)),this._elxListener=null,CroppedSprite.superclass.setup.call(this,t),this.uncroppedWidth=this.width,this.uncroppedHeight=this.height,t.cropWidth||(e=GameConfig.ELX_DEFS[i]||{},t.cropWidth=e.cropWidth,t.cropHeight=e.cropHeight),t.cropWidth&&(this.width=t.cropWidth,this.height=t.cropHeight,TGE.Game.GetInstance().waitForAsset(i,this.setSize.bind(this,this.width,this.height),!1)),this},_setImage_:function(t){this.image=t,this.tweenFrom({duration:.25,alpha:0})},setSize:function(t,e){this._elxListener||(this._elxListener=this.addEventListener("elxchanged",this.setSize.bind(this,t,e))),this.width=this._mDrawWidth=this._mOriginalWidth=t,this.height=this._mDrawHeight=this._mOriginalHeight=e,this.parent&&this.dispatchEvent(TGE._ResizeEvent)}},extend(CroppedSprite,TGE.Sprite),ELXDisplay=function(){ELXDisplay.superclass.constructor.call(this),this._objects={},this._elxsList={},this._pickElxFunction=null,this._consoleMessages=[],this._currentElxId=null,this._currentState=null,this._hiddenObject=this.addChild((new TGE.DisplayObjectContainer).setup({visible:!1})),this.mouseEnabled=!1,this.layout="match",this.registrationX=0,this.registrationY=0},ELXDisplay._mDebugWidget=null,ELXDisplay._mDebugData=null,ELXDisplay.prototype={setup:function(t){return ELXDisplay.superclass.setup.call(this,t),this._parseParameters(t)&&(this._initializeELX(),ELXDisplay._mDebugWidget||ELXDisplay._createDebugWidget(),this.addEventListener("addedToStage",this._reRegister.bind(this)),this.addEventListener("resize",this._onResize.bind(this,t))),this},getObject:function(t){return this.getObjects(t)[0]},getObjects:function(t){var e=this._objects[t];return void 0===e&&(e=[],this._logConsoleMessage("warn","Trying to access the elx object ["+t+"] in code but object does not exist in the elx file you're accessing.")),e},hasObject:function(t){return void 0!==this._objects[t]||this._objects[t]===[]},getObjectName:function(t){var e,i;for(i in this._objects){e=this._objects[i];for(var a=0;a<e.length;a++)if(e[a]==t)return i}return null},setState:function(t){this._currentState=t;var e,i,a,o,n=this._getCurrentELX();if(n.states)if(n.states[t]){null!==this._currentState&&this._parentObjectsUsingDataset(n.data);var r,s=n.states[t];for(r in n.data)if(a="TGE.DisplayObjectContainer"===(i=n.data[r]).className&&!i.backgroundColor,o=-1===s.indexOf(i.name),!a&&o)for(var l in e=this.getObjects(i.name))this._hiddenObject.addChild(e[l])}else this._logConsoleMessage("error","ELX state ["+t+"] doesn't exist in the states file passed in")},_initializeELX:function(){this._currentElxId=this._getCurrentELX().id;var t,e=this._elxsList[this._currentElxId].data,i=e;for(t in this._elxsList)t!==this._currentElxId&&(i=this._combineData(i,this._elxsList[t].data));this._createScreenObjects(i),this._parentObjectsUsingDataset(e),this._logConsoleMessages()},_combineData:function(t,e){t=this._jsonClone(t),e=this._jsonClone(e);var i,a=this._jsonClone(t);for(i in t){for(var o in e)if(e[o]&&t[i].name==e[o].name){e[o]=null;break}t[i]=null}for(i in e)e[i]&&a.push(e[i]);return a},_parseParameters:function(t){if(t.pickELX)if(this._pickElxFunction=t.pickELX,t.elx){for(var e in t.elx="string"==typeof t.elx?TGE.getClass(t.elx):t.elx,t.elx)if("object"==typeof t.elx[e]&&!this._parseParameter(e,t.elx[e],t.override,t.states))return!1}else{for(var e in t)if("pickELX"!==e&&"object"==typeof t[e]&&!this._parseParameter(e,t[e].elx,t[e].override||t[e].overrides,t[e].states))return!1;this._checkVersionNumber()}else if(t.landscape&&t.portrait){if(!this._parseParameter("portrait",t.portrait.elx,t.portrait.override||t.portrait.overrides,t.portrait.states))return!1;if(!this._parseParameter("landscape",t.landscape.elx,t.landscape.override||t.landscape.overrides,t.landscape.states))return!1;this._checkVersionNumber()}else if(t.elx)if(t.elx="string"==typeof t.elx?TGE.getClass(t.elx):t.elx,t.elx&&t.elx.portrait&&t.elx.landscape){if(!this._parseParameter("portrait",t.elx.portrait,t.override||t.overrides,t.states))return!1;if(!this._parseParameter("landscape",t.elx.landscape,t.override||t.overrides,t.states))return!1}else if(!this._parseParameter("default",t.elx,t.override||t.overrides,t.states))return!1;return!0},_parseParameter:function(t,e,i,a){if(!e)return this._logConsoleMessage("error","ELX file must be specified"+("default"!=t?" for the ["+t+"] layout strategy.":".")),!1;if((e="string"==typeof e?TGE.getClass(e):e).childObjects){var o=this._sortElx(e),n=i,r=this._generateFontIdOverrides(o),s=GameConfig.ELX_DEFS;return r&&this._applyOverrides(r,o),n&&this._applyOverrides(n,o),s&&this._applyOverrides(s,o),this._optimizeImages(o),this._elxsList[t]={},this._elxsList[t].data=o,this._elxsList[t].states=a,this._elxsList[t].id=t,this._elxsList[t].version=e.elxVersion,!0}return this._logConsoleMessage("error","ELX file must be in the right format.  Are you using an old version of the ELX Photoshop Script?"),!1},_checkVersionNumber:function(){},_getElxExportScriptVersion:function(){for(var t in this._elxsList)return this._elxsList[t].version},_optimizeImages:function(t){for(var e in t){var i,a,o=t[e];"TGE.Sprite"===o.className&&o.image?void 0===TGE.Game.GetInstance().getAssetList(o.image)?(this._recordConsoleMessage("Trying to display image ["+o.image+"] but image doesn't exist in any loaded spritesheets or images."),o.image=null):(i=TGE.Game.GetInstance().assetAvailable(o.image,null,!1),a=TGE.Game.GetInstance().getAssetList(o.image+"_2x"),i?a&&(this._recordConsoleMessage("Converting image ["+o.image+"] into a TGE.ProgressiveLoadingSprite since a _2x version exists.",!0),o.className="TGE.ProgressiveLoadingSprite",o.lowResImage=o.image,o.highResImage=o.image+"_2x",delete o.image):(this._recordConsoleMessage("Converting image ["+o.image+"] into a TGE.ProgressiveLoadingSprite since it's not ready yet.",!0),o.className="TGE.ProgressiveLoadingSprite",o.highResImage=o.image,delete o.image)):"TGE.ProgressiveLoadingSprite"===o.className&&o.lowResImage&&void 0===TGE.Game.GetInstance().getAssetList(o.lowResImage)&&(this._recordConsoleMessage("Trying to display image ["+o.lowResImage+"] but image doesn't exist in any loaded spritesheets or images."),o.lowResImage=null)}},_getCurrentELX:function(){return this._elxsList.default?this._elxsList.default:(t=this._pickElxFunction?this._pickElxFunction.call(this,this.stage.height/this.stage.width):this.stage.height>=this.stage.width?"portrait":"landscape",!this._elxsList[t]&&this._pickElxFunction&&this._logConsoleMessage("error","ELX file for the ["+t+"] layout strategy is not defined"),this._elxsList[t]);var t},_applyElxDataToObjects:function(t){var e,i,a;for(a in t)try{e=this._jsonClone(t[a]),i=this.getObjects(e.name)[e.duplicateNumber],this._applyElxDataToObject(i,e)}catch(t){return void this._recordConsoleMessage(100)}},_applyElxDataToObject:function(t,e){this._cleanElxData(t,e);var i,a={universal:["x","y","width","height","backgroundColor","backgroundGradient","scaleX","scaleY","scale","registrationX","registrationY","layout","rotation"],"TGE.Text":["fontFamily","fontSize","fontWeight","fontStyle","hAlign","vAlign","textColor","wrapWidth","lineSpacing","strokeWidth","strokeColor"],"TGE.Sprite":[],"TGE.RectMask":["maskWidth","maskHeight"],"TGE.Button":[],CharDisplay:["textColor","color","tfxName","imageSet","fontSize"],TFX:["fps","loop"],"TGE.ProgressiveLoadingSprite":[]};for(i in e){var o=-1!==a.universal.indexOf(i),n=-1!==a.TFX.indexOf(i),r=a[e.className]&&-1!==a[e.className].indexOf(i);(o||r||n)&&(t[i]=e[i])}},_cleanElxData:function(t,e){var i={universal:{rotation:0,backgroundColor:null,alpha:1,registrationX:.5,registrationY:.5,layout:null,x:0,y:0},"TGE.Sprite":{image:null},"TGE.RectMask":{image:null},"TGE.ProgressiveLoadingSprite":{image:null,lowResSprite:null,highResSprite:null}};e=this._addDefaultValuesToObjectData(i.universal,e),i.hasOwnProperty(e.className)&&(e=this._addDefaultValuesToObjectData(i[e.className],e));var a=!e.hasOwnProperty("scaleX")&&!e.hasOwnProperty("scaleY")&&!e.hasOwnProperty("scale"),o=!e.hasOwnProperty("width"),n=!e.hasOwnProperty("height"),r="TGE.Sprite"===e.className||"TGE.ProgressiveLoadingSprite"===e.className;a&&(e.scale=1),o&&r&&(e.width=t._mOriginalWidth),n&&r&&(e.height=t._mOriginalHeight)},_addDefaultValuesToObjectData:function(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i]);return e},_getDataWithName:function(t,e){var i,a=[];for(i in e)e[i].name===t&&a.push(e[i]);return a},_sortElx:function(t){var e=[];return e=this._sortElxRecursive(t.childObjects,null,e)},_sortElxRecursive:function(t,e,i){var a,o,n;for(n in t)o=(a=this._jsonClone(t[n])).childObjects,delete a.childObjects,a.parentObject=e,a.duplicateNumber=this._getDataWithName(a.name,i).length,i.push(a),o&&(i=this._sortElxRecursive(o,a.name,i));return i},_createScreenObjects:function(t){var e,i,a;for(a in t)e=t[a],(i=this._createScreenObject(e))&&(this._objects[e.name]?this._objects[e.name].push(i):this._objects[e.name]=[i])},_parentObjectsUsingDataset:function(t){var e,i,a,o,n;for(r in t)e=t[r],i=this.getObjects(e.name)[e.duplicateNumber],(e.parentObject?this.getObject(e.parentObject):this).addChild(i);for(n in this._objects)if(a=this.getObjects(n),(o=this._getDataWithName(n,t)).length<a.length)for(var r=o.length;r<a.length;r++)this._hiddenObject.addChild(a[r])},_jsonClone:function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t)){for(var e=[],i=0;i<t.length;++i)e.push(this._jsonClone(t[i]));return e}var a,o=["textDef"],n={};for(a in t)t.hasOwnProperty(a)&&(-1===o.indexOf(a)?n[a]=this._jsonClone(t[a]):n[a]=t[a]);return n},_createScreenObject:function(t){var e=this._jsonClone(t),i=TGE.getClass(e.className);delete e.className,delete e.duplicateNumber,delete e.name,delete e.parentObject;var a=(new i).setup(e),o=this._jsonClone(t);return delete o.duplicateNumber,delete o.parentObject,this._createDebugFeatures(a,o),a},_applyOverrides:function(t,e){var i,a,o,n;for(n in t){for(var r in o=!1,e)if(a=t[n],(i=e[r]).name===n)for(var s in o=!0,"TGE.DisplayObjectContainer"===i.className&&a.className&&"TGE.DisplayObjectContainer"!==a.className&&"string"!=typeof a.backgroundColor&&(a.backgroundColor=null),a.className&&!TGE.getClass(a.className)&&(this._recordConsoleMessage("Class name ["+a.className+"] doesn't exist."),delete a.className),a)i[s]=a[s];o||this._recordConsoleMessage("Trying to override an object with the name ["+n+"] but that object doesn't exist in the elx file you're trying to override.",!0)}return e},_generateFontIdOverrides:function(t){var e=TGE.Game.GetInstance().fontIDs;if(!e)return null;var i,a,o,n={};for(i in t){(o=t[i]).fontFamily&&e[o.fontFamily]&&(a=e[o.fontFamily],a=this._jsonClone(a),a=this._cleanFontId(a),n[o.name]=a)}return n},_cleanFontId:function(t){return t.tfxName&&(TGE.getClass(t.tfxName)?t.className||(t.className="CharDisplay"):(this._recordConsoleMessage("In ELXFontIds, TFX font name ["+t.tfxName+"] doesn't exist."),delete t.tfxName)),t.fontColor&&(t.textColor=t.fontColor,delete t.fontColor),t.color&&(t.textColor=t.color,delete t.color),t},_onResize:function(){var t=this._getCurrentELX();t&&t.id!=this._currentElxId&&(this._applyElxDataToObjects(t.data),this._parentObjectsUsingDataset(t.data),this.setState(this._currentState),this._currentElxId=t.id,this.dispatchEvent({type:"elxchanged"}))},_reRegister:function(){this.layout={xPercentage:-this.parent.registrationX,yPercentage:-this.parent.registrationY,matchWidth:1,matchHeight:1}},_logConsoleMessage:function(t,e){var i;switch(t){case"warn":i="**ELX WARNING** ";break;case"error":i="**ELX ERROR* ";break;default:return}e="number"==typeof e?"Something went wrong with ELXDisplay.  Please contact Kirsten.  Error code "+e:e,window.console[t](i+"\n\n-"+e)},_recordConsoleMessage:function(t,e){e&&"true"!==getQueryString().elxverbose&&"true"!==getQueryString().elxdebug||(t="number"==typeof t?"Something went wrong with ELXDisplay.  Please contact Kirsten.  Error code "+t:t,-1===this._consoleMessages.indexOf(t)&&this._consoleMessages.push(t))},_logConsoleMessages:function(){if(0!==this._consoleMessages.length){var t,e="**ELX WARNINGS**\n\n";for(t in this._consoleMessages)e+="-",e+=this._consoleMessages[t],e+="\n\n";window.console.warn(e)}},_createDebugFeatures:function(e,i){"true"===getQueryString().elxdebug&&(e.elxDebugHighlight=e.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"white",alpha:.4,visible:!1})),e.addEventListener("mousemove",function(t){e.elxDebugHighlight.visible=!0,e.elxDebugHighlight.width=e.width,e.elxDebugHighlight.height=e.height,e.elxDebugHighlight.registrationX=e.registrationX,e.elxDebugHighlight.registrationY=e.registrationY,ELXDisplay._mDebugData=i,t.stageY>TGE.Game.GetInstance().stage.height/2?(ELXDisplay._mDebugWidget.style.top=0,ELXDisplay._mDebugWidget.style.bottom=null):(ELXDisplay._mDebugWidget.style.top=null,ELXDisplay._mDebugWidget.style.bottom=0)}.bind(this)),e.addEventListener("mouseout",function(){e.elxDebugHighlight.visible=!1}.bind(this)))}},extend(ELXDisplay,TGE.DisplayObjectContainer),ELXDisplay._createDebugWidget=function(){var t;"true"===getQueryString().elxdebug&&((t=document.createElement("div")).id="debug_widget",t.style.backgroundColor="#6bb6f2",t.style.position="absolute",t.style.display="block",t.style.top=0,t.style.padding="6px",t.style.zIndex=200,document.body.insertBefore(t,document.body.firstChild),ELXDisplay._mDebugWidget=t,ELXDisplay._updateDebugWidget(),setInterval(ELXDisplay._updateDebugWidget,100))},ELXDisplay._updateDebugWidget=function(){var t,e="",i=ELXDisplay._mDebugData;for(t in i)"childObjects"!==t&&"elx"!==t&&(e+=t+": "+JSON.stringify(i[t])+"<br>");""===e&&(e+="hover mouse over elx objects!"),e="<div style='font-weight: bold; font-size: 14px; padding-bottom: 3px;'>ELX Debugger</div>"+e,ELXDisplay._mDebugWidget.innerHTML=e};var PromoBuilder={assetList:null,holder:null,score:null,replayCallback:null,video:null,scn:null,_removeFunction:function(){PromoBuilder.scn=null},_videoBuffering:{pb_win:"loading",pb_lose:"loading"},_videoPlaying:!(ELXDisplay.setupELXPreview=function(t){if(getQueryString().elxfile){if(!t.addChild)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"ELX Preview is not set up correctly. ELXDisplay.setupELXPreview(this) should be called from GameScreen.");TGE.Game.GetInstance().desktopMaxCanvasWidth=Number.MAX_VALUE,TGE.Game.GetInstance().desktopMaxCanvasHeight=Number.MAX_VALUE,TGE.Game.GetInstance()._resizeViewport();var e,i=getQueryString(),a=window[i.elxfile],o="boolean"==typeof i.elxoverrides?window[i.elxoverrides]:window[i.overridefile],n=window[i.elxstates],r=i.elxstate,s=i.backdrop,l="#"+Math.floor(16777216*Math.random()).toString(16),p=t.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:s||l,layout:"match"}));p.addEventListener("update",function(){p.bringToFront()}.bind(p)),a?(e=p.addChild((new ELXDisplay).setup({elx:a,override:o,states:n})),r&&e.setState(r)):p.addChild((new TGE.Text).setup({text:"ELX FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===p.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.1,scaleToWidth:.9}})),o||"string"!=typeof i.overridefile&&"string"!=typeof i.elxoverrides||p.addChild((new TGE.Text).setup({text:"OVERRIDE FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===p.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.15,scaleToWidth:.9}})),n||"string"!=typeof i.elxstates||p.addChild((new TGE.Text).setup({text:"STATES FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===p.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.2,scaleToWidth:.9}}))}}),REMOTE_SETTINGS:{VideoPlayer_debug:{type:"boolean",default:!1},promo_type:{type:"string",default:"custom",options:["static","preset","custom"]},promo_noVideo:{type:"boolean",default:!1},promo_style:{type:"string",default:"promoPopupIconDouble"},promo_reason:{type:"string",default:""},promo_videoInterstitial:{type:"boolean",default:!1},promo_dualVideo:{type:"boolean",default:!1},promo_winOnly:{type:"boolean",default:!1},promo_supportScore:{type:"boolean",default:!1},promo_previewBgFocus:{type:"boolean",default:!1},promo_staticBackground:{type:"string",default:"single",options:["single","dual"]},promo_background_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_portrait_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_landscape_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_bg:{type:"string",default:"popup",options:["popup","full","twoBox","none"]},promo_text:{type:"string",default:"body",options:["header","body","none","nofont"]},promo_icon:{type:"boolean",default:!0},promo_art:{type:"boolean",default:!1},promo_buttons:{type:"number",default:2,options:[0,1,2]},promo_buttonActionA:{type:"string",default:"action",options:["action","replay","popwallet"]},promo_buttonActionB:{type:"string",default:"replay",options:["action","replay","popwallet"]},promo_popwalletId:{type:"string",default:""},promo_popwalletRedeemOnce:{type:"boolean",default:!1},promo_fullClickAction:{type:"string",default:"none",options:["none","action","replay","popwallet"]},promo_fullClick:{type:"boolean",default:!1},promo_testVideo:{type:"boolean",default:!1},promo_video:{type:"boolean",default:!1},promo_video_videoUpload:{type:"boolean",default:!1},promo_video_loop:{type:"boolean",default:!1},promo_video_previewVideoCropping:{type:"boolean",default:!1},promo_video_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_video_noCropping:{type:"boolean",default:!0},promo_video_useSafeZone:{type:"boolean",default:!0},promo_video_zoomedPreview:{type:"boolean",default:!1},promo_video_location:{type:"number",default:.5,options:[{min:0,max:1,interval:.001}]},promo_video_safeZoneX:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneY:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneWidth:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_safeZoneHeight:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_watchdogTimer:{type:"number",default:500},promo_video_orientationLock:{type:"boolean",default:!1},promo_muteStyle:{type:"string",default:"circle",options:["none","filled","circle","circleFilled"]},promo_muteColor:{type:"string",default:"#ffffff"},promo_muteThickness:{type:"number",default:.5,options:[{min:.1,max:1,interval:.1}]},promo_custom_style:{type:"string",default:"popup",options:["popup","fullscreen","video"]},promo_custom_useDifferentLayouts:{type:"boolean",default:!1},promo_custom_buttonA_portrait_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_portrait_yPosition:{type:"number",default:1,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_yPosition:{type:"number",default:1,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_portrait_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_portrait_yPosition:{type:"number",default:.75,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_yPosition:{type:"number",default:.75,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_enabled:{type:"boolean",default:!0},promo_custom_titleText_editMode:{type:"boolean",default:!1},promo_custom_titleText_portrait_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_titleText_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_portrait_yPosition:{type:"number",default:.35,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_landscape_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_titleText_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_landscape_yPosition:{type:"number",default:.35,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_enabled:{type:"boolean",default:!0},promo_custom_bodyText_editMode:{type:"boolean",default:!1},promo_custom_bodyText_portrait_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_bodyText_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_portrait_yPosition:{type:"number",default:.53,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_landscape_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_bodyText_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_landscape_yPosition:{type:"number",default:.53,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_enabled:{type:"boolean",default:!0},promo_custom_smallImage_portrait_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_portrait_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_enabled:{type:"boolean",default:!1},promo_custom_largeImage_portrait_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_portrait_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_size:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_backgroundStyle:{type:"string",default:"image",options:["none","image","overlay","video"]},promo_custom_showPopupImage:{type:"boolean",default:!0},promo_custom_fullscreen_editMode:{type:"boolean",default:!1},promo_custom_fullscreen_portrait_height:{type:"number",default:1.8,options:[{min:1,max:2,interval:.1}]},promo_custom_fullscreen_landscape_width:{type:"number",default:1.8,options:[{min:1,max:2,interval:.1}]},promo_custom_fullscreen_both_ratio:{type:"number",default:.2,options:[{min:-1,max:1,interval:.1}]},promo_custom_popup_portrait_size:{type:"number",default:.8,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_xPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_yPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_orientation:{type:"string",default:"none",options:["none","left","right"]},promo_custom_popup_landscape_size:{type:"number",default:.8,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_xPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_yPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_orientation:{type:"string",default:"none",options:["none","left","right"]}},SOURCE:["js/game/utilities/PBCrosshair.js","js/game/utilities/PBLayoutHandler.js","js/game/utilities/PBLayoutHelpers.js","js/game/utilities/PBOverlay.js","js/game/utilities/PBText.js","js/game/utilities/PBMuteButton.js","js/game/utilities/PBVideoPlayer.js","js/game/elx/ELX_promoFullVideoDouble.js","js/game/elx/ELX_promoFullVideoSingle.js","js/game/elx/ELX_promoFullVideoNone.js","js/game/elx/ELX_promoFullInsetVideoDouble.js","js/game/elx/ELX_promoFullInsetVideoSingle.js","js/game/elx/ELX_promoFullInsetVideoNone.js","js/game/elx/ELX_promoFullTopVideoDouble.js","js/game/elx/ELX_promoFullTopVideoSingle.js","js/game/elx/ELX_promoFullTopVideoNone.js","js/game/elx/ELX_promoFullImageDouble.js","js/game/elx/ELX_promoFullImageNone.js","js/game/elx/ELX_promoFullImageIconSingle.js","js/game/elx/ELX_promoFullImageIconNone.js","js/game/elx/ELX_promoPopupIconDouble.js","js/game/elx/ELX_promoPopupIconSingle.js","js/game/elx/ELX_promoPopupIconNone.js","js/game/elx/ELX_promoPopupImageIconNone.js","js/game/elx/ELX_promoPopupImageIconSingle.js","js/game/elx/ELX_promoSingleImage.js","js/game/elx/ELX_promoDualImage.js","js/game/ui/PBButton.js","js/game/ui/PBFullscreenContainer.js","js/game/ui/PBPopupContainer.js","js/game/ui/PBTextContainer.js","js/game/ui/PBCustomPromoScreen.js","js/game/ui/PBElxPromoScreen.js"],REQUIRED_SOURCE:["js/game/utilities/PBCroppedSprite.js"],IMAGE_COMPRESSION:{"assets/images/promoCommon.png":{type:"tinypng"},"assets/images/promoPopupIcon.png":{type:"tinypng"}},ALL_ASSETS:{"assets/images/promoCommon.png":{type:"tinypng"},"assets/images/promoPopupIcon.png":{type:"tinypng"},"assets/images/promoFullImage.png":{type:"tinypng"},"assets/images/promoCustom.png":{type:"tinypng"},"assets/images/promoCustomPopup.png":{type:"tinypng"},"assets/images/promoTwoBox.jpg":{type:"tinypng"},"assets/images/img_promoBackground.jpg":{type:"tinypng"},"assets/images/img_promoBg_portrait.jpg":{type:"tinypng"},"assets/images/img_promoBg_landscape.jpg":{type:"tinypng"},"assets/video/portraitCountdown.mp4":{type:"video"},"assets/video/pb_win.mp4":{type:"video"},"assets/video/pb_lose.mp4":{type:"video"}},ELX_OVERRIDES:{txt_promo_buttonA:{textDef:"txt_promo_buttonA"},txt_promo_buttonB:{textDef:"txt_promo_buttonB"},txt_promo_bodyA:{className:"PBText",textDef:"txt_promo_bodyA"},txt_promo_bodyB:{className:"PBText",textDef:"txt_promo_bodyB"},txt_promo_headerA:{className:"PBText",textDef:"txt_promo_headerA"},txt_promo_headerB:{className:"PBText",textDef:"txt_promo_headerB"},img_promo_buttonA:{className:"PBCroppedSprite"},img_promo_buttonB:{className:"PBCroppedSprite"}},promoData:{promoSingleImage:{elx:"ELX_promoSingleImage",assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoPopupIconNone:{elx:"ELX_promoPopupIconNone",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupIconSingle:{elx:"ELX_promoPopupIconSingle",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupIconDouble:{elx:"ELX_promoPopupIconDouble",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupImageIconNone:{elx:"ELX_promoPopupImageIconNone",orientation:!0,sheets:["promoCommon.png","promoPopupIcon.png","promoFullImage.png"]},promoPopupImageIconSingle:{elx:"ELX_promoPopupImageIconSingle",orientation:!0,sheets:["promoCommon.png","promoPopupIcon.png","promoFullImage.png"]},promoFullImageIconNone:{elx:"ELX_promoFullImageIconNone",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageIconSingle:{elx:"ELX_promoFullImageIconSingle",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageNone:{elx:"ELX_promoFullImageNone",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageDouble:{elx:"ELX_promoFullImageDouble",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullVideoDouble:{elx:"ELX_promoFullVideoDouble",orientation:!0,sheets:["promoCommon.png"]},promoFullVideoSingle:{elx:"ELX_promoFullVideoSingle",orientation:!0,sheets:["promoCommon.png"]},promoFullVideoNone:{elx:"ELX_promoFullVideoNone",orientation:!0},promoFullInsetVideoDouble:{elx:"ELX_promoFullInsetVideoDouble",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullInsetVideoSingle:{elx:"ELX_promoFullInsetVideoSingle",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullInsetVideoNone:{elx:"ELX_promoFullInsetVideoNone",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullTopVideoDouble:{elx:"ELX_promoFullTopVideoDouble",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoFullTopVideoSingle:{elx:"ELX_promoFullTopVideoSingle",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoFullTopVideoNone:{elx:"ELX_promoFullTopVideoNone",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoStatic_single:{elx:"ELX_promoSingleImage",assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoStatic_dual:{elx:"ELX_promoDualImage",orientation:!0,assets:[{id:"img_promo_background_portrait",url:"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:"images/img_promoBg_landscape.jpg"}]}},UseDualVideo:function(){return(TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&TGE.RemoteSettings("promo_dualVideo")&&!TGE.RemoteSettings("promo_winOnly")},OnVideoPlaying:function(t){t.currentTarget.removeEventListener("playing",PromoBuilder.OnVideoPlaying),PromoBuilder._videoPlaying=!0},PlayVideo:function(t,e){t&&(e.visible=!1,t.visible=!1,e.performAction({delay:.01,action:this._waitViewable.bind(this,t)}))},_waitViewable:function(t){TGE.Game.AddEventListener("tgeGameViewable",this._playVideo.bind(this,t))},_playVideo:function(t){var e=this.scn,i=t.video;function a(){i.removeEventListener("playing",a),t.visible=!0,e.visible=!0}i.addEventListener("playing",a),PromoBuilder._videoPlaying&&a(),t.play()},AddPromoAssets:function(i){var a,t,e=TGE.Game.GetInstance(),o=e.assetManager;for(t in this.assetList=i,PromoBuilder.promoType=TGE.RemoteSettings("promo_type"),this.REMOTE_SETTINGS)TGE.RemoteSettings.GetSettings[t]||TGE.RemoteSettings.AddSetting(this.REMOTE_SETTINGS[t]);if(!1===GameConfig.PROMO_BUILDER_VIDEO&&(TGE.RemoteSettings.GetSettings().promo_noVideo.value=!0),TGE.InCreativeBuilder())s(i,"promoCommon.png"),s(i,"promoPopupIcon.png"),s(i,"promoFullImage.png"),s(i,"promoTwoBox.jpg"),s(i,"promoCustom.png"),s(i,"promoCustomPopup.png"),o.addAssets(i,[{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"},{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]),r(),TGE.RemoteSettings("promo_noVideo")||o.addAssets(i,[{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4"},{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4"},{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4"}]);else switch(TGE.RemoteSettings("promo_type")){case"static":!function(){"dual"===TGE.RemoteSettings("promo_staticBackground")?o.addAssets(i,[{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]):o.addAsset(i,{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"});TGE.RemoteSettings("promo_videoInterstitial")&&n()}();break;case"preset":!function(){var t=TGE.RemoteSettings("promo_style"),e=PromoBuilder.promoData[t];if(e){if(e.sheets)for(a=e.sheets.length;0<=--a;)s(i,e.sheets[a]);if(e.assets){for(a=e.assets.length;0<=--a;)e.assets[a].url=GameConfig.PROMO_ASSET_PATH+e.assets[a].url;o.addAssets(i,e.assets)}(TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&n()}else console.error("PB: unknown promoStyle: "+t)}(),r();break;case"custom":!function(){"video"!==TGE.RemoteSettings("promo_custom_style")&&!TGE.RemoteSettings("promo_videoInterstitial")||n();"popup"===TGE.RemoteSettings("promo_custom_style")&&s(i,"promoCustomPopup.png");"fullscreen"===TGE.RemoteSettings("promo_custom_style")&&o.addAsset(i,{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"});(TGE.RemoteSettings("promo_custom_smallImage_enabled")||0<TGE.RemoteSettings("promo_buttons"))&&s(i,"promoCustom.png");TGE.RemoteSettings("promo_custom_largeImage_enabled")&&s(i,"promoFullImage.png");var t=[];(TGE.RemoteSettings("promo_custom_titleText_enabled")||0<TGE.RemoteSettings("promo_buttons"))&&t.push("txt_font_primary");TGE.RemoteSettings("promo_custom_bodyText_enabled")&&t.push("txt_font_secondary");e.addFonts(i,t)}()}if(window.__isLocal){for(a=0;a<this.REQUIRED_SOURCE.length;++a)o.addAsset("required",{type:"script",url:"../promobuilder/"+this.REQUIRED_SOURCE[a]});for(a=0;a<this.SOURCE.length;++a)o.addAsset(i,{type:"script",url:"../promobuilder/"+this.SOURCE[a]})}function n(){var t={playing:PromoBuilder.OnVideoPlaying};PromoBuilder.UseDualVideo()?(o.addAsset(i,{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4",listeners:t}),o.addAsset(i,{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4",listeners:t})):o.addAsset(i,{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4",listeners:t})}function r(){var t=[];"nofont"===TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||t.push("txt_font_primary"),"body"!==TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||t.push("txt_font_secondary"),e.addFonts(i,t)}function s(t,e){var i=e.slice(0,-4);window.__isLocal?o.addSheetImages(t,GameConfig.PROMO_ASSET_PATH+"images/"+e,"../promobuilder/js/game/sheets/"+i+".js"):o.addSheetImages(t,GameConfig.PROMO_ASSET_PATH+"images/"+e)}},AddPromoScreen:function(t,e){return this.holder=t.addChild((new TGE.DisplayObjectContainer).setup({layout:function(t){this.registrationX=.5,this.registrationY=.5,this.width=this.parent.width,this.height=this.parent.height,this.x=this.parent.width*(.5-this.parent.registrationX),this.y=this.parent.height*(.5-this.parent.registrationY)}})),TGE.Game.GetInstance().waitForAssetList(PromoBuilder.assetList,PromoBuilder._addPromoScreen.bind(PromoBuilder,this.holder,e)),this.holder},_addPromoScreen:function(t,e){PromoBuilder.scn&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempting to add another promo screen "+(e.reason?"for '"+e.reason+"' ":"")+"when one already exists"),PromoBuilder.scn.removeEventListener("remove",PromoBuilder._removeFunction)),this._removeInterstitialVideo(),TGE.InCreativeBuilder()&&_selfServe.freshGameConfig&&!_selfServe.freshGameConfig.EXCLUDE_FROM_COMPRESSION&&(_selfServe.freshGameConfig.EXCLUDE_FROM_COMPRESSION=[],_selfServe.persistGameConfig()),e=TGE.DeepClone(e),this._setupState(e),this._setupVideoAsset(e);var i,a="preset"===TGE.RemoteSettings("promo_type")&&0<=TGE.RemoteSettings("promo_style").indexOf("Video")||"custom"===TGE.RemoteSettings("promo_type")&&"video"===TGE.RemoteSettings("promo_custom_style");TGE.InCreativeBuilder()&&(a?_selfServe.changeSetting("promo_videoInterstitial",!1,!0):void 0!==(i=_selfServe.stateSettings.promo_videoInterstitial)&&_selfServe.changeSetting("promo_videoInterstitial",i),_selfServe.changeSetting("promo_supportScore",void 0!==e.score),_selfServe.changeSetting("promo_winOnly",e.winOnly||!1));var o="custom"!==TGE.RemoteSettings("promo_type")||TGE.RemoteSettings("promo_testVideo")?PBElxPromoScreen:PBCustomPromoScreen,n=t.addChild((new o).setup(e));return(PromoBuilder.scn=n).addEventListener("remove",PromoBuilder._removeFunction),n.performAction({delay:"number"==typeof e.delayBeforeClickable?e.delayBeforeClickable:1,action:this.addListeners.bind(this)}),!TGE.RemoteSettings("promo_videoInterstitial")||a||TGE.RemoteSettings("promo_testVideo")||this._addInterstitialVideo(t,e,"promo"!==TGE.RemoteSettings("state")||!TGE.InCreativeBuilder()),"promo"!==getQueryString().state&&n.tweenFrom({alpha:0,duration:.3,easing:TGE.Tween.Sine.Out}),n},_setupState:function(t){this.score=t.score,this.replayCallback=t.onReplay;var e=t.reason||"win";"promo"===TGE.RemoteSettings("state")&&(e=TGE.RemoteSettings("promo_reason")||e,this.score=TGE.InCreativeBuilder()?12345:0),"none"!==e&&TGE.Analytics.Completion(e),t.lose=!t.winOnly&&"string"==typeof e&&0===e.indexOf("lose");var i=TGE.RemoteSettings("promo_type");if(TGE.InCreativeBuilder()&&PromoBuilder.promoType!==i&&("preset"===i||"custom"===i)){switch(PromoBuilder.promoType=i){case"preset":a=GameConfig.THEME_DEFS[TGE.RemoteSettings("promo_style")];break;case"custom":var a=GameConfig.THEME_DEFS["promo_custom_style_"+TGE.RemoteSettings("promo_custom_style")],o=TGE.RemoteSettings("promo_custom_titleText_enabled")?TGE.RemoteSettings("promo_custom_bodyText_enabled")?"body":"header":TGE.RemoteSettings("promo_custom_bodyText_enabled")?"body":0<TGE.RemoteSettings("promo_buttons")?"none":"nofont";_selfServe.changeSetting("promo_text",o)}a&&_selfServe.applyPatches(a)}},_setupVideoAsset:function(t){var e,i;t.videoAsset="video_ad",PromoBuilder.UseDualVideo()&&(t.videoAsset=t.lose?"pb_lose":"pb_win",this._videoBuffering[t.videoAsset]="played",e=t.lose?"pb_win":"pb_lose","loading"!==this._videoBuffering[e]||(i=TGE.Game.GetInstance().assetManager.getAsset(e))&&(i.setAttribute("preload","none"),i.load(),this._videoBuffering[e]="suspended"))},_addInterstitialVideo:function(t,e,i){var a=this.video=t.addChild((new PBVideoPlayer).setup({assetId:e.videoAsset,colorDef:"promo_video_letterbox",fullscreen:!0,aspectHandling:TGE.RemoteSettings("promo_video_noCropping")?"letterbox":"crop",autoplay:!1,registrationX:0,registrationY:0,layout:"match"}));i?(a.addEventListener("complete",function(){a.sendToBack()}),PromoBuilder.PlayVideo(a,this.scn),a.mouseEnabled=!0):(a.sendToBack(),a.setLocation(1))},_removeInterstitialVideo:function(){this.video&&(this.video.setLocation(0),this.video.removeFromScene(),this.video=null)},addListeners:function(){var t=PromoBuilder.scn;t?(t._addButtonListener("A"),t._addButtonListener("B"),t.addEventListener("click",this.onFullscreenClick.bind(t))):console.error("PB: can't add click listeners")},onFullscreenClick:function(t){if(t.y>.1*this.height){var e=TGE.RemoteSettings("promo_fullClickAction");if("static"!==TGE.RemoteSettings("promo_type"))switch(TGE.RemoteSettings("promo_buttons")){case 1:if(TGE.RemoteSettings("promo_fullClick")){e=TGE.RemoteSettings("promo_buttonActionA");break}case 2:e=null}"replay"===e&&PromoBuilder.onReplay(),"action"===e&&TGE.Game.AppstoreClickthrough(),"popwallet"===e&&(TGE.RemoteSettings("promo_popwalletRedeemOnce")&&"true"===TGE.GetFromStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon")||PromoBuilder.onPopwallet())}},onReplay:function(){for(id in this._removeInterstitialVideo(),this._videoBuffering){var t;"suspended"===this._videoBuffering[id]&&((t=TGE.Game.GetInstance().assetManager.getAsset(id)).setAttribute("preload","auto"),t.load(),this._videoBuffering[id]="loading")}TGE.Analytics.Replay(),this.replayCallback&&this.replayCallback()},onPopwallet:function(t){TGE.RemoteSettings("promo_popwalletRedeemOnce")&&(t&&t.currentTarget&&(t.currentTarget.visible=!1),window.__isLocal&&TGE.SetInStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon","true")),this.getSecurePopwalletUrl(TGE.RemoteSettings("promo_popwalletId"))},getSecurePopwalletUrl:function(t){var e={popwalletId:t};TGE.Game.GetInstance().serverRequest("popwallet",e,this.securePopwalletCallback.bind(this),4)},securePopwalletCallback:function(t){t.success?this.gotoPopwalletSite(t.url):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error requesting secure coupon URL: "+t.error)},gotoPopwalletSite:function(t){TGE.SetInStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon","true"),window.mraid&&"mopub"===getQueryString().ssp.toLowerCase()&&(t="mopubnativebrowser://navigate?url="+(t=encodeURIComponent(t))),TGE.Game.Clickthrough("popwallet",t)}},PromoConfig={PAGE_ORDER:["promoScreen"],PAGE_DEFS:{promoScreen:{name:"Promo Screen",state:"promo_win",groupType:"tabs",steps:[{name:"Style",type:"group",groupType:"open",steps:[{type:"remoteSetting",restart:!0,prompt:"Choose the end screen type",selectorDef:"promo_type",settingName:"promo_type"},{type:"theme",restart:!0,prompt:"Choose a preset style",selectorDef:"promo_style",settingName:"promo_style",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&!TGE.RemoteSettings("promo_noVideo")}},{type:"theme",restart:!0,prompt:"Choose a preset style",selectorDef:"promo_styleNoVideo",settingName:"promo_style",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_noVideo")}},{type:"theme",prompt:"Choose a Promo Style",selectorDef:"promo_custom_styleSelector",restart:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")}},{label:"Display a video interstitial before the end screen",type:"remoteSetting",settingName:"promo_videoInterstitial",restart:!0,visibilityFunction:function(){return!("static"!==TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_noVideo"))}},{type:"remoteSetting",settingName:"promo_custom_useDifferentLayouts",label:"Use different layouts for Portrait and Landscape",restart:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")}},{type:"group",groupType:"open",prompt:"Promo Components",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")},steps:[{type:"remoteSetting",settingName:"promo_custom_titleText_enabled",label:"Show Title Text",restart:!0},{type:"remoteSetting",settingName:"promo_custom_bodyText_enabled",label:"Show Body Text",restart:!0},{type:"remoteSetting",settingName:"promo_custom_smallImage_enabled",label:"Show Small Image",restart:!0},{type:"remoteSetting",settingName:"promo_custom_largeImage_enabled",label:"Show Large Image",restart:!0},{prompt:"Choose the number of buttons",type:"remoteSetting",settingName:"promo_buttons",restart:!0}]}]},{name:"Popup",type:"group",groupType:"open",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&"popup"===TGE.RemoteSettings("promo_custom_style")||"preset"===TGE.RemoteSettings("promo_type")&&"popup"===TGE.RemoteSettings("promo_bg")},steps:[{prompt:"Choose a popup background image",type:"imageGroup",image:"img_promo_popupBackground",selectorDef:"promoLargePopup",path:"assets/alternate-images/promo/largePopup",colorize:!0,visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&"popup"===TGE.RemoteSettings("promo_bg")}},{type:"group",groupType:"open",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&"popup"===TGE.RemoteSettings("promo_custom_style")},steps:[{prompt:"Set the Popup image",type:"imageGroup",image:"promo_custom_popupBackground",selectorDef:"promoLargePopup",path:"assets/alternate-images/promo/largePopup",colorize:!0,autoCrop:!0,visibilityRemoteSetting:"promo_custom_showPopupImage"},{prompt:"Adjust the size and orientation",type:"group",groupType:"buttons",visibilityRemoteSetting:"promo_custom_useDifferentLayouts",steps:[{name:"Portrait",type:"group",groupType:"open",previewAspect:"portrait",steps:[{name:"Promo Container Size",type:"remoteSetting",info:"Adjust the size of the Popup",settingName:"promo_custom_popup_portrait_size",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}},{name:"Promo Container Orientation",type:"remoteSetting",info:"Adjust the orientation of the Popup image",settingName:"promo_custom_popup_portrait_orientation",restart:!0}]},{name:"Landscape",type:"group",groupType:"open",previewAspect:"landscape",steps:[{name:"Promo Container Size",type:"remoteSetting",info:"Adjust the size of the Popup",settingName:"promo_custom_popup_landscape_size",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}},{name:"Promo Container Orientation",type:"remoteSetting",info:"Adjust the orientation of the Popup image",settingName:"promo_custom_popup_landscape_orientation",restart:!0}]}]},{type:"remoteSetting",prompt:"Adjust the size of the Popup",settingName:"promo_custom_popup_portrait_size",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}},visibilityFunction:function(){return!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}}]}]},{name:"Background",state:"promo_previewBgFocus",type:"group",groupType:"open",pageDef:"promo_background",visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")||"none"!==TGE.RemoteSettings("promo_bg")}},{name:"Video",state:"promo_video_videoUpload",type:"group",groupType:"tabs",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return TGE.RemoteSettings("promo_videoInterstitial");case"preset":case"custom":return TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial")}},steps:[{name:"Upload",type:"group",groupType:"open",state:"promo_video_videoUpload",steps:[{label:"Use two separate videos for win/lose conditions",type:"remoteSetting",settingName:"promo_dualVideo",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings("promo_winOnly")&&("static"!==TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&!TGE.RemoteSettings("promo_noVideo")}},{type:"macro",macroDef:"promo_video_upload",macroParams:["video_ad"],visibilityFunction:function(){return!PromoBuilder.UseDualVideo()}},{type:"group",groupType:"buttons",visibilityFunction:PromoBuilder.UseDualVideo,steps:[{name:"Win Video",state:"promo_video_videoWin",type:"macro",macroDef:"promo_video_upload",macroParams:["pb_win"]},{name:"Lose Video",state:"promo_video_videoLose",type:"macro",macroDef:"promo_video_upload",macroParams:["pb_lose"]}]},{label:"Video repeats in an endless loop",type:"remoteSetting",settingName:"promo_video_loop",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings("promo_videoInterstitial")}},{prompt:"Adjust the size/position",type:"layout",elxName:"promo_videoContainer",visibilityFunction:function(){return"none"!==TGE.RemoteSettings("promo_bg")&&!TGE.RemoteSettings("promo_videoInterstitial")}}]},{type:"macro",macroDef:"promo_video_cropping",visibilityFunction:function(){return"none"===TGE.RemoteSettings("promo_bg")||TGE.RemoteSettings("promo_videoInterstitial")}},{type:"macro",macroDef:"promo_video_mute"}]},{name:"Content Area",type:"group",groupType:"open",restart:!0,state:"promo_custom_fullscreen_editMode",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&"popup"!==TGE.RemoteSettings("promo_custom_style")&&(!TGE.RemoteSettings("promo_custom_useDifferentLayouts")||advancedUser)},steps:[{type:"remoteSetting",prompt:"Adjust the fullscreen content area",info:"Which orientation do you want to optimize for?",selectorDef:"promo_custom_fullscreen_both_ratios",settingName:"promo_custom_fullscreen_both_ratio",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the content area dimensions",type:"group",groupType:"buttons",visibilityRemoteSetting:"promo_custom_useDifferentLayouts",advancedUser:!0,steps:[{name:"Portrait",type:"group",groupType:"open",previewAspect:"portrait",steps:[{name:"Promo Container Size",type:"remoteSetting",info:"Adjust the content height for Portrait",settingName:"promo_custom_fullscreen_portrait_height",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}}]},{name:"Landscape",type:"group",groupType:"open",previewAspect:"landscape",steps:[{name:"Promo Container Size",type:"remoteSetting",info:"Adjust the content width for Landscape",settingName:"promo_custom_fullscreen_landscape_width",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}}]}]}]},{name:"Icon",stepId:"step_promo_icon",type:"group",groupType:"open",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_icon")},steps:[{type:"imageUpload",prompt:"Upload an icon image",image:"img_promo_icon",colorize:!0,showNoImage:!0},{type:"layout",prompt:"Adjust the size/position",image:"img_promo_icon"}]},{name:"Small Image",type:"group",groupType:"open",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_custom_smallImage_enabled")},steps:[{type:"imageUpload",prompt:"Upload a Small Image",image:"promo_custom_smallImage",colorize:!0,autoCrop:!0},{prompt:"Adjust the size and position",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_smallImage","portrait"],visibilityFunction:function(){return!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the size and position",type:"group",groupType:"buttons",visibilityFunction:function(){return TGE.RemoteSettings("promo_custom_useDifferentLayouts")},steps:[{name:"Portrait",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_smallImage","portrait"]},{name:"Landscape",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_smallImage","landscape"]}]}]},{name:"Large Image",type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return!1;case"preset":return TGE.RemoteSettings("promo_art");case"custom":return TGE.RemoteSettings("promo_custom_largeImage_enabled")}},steps:[{type:"group",groupType:"buttons",steps:[{name:"Win",state:"promo_win",type:"group",groupType:"open",steps:[{prompt:'Choose a "win" image',type:"imageUpload",image:"img_promo_artA",colorize:!0,showNoImage:!0},{prompt:"Adjust the size and position",type:"layout",image:"img_promo_artA",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]},{name:"Lose",state:"promo_lose",type:"group",groupType:"open",visibilityFunction:function(){return!TGE.RemoteSettings("promo_winOnly")},steps:[{prompt:'Choose a "lose" image',type:"imageUpload",image:"img_promo_artB",colorize:!0,showNoImage:!0},{prompt:"Adjust the size and position",type:"layout",image:"img_promo_artB",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]}]},{type:"group",groupType:"open",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")},steps:[{prompt:"Adjust the size and position",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_largeImage","portrait"],visibilityFunction:function(){return!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the size and position",type:"group",groupType:"buttons",visibilityFunction:function(){return TGE.RemoteSettings("promo_custom_useDifferentLayouts")},steps:[{name:"Portrait",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_largeImage","portrait"]},{name:"Landscape",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_largeImage","landscape"]}]}]}]},{name:"Fonts",type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return!1;case"preset":return"nofont"!==TGE.RemoteSettings("promo_text");case"custom":return TGE.RemoteSettings("promo_custom_bodyText_enabled")||TGE.RemoteSettings("promo_custom_titleText_enabled")||0<TGE.RemoteSettings("promo_buttons")}},steps:[{prompt:"Choose a primary font",type:"text",textDef:"txt_font_primary",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return!0;case"custom":return TGE.RemoteSettings("promo_custom_titleText_enabled")||0<TGE.RemoteSettings("promo_buttons")}}},{prompt:"Choose a body text font",type:"text",textDef:"txt_font_secondary",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return"body"===TGE.RemoteSettings("promo_text");case"custom":return TGE.RemoteSettings("promo_custom_bodyText_enabled")}}}]},{name:"Title Text",type:"group",groupType:"open",state:"promo_custom_titleTextWin",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return!1;case"preset":return"body"===TGE.RemoteSettings("promo_text")||"header"===TGE.RemoteSettings("promo_text");case"custom":return TGE.RemoteSettings("promo_custom_titleText_enabled")}},steps:[{type:"group",groupType:"buttons",steps:[{name:"Win",state:"promo_custom_titleTextWin",type:"group",groupType:"open",steps:[{prompt:"Edit the title text",type:"text",textDef:"txt_promo_headerA"},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]},{name:"Lose",state:"promo_custom_titleTextLose",type:"group",groupType:"open",visibilityFunction:function(){return!TGE.RemoteSettings("promo_winOnly")},steps:[{prompt:"Edit the title text",type:"text",textDef:"txt_promo_headerB"},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]}]},{prompt:"Change the title text style",type:"text",textDef:"txt_promo_header",minFontSize:35,maxFontSize:120,justification:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")}},{prompt:"Adjust the size and position",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_titleText","portrait"],visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the size and position",type:"group",groupType:"buttons",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_custom_useDifferentLayouts")},steps:[{name:"Portrait",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_titleText","portrait"]},{name:"Landscape",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_titleText","landscape"]}]},{prompt:"Change the title text style",type:"text",textDef:"txt_promo_header",minFontSize:35,maxFontSize:120,position:!0,visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]},{name:"Body Text",type:"group",groupType:"open",state:"promo_custom_bodyTextWin",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return"body"===TGE.RemoteSettings("promo_text");case"custom":return TGE.RemoteSettings("promo_custom_bodyText_enabled")}},steps:[{type:"group",groupType:"buttons",steps:[{name:"Win",state:"promo_custom_bodyTextWin",type:"group",groupType:"open",steps:[{prompt:"Edit the body text",type:"text",textDef:"txt_promo_bodyA",numLines:3},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]},{name:"Lose",state:"promo_custom_bodyTextLose",type:"group",groupType:"open",visibilityFunction:function(){return!TGE.RemoteSettings("promo_winOnly")},steps:[{prompt:"Edit the body text",type:"text",textDef:"txt_promo_bodyB",numLines:3},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]}]},{prompt:"Change the body text style",type:"text",textDef:"txt_promo_body",minFontSize:20,maxFontSize:100,justification:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")}},{prompt:"Adjust the size and position",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_bodyText","portrait"],visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the size and position",type:"group",groupType:"buttons",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_custom_useDifferentLayouts")},steps:[{name:"Portrait",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_bodyText","portrait"]},{name:"Landscape",type:"macro",macroDef:"promo_adjustAspectTextLayout",macroParams:["promo_custom_bodyText","landscape"]}]},{prompt:"Change the body text style",type:"text",textDef:"txt_promo_body",minFontSize:20,maxFontSize:100,justification:!0,position:!0,visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]},{name:"Full-screen click",restart:!0,type:"remoteSetting",prompt:"Detect full-screen click?",label:"Entire promo screen acts like the button",settingName:"promo_fullClick",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&1===TGE.RemoteSettings("promo_buttons")}},{name:"Full-screen click",restart:!0,type:"remoteSetting",prompt:"Select full-screen click action",settingName:"promo_fullClickAction",selectorDef:"promoClickAction",visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")||0===TGE.RemoteSettings("promo_buttons")}},{name:"Buttons",type:"group",groupType:"buttons",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&0<TGE.RemoteSettings("promo_buttons")},steps:[{stepId:"step_button1",type:"macro",macroDef:"promo_button",macroParams:["A"]},{stepId:"step_button2",type:"macro",macroDef:"promo_button",macroParams:["B"]}]},{name:"Popwallet",type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return"popwallet"===TGE.RemoteSettings("promo_fullClickAction");case"preset":case"custom":switch(TGE.RemoteSettings("promo_buttons")){case 0:return"popwallet"===TGE.RemoteSettings("promo_fullClickAction");case 1:return"popwallet"===TGE.RemoteSettings("promo_buttonActionA");case 2:return"popwallet"===TGE.RemoteSettings("promo_buttonActionA")||"popwallet"===TGE.RemoteSettings("promo_buttonActionB")}}},steps:[{type:"noop",info:"Direct users to Apple Wallet and Google Pay content powered by Popwallet. Content can be coupons, offers, tickets, gift cards, and more. Secure server-to-server communication guarantees content can only be accessed via your creative. Talk to your TreSensa account manager to setup a campaign and get your Popwallet campaign ID."},{type:"remoteSetting",prompt:"Enter your Popwallet campaign ID",settingName:"promo_popwalletId"},{type:"remoteSetting",label:"Hide the button after the user has used it (applies to future sessions as well)",settingName:"promo_popwalletRedeemOnce",restart:!0}]}]},promo_background:{groupType:"open",steps:[{type:"remoteSetting",prompt:"Select background type",settingName:"promo_custom_backgroundStyle",selectorDef:"promo_custom_backgroundStyle",restart:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")&&"popup"!==TGE.RemoteSettings("promo_custom_style")}},{type:"remoteSetting",prompt:"Select image type",settingName:"promo_staticBackground",selectorDef:"promo_staticBackground",restart:!0,visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")}},{type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return"single"===TGE.RemoteSettings("promo_staticBackground");case"preset":return"full"===TGE.RemoteSettings("promo_bg");case"custom":return"popup"!==TGE.RemoteSettings("promo_custom_style")&&"image"===TGE.RemoteSettings("promo_custom_backgroundStyle")}},steps:[{prompt:"Choose a background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_background",colorize:!0,autoCrop:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background"]}]},{prompt:"Choose background images for both Portrait and Landscape",type:"group",groupType:"buttons",visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")&&"dual"===TGE.RemoteSettings("promo_staticBackground")},steps:[{name:"Portrait",previewAspect:"portrait",type:"group",groupType:"open",steps:[{prompt:"Upload a portrait image",type:"imageUpload",image:"img_promo_background_portrait",autoCrop:!0,colorize:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background_portrait"]}]},{name:"Landscape",previewAspect:"landscape",type:"group",groupType:"open",steps:[{prompt:"Upload a landscape image",type:"imageUpload",image:"img_promo_background_landscape",autoCrop:!0,colorize:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background_landscape"]}]}]},{type:"group",groupType:"open",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&"twoBox"===TGE.RemoteSettings("promo_bg")},steps:[{prompt:"Choose the top-half background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_bgA",colorize:!0},{prompt:"Choose the bottom-half background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_bgB",colorize:!0}]},{type:"color",prompt:"Overlay Color",colorDef:"promo_custom_popupOverlayColor",showAlpha:!0,restart:!0,visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return"popup"===TGE.RemoteSettings("promo_bg")||"twoBox"===TGE.RemoteSettings("promo_bg");case"custom":return"popup"===TGE.RemoteSettings("promo_custom_style")||"overlay"===TGE.RemoteSettings("promo_custom_backgroundStyle");default:return!1}}}]}},MACRO_DEFS:{promo_aspectHandling:{type:"group",groupType:"open",steps:[{type:"remoteSetting",prompt:"How to fit into different screen sizes:",settingName:"%%0_aspectHandling",restart:!0},{prompt:"Choose a letterbox color",type:"color",colorDef:"%%0_letterbox",visibilityFunction:function(t){return"letterbox"===TGE.RemoteSettings(t+"_aspectHandling")}},{prompt:"Adjust the main area of interest",info:"(On different screen sizes, the image will be cropped to keep this area in view)",type:"group",groupType:"open",visibilityFunction:function(t){return"crop"===TGE.RemoteSettings(t+"_aspectHandling")},steps:[{info:"Horizontal",type:"remoteSetting",settingName:"%%0_xPosition",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical",type:"remoteSetting",settingName:"%%0_yPosition",dispatchResize:!0,sliderOptions:{reversed:!0,formatter:function(){return""}}}]}]},promo_video_upload:{name:"Upload",state:"promo_video_videoUpload",type:"group",groupType:"open",steps:[{type:"videoUpload",prompt:"Upload a video",video:"%%0"}]},promo_video_cropping:{name:"Cropping",prompt:"Fitting video into different screen sizes",state:"promo_video_previewVideoCropping",type:"group",groupType:"open",steps:[{type:"remoteSetting",info:"With this setting, a landscape video will display rotated on a portrait screen, and vice-versa.<br>The expectation, is that the user will rotate their device to a matching orientation.",label:"Lock to original video orientation",settingName:"promo_video_orientationLock",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings.HasSetting("orientationLock")||"responsive"===TGE.RemoteSettings("orientationLock")}},{type:"remoteSetting",label:"Do not crop video (use letterbox only)",settingName:"promo_video_noCropping",restart:!0},{info:"On some screen sizes, letterboxing may still occur to keep video content in view",type:"noop",visibilityFunction:function(){return!TGE.RemoteSettings("promo_video_noCropping")}},{prompt:"Choose a letterbox color",type:"color",colorDef:"promo_video_letterbox"},{type:"group",groupType:"open",visibilityFunction:function(){return!TGE.RemoteSettings("promo_video_noCropping")},steps:[{prompt:"Adjust the area of the video that should always remain in view",type:"group",groupType:"open",steps:[{info:"Width",type:"remoteSetting",settingName:"promo_video_safeZoneWidth",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}},{info:"Height",type:"remoteSetting",settingName:"promo_video_safeZoneHeight",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}},{info:"Horizontal Position",type:"remoteSetting",settingName:"promo_video_safeZoneX",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical Position",type:"remoteSetting",settingName:"promo_video_safeZoneY",dispatchResize:!0,sliderOptions:{reversed:!0,formatter:function(){return""}}}]},{type:"remoteSetting",label:"Preview final cropped appearance",settingName:"promo_video_zoomedPreview",dispatchResize:!0}]},{prompt:"Preview video location",type:"remoteSetting",settingName:"promo_video_location",dispatchResize:!0,sliderOptions:{formatter:function(t){return""}}}]},promo_video_mute:{name:"Mute Button",state:"promo_video",type:"group",groupType:"open",steps:[{type:"remoteSetting",prompt:"Mute button style",settingName:"promo_muteStyle",restart:!0},{type:"group",groupType:"open",visibilityFunction:function(){return"none"!==TGE.RemoteSettings("promo_muteStyle")},steps:[{type:"remoteSetting",prompt:"Mute button color",settingName:"promo_muteColor"},{type:"remoteSetting",prompt:"Mute button line thickness",settingName:"promo_muteThickness"}]}]},promo_adjustLayout:{type:"group",groupType:"open",steps:[{info:"Size",type:"remoteSetting",settingName:"%%0_size",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Horizontal Position",type:"remoteSetting",settingName:"%%0_xPosition",dispatchResize:!0,sliderOptions:{ticks:[.5],ticks_snap_bounds:.02,selection:"none",formatter:function(){return""}}},{info:"Vertical Position",type:"remoteSetting",settingName:"%%0_yPosition",dispatchResize:!0,sliderOptions:{selection:"none",reversed:!0,formatter:function(){return""}}}]},promo_adjustAspectLayout:{type:"group",groupType:"open",previewAspect:"%%1",steps:[{type:"macro",macroDef:"promo_adjustLayout",macroParams:["%%0_%%1"]}]},promo_adjustTextLayout:{type:"group",groupType:"open",steps:[{info:"Width",type:"remoteSetting",settingName:"%%0_wrapWidth",dispatchResize:!0,sliderOptions:{selection:"none",formatter:function(){return""}}},{info:"Horizontal Position",type:"remoteSetting",settingName:"%%0_xPosition",dispatchResize:!0,sliderOptions:{ticks:[.5],ticks_snap_bounds:.02,selection:"none",formatter:function(){return""}}},{info:"Vertical Position",type:"remoteSetting",settingName:"%%0_yPosition",dispatchResize:!0,sliderOptions:{selection:"none",reversed:!0,formatter:function(){return""}}}]},promo_adjustAspectTextLayout:{type:"group",groupType:"open",previewAspect:"%%1",steps:[{type:"macro",macroDef:"promo_adjustTextLayout",macroParams:["%%0_%%1"]}]},promo_button:{name:"Button %%0",type:"group",groupType:"open",steps:[{type:"group",groupType:"open",steps:[{type:"group",groupType:"open",steps:[{type:"imageGroup",prompt:"Choose a button image",path:"assets/alternate-images/promo/buttons",selectorDef:"promoButton",image:"promo_custom_button%%0",colorize:!0,autoCrop:!0,visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")}},{type:"imageGroup",prompt:"Choose a button image",path:"assets/alternate-images/promo/buttons",selectorDef:"promoButton",image:"img_promo_button%%0",colorize:!0,autoCrop:!0,visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]}]},{type:"group",groupType:"buttons",steps:[{name:"Click Action",type:"remoteSetting",restart:!0,prompt:"Choose click action",settingName:"promo_buttonAction%%0",selectorDef:"promoButtonAction"},{name:"Button Text",type:"group",groupType:"open",steps:[{type:"text",prompt:"Edit the button text",textDef:"txt_promo_button%%0"},{type:"position",textDef:"txt_promo_button%%0",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}}]},{name:"Size and Positioning",type:"group",groupType:"open",steps:[{type:"layout",elxName:"promo_button%%0",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")}},{name:"Size and Positioning",type:"group",groupType:"open",visibilityFunction:function(){return"custom"===TGE.RemoteSettings("promo_type")},steps:[{prompt:"Adjust the size and position",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_button%%0","portrait"],visibilityFunction:function(){return!TGE.RemoteSettings("promo_custom_useDifferentLayouts")}},{prompt:"Adjust the size and position",type:"group",groupType:"buttons",visibilityFunction:function(){return TGE.RemoteSettings("promo_custom_useDifferentLayouts")},steps:[{name:"Portrait",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_button%%0","portrait"]},{name:"Landscape",type:"macro",macroDef:"promo_adjustAspectLayout",macroParams:["promo_custom_button%%0","landscape"]}]}]}]}]}]}},COLOR_DEFS:{promo_video_letterbox:"#000",promo_background_letterbox:"#000",promo_background_portrait_letterbox:"#000",promo_background_landscape_letterbox:"#000",promo_custom_popupOverlayColor:"rgba(0,0,0,0.5)"},ELX_DEFS:{},TEXT_DEFS:{txt_font_primary:{fontFamily:"Roboto"},txt_font_secondary:{fontFamily:"Roboto"},txt_promo_body:{textDef:"txt_font_secondary",fontSize:56,textColor:"#5c5f6a",hAlign:"center",lineSpacing:.2,strokeColor:"#ffffff",strokeWidth:0},txt_promo_bodyA:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_bodyB:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_header:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",hAlign:"center",lineSpacing:.2,strokeColor:"#ffffff",strokeWidth:0},txt_promo_headerA:{textDef:"txt_promo_header",text:"Nice Job!"},txt_promo_headerB:{textDef:"txt_promo_header",text:"Nice Try!"},txt_promo_buttonA:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",strokeColor:"#ffffff",strokeWidth:0,text:"Learn More"},txt_promo_buttonB:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",strokeColor:"#ffffff",strokeWidth:0,text:"Play Again"}},THEME_DEFS:{promoPopupIconNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconNone"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoPopupIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoPopupIconDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoPopupImageIconNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupImageIconNone"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoPopupImageIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupImageIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullImageNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageNone"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullImageIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullImageDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"none"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"none"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"nofont"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullInsetVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullInsetVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullInsetVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullTopVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullTopVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullTopVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promo_custom_style_popup:{patches:[{type:"remoteSetting",settingName:"promo_custom_style",value:"popup"},{type:"remoteSetting",settingName:"promo_custom_showPopupImage",value:"true"},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_bg",value:"popup"}]},promo_custom_style_fullscreen:{patches:[{type:"remoteSetting",settingName:"promo_custom_style",value:"fullscreen"},{type:"remoteSetting",settingName:"promo_custom_showPopupImage",value:"false"},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_bg",value:"full"}]},promo_custom_style_video:{patches:[{type:"remoteSetting",settingName:"promo_custom_style",value:"video"},{type:"remoteSetting",settingName:"promo_custom_showPopupImage",value:"false"},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_bg",value:"none"}]}},SETTING_CACHE_DEFS:{promo_muteStyle:["muteButton"],promo_muteColor:["muteButton"],promo_muteThickness:["muteButton"]},NUMBERED_VISIBILITY_DEFS:{promo_buttons:{show:["step_button1","step_button2"],click:"step_button1"}},SELECTOR_DEFS:{promoBackground:{names:["Solid","Gradient","Brick","Wood","Clouds","Grass","Circles","Striped","Charcoal","Paper"],values:["img_solid.jpg","img_gradient.jpg","img_brickWall.jpg","img_wood.jpg","img_clouds.jpg","img_grass.jpg","img_blueAbstract.jpg","img_stripes.jpg","img_textured.jpg","img_paper.jpg"]},promoLargePopup:{names:["Default","Outlined","Flat Squared","Flat Rounded","Simple Gradient","Gradient Rounded","Grooved Rounded","Textured"],values:["default.png","outlined_large.png","solid_large.png","flatRaised_large.png","gradient_large.png","gradientRounded_large.png","groovedRounded_large.png","textured_large.png"]},promoButton:{names:["Default","Outlined","Flat Squared","Flat Rounded","Simple Gradient","Gradient Rounded","Grooved Rounded","Textured"],values:["default.png","outlined_button.png","solid_button.png","flatRaised_button.png","gradient_button.png","gradientRounded_button.png","groovedRounded_button.png","textured_button.png"]},promoButtonAction:{names:["Primary Click-through","Replay","Popwallet"],values:["action","replay","popwallet"]},promoClickAction:{names:["None","Primary Click-through","Replay","Popwallet"],values:["none","action","replay","popwallet"]},promo_type:{names:["Static Images","Preset Styles","Custom"],values:["static","preset","custom"]},promo_style:{names:["Popup, No Buttons","Popup, One Button","Popup, Two Buttons","Large Popup, No Buttons","Large Popup, One Button","Full Screen, No Buttons","Full Screen, One Button","Full Screen, Two Buttons","Full Video, No Buttons","Full Video, One Button","Full Video, Two Buttons","Inset Video, No Buttons","Inset Video, One Button","Inset Video, Two Buttons","Top Video, No Buttons","Top Video, One Button","Top Video, Two Buttons"],values:["promoPopupIconNone","promoPopupIconSingle","promoPopupIconDouble","promoPopupImageIconNone","promoPopupImageIconSingle","promoFullImageNone","promoFullImageIconSingle","promoFullImageDouble","promoFullVideoNone","promoFullVideoSingle","promoFullVideoDouble","promoFullInsetVideoNone","promoFullInsetVideoSingle","promoFullInsetVideoDouble","promoFullTopVideoNone","promoFullTopVideoSingle","promoFullTopVideoDouble"]},promo_styleNoVideo:{names:["Popup, No Buttons","Popup, One Button","Popup, Two Buttons","Large Popup, No Buttons","Large Popup, One Button","Full Screen, No Buttons","Full Screen, One Button","Full Screen, Two Buttons"],values:["promoPopupIconNone","promoPopupIconSingle","promoPopupIconDouble","promoPopupImageIconNone","promoPopupImageIconSingle","promoFullImageNone","promoFullImageIconSingle","promoFullImageDouble"]},promo_staticBackground:{names:["Single image","Separate portrait/landscape images"],values:["single","dual"]},promo_custom_styleSelector:{names:["Popup","Fullscreen","Fullscreen Video"],values:["promo_custom_style_popup","promo_custom_style_fullscreen","promo_custom_style_video"]},promo_custom_backgroundStyle:{names:["None","Image","Overlay"],values:["none","image","overlay"]},promo_custom_fullscreen_both_ratios:{names:["Portrait","Either","Landscape"],values:[.8,.2,-.8]}},STATE_DEFS:{promo_video_previewVideoCropping:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_previewVideoCropping",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoUpload:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoWin:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoLose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"lose"}]},promo_custom_titleTextWin:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_custom_titleText_editMode",value:!0}]},promo_custom_titleTextLose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"lose"},{settingName:"promo_custom_titleText_editMode",value:!0}]},promo_custom_bodyTextWin:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_custom_bodyText_editMode",value:!0}]},promo_custom_bodyTextLose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"lose"},{settingName:"promo_custom_bodyText_editMode",value:!0}]},promo_custom_fullscreen_editMode:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_custom_fullscreen_editMode",value:!0}]},promo_previewBgFocus:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_previewBgFocus",value:!0}]},promo_win:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"}]},promo_lose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"lose"}]},promo_video:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_testVideo",value:!0}]}}},ModuleMath={Geometry:{RADIANS:Math.PI/180,DEGREES:180/Math.PI,TAU:2*Math.PI,localToGlobal:function(t,e,i){var a=new TGE.Point;e&&a.setTo(e.x,e.y),i||(a.x-=t.registrationX*t.width,a.y-=t.registrationY*t.height);for(var o,n,r,s=t;s;){s.rotation&&(o=s.rotation*TGE.DEG2RAD,n=Math.cos(o),r=Math.sin(o),a={x:a.x*n-a.y*r,y:a.x*r+a.y*n}),a.x*=s.scaleX,a.y*=s.scaleY,a.x+=s.x,a.y+=s.y,s=s.parent}return a},globalToLocal:function(t,e,i){var a=new TGE.Point;e&&a.setTo(e.x,e.y);for(var o=t,n=[];o;)n.unshift(o),o=o.parent;for(var r,s,l,p=0;o=n[p];p++){a.x-=o.x,a.y-=o.y,o.scaleX&&(a.x/=o.scaleX),o.scaleY&&(a.y/=o.scaleY),o.rotation&&(r=o.rotation*TGE.DEG2RAD,s=Math.cos(r),l=Math.sin(r),a={x:a.x*s+a.y*l,y:-a.x*l+a.y*s})}return i||(a.x+=t.registrationX*t.width,a.y+=t.registrationY*t.height),a},localToLocal:function(t,e,i,a){var o=ModuleMath.Geometry.localToGlobal(e,i,a);return ModuleMath.Geometry.globalToLocal(t,o,a)},getClosestDisplayObject:function(t,e,i){var a=Number.MAX_VALUE,o=Number.MAX_VALUE,n=null;null!=i&&(o=i*i);for(var r,s=0;r=e[s];s++){var l=ModuleMath.Geometry.distanceSquared(r,t);l<a&&l<=o&&(a=l,n=r)}return n},distance:function(t,e){return Math.sqrt(ModuleMath.Geometry.distanceSquared(t,e))},distanceSquared:function(t,e){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a},getAngle:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},getAngleDiff:function(t,e){return Math.atan2(Math.sin(e-t),Math.cos(e-t))},rotateAroundOrigin:function(t,e,i){var a=new TGE.Point;return a.x=t.x*e-t.y*i,a.y=t.x*i+t.y*e,a},getIntersection:function(t,e,i,a){var o,n,r,s,l,p,c,h,m,u,d=t.x,g=t.y,f=e.x,y=e.y,_=i.x,b=i.y,v=a.x,T=a.y,S=y-g,E=d-f,x=f*g-d*y,w=S*_+E*b+x,P=S*v+E*T+x;return(0==w||0==P||!ModuleMath.Geometry.sameSign(w,P))&&(l=(o=T-b)*f+(n=_-v)*y+(r=v*b-_*T),(0==(s=o*d+n*g+r)||0==l||!ModuleMath.Geometry.sameSign(s,l))&&(0!=(p=S*n-o*E)&&(c=p<0?-p/2:p/2,m=(h=E*r-n*x)<0?(h-c)/p:(h+c)/p,u=(h=o*x-S*r)<0?(h-c)/p:(h+c)/p,new TGE.Point(m,u))))},sameSign:function(t,e){return 0<=t*e}},Color:{componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},rgbToHex:function(t,e,i){return"#"+ModuleMath.Color.componentToHex(t)+ModuleMath.Color.componentToHex(e)+ModuleMath.Color.componentToHex(i)},hexToRgb:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,a){return e+e+i+i+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},Random:{range:function(t,e){var i;return e<t&&(i=t,t=e,e=i),t+(e-t)*Math.random()},int:function(t){return Math.floor(t*Math.random())},rangeInt:function(t,e){return Math.round(ModuleMath.Random.range(t,e))},chance:function(t){return Math.random()<t}}};PropertyCombine={Strategy:{ADD:"add",SUBTRACT:"subtract",MULTIPLY:"multiply",DIVIDE:"divide",REPLACE:"replace",REPLACE_IF_NULL:"replaceIfNull",REPLACE_IF_EXISTS:"replaceIfExists",IGNORE:"ignore",DEEP_COMBINE:"deepCombine"},combineProperties:function(t,e,i,a){for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];if(a&&a.length)for(var r,s=0;r=a[s];s++)n=r(n);var l=Number(n),p=null,c=null;e.hasOwnProperty(o)&&(p=e[o],c=Number(p));var h=PropertyCombine.Strategy.REPLACE;if(i&&("object"==typeof i?i[o]?h=i[o]:i.defaultStrategy&&(h=i.defaultStrategy):"string"!=typeof i&&"function"!=typeof i||(h=i)),"function"==typeof h)h(o,n,t,e);else switch(h){case PropertyCombine.Strategy.ADD:isNaN(c)||isNaN(l)?e[o]=n:e[o]=c+l;break;case PropertyCombine.Strategy.SUBTRACT:isNaN(c)||isNaN(l)?e[o]=n:e[o]=c-l;break;case PropertyCombine.Strategy.MULTIPLY:isNaN(c)||isNaN(l)?e[o]=n:e[o]=c*l;break;case PropertyCombine.Strategy.DIVIDE:isNaN(c)||isNaN(l)?e[o]=n:l?e[o]=c/l:TGE.Debug.Log(TGE.Debug.LOG_WARNING,"[property-combine] attempted division by zero for property "+o);break;case PropertyCombine.Strategy.IGNORE:break;case PropertyCombine.Strategy.REPLACE_IF_NULL:null===p&&(e[o]=n);break;case PropertyCombine.Strategy.REPLACE_IF_EXISTS:e.hasOwnProperty(o)&&(e[o]=n);break;case PropertyCombine.Strategy.REPLACE:e[o]=n;break;case PropertyCombine.Strategy.DEEP_COMBINE:"object"!=typeof n||Array.isArray(n)||!p||"object"!=typeof p||Array.isArray(p)?e[o]=n:this.combineProperties(n,p,"deepCombine")}}},clone:function(t,e){var i,a={};for(i in t)if(t.hasOwnProperty(i)){var o=t[i];if(e&&e.length)for(var n,r=0;n=e[r];r++)o=n(o);a[i]=o}return a},deepClone:function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t)){for(var e=[],i=0;i<t.length;++i)e.push(this.deepClone(t[i]));return e}var a,o={};for(a in t)t.hasOwnProperty(a)&&(o[a]=this.deepClone(t[a]));return o},setupInstance:function(t,e,i,a,o){var n={};t.defaultParams&&(n=PropertyCombine.clone(t.defaultParams,o)),PropertyCombine.combineProperties(e,n,a,o),i&&i.call(t,n),PropertyCombine.combineProperties(n,t)},setDefaultParams:function(t,e,i,a){t.defaultParams?PropertyCombine.combineProperties(e,t.defaultParams,i,a):t.defaultParams=PropertyCombine.clone(e,a)},convertRandomValues:function(t){var e;return t&&"object"==typeof t&&(null===t.min||null===t.max||isNaN(t.min)||isNaN(t.max)||(e=TGE.Random.Range(t.min,t.max),t.step&&!isNaN(t.step)&&(e-=e%t.step),t=e)),t}},StateManager=function(){StateManager.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},StateManager.TransitionType={IMMEDIATE:"immediate",WAIT_FOR_FRAMES:"waitForFrames",WAIT_FOR_SECONDS:"waitForSeconds",WAIT_FOR_ASSET:"waitForAsset",WAIT_FOR_ASSET_LIST:"waitForAssetList"},StateManager.prototype={setup:function(t){StateManager.superclass.setup.call(this,t),this.states={},t.states&&this.addStates(t.states),this.defaultTransition=t.defaultTransition?t.defaultTransition:{type:StateManager.TransitionType.IMMEDIATE},this.currentTransition=null,this.showAssetLoader=!0===t.showAssetLoader;var e=t.initState;return this.createDelayManager(),this.eventListeners=[],e&&(this._initStateListener=this.addEventListener("addedToStage",this.setState.bind(this,e))),this.addEventListener("remove",this.clearState.bind(this)),this},createDelayManager:function(){this.delayManager=this.addChild((new TGE.DisplayObjectContainer).setup({}))},clearDelayManager:function(){this.delayManager.clearTweens()},delayAction:function(t){this.delayManager.tweenTo({duration:t.delay,onComplete:t.action})},addEvent:function(t,e){this.states[t].events.push(e)},addState:function(t,e){this.states[t]=new StateManager.State(t,e)},addStates:function(t){for(var e in t)t.hasOwnProperty(e)&&this.addState(e,t[e])},setState:function(t,e,i){if(this._initStateListener&&(this.removeEventListener("addedToStage",this._initStateListener),this._initStateListener=null),this.enteringState)this.queuedState=[t,e,i];else if(this.queuedState=null,this.states[t])if(this.currentTransition)TGE.Debug.Log(TGE.Debug.LOG_WARNING,"[StateManager] attempted to set state "+t+" during transition "+this.currentTransition.type+" from "+this.oldStateId+" to "+this.newStateId);else switch(this.currentTransition=e&&"string"==typeof e?{type:e,value:i}:this.defaultTransition,this.oldStateId=this.stateId,this.newStateId=t,null!==this.oldStateId&&this.dispatchEvent({type:"leaveState",oldState:this.oldStateId,newState:t}),this.dispatchEvent({type:"transitionStart",oldState:this.oldStateId,newState:t,transition:this.currentTransition}),this.currentTransition.type){case StateManager.TransitionType.WAIT_FOR_FRAMES:this.transitionFrames(t,this.currentTransition);break;case StateManager.TransitionType.WAIT_FOR_SECONDS:this.transitionTime(t,this.currentTransition);break;case StateManager.TransitionType.WAIT_FOR_ASSET:this.transitionAsset(t,this.currentTransition);break;case StateManager.TransitionType.WAIT_FOR_ASSET_LIST:this.transitionAssetList(t,this.currentTransition);break;case StateManager.TransitionType.IMMEDIATE:default:this.transitionImmediate(t,this.currentTransition)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"[StateManager] State ID not found: "+t)},setToGameState:function(t,e,i){var a=null;getQueryString().hasOwnProperty("state")&&(a=getQueryString().state)&&this.states.hasOwnProperty(a)&&this.setState(a,e,i),!a&&t&&this.setState(t,e,i)},transitionImmediate:function(t){var e=this.states[t].requiredAsset,i=this.states[t].requiredAssetList,a=this.states[t].requiredAssetGroup;e?this.game.assetAvailable(e,this.enterState.bind(this,t),this.showAssetLoader):i?this.game.waitForAssetList(this.validateAssetList(i),this.enterState.bind(this,t),this.showAssetLoader):a?this.game.waitForAssetGroup(a,this.enterState.bind(this,t),this.showAssetLoader):this.enterState(t)},transitionFrames:function(t,e){this.transitionFrameCount=isNaN(e.value)?1:e.value,this.transitionUpdateListener=this.addEventListener("update",this.updateTransitionFrames.bind(this,t))},updateTransitionFrames:function(t){0<this.transitionFrameCount&&this.transitionFrameCount--,this.transitionFrameCount<=0&&this.transitionImmediate(t)},transitionTime:function(t,e){var i=this.transitionFrameCount=isNaN(e.value)?0:e.value;this.delayAction({delay:i,action:this.transitionImmediate.bind(this,t)})},transitionAsset:function(t,e){var i=e.value;!i&&this.states[t].requiredAsset&&(i=this.states[t].requiredAsset),i?this.game.assetAvailable(i,this.enterState.bind(this,t),this.showAssetLoader):this.enterState(t)},transitionAssetList:function(t,e){var i=e.value;!i&&this.states[t].requiredAssetList&&(i=this.states[t].requiredAssetList),i?this.game.waitForAssetList(this.validateAssetList(i),this.enterState.bind(this,t),this.showAssetLoader):this.enterState(t)},validateAssetList:function(t){return"number"==typeof t&&(t="required"+(1===t?"":t)),t},clearTransition:function(){this.transitionUpdateListener&&(this.removeEventListener("update",this.transitionUpdateListener),this.transitionUpdateListener=null),this.currentTransition=null},enterState:function(t){if(this.dispatchEvent({type:"transitionEnd",oldState:this.oldStateId,newState:t,transition:this.currentTransition}),this.clearTransition(),this.stateId=t,this.state=this.states[t],this.state.events&&this.state.events.length)for(var e,i=0;e=this.state.events[i];i++){var a=e.target;if(e.event){if("enterState"===e.event||"leaveState"===e.event)a=this;else if(!a)switch(e.event){case"mousedown":case"mouseup":case"mousemove":a=this.game.stage;break;default:a=this}e.wantsUntrusted=!0===e.wantsUntrusted,e.delay?"leaveState"===e.event?(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"[StateManager] Cannot set delay for leaveState event."),this.registerListener(a,e.event,e.callback,e.wantsUntrusted)):this.registerListener(a,e.event,this.delayAction.bind(this,{delay:e.delay,action:e.callback}),e.wantsUntrusted):this.registerListener(a,e.event,e.callback,e.wantsUntrusted)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"[StateManager] no event name specified")}this.registerListener(this,"leaveState",this.clearState.bind(this)),this.enteringState=!0,this.dispatchEvent({type:"enterState",oldState:this.oldStateId,newState:t}),this.enteringState=!1,this.queuedState&&this.setState(this.queuedState[0],this.queuedState[1],this.queuedState[2]),this.dispatchEvent({type:"stateChange",oldState:this.oldStateId,newState:t})},registerListener:function(t,e,i,a){var o=t.addEventListener(e,i,a);this.eventListeners.push({listener:o,event:e,target:t})},clearState:function(){this.dispatchEvent({type:"clearState"});for(var t,e=0;t=this.eventListeners[e];e++)t.target&&(!t.target._mEventListeners||t.target._mEventListeners[t.event]&&t.target._mEventListeners[t.event].length)&&t.target.removeEventListener(t.event,t.listener);this.eventListeners=[],this.clearDelayManager()}},extend(StateManager,TGE.DisplayObjectContainer),StateManager.CreateStateManager=function(t){t.stateManager||(t.stateManager=t.addChild((new StateManager).setup({}))),t.removeByName||(t.removeByName=function(t){this[t]&&(this[t].markForRemoval&&this[t].markForRemoval(),this[t]=null)}.bind(t)),t.setAsTemporary||(t.setAsTemporary=function(t){this[t]&&this.stateManager.registerListener(this.stateManager,"clearState",this.removeByName.bind(this,t))}.bind(t)),t.setState||(t.setState=function(t,e,i){this.stateManager.setState(t,e,i)}.bind(t)),t.getState||(t.getState=function(){return this.stateManager.stateId}.bind(t))},StateManager.CreateStates=function(t,e,i){for(var a={},o=0;o<e.length;o++){for(var n=e[o],r={events:[]},s=0;s<i.length;s++){var l=i[s],p=l.event;if("string"==typeof p){var c=n+"_"+(l.suffix||p);if("function"==typeof t[c]){var h,m={event:p,callback:t[c].bind(t)};for(h in l)l.hasOwnProperty(h)&&(m[h]=l[h]);r.events.push(m)}}}a[n]=r}return a},StateManager.State=function(t,e){for(var i in this.id=t,this.events=[],e)e.hasOwnProperty(i)&&(this[i]=e[i])},ParticleManager=function(){ParticleManager.superclass.constructor.call(this),this.game=TGE.Game.GetInstance()},ParticleManager.prototype={setup:function(){return this._particles=[],this._physicsParticles=[],this.baseParticleWidth=.1*this.stage.width,this.baseParticleWidth=TGE.Math.Clamp(this.baseParticleWidth,50,100),this.baseParticleHeight=.1*this.stage.height,this.baseParticleHeight=TGE.Math.Clamp(this.baseParticleHeight,50,100),this.baseParticleWidth<=this.baseParticleHeight?this.baseParticleWidth=this.baseParticleHeight:this.baseParticleHeight=this.baseParticleWidth,this},createParticle:function(t){var e={widthMultiplier:1,heightMultiplier:1,startingScale:1,startingRotation:0,rotationSpeed:0,startingAlpha:1};PropertyCombine.combineProperties(t,e),this._currentParticleIndex=e.particleIndex,this._particlesInEffect=e.particlesInEffect,e.particleImage||TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'particleImage' parameter"),null===e.startingX&&null===e.startingXPercentage&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'startingX' or 'startingXPercentage' parameter"),null===e.startingY&&null===e.startingYPercentage&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'startingY' or 'startingYPercentage' parameter");var i,a,o,n=this._randomizeProperty(e.particleImage);this.game.isAssetLoaded(n)?i=this.game.assetManager.getAsset(n):(n=void 0,i={width:0,height:0},"3"===getQueryString().tgedebug&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Particle image was not loaded: "+n)),i.width>=i.height?a=(o=TGE.Math.Clamp(i.width,0,this.baseParticleWidth))*(i.height/i.width):o=(a=TGE.Math.Clamp(i.height,0,this.baseParticleHeight))*(i.width/i.height);var r={};if(e.startingX?r.x=this._randomizeProperty(e.startingX):e.startingXPercentage&&(r.x=this._randomizeProperty(e.startingXPercentage),r.x=TGE.MapValue(r.x,0,1,.5*-e.creator.width,.5*e.creator.width)),e.startingY?r.y=this._randomizeProperty(e.startingY):e.startingYPercentage&&(r.y=this._randomizeProperty(e.startingYPercentage),r.y=TGE.MapValue(r.y,0,1,.5*-e.creator.height,.5*e.creator.height)),e.tweens&&0<e.tweens.length)for(var s=h=(new TGE.DisplayObjectContainer).setup({x:r.x,y:r.y,width:o*this._randomizeProperty(e.widthMultiplier),height:a*this._randomizeProperty(e.heightMultiplier),scaleX:this._randomizeProperty(e.startingScale),scaleY:this._randomizeProperty(e.startingScale),rotation:this._randomizeProperty(e.startingRotation),alpha:this._randomizeProperty(e.startingAlpha)}),l=0;l<e.tweens.length;l++){var p=s.addChild((new TGE.DisplayObjectContainer).setup({width:h.width,height:h.height})),c=TGE.DeepClone(e.tweens[l]);this._randomizeAllProperties(c),!0===e.tweenFrom?p.tweenFrom(c):p.tweenTo(c),s=p,l===e.tweens.length-1&&(m=s.addChild((new TGE.Sprite).setup({width:h.width,height:h.height,image:n})))}else var h,m=h=(new TGE.Sprite).setup({image:n,x:r.x,y:r.y,width:o*this._randomizeProperty(e.widthMultiplier),height:a*this._randomizeProperty(e.heightMultiplier),scaleX:this._randomizeProperty(e.startingScale),scaleY:this._randomizeProperty(e.startingScale),rotation:this._randomizeProperty(e.startingRotation),alpha:this._randomizeProperty(e.startingAlpha)});var u=this._randomizeProperty(e.rotationDirection);u/=Math.abs(u);var d=this._randomizeProperty(e.rotationSpeed)*u,g=e.physicsParams?e.physicsParams.alignRotationToDirection:e.alignRotationToDirection;0==d&&!g||(g?(m.rotationOffset=0,m.addEventListener("update",function(t){this.rotationOffset+=d*t.elapsedTime}.bind(m))):m.addEventListener("update",function(t){this.rotation+=d*t.elapsedTime}.bind(m)));var f=this._randomizeProperty(e.color);return f&&m.colorize(f),h.creator=e.creator,this._particles.push(h),this._addPhysicsParticle(h,e.physicsParams?e.physicsParams:e),e.beginFadeTweens(h),h},_addPhysicsParticle:function(t,e){var i={initialDirection:{minX:-1,maxX:1,minY:-1,maxY:1},initialSpeed:75,acceleration:1,scaleSpeedToScreenSize:!1,gravity:0,bounciness:.75};PropertyCombine.combineProperties(e,i);var a=this._randomizeProperty(i.initialVelocity);if(!a){var o,n=this._randomizeProperty(i.initialDirection);if("string"==typeof n)switch(n){case"awayFromCenter":n=0===t.x&&0===t.y?new TGE.Vector2(ModuleMath.Random.range(-1,1),ModuleMath.Random.range(-1,1)).normalized():t.creator instanceof FullScreenParticles?new TGE.Vector2(t.x,t.y).subtract(new TGE.Vector2(.5*t.creator.width,.5*t.creator.height)):new TGE.Vector2(t.x,t.y).subtract(new TGE.Vector2(0,0));break;case"towardCenter":n=t.creator instanceof FullScreenParticles?new TGE.Vector2(.5*t.creator.width,.5*t.creator.height).subtract(new TGE.Vector2(t.x,t.y)):new TGE.Vector2(0,0).subtract(new TGE.Vector2(t.x,t.y))}else"number"==typeof n&&(n-=90,n%=360,o=(n+=n<0?360:0)*TGE.DEG2RAD,n=new TGE.Vector2(Math.cos(o),Math.sin(o)).normalized());a=this._randomizeProperty(n).multiplyNumber(this._randomizeProperty(i.initialSpeed))}function r(t,e,i){return(i?t.localToStage(new TGE.Vector2(t.x,t.y)):{x:t.x,y:t.y}).y>e-t.width*t.scaleY*.5}var s;i.collisionPlane&&("string"==typeof i.collisionPlane&&"screenBottom"===i.collisionPlane?(s=t.parent?t.parent.stageToLocal({x:0,y:this.stage.height},!0).y:t.creator.stageToLocal({x:0,y:t.creator.y+.5*t.creator.height},!0).y,t.waitingToRiseAboveCollisionPlane=r(t,s,!0)):(i.collisionPlane=this._randomizeProperty(i.collisionPlane),t.waitingToRiseAboveCollisionPlane=r(t,i.collisionPlane,!1))),t.gravity=this._randomizeProperty(i.gravity),i.scaleSpeedToScreenSize&&(a=new TGE.Vector2(a.x*Math.sqrt(.0015*this.stage.width*2),a.y*Math.sqrt(.0015*this.stage.height*2))),a.constructor!==TGE.Vector2&&(a=new TGE.Vector2(a.x,a.y)),t.velocity=a,t.acceleration=this._randomizeProperty(i.acceleration),t.alignRotationToDirection=i.alignRotationToDirection,t.collisionPlane=i.collisionPlane,t.bounciness=this._randomizeProperty(i.bounciness),t.simulationSpace=i.simulationSpace,this._physicsParticles.push(t),this.updateListener||(this.updateListener=this.addEventListener("update",this._runPhysicsSimulation.bind(this)))},_runPhysicsSimulation:function(t){for(var e=0;e<this._physicsParticles.length;e++){var i,a=this._physicsParticles[e];a.parent&&"screen"===a.simulationSpace&&!a.movedToScreenSpace&&(i=a.parent.localToStage(new TGE.Vector2(a.x,a.y),!0),this.stage.addChild(a),a.x=i.x,a.y=i.y,a.movedToScreenSpace=!0);var o=Math.pow(a.acceleration,60*t.elapsedTime);a.velocity=a.velocity.multiplyNumber(o),a.velocity=a.velocity.add(new TGE.Vector2(0,a.gravity).multiplyNumber(t.elapsedTime));var n,r,s=new TGE.Vector2(a.x,a.y).add(a.velocity.multiplyNumber(t.elapsedTime));if(a.alignRotationToDirection){for(var l=a;0<l.numChildren();)l=l.getChildAt(0);var p=a.velocity.normalized(),c=180*Math.atan2(p.y,p.x)/Math.PI+90;l.rotation=c+l.rotationOffset}void 0!==a.collisionPlane&&(n=0,n="screenBottom"===a.collisionPlane?a.parent?a.parent.stageToLocal({x:0,y:this.stage.height},!0).y:a.creator.stageToLocal({x:0,y:a.creator.y+.5*a.creator.height},!0).y:a.collisionPlane,r=s.y+a.width*a.scaleY*.5,a.waitingToRiseAboveCollisionPlane&&(a.waitingToRiseAboveCollisionPlane=n<r),!a.waitingToRiseAboveCollisionPlane&&n<r&&(s.y=n-a.height*a.scaleY*.55,a.velocity.y*=-a.bounciness)),a.x=s.x,a.y=s.y}},_randomizeAllProperties:function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=this._randomizeProperty(t[e]))},_randomizeProperty:function(t){var e=null;return"object"==typeof t&&(t.constructor===Array?e=t[ModuleMath.Random.int(t.length)]:t.mapToParticleNumber&&void 0!==t.min&&void 0!==t.max?e=TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,t.min,t.max):void 0!==t.min&&void 0!==t.max?e=ModuleMath.Random.range(t.min,t.max):t.mapToParticleNumber&&void 0!==t.minX&&void 0!==t.maxX&&void 0!==t.minY&&void 0!==t.maxY?e=new TGE.Vector2(TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,t.minX,t.maxX),TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,t.minY,t.maxY)):void 0!==t.minX&&void 0!==t.maxX&&void 0!==t.minY&&void 0!==t.maxY&&(e=new TGE.Vector2(ModuleMath.Random.range(t.minX,t.maxX),ModuleMath.Random.range(t.minY,t.maxY)))),null!==e?e:t}},extend(ParticleManager,TGE.DisplayObjectContainer),ParticleEffect=function(){ParticleEffect.superclass.constructor.call(this),this.game=TGE.Game.GetInstance()},ParticleEffect.prototype={setup:function(t){var e;ParticleEffect.superclass.setup.call(this,t),this.game.particleManager?this.particleManager=this.game.particleManager:this.particleManager=this.game.particleManager=(new ParticleManager).setup({}),e=t.effectParams?TGE.DeepClone(t.effectParams):TGE.DeepClone(t);var i=TGE.DeepClone(ParticleEffect.DefaultEffect);if(t.baseEffect&&this._combineEffectParams(t.baseEffect,i),this._combineEffectParams(e,i),i.effectLayers)for(var a in this.completedEffectLayers=0,this.createdEffectLayers=[],i.effectLayers){var o=TGE.DeepClone(i.effectLayers[a]);o.x=0,o.y=0;var n=TGE.DeepClone(e);n.effectLayers=void 0,this._combineEffectParams(o,n),this._createEffectLayer(n)}else t.skipBaseClassEffectCreation||this._createEffect(i),this.completedParticles=0,this.addEventListener("allParticlesCompleted",this._onFinish.bind(this));return i.onComplete&&(this.onComplete=i.onComplete),this},completeAndDestroy:function(){this.destroyAfterNextLoop=!0},_createEffectLayer:function(t){t.onComplete=function(){this.completedEffectLayers++,this.completedEffectLayers>=this.createdEffectLayers.length&&(this.onComplete&&this.onComplete(),this.markForRemoval())}.bind(this);var e=this.addChild((new ParticleEffect).setup(t));this.createdEffectLayers.push(e)},_combineEffectParams:function(t,e){var i,a;if(t.subEffect&&(e.subEffect?(i=TGE.DeepClone(e.subEffect),this._combineEffectParams(t.subEffect,i)):i=t.subEffect),t.physicsParams&&(e.physicsParams?(a=TGE.DeepClone(e.physicsParams),PropertyCombine.combineProperties(t.physicsParams,a)):a=t.physicsParams),t.effectLayers&&e.effectLayers)for(var o=TGE.DeepClone(e.effectLayers),n=0;n<t.effectLayers.length;n++)n<o.length?PropertyCombine.combineProperties(t.effectLayers[n],o[n]):o.push(t.effectLayers[n]);t.startingX&&e.startingXPercentage?e.startingXPercentage=null:t.startingXPercentage&&e.startingX&&(e.startingX=null),t.startingY&&e.startingYPercentage?e.startingYPercentage=null:t.startingYPercentage&&e.startingY&&(e.startingY=null),PropertyCombine.combineProperties(t,e),o&&(e.effectLayers=o),i&&(e.subEffect=i),a&&(e.physicsParams=a)},_createCustomEffect:function(t){this._createEffect(t)},_createEffect:function(r,t){t&&this._combineEffectParams(t,r),this.effectParams&&this._combineEffectParams(this.effectParams,r),this.particleImage&&(r.particleImage=this.particleImage),this.particleScale&&(r.particleScale=this.particleScale),this.color&&(r.color=this.color);var i=this.particleManager._randomizeProperty(r.particleAmount);this.totalParticles?this.totalParticles+=i:this.totalParticles=i,r.beginFadeTweens=function(t){var e=this.particleManager._randomizeProperty(r.totalLifetime),i=this.particleManager._randomizeProperty(r.fadeInTime),a=this.particleManager._randomizeProperty(r.fadeOutTime);r.fadeTimesArePercent&&(i*=e,a*=e),i=TGE.Math.Clamp(i,0,e),a=TGE.Math.Clamp(a,0,e-i);var o=TGE.Math.Clamp(e-i-a,0,e),n=this.particleManager._randomizeProperty(r.maxScale);t.tweenTo({scaleX:n,scaleY:n,alpha:this.particleManager._randomizeProperty(r.maxAlpha),duration:i}),t.tweenTo({alpha:void 0!==r.endingAlpha?this.particleManager._randomizeProperty(r.endingAlpha):0,scale:void 0!==r.endingScale?this.particleManager._randomizeProperty(r.endingScale):this.particleManager._randomizeProperty(r.maxScale),delay:i+o,duration:a,onComplete:function(){t.dispatchEvent({type:"particleComplete"}),t.markForRemoval()}})}.bind(this);for(var e=0,a=0;a<i;a++)0<a&&(e+=this.particleManager._randomizeProperty(r.timeBetweenParticles)),this.performAction({delay:e,action:function(t){var e=this.particleManager._randomizeProperty(r.particleScale);r.widthMultiplier=e,r.heightMultiplier=e,r.creator=this,r.particleIndex=t,r.particlesInEffect=i,this.addChild(this.particleManager.createParticle(r)).addEventListener("particleComplete",this._checkForAllParticlesComplete.bind(this))}.bind(this,a)});var o,n=0;if(r.subEffect){var s=this.particleManager._randomizeProperty(r.subEffect.occurrences);this.totalParticles+=s;for(a=n=0;a<s;a++)0<a&&(n+=this.particleManager._randomizeProperty(r.subEffect.timeBetweenOccurrences)),this.performAction({delay:n,action:function(){var t,e,i=TGE.DeepClone(r.subEffect),a=i.particleImage?i.particleImage:r.particleImage;i.particleImage=this.particleManager._randomizeProperty(a),i.color=this.particleManager._randomizeProperty(i.color?i.color:r.color),i.particleScale=this.particleManager._randomizeProperty(i.particleScale?i.particleScale:r.particleScale),i.scale=this.particleManager._randomizeProperty(i.scale?i.scale:1),i.xPercentage?(t=this.particleManager._randomizeProperty(i.xPercentage),i.x=TGE.MapValue(t,0,1,.5*-this.width,.5*this.width)):i.x=this.particleManager._randomizeProperty(i.x?i.x:0),i.yPercentage?(e=this.particleManager._randomizeProperty(i.yPercentage),i.y=TGE.MapValue(e,0,1,.5*-this.height,.5*this.height)):i.y=this.particleManager._randomizeProperty(i.y?i.y:0),i.effectType="custom",this.addChild((new ParticleEffect).setup(i)).addEventListener("allParticlesCompleted",this._checkForAllParticlesComplete.bind(this))}.bind(this)})}this.looping=this.looping?this.looping:r.looping,this.looping&&(o=n<=e?e:n,this.performAction({delay:o+this.particleManager._randomizeProperty(r.timeBetweenParticles)+.01,action:this._createLoopedEffect.bind(this,r)})),this.allParticlesCreated=!0},_createLoopedEffect:function(t){this.destroyAfterNextLoop&&(this.looping=!1,t.looping=this.looping),this._createEffect(t)},_checkForAllParticlesComplete:function(){this.completedParticles++,this.allParticlesCreated&&this.completedParticles>=this.totalParticles&&this.dispatchEvent({type:"allParticlesCompleted"})},_onFinish:function(){this.onComplete&&!this.callbackRun&&(this.callbackRun=!0,this.onComplete()),this.markForRemoval()}},extend(ParticleEffect,TGE.DisplayObjectContainer),ParticleEffect.DefaultEffect={particleScale:1,particleAmount:5,timeBetweenParticles:0,looping:!1,totalLifetime:1,fadeInTime:.25,fadeOutTime:.25,fadeTimesArePercent:!0,startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,endingAlpha:0,startingX:0,startingY:0,startingRotation:0,rotationDirection:1,rotationSpeed:0,alignRotationToDirection:!1,initialDirection:{min:-180,max:180},initialSpeed:100,acceleration:1,gravity:0,bounciness:.75,simulationSpace:"local"},ParticleEffect.Burst={},ParticleEffect.Burst.Puff={particleAmount:3,startingX:{min:-10,max:10},startingY:{min:-10,max:10},totalLifetime:.75,fadeInTime:.075,fadeOutTime:.6,startingScale:0,maxScale:{min:.8,max:1.2},startingRotation:{min:0,max:360},rotationSpeed:{min:-50,max:50},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{min:5,max:12.5},gravity:0},ParticleEffect.Burst.Sprinkle={particleAmount:5,totalLifetime:1.5,startingX:{min:-10,max:10},startingY:{min:-10,max:10},fadeInTime:.1,fadeOutTime:.3,startingScale:0,maxScale:{min:.9,max:1.1},startingRotation:{min:0,max:360},rotationSpeed:{min:-100,max:100},startingAlpha:0,maxAlpha:.7,initialDirection:{minX:-1,maxX:1,minY:-4.5,maxY:-1.5},initialSpeed:{min:100,max:400},gravity:1e3,collisionPlane:"screenBottom"},ParticleEffect.Burst.Pop={particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100},ParticleEffect.FullScreen={},ParticleEffect.FullScreen.Spill={particleAmount:30,timeBetweenParticles:.05,startingXPercentage:{min:0,max:1},startingYPercentage:{min:-.1,max:-.05},totalLifetime:2.5,fadeInTime:.1,fadeOutTime:.69,startingScale:0,maxScale:1,endingScale:.1,startingRotation:0,rotationSpeed:0,startingAlpha:0,maxAlpha:1,initialSpeed:0,gravity:{min:1e3,max:2e3},collisionPlane:"screenBottom",bounciness:{min:.4,max:.6}},ParticleEffect.FullScreen.Confetti={particleAmount:30,timeBetweenParticles:.075,startingXPercentage:{min:0,max:1},startingYPercentage:{min:-.1,max:-.05},totalLifetime:5,fadeInTime:.1,fadeOutTime:.69,startingScale:1,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-1,maxX:1,minY:0,maxY:0},initialSpeed:{min:40,max:100},gravity:{min:200,max:300},tweens:[{scaleX:.1,duration:{min:.2,max:.3},rewind:!0,loop:!0}]},ParticleEffect.FullScreen.Fireworks={particleAmount:0,subEffect:{occurrences:10,timeBetweenOccurrences:{min:.1,max:.3},xPercentage:{min:.1,max:1},yPercentage:{min:.1,max:1},scale:{min:1,max:2},particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100}},ParticleEffect.FullScreen.Fountain={particleAmount:40,timeBetweenParticles:.03,startingXPercentage:.5,startingYPercentage:1.05,totalLifetime:3,fadeInTime:.2,fadeOutTime:.33,startingScale:.5,maxScale:1,endingScale:.01,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-.3,maxX:.3,minY:-1,maxY:-1},initialSpeed:{min:900,max:1150},scaleSpeedToScreenSize:!0,gravity:2e3,collisionPlane:"screenBottom",bounciness:.6},ParticleBurst=function(){ParticleBurst.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{particleScale:1,effectType:"puff"})},ParticleBurst.prototype={setup:function(t){switch(t.skipBaseClassEffectCreation=!0,PropertyCombine.setupInstance(this,t,ParticleBurst.superclass.setup),this.customBurstParams&&(this.customEffectParams=this.customBurstParams),this.customEffectParams&&(this.effectParams=this.customEffectParams),this.effectType){case"puff":this._createPuffEffect();break;case"sprinkle":this._createSprinkleEffect();break;case"pop":this._createPopEffect();break;case"custom":this._createEffect();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"ParticleBurst was given an unrecognized effect type")}return this},_createPuffEffect:function(){this._createEffect({particleAmount:3,startingX:{min:-10,max:10},startingY:{min:-10,max:10},totalLifetime:.75,fadeInTime:.075,fadeOutTime:.6,startingScale:0,maxScale:{min:.8,max:1.2},startingRotation:{min:0,max:360},rotationSpeed:{min:-50,max:50},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{min:5,max:12.5},gravity:0})},_createSprinkleEffect:function(){this._createEffect({particleAmount:5,totalLifetime:1.5,startingX:{min:-10,max:10},startingY:{min:-10,max:10},fadeInTime:.07,fadeOutTime:2,startingScale:0,maxScale:{min:.9,max:1.1},startingRotation:{min:0,max:360},rotationSpeed:{min:-100,max:100},startingAlpha:0,maxAlpha:.7,initialDirection:{minX:-1,maxX:1,minY:-4.5,maxY:-1.5},initialSpeed:{min:100,max:400},gravity:1e3,collisionPlane:"screenBottom"})},_createPopEffect:function(){this._createEffect({particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100})},_createEffect:function(t){ParticleBurst.superclass._createEffect.call(this,{particleAmount:5,timeBetweenParticles:0,startingX:0,startingY:0,startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,startingRotation:0,rotationDirection:1,rotationSpeed:0,totalLifetime:2,fadeTimesArePercent:!1,fadeInTime:.25,fadeOutTime:.5,simulationSpace:"local",gravity:1e3,bounciness:.75},t)}},extend(ParticleBurst,ParticleEffect),FullScreenParticles=function(){FullScreenParticles.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{effectType:"spill"})},FullScreenParticles.prototype={setup:function(t){switch(t.width=this.stage.width,t.height=this.stage.height,t.skipBaseClassEffectCreation=!0,PropertyCombine.setupInstance(this,t,FullScreenParticles.superclass.setup),this.effectType){case"spill":this._createSpillEffect();break;case"confetti":this._createConfettiEffect();break;case"fireworks":this._createFireworksEffect();break;case"fountain":this._createFountainEffect();break;case"custom":this._createCustomEffect();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"FullScreenParticles was given an unrecognized effect type")}return this},_createSpillEffect:function(){this._createEffect({particleAmount:30,timeBetweenParticles:.05,startingXPercentage:{min:0,max:1},startingY:{min:-100,max:-50},totalLifetime:2.5,fadeInTime:.1,fadeOutTime:.69,startingScale:0,maxScale:1,endingScale:.1,startingRotation:0,rotationSpeed:0,startingAlpha:0,maxAlpha:1,initialSpeed:0,gravity:{min:1e3,max:2e3},collisionPlane:"screenBottom",bounciness:{min:.4,max:.6}})},_createConfettiEffect:function(){this._createEffect({particleAmount:30,timeBetweenParticles:.075,startingXPercentage:{min:0,max:1},startingY:{min:-100,max:-50},totalLifetime:5,fadeInTime:.1,fadeOutTime:.69,startingScale:1,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-1,maxX:1,minY:0,maxY:0},initialSpeed:{min:40,max:100},gravity:{min:200,max:300},tweens:[{scaleX:.1,duration:{min:.2,max:.3},rewind:!0,loop:!0}]})},_createFireworksEffect:function(){this._createEffect({particleAmount:0,subEffect:{occurrences:10,timeBetweenOccurrences:{min:.1,max:.3},xPercentage:{min:.1,max:1},yPercentage:{min:.1,max:1},scale:{min:1,max:2},particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100}})},_createFountainEffect:function(){this._createEffect({particleAmount:40,timeBetweenParticles:.03,startingXPercentage:.5,startingYPercentage:1.05,totalLifetime:3,fadeInTime:.2,fadeOutTime:1,startingScale:.5,maxScale:1,endingScale:.01,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-.3,maxX:.3,minY:-1,maxY:-1},initialSpeed:{min:900,max:1150},gravity:2e3,collisionPlane:"screenBottom",bounciness:.6})},_createEffect:function(t){FullScreenParticles.superclass._createEffect.call(this,{particleAmount:20,timeBetweenParticles:.1,startingXPercentage:{min:0,max:1},startingYPercentage:{min:0,max:1},startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,startingRotation:0,rotationDirection:1,rotationSpeed:{min:-360,max:360},totalLifetime:2,fadeTimesArePercent:!1,fadeInTime:.25,fadeOutTime:.5,initialDirection:{minX:-.5,maxX:.5,minY:-1,maxY:-1},initialSpeed:200,scaleSpeedToScreenSize:!0,gravity:1e3,bounciness:.75,simulationSpace:"local"},t)}},extend(FullScreenParticles,ParticleEffect),BuilderExportedParticles=function(){BuilderExportedParticles.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{effectData:void 0,particleImage1:void 0,particleImage2:void 0,particleImage3:void 0,createdEffects:[]})},BuilderExportedParticles.prototype={setup:function(t){var e=!1;t.effectData||(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires an 'effectData' parameter"),e=!0);var i=0;if(t.effectData.effect3?i=3:t.effectData.effect2?i=2:t.effectData.effect1&&(i=1),0!==i||t.particleImage?(1<=i&&!t.particleImage1&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage1' parameter"),e=!0),2<=i&&!t.particleImage2&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage2' parameter"),e=!0),3<=i&&!t.particleImage3&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage3' parameter"),e=!0)):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage' parameter"),e=!0),e)return null;PropertyCombine.setupInstance(this,t,BuilderExportedParticles.superclass.setup),this.effectData=TGE.DeepClone(t.effectData),(this.completedEffects=0)===i&&this._createEffect(this.effectData,this.particleImage,this.override?this.override:void 0);for(var a,o=1;o<=3;o++){this.effectData["effect"+o]&&(a=void 0,this.override&&(a=1===i?this.override.effect1?this.override.effect1:this.override:this.override["effect"+o]),this._createEffect(this.effectData["effect"+o],this["particleImage"+o],a))}return this},_createEffect:function(t,e,i){t.particleImage=e,t.onComplete=this._onEffectCompleted.bind(this),i&&this._applyOverride(i,t);var a=this.addChild((new ParticleBurst).setup(t));this.createdEffects.push(a)},_onEffectCompleted:function(){this.completedEffects++,this.completedEffects>=this.createdEffects.length&&(this.onComplete&&this.onComplete(),this.markForRemoval())},_applyOverride:function(t,e){var i;t.effectParams&&t.effectParams.physicsParams&&(i=TGE.DeepClone(e.effectParams.physicsParams),e.effectParams.physicsParams?PropertyCombine.combineProperties(t.effectParams.physicsParams,i):i=t.effectParams.physicsParams);var a=TGE.DeepClone(e.effectParams);PropertyCombine.combineProperties(t.effectParams,a),PropertyCombine.combineProperties(t,e),e.effectParams=a,i&&(e.effectParams.physicsParams=i)},completeAndDestroy:function(){for(var t=0;t<this.createdEffects.length;t++)this.createdEffects[t].completeAndDestroy()}},extend(BuilderExportedParticles,TGE.DisplayObjectContainer),TFX_pointerModule=function(){return TFX_pointerModule.superclass.constructor.call(this),this._setAnimationData(TFX_pointerModule.sAnimationData),this},extend(TFX_pointerModule,TGE.TFXAnimationSet),TFX_pointerModule.AddRequiredImagesToAssetList=function(t){TGE.TFXAnimationSet.AddRequiredImagesToAssetList(TFX_pointerModule.sAnimationData,t)},TFX_pointerModule.sAnimationData=TGE.TFXAnimationSet.ExpandData({v:{"":[28,{"":[30,"img_pointer","img_pointer","img_pointer","img_pointerRing","img_pointerRing","img_pointerRing","img_pointer","img_pointerRing","img_pointer","img_pointerRing"]},1,{"":[17,{"":[23,.5,139,139,.5]},{"":[23,.132,204,204,.132]}]},{"":[25,{"":[7,[{"":[15,{"":[1,0]},[{"":[29,45.85,0,0,"0",-43.4,0,1,1]}]]},{"":[8,[{"":[29,38.35,-.061,.141,"0",-38.45,.061,.998,.998]}]]},{"":[8,[{"":[29,31.2,-.122,.281,"0",-33.2,.122,.992,.992]}]]},{"":[8,[{"":[29,24.8,-.179,.414,"0",-27.85,.179,.983,.983]}]]},{"":[8,[{"":[29,18.8,-.233,.539,"0",-22.25,.233,.972,.972]}]]},{"":[8,[{"":[29,13.9,-.28,.656,"0",-17.15,.28,.959,.959]}]]},{"":[8,[{"":[29,9.65,-.322,.754,"0",-12.4,.322,.946,.946]}]]},{"":[8,[{"":[29,6.1,-.358,.84,"0",-7.95,.358,.932,.932]}]]},{"":[8,[{"":[29,3.7,-.384,.91,"0",-4.85,.384,.922,.922]}]]},{"":[8,[{"":[29,1.85,-.404,.961,"0",-2.25,.404,.914,.914]}]]},{"":[8,[{"":[29,.75,-.416,.988,"0",-.65,.416,.908,.908]}]]},{"":[8,[{"":[29,0,-.423,1,"0",0,.423,.906,.906]}]]}]]},{"":[7,[{"":[15,{"":[2,0]},[{"":[29,45.85,0,1,"2",-43.4,0,1,1]}]]},{"":[8,[{"":[26,.005,45.25,-.005,"2",-42.85]}]]},{"":[8,[{"":[27,42.05,-.031,"2",-40.9,.031,.999,.999]}]]},{"":[8,[{"":[27,37.3,-.071,"2",-37.65,.071,.997,.997]}]]},{"":[8,[{"":[27,30.7,-.126,"2",-32.75,.126,.992,.992]}]]},{"":[8,[{"":[27,23.4,-.191,"2",-26.55,.191,.981,.981]}]]},{"":[8,[{"":[27,15.55,-.264,"2",-19,.264,.964,.964]}]]},{"":[8,[{"":[27,7.65,-.342,"2",-9.9,.342,.938,.938]}]]},{"":[15,{"":[9,1,0]},[{"":[29,0,0,1,"3",0,0,.2,.2]},{"":[27,0,-.423,"2",0,.423,.906,.906]}]]},{"":[8,[{"":[24,.805,.453,"3",.453]},{"":[27,11.9,-.301,"2",-14.8,.301,.952,.952]}]]},{"":[8,[{"":[24,.641,.667,"3",.667]},{"":[27,21.65,-.209,"2",-24.7,.209,.976,.976]}]]},{"":[8,[{"":[24,.504,.846,"3",.846]},{"":[27,27.45,-.157,"2",-29.8,.157,.986,.986]}]]},{"":[8,[{"":[24,.387,.995,"3",.995]},{"":[27,29.3,-.139,"2",-31.6,.139,.989,.989]}]]},{"":[8,[{"":[24,.293,1.117,"3",1.117]},{"":[27,28.3,-.148,"2",-30.65,.148,.987,.987]}]]},{"":[8,[{"":[24,.219,1.215,"3",1.215]},{"":[27,24.95,-.178,"2",-27.75,.178,.982,.982]}]]},{"":[8,[{"":[24,.16,1.293,"3",1.293]},{"":[27,20.1,-.221,"2",-23.4,.221,.973,.973]}]]},{"":[8,[{"":[24,.113,1.354,"3",1.354]},{"":[27,13.85,-.281,"2",-17.05,.281,.958,.958]}]]},{"":[8,[{"":[24,.078,1.4,"3",1.4]},{"":[27,6.85,-.35,"2",-9,.35,.935,.935]}]]},{"":[15,{"":[19,2,0,1]},[{"":[24,.051,1.435,"3",1.434]},{"":[29,0,0,1,"4",0,0,.2,.2]},{"":[27,0,-.423,"2",0,.423,.906,.906]}]]},{"":[8,[{"":[24,.031,1.459,"3",1.459]},{"":[24,.805,.453,"4",.453]},{"":[27,11.9,-.301,"2",-14.8,.301,.952,.952]}]]},{"":[8,[{"":[24,.02,1.476,"3",1.476]},{"":[24,.641,.667,"4",.667]},{"":[27,21.65,-.209,"2",-24.7,.209,.976,.976]}]]},{"":[8,[{"":[24,.012,1.487,"3",1.487]},{"":[24,.504,.846,"4",.846]},{"":[27,27.45,-.157,"2",-29.8,.157,.986,.986]}]]},{"":[8,[{"":[24,.004,1.494,"3",1.494]},{"":[24,.387,.995,"4",.995]},{"":[27,29.3,-.139,"2",-31.6,.139,.989,.989]}]]},{"":[8,[{"":[21,1.497,"3",1.497]},{"":[24,.293,1.117,"4",1.117]},{"":[27,28.3,-.148,"2",-30.65,.148,.987,.987]}]]},{"":[8,[{"":[24,0,1.499,"3",1.499]},{"":[24,.219,1.215,"4",1.215]},{"":[27,24.95,-.178,"2",-27.75,.178,.982,.982]}]]},{"":[8,[{"":[21,1.5,"3",1.5]},{"":[24,.16,1.293,"4",1.293]},{"":[27,20.1,-.221,"2",-23.4,.221,.973,.973]}]]},{"":[8,[{"":[24,.113,1.354,"4",1.354]},{"":[27,13.85,-.281,"2",-17.05,.281,.958,.958]}]]},{"":[8,[{"":[24,.078,1.4,"4",1.4]},{"":[27,6.85,-.35,"2",-9,.35,.935,.935]}]]},{"":[15,{"":[18,2,0,1]},[{"":[24,.051,1.435,"4",1.434]},{"":[29,0,0,1,"5",0,0,.2,.2]},{"":[27,0,-.423,"2",0,.423,.906,.906]}]]},{"":[8,[{"":[24,.031,1.459,"4",1.459]},{"":[24,.805,.453,"5",.453]},{"":[27,7.7,-.343,"2",-9.95,.343,.938,.938]}]]},{"":[8,[{"":[24,.02,1.476,"4",1.476]},{"":[24,.641,.667,"5",.667]},{"":[27,14.4,-.276,"2",-17.7,.276,.96,.96]}]]},{"":[8,[{"":[24,.012,1.487,"4",1.487]},{"":[24,.504,.846,"5",.846]},{"":[27,20.7,-.217,"2",-24.05,.217,.975,.975]}]]},{"":[8,[{"":[24,.004,1.494,"4",1.494]},{"":[24,.387,.995,"5",.995]},{"":[27,26.3,-.166,"2",-29.15,.166,.986,.986]}]]},{"":[8,[{"":[21,1.497,"4",1.497]},{"":[24,.293,1.117,"5",1.117]},{"":[27,30.75,-.127,"2",-32.8,.127,.991,.991]}]]},{"":[8,[{"":[24,0,1.499,"4",1.499]},{"":[24,.219,1.215,"5",1.215]},{"":[27,34.75,-.093,"2",-35.85,.093,.995,.995]}]]},{"":[8,[{"":[21,1.5,"4",1.5]},{"":[24,.16,1.293,"5",1.293]},{"":[27,37.85,-.066,"2",-38.1,.066,.998,.998]}]]},{"":[8,[{"":[24,.113,1.354,"5",1.354]},{"":[27,40.05,-.048,"2",-39.6,.048,.999,.999]}]]},{"":[8,[{"":[24,.078,1.4,"5",1.4]},{"":[26,.031,42.1,-.031,"2",-40.95]}]]},{"":[15,{"":[10,0,1]},[{"":[24,.051,1.435,"5",1.434]},{"":[27,43.25,-.022,"2",-41.7,.022,1,1]}]]},{"":[8,[{"":[24,.031,1.459,"5",1.459]},{"":[26,.013,44.35,-.013,"2",-42.35]}]]},{"":[8,[{"":[24,.02,1.476,"5",1.476]},{"":[26,.005,45.3,-.005,"2",-43]}]]},{"":[8,[{"":[24,.012,1.487,"5",1.487]},{"":[26,.001,45.85,-.001,"2",-43.3]}]]},{"":[8,[{"":[24,.004,1.494,"5",1.494]},{"":[20,45.9,"2",-43.35]}]]},{"":[8,[{"":[21,1.497,"5",1.497]},{"":[22,0,45.95,0,"2"]}]]},{"":[8,[{"":[24,0,1.499,"5",1.499]}]]},{"":[8,[{"":[21,1.5,"5",1.5]}]]},{"":[8,[{"":[16,"2",-43.4]}]]},{"":[8,[{"":[13,45.8,"2"]}]]}]]},{"":[7,[{"":[15,{"":[5,0]},[{"":[29,0,-.423,1,"1",0,.423,.906,.906]}]]},{"":[8,[{"":[29,.55,-.419,.992,"1",-.3,.419,.907,.907]}]]},{"":[8,[{"":[29,1.6,-.407,.965,"1",-1.8,.407,.912,.912]}]]},{"":[8,[{"":[29,3.1,-.391,.926,"1",-3.9,.391,.919,.919]}]]},{"":[8,[{"":[29,5.35,-.367,.867,"1",-6.95,.367,.929,.929]}]]},{"":[8,[{"":[29,8.1,-.338,.793,"1",-10.5,.338,.94,.94]}]]},{"":[8,[{"":[29,11.8,-.301,.707,"1",-14.8,.301,.952,.952]}]]},{"":[8,[{"":[29,16.1,-.26,.609,"1",-19.45,.26,.965,.965]}]]},{"":[8,[{"":[29,20.75,-.216,.5,"1",-24.05,.216,.976,.976]}]]},{"":[8,[{"":[29,26.35,-.165,.383,"1",-29.2,.165,.986,.986]}]]},{"":[8,[{"":[29,32.7,-.11,.258,"1",-34.35,.11,.994,.994]}]]},{"":[8,[{"":[29,39,-.057,.129,"1",-38.9,.057,.998,.998]}]]},{"":[8,[{"":[29,45.8,0,0,"1",-43.4,0,1,1]}]]}]]},{"":[7,[{"":[15,{"":[4,0]},[{"":[29,45.85,0,1,"8",-43.4,0,1,1]}]]},{"":[8,[{"":[26,.005,45.25,-.005,"8",-42.85]}]]},{"":[8,[{"":[27,42.05,-.031,"8",-40.9,.031,.999,.999]}]]},{"":[8,[{"":[27,37.3,-.071,"8",-37.65,.071,.997,.997]}]]},{"":[8,[{"":[27,30.7,-.126,"8",-32.75,.126,.992,.992]}]]},{"":[8,[{"":[27,23.4,-.191,"8",-26.55,.191,.981,.981]}]]},{"":[8,[{"":[27,15.55,-.264,"8",-19,.264,.964,.964]}]]},{"":[8,[{"":[27,7.65,-.342,"8",-9.9,.342,.938,.938]}]]},{"":[15,{"":[12,1,0]},[{"":[29,0,0,1,"9",0,0,.2,.2]},{"":[27,0,-.423,"8",0,.423,.906,.906]}]]},{"":[8,[{"":[24,.859,.382,"9",.382]},{"":[27,5.7,-.363,"8",-7.4,.363,.93,.93]}]]},{"":[8,[{"":[24,.734,.544,"9",.544]},{"":[27,10.55,-.314,"8",-13.4,.314,.948,.948]}]]},{"":[8,[{"":[24,.625,.688,"9",.688]},{"":[27,15.25,-.268,"8",-18.6,.268,.963,.963]}]]},{"":[8,[{"":[24,.527,.815,"9",.815]},{"":[27,19.7,-.226,"8",-23.1,.226,.973,.973]}]]},{"":[8,[{"":[24,.441,.927,"9",.927]},{"":[27,23.55,-.191,"8",-26.7,.191,.981,.981]}]]},{"":[8,[{"":[24,.367,1.024,"9",1.024]},{"":[27,27.3,-.157,"8",-30,.157,.987,.987]}]]},{"":[8,[{"":[24,.301,1.109,"9",1.109]},{"":[27,30.3,-.131,"8",-32.45,.131,.991,.991]}]]},{"":[8,[{"":[24,.246,1.181,"9",1.181]},{"":[27,33.25,-.105,"8",-34.75,.105,.994,.994]}]]},{"":[8,[{"":[24,.199,1.243,"9",1.243]},{"":[27,35.8,-.084,"8",-36.65,.084,.996,.996]}]]},{"":[8,[{"":[24,.156,1.296,"9",1.296]},{"":[27,37.9,-.066,"8",-38.1,.066,.998,.998]}]]},{"":[8,[{"":[24,.125,1.34,"9",1.34]},{"":[26,.053,39.5,-.053,"8",-39.25]}]]},{"":[8,[{"":[24,.094,1.376,"9",1.376]},{"":[27,41.05,-.04,"8",-40.25,.04,.999,.999]}]]},{"":[8,[{"":[24,.074,1.406,"9",1.406]},{"":[26,.031,42.15,-.031,"8",-41]}]]},{"":[8,[{"":[24,.055,1.43,"9",1.43]},{"":[27,43.2,-.022,"8",-41.65,.022,1,1]}]]},{"":[8,[{"":[24,.039,1.449,"9",1.449]},{"":[26,.014,44.25,-.014,"8",-42.3]}]]},{"":[8,[{"":[24,.027,1.464,"9",1.464]},{"":[26,.01,44.8,-.01,"8",-42.65]}]]},{"":[8,[{"":[24,.02,1.476,"9",1.475]},{"":[26,.005,45.3,-.005,"8",-42.95]}]]},{"":[8,[{"":[24,.012,1.484,"9",1.484]},{"":[20,45.4,"8",-43]}]]},{"":[8,[{"":[24,.008,1.49,"9",1.49]},{"":[26,.001,45.85,-.001,"8",-43.3]}]]},{"":[8,[{"":[24,.004,1.494,"9",1.494]},{"":[20,45.9,"8",-43.35]}]]},{"":[8,[{"":[21,1.497,"9",1.497]},{"":[22,0,45.95,0,"8"]}]]},{"":[8,[{"":[24,0,1.498,"9",1.498]}]]},{"":[8,[{"":[21,1.499,"9",1.499]}]]},{"":[8,[{"":[21,1.5,"9",1.5]}]]},{"":[8,[{"":[16,"8",-43.4]}]]},{"":[]},{"":[8,[{"":[13,45.8,"8"]}]]}]]},{"":[7,[{"":[15,{"":[3,0]},[{"":[29,-75,0,1,"6",-275,0,1,1]}]]},{"":[8,[{"":[16,"6",-272.9]}]]},{"":[8,[{"":[16,"6",-266.65]}]]},{"":[8,[{"":[16,"6",-256.45]}]]},{"":[8,[{"":[16,"6",-242.8]}]]},{"":[8,[{"":[16,"6",-226.1]}]]},{"":[8,[{"":[16,"6",-207.1]}]]},{"":[8,[{"":[16,"6",-186.45]}]]},{"":[15,{"":[11,1,0]},[{"":[29,0,0,1,"7",0,0,.2,.2]},{"":[16,"6",-165]}]]},{"":[8,[{"":[24,.859,.382,"7",.382]},{"":[16,"6",-175]}]]},{"":[8,[{"":[24,.734,.544,"7",.544]},{"":[16,"6",-202.45]}]]},{"":[8,[{"":[24,.625,.688,"7",.688]},{"":[16,"6",-213.45]}]]},{"":[8,[{"":[24,.527,.815,"7",.815]},{"":[16,"6",-221.65]}]]},{"":[8,[{"":[24,.441,.927,"7",.927]},{"":[16,"6",-228.3]}]]},{"":[8,[{"":[24,.367,1.024,"7",1.024]},{"":[16,"6",-233.95]}]]},{"":[8,[{"":[24,.301,1.109,"7",1.109]},{"":[16,"6",-238.9]}]]},{"":[8,[{"":[24,.246,1.181,"7",1.181]},{"":[16,"6",-243.25]}]]},{"":[8,[{"":[24,.199,1.243,"7",1.243]},{"":[16,"6",-247.15]}]]},{"":[8,[{"":[24,.156,1.296,"7",1.296]},{"":[16,"6",-250.65]}]]},{"":[8,[{"":[24,.125,1.34,"7",1.34]},{"":[16,"6",-253.8]}]]},{"":[8,[{"":[24,.094,1.376,"7",1.376]},{"":[16,"6",-256.7]}]]},{"":[8,[{"":[24,.074,1.406,"7",1.406]},{"":[16,"6",-259.25]}]]},{"":[8,[{"":[24,.055,1.43,"7",1.43]},{"":[16,"6",-261.6]}]]},{"":[8,[{"":[24,.039,1.449,"7",1.449]},{"":[16,"6",-263.7]}]]},{"":[8,[{"":[24,.027,1.464,"7",1.464]},{"":[16,"6",-265.6]}]]},{"":[8,[{"":[24,.02,1.476,"7",1.475]},{"":[16,"6",-267.3]}]]},{"":[8,[{"":[24,.012,1.484,"7",1.484]},{"":[16,"6",-268.8]}]]},{"":[8,[{"":[24,.008,1.49,"7",1.49]},{"":[16,"6",-270.15]}]]},{"":[8,[{"":[24,.004,1.494,"7",1.494]},{"":[16,"6",-271.3]}]]},{"":[8,[{"":[21,1.497,"7",1.497]},{"":[16,"6",-272.3]}]]},{"":[8,[{"":[24,0,1.498,"7",1.498]},{"":[16,"6",-273.15]}]]},{"":[8,[{"":[21,1.499,"7",1.499]},{"":[16,"6",-273.8]}]]},{"":[8,[{"":[21,1.5,"7",1.5]},{"":[16,"6",-274.35]}]]},{"":[8,[{"":[16,"6",-274.7]}]]},{"":[8,[{"":[16,"6",-274.95]}]]},{"":[8,[{"":[16,"6",-275]}]]}]]}]},24,3,3]},t:[[0,0],[0,2],[0,6],[0,8],[0,1],[0,"x"],[0,"frames"],[0,"instances"],[2,3],[0,5,2],[3,7],[4,9],[6,"i"],[6,"b"],[0,"instances_map","instances"],[0,"i","y"],[0,"img_pointerRing","img_pointer"],[2,4,5],[9,4],[13,"y"],[0,"d","i","a"],[0,"c","x","b","i"],[0,"regx","height","width","regy"],[0,"o","d","i","a"],[0,"down","rapidTap","up","tap","bounce"],[22,"y"],[14,"i","y","c","d","a"],[0,"part_instances","image_scale","parts","animations","framerate","max_children","version"],[14,"o","i","y","c","d","a"],[1,1,2,3,4,5,6,7,8,9]],f:"cjson"});var Pointer=function(){Pointer.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.width=this.height=250,this.actionsRequiringRingImage=["tap","tapMany","rapidTap","tapMoveTap","bounce"],this.actionsWithNoRotation=["bounce"],this.actions=["tap","rapidTap","tapMany","tapMoveTap","tapHold","drag","move","bounce","dragMany"],this.defaultPointerImage="img_pointer",this.defaultRingImage="img_pointerRing"};Pointer.prototype={setup:function(t){return this.pointerRotation="number"==typeof t.rotation?t.rotation:null,t.rotation=0,Pointer.superclass.setup.call(this,t),this.target="object"==typeof t.target&&"number"==typeof t.target.x&&"number"==typeof t.target.rotation?t.target:null,this.target2="object"==typeof t.target2&&"number"==typeof t.target2.x&&"number"==typeof t.target2.rotation?t.target2:this.target,this.targets="object"==typeof t.targets?t.targets:[],this.pointerImage="string"==typeof t.pointerImage?t.pointerImage:this.defaultPointerImage,this.ringImage="string"==typeof t.ringImage?t.ringImage:this.defaultRingImage,this.action="string"==typeof t.action?t.action:null,this.duration="number"==typeof t.duration?t.duration:1,this.mirror="boolean"==typeof t.mirror?t.mirror:null,this.offsetX="number"==typeof t.offsetX?t.offsetX:0,this.offsetY="number"==typeof t.offsetY?t.offsetY:0,this.offsetX2="number"==typeof t.offsetX2?t.offsetX2:this.offsetX,this.offsetY2="number"==typeof t.offsetY2?t.offsetY2:this.offsetY,this.offsets=t.offsets||null,this.dragReset=!!t.dragReset,this.dragDelay=t.dragDelay||0,this.fps="number"==typeof t.fps?t.fps:24,this.debug="true"===getQueryString().pointerdebug||!0===t.debug,this.pointerSize="string"==typeof t.pointerSize?t.pointerSize:"medium",this.showPointer=!1!==t.showPointer,TGE.RemoteSettings.HasSetting("pointerSize")||TGE.RemoteSettings.AddSetting("pointerSize",{type:"string",default:this.pointerSize,options:["small","medium","large"]}),TGE.RemoteSettings.HasSetting("showPointer")||TGE.RemoteSettings.AddSetting("showPointer",{type:"boolean",default:this.showPointer}),TGE.RemoteSettings.HasSetting("pointerAction")||TGE.RemoteSettings.AddSetting("pointerAction",{type:"string",default:this.action,options:this.actions}),this.target||-1!==this.action.indexOf("Many")?0===this.targets.length&&-1!==this.action.indexOf("Many")?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"no targets parameter passed into Pointer module"):this.game.getAssetList(this.pointerImage)?TGE.RemoteSettings("showPointer")&&(this._createPointer(),this.addEventListener("addedToStage",this._checkParent.bind(this))):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"pointerImage for Pointer module isn't set or the image doesn't exist in any asset list. Pass in a pointerImage that exists.  You can grab a placeholder image from the Pointer module."):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"no target parameter passed into Pointer module"),this},_createPointer:function(){this.game.waitForAsset(this.pointerImage,this.__createPointer.bind(this),!1)},__createPointer:function(){this.pointer=this.addChild((new TFX_pointerModule).setup({fps:this.fps})),this.pointer.thenPlayAnimation=this._thenPlayAnimation.bind(this),this._replaceImages(),this._adjustPointer(),this._createDebugFeatures(),this._executeAction(),this.addResizeEvent()},clearListeners:function(){this.obj.removeEventListener("resize",this.resizeListener)},addResizeEvent:function(){this.target||this.targets?(this.obj=0<this.targets.length?this.targets[0]:this.target,this.resizeListener=this.obj.addEventListener("resize",this._onResize.bind(this)),this.addEventListener("remove",this.clearListeners.bind(this))):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"specified target(s) is not valid")},_executeAction:function(){if(this.debug)this._showStillPointer();else switch(this.action){case"tap":this._executeTap();break;case"rapidTap":this._executeRapidTap();break;case"tapMany":this._executeTapMany();break;case"tapMoveTap":this._executeTapMoveTap();break;case"tapHold":this._executeTapHold();break;case"drag":this._executeDragStart();break;case"move":this._executeMove();break;case"bounce":this._executeBounce();break;case"dragMany":this._executeDragMany();break;case null:this._showStillPointer();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"specified Pointer action "+this.action+" doesn't exist.  Try tap, rapidTap, tapMany, tapMoveTap, tapHold, drag, move, or bounce."),this._showStillPointer()}},_onResize:function(){this.pointer.removeEventListenersFor("finished"),this.clearTweens(),this._adjustPointer(),this._executeAction()},_showStillPointer:function(){this.pointer.setCurrentAnimation("up"),this.pointer.gotoAndStop(0)},_executeTap:function(){this._playAnimation({anim:"tap",looping:!0,onFrame:{frame:10,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.target})}})},_executeRapidTap:function(){this._playAnimation({anim:"rapidTap",looping:!0,onFrame:[{frame:10,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.target})},{frame:20,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.target})},{frame:30,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.target})}]})},_executeDragStart:function(){this._playAnimation({delay:.5,anim:"down",onComplete:this._moveToNext.bind(this,this._executeDragEnd.bind(this)),onFrame:[{frame:10,callback:this.dispatchEvent.bind(this,{type:"down",target:this.target})}]})},_executeDragEnd:function(){this._playAnimation({anim:"up",onComplete:this._moveToNext.bind(this,this._executeDragStart.bind(this),!0),onFrame:{frame:3,callback:this.dispatchEvent.bind(this,{type:"up",target:this.target2})}})},_executeDragMany:function(){this._playAnimation({delay:.5,anim:"down",onComplete:this._continueDragMany.bind(this),onFrame:[{frame:10,callback:this.dispatchEvent.bind(this,{type:"down",target:this.targets[0]})}]}),this._reorient()},_continueDragMany:function(t){0===(t=((t||0)+1)%this.targets.length)?this._playAnimation({anim:"up",onComplete:this._moveToNext.bind(this,this._executeDragMany.bind(this),!0,0),onFrame:{frame:3,callback:this.dispatchEvent.bind(this,{type:"up",target:this.targets[t]})}}):this.dragReset&&1<t?this._playAnimation({anim:"up",onComplete:this._moveToNext.bind(this,this._dragReset.bind(this,t),!0,t)}):this.dragDelay&&1<t?this.performAction({action:this._moveToNext.bind(this,this._continueDragMany.bind(this,t),!1,t),delay:this.dragDelay}):this._moveToNext(this._continueDragMany.bind(this,t),!1,t),this._reorient()},_dragReset:function(t){this._moveToNext(function(){},!0,0),this._playAnimation({delay:this.dragDelay,anim:"down",onComplete:this._moveToNext.bind(this,this._continueDragMany.bind(this,t),!1,t)}),this._reorient()},_executeMove:function(){this._showStillPointer(),this._moveToNext(this._executeMove.bind(this))},_executeBounce:function(){this._playAnimation({anim:"bounce",looping:!0,onFrame:{frame:8,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.target})}})},_executeTapHold:function(){this._playAnimation({anim:"down",onFrame:{frame:10,callback:this.dispatchEvent.bind(this,{type:"down",target:this.target})}}).thenPlayAnimation({anim:"up",delay:this.duration,onFrame:{frame:3,callback:this.dispatchEvent.bind(this,{type:"up",target:this.target})},onComplete:this._executeTapHold.bind(this)})},_executeTapMany:function(t){var e=t;t=((t||0)+1)%this.targets.length,this._playAnimation({anim:"tap",onFrame:[{frame:10,callback:this.dispatchEvent.bind(this,{type:"tap",target:this.targets[e||0]})},{frame:10,callback:this._moveToNext.bind(this,this._executeTapMany.bind(this),!1,t)}]})},_executeTapMoveTap:function(t){t=((t||0)+1)%2,this._playAnimation({anim:"tap",onFrame:[{frame:10,callback:this.dispatchEvent.bind(this,{type:"tap",target:1===t?this.target:this.target2})},{frame:10,callback:this._moveToNext.bind(this,this._executeTapMoveTap.bind(this),!1,t)}]})},_playAnimation:function(t){var e=t.anim,i=!0===t.looping,a=t.delay?t.delay:0,o=t.onComplete?t.onComplete:null,n=t.onFrame?t.onFrame:null;return a?(delete t.delay,this.tweenTo({duration:a,onComplete:this._playAnimation.bind(this,t)})):(this.pointer.setCurrentAnimation(e,i),this.pointer.playFromStart(),o&&this._setOnComplete(o),n&&this._setupOnFrameEvents(n,i)),this.pointer},_setupOnFrameEvents:function(t,e){if(Array.isArray(t))for(var i in t)this._setOnFrame(t[i].frame,t[i].callback);else this._setOnFrame(t.frame,t.callback);e&&this._setOnFrame(this.pointer.totalFrames()-1,this._setupOnFrameEvents.bind(this,t,e))},_thenPlayAnimation:function(t){this._setOnComplete(this._playAnimation.bind(this,t))},_setOnComplete:function(t){var e=this.pointer.addEventListener("finished",function(){this.pointer.removeEventListener("finished",e),t()}.bind(this))},_setOnFrame:function(t,e){var i=this.pointer.addEventListener("frame"+t,function(){this.pointer.removeEventListener("frame"+t,i),e()}.bind(this))},_moveToNext:function(t,e,i){var a,o,n,r,s;s=0<this.targets.length?(o=this.offsets?(a=this.offsets[i].x,this.offsets[i].y):(a=this.offsetX,this.offsetY),this._getGlobalPosition(this.targets[i],a,o)):(n=this._getGlobalPosition(this.target,this.offsetX,this.offsetY),r=this._getGlobalPosition(this.target2,this.offsetX2,this.offsetY2),ModuleMath.Geometry.distance(this,n)<ModuleMath.Geometry.distance(this,r)?r:n),e?(this.x=s.x,this.y=s.y,t(i)):this.tweenTo({x:s.x,y:s.y,easing:TGE.Tween.Quadratic.InOut,duration:this.duration,onComplete:t.bind(this,i)})},_adjustPointer:function(){this._reposition(),this._rescale(),this._reorient()},_replaceImages:function(){this.pointerImage!==this.defaultPointerImage&&(this.pointer.accessPart("img_pointer",!1).image=this.pointerImage),!this.game.isAssetLoaded(this.ringImage)&&-1!==this.actionsRequiringRingImage.indexOf(this.action)?(this.pointer.accessPart("img_pointerRing",!1).image=null,TGE.Debug.Log(TGE.Debug.LOG_ERROR,"ringImage for Pointer module isn't set or the image doesn't exist. Pass in a ringImage that exists.  You can grab a placeholder image from the Pointer module folder.")):this.ringImage!==this.defaultRingImage&&(this.pointer.accessPart("img_pointerRing",!1).image=this.ringImage)},_reposition:function(){var t;t=0<this.targets.length?this._getGlobalPosition(this.targets[0],this.offsetX,this.offsetY):this._getGlobalPosition(this.target,this.offsetX,this.offsetY),this.x=t.x,this.y=t.y},_getGlobalPosition:function(t,e,i){var a={x:e,y:i};return ModuleMath.Geometry.localToGlobal(t,a,!0)},_getScaleTo:function(){switch(TGE.RemoteSettings("pointerSize")){case"small":return.2;case"medium":return.3;case"large":return.4}},_rescale:function(){var t=this._getScaleTo(),e=this.stage.width/this.width*t,i=this.stage.height/this.height*t,a=Math.min(Math.abs(e),Math.abs(i));this.scale=a},_reorient:function(){var t=this.x>this.stage.width-this.width,e=this.x<-this.width,i=this.y>this.stage.height-this.stage.height/5,a=-1===this.actionsWithNoRotation.indexOf(this.action);null!==this.mirror?this.mirror&&(this.scaleX=-1*Math.abs(this.scaleX)):t&&i||t&&!i?this.scaleX=-1*Math.abs(this.scaleX):e&&this.scaleX<0&&(this.scaleX=Math.abs(this.scaleX)),null!==this.pointerRotation?this.pointer.rotation=this.pointerRotation:a&&(t&&i||!t&&i)&&(this.pointer.rotation=-20)},_checkParent:function(){this.parent instanceof TGE.Window||(this.visible=!1,TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Pointer must be parented to a TGE.Window"))},_createDebugFeatures:function(){var t;this.debug&&(this.pointer.rotation=50,this.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:.5,matchWidth:1,matchHeight:1},backgroundColor:"limeGreen"})).sendToBack(),this.addChild((new TGE.DisplayObjectContainer).setup({width:20,height:20,backgroundColor:"red"})),t="change width/height until the green box \nis about the same dimensions as the pointer\n\n",t+="target: "+this.target+"\ntarget2: "+this.target2+"\naction: "+this.action,(new DebugWidget).setup({title:"Pointer Debugger",text:t}))}},extend(Pointer,TGE.DisplayObjectContainer),PromoScreen=function(t,e){PromoScreen.superclass.constructor.apply(this,arguments),PropertyCombine.setDefaultParams(this,{showCompletion:!0,reason:"default",pauseGame:!1,buttons:PromoScreen.DEFAULT_SETUP.buttons,tweens:[{tween:"fade"}],clickableDelay:1}),this.width=this.stage.width,this.height=this.stage.height},PromoScreen.OPEN_APP_STORE=TGE.Game.AppstoreClickthrough,PromoScreen.CLICK_THROUGH=TGE.Game.Clickthrough,PromoScreen.TWITTER_SHARE=function(t,e){e=e||"",e+=" "+t;var i="https://twitter.com/intent/tweet?text="+encodeURIComponent(e);PromoScreen.CLICK_THROUGH("twitter",i,null)},PromoScreen.FACEBOOK_SHARE=function(t){var e="https://www.facebook.com/sharer.php?u="+encodeURIComponent(t);PromoScreen.CLICK_THROUGH("facebook",e)},PromoScreen.DEFAULT_SETUP={buttons:[{clickThrough:PromoScreen.OPEN_APP_STORE,name:"promoscreen"}]},PromoScreen.prototype={setup:function(t){return PropertyCombine.setupInstance(this,t,PromoScreen.superclass.setup),this.onSnapchatPlatform="B0135"===getDistributionPartner(),this.elxParams||(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"elxParams was not passed into the PromoScreen module"),this.elxParams={}),this._createELX(),this._setupButtons(),this._tweenObjects(),this},_createELX:function(){this.elxDisplay=this.addChild((new ELXDisplay).setup(this.elxParams)),this.showCompletion&&TGE.Analytics.Completion(this.reason),this.pauseGame&&TGE.Game.SetUpdateRoot(this)},_tweenIn:function(t,e,i){var a;switch(e){case"bounce":t.tweenFrom({alpha:0,duration:.1}),a={duration:1,y:-this.height/2,easing:TGE.Tween.Bounce.Out},t.tweenFrom(a);break;case"slide":a={x:-this.width/2,duration:.4,easing:TGE.Tween.Back.Out},t.tweenFrom(a);break;case"grow":a={scale:0,duration:.3,easing:TGE.Tween.Back.Out},t.tweenFrom(a);break;case"fade":a={alpha:0,duration:.5},t.tweenFrom(a);break;case"scaleInOut":a={scale:1.1*t.scaleX,rewind:!0,loop:3,easing:TGE.Tween.Quadratic.InOut},t.tweenTo(a);var o=t.addEventListener("resize",function(){t.clearTweens(),this._tweenIn(t,e),t.removeEventListener("resize",o)}.bind(this));break;default:"object"==typeof e&&(a=e,i?t.tweenTo(a):t.tweenFrom(a))}},_setupButtons:function(){for(var t=0;t<this.buttons.length;t++){var e=this.buttons[t];this._defineButton(e)}},_tweenObjects:function(){for(var t in this.tweens){var e=this.tweens[t],i=this._getTweenTarget(e.objectId),a=e.tween;i&&this._tweenIn(i,a,e.tweenTo)}},_getTweenTarget:function(t){var e=null;return"string"!=typeof t?e=this.elxDisplay:this.elxDisplay.hasObject(t)&&(e=this.elxDisplay.getObject(t)),e},_defineButton:function(t){var e,i=t.buttonId,a=t.clickThrough,o=t.name,n=t.url,r=t.callback,s=t.hideInSnapchat,l=t.message;e=i&&this.elxDisplay.hasObject(i)?this.elxDisplay.getObject(i):this.addChild((new TGE.DisplayObjectContainer).setup({layout:"aspect-fill",width:this.width,height:this.height})),s&&this.onSnapchatPlatform?e.visible=!1:("function"!=typeof r&&(a===PromoScreen.OPEN_APP_STORE?r=function(){a(o)}.bind(this):a===PromoScreen.CLICK_THROUGH?r=function(){a(o,n)}.bind(this):a===PromoScreen.TWITTER_SHARE?r=function(){a(n,l)}.bind(this):a===PromoScreen.FACEBOOK_SHARE&&(r=function(){a(n)}.bind(this))),"function"==typeof r&&this.performAction({delay:this.clickableDelay,action:function(){e.addEventListener("click",r)}.bind(this)}))},setState:function(t){this.elxDisplay.setState(t)},getObject:function(t){return this.elxDisplay.getObject(t)},getObjects:function(t){return this.elxDisplay.getObjects(t)},hasObject:function(t){return this.elxDisplay.hasObject(t)},getObjectName:function(t){return this.elxDisplay.getObjectName(t)}},extend(PromoScreen,TGE.Window);var spine,__extends=this&&this.__extends||function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(f){var y,t,_,e,i,a,b=(o.prototype.apply=function(t,e,i,a,o,n,r,s){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(i%=this.duration,0<e&&(e%=this.duration));for(var l=this.timelines,p=0,c=l.length;p<c;p++)l[p].apply(t,e,i,o,n,r,s)},o.binarySearch=function(t,e,i){void 0===i&&(i=1);var a=0,o=t.length/i-2;if(0==o)return i;for(var n=o>>>1;;){if(t[(n+1)*i]<=e?a=n+1:o=n,a==o)return(a+1)*i;n=a+o>>>1}},o.linearSearch=function(t,e,i){for(var a=0,o=t.length-i;a<=o;a+=i)if(t[a]>e)return a;return-1},o);function o(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}f.Animation=b,(t=y=f.MixBlend||(f.MixBlend={}))[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",(e=_=f.MixDirection||(f.MixDirection={}))[e.mixIn=0]="mixIn",e[e.mixOut=1]="mixOut",(a=i=f.TimelineType||(f.TimelineType={}))[a.rotate=0]="rotate",a[a.translate=1]="translate",a[a.scale=2]="scale",a[a.shear=3]="shear",a[a.attachment=4]="attachment",a[a.color=5]="color",a[a.deform=6]="deform",a[a.event=7]="event",a[a.drawOrder=8]="drawOrder",a[a.ikConstraint=9]="ikConstraint",a[a.transformConstraint=10]="transformConstraint",a[a.pathConstraintPosition=11]="pathConstraintPosition",a[a.pathConstraintSpacing=12]="pathConstraintSpacing",a[a.pathConstraintMix=13]="pathConstraintMix",a[a.twoColor=14]="twoColor";var n=(v.prototype.getFrameCount=function(){return this.curves.length/v.BEZIER_SIZE+1},v.prototype.setLinear=function(t){this.curves[t*v.BEZIER_SIZE]=v.LINEAR},v.prototype.setStepped=function(t){this.curves[t*v.BEZIER_SIZE]=v.STEPPED},v.prototype.getCurveType=function(t){var e=t*v.BEZIER_SIZE;if(e==this.curves.length)return v.LINEAR;var i=this.curves[e];return i==v.LINEAR?v.LINEAR:i==v.STEPPED?v.STEPPED:v.BEZIER},v.prototype.setCurve=function(t,e,i,a,o){var n=.03*(2*-e+a),r=.03*(2*-i+o),s=.006*(3*(e-a)+1),l=.006*(3*(i-o)+1),p=2*n+s,c=2*r+l,h=.3*e+n+.16666667*s,m=.3*i+r+.16666667*l,u=t*v.BEZIER_SIZE,d=this.curves;d[u++]=v.BEZIER;for(var g=h,f=m,y=u+v.BEZIER_SIZE-1;u<y;u+=2)d[u]=g,d[u+1]=f,h+=p,m+=c,p+=s,c+=l,g+=h,f+=m},v.prototype.getCurvePercent=function(t,e){e=f.MathUtils.clamp(e,0,1);var i=this.curves,a=t*v.BEZIER_SIZE,o=i[a];if(o==v.LINEAR)return e;if(o==v.STEPPED)return 0;for(var n=0,r=++a,s=a+v.BEZIER_SIZE-1;a<s;a+=2)if(e<=(n=i[a])){var l=void 0,p=void 0;return(p=a==r?l=0:(l=i[a-2],i[a-1]))+(i[a+1]-p)*(e-l)/(n-l)}var c=i[a-1];return c+(1-c)*(e-n)/(1-n)},v.LINEAR=0,v.STEPPED=1,v.BEZIER=2,v.BEZIER_SIZE=19,v);function v(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=f.Utils.newFloatArray((t-1)*v.BEZIER_SIZE)}f.CurveTimeline=n;var r,s=(__extends(T,r=n),T.prototype.getPropertyId=function(){return(i.rotate<<24)+this.boneIndex},T.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+T.ROTATION]=i},T.prototype.apply=function(t,e,i,a,o,n,r){var s=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<s[0])switch(n){case y.setup:return void(l.rotation=l.data.rotation);case y.first:var p=l.data.rotation-l.rotation;l.rotation+=(p-360*(16384-(16384.499999999996-p/360|0)))*o}else if(i>=s[s.length-T.ENTRIES]){var c=s[s.length+T.PREV_ROTATION];switch(n){case y.setup:l.rotation=l.data.rotation+c*o;break;case y.first:case y.replace:c+=l.data.rotation-l.rotation,c-=360*(16384-(16384.499999999996-c/360|0));case y.add:l.rotation+=c*o}}else{var h=b.binarySearch(s,i,T.ENTRIES),m=s[h+T.PREV_ROTATION],u=s[h],d=this.getCurvePercent((h>>1)-1,1-(i-u)/(s[h+T.PREV_TIME]-u)),g=m+((g=s[h+T.ROTATION]-m)-360*(16384-(16384.499999999996-g/360|0)))*d;switch(n){case y.setup:l.rotation=l.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*o;break;case y.first:case y.replace:g+=l.data.rotation-l.rotation;case y.add:l.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*o}}},T.ENTRIES=2,T.PREV_TIME=-2,T.PREV_ROTATION=-1,T.ROTATION=1,T);function T(t){var e=r.call(this,t)||this;return e.frames=f.Utils.newFloatArray(t<<1),e}f.RotateTimeline=s;var l,p=(__extends(d,l=n),d.prototype.getPropertyId=function(){return(i.translate<<24)+this.boneIndex},d.prototype.setFrame=function(t,e,i,a){t*=d.ENTRIES,this.frames[t]=e,this.frames[t+d.X]=i,this.frames[t+d.Y]=a},d.prototype.apply=function(t,e,i,a,o,n,r){var s=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<s[0])switch(n){case y.setup:return l.x=l.data.x,void(l.y=l.data.y);case y.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}else{var p,c,h,m=0,u=0;switch(i>=s[s.length-d.ENTRIES]?(m=s[s.length+d.PREV_X],u=s[s.length+d.PREV_Y]):(m=s[(p=b.binarySearch(s,i,d.ENTRIES))+d.PREV_X],u=s[p+d.PREV_Y],c=s[p],h=this.getCurvePercent(p/d.ENTRIES-1,1-(i-c)/(s[p+d.PREV_TIME]-c)),m+=(s[p+d.X]-m)*h,u+=(s[p+d.Y]-u)*h),n){case y.setup:l.x=l.data.x+m*o,l.y=l.data.y+u*o;break;case y.first:case y.replace:l.x+=(l.data.x+m-l.x)*o,l.y+=(l.data.y+u-l.y)*o;break;case y.add:l.x+=m*o,l.y+=u*o}}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_X=-2,d.PREV_Y=-1,d.X=1,d.Y=2,d);function d(t){var e=l.call(this,t)||this;return e.frames=f.Utils.newFloatArray(t*d.ENTRIES),e}f.TranslateTimeline=p;var c,h=(__extends(S,c=p),S.prototype.getPropertyId=function(){return(i.scale<<24)+this.boneIndex},S.prototype.apply=function(t,e,i,a,o,n,r){var s=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<s[0])switch(n){case y.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case y.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}else{var p,c,h,m=0,u=0;if(u=i>=s[s.length-S.ENTRIES]?(m=s[s.length+S.PREV_X]*l.data.scaleX,s[s.length+S.PREV_Y]*l.data.scaleY):(m=s[(p=b.binarySearch(s,i,S.ENTRIES))+S.PREV_X],u=s[p+S.PREV_Y],c=s[p],h=this.getCurvePercent(p/S.ENTRIES-1,1-(i-c)/(s[p+S.PREV_TIME]-c)),m=(m+(s[p+S.X]-m)*h)*l.data.scaleX,(u+(s[p+S.Y]-u)*h)*l.data.scaleY),1==o)n==y.add?(l.scaleX+=m-l.data.scaleX,l.scaleY+=u-l.data.scaleY):(l.scaleX=m,l.scaleY=u);else{var d=0,g=0;if(r==_.mixOut)switch(n){case y.setup:d=l.data.scaleX,g=l.data.scaleY,l.scaleX=d+(Math.abs(m)*f.MathUtils.signum(d)-d)*o,l.scaleY=g+(Math.abs(u)*f.MathUtils.signum(g)-g)*o;break;case y.first:case y.replace:d=l.scaleX,g=l.scaleY,l.scaleX=d+(Math.abs(m)*f.MathUtils.signum(d)-d)*o,l.scaleY=g+(Math.abs(u)*f.MathUtils.signum(g)-g)*o;break;case y.add:d=l.scaleX,g=l.scaleY,l.scaleX=d+(Math.abs(m)*f.MathUtils.signum(d)-l.data.scaleX)*o,l.scaleY=g+(Math.abs(u)*f.MathUtils.signum(g)-l.data.scaleY)*o}else switch(n){case y.setup:d=Math.abs(l.data.scaleX)*f.MathUtils.signum(m),g=Math.abs(l.data.scaleY)*f.MathUtils.signum(u),l.scaleX=d+(m-d)*o,l.scaleY=g+(u-g)*o;break;case y.first:case y.replace:d=Math.abs(l.scaleX)*f.MathUtils.signum(m),g=Math.abs(l.scaleY)*f.MathUtils.signum(u),l.scaleX=d+(m-d)*o,l.scaleY=g+(u-g)*o;break;case y.add:d=f.MathUtils.signum(m),g=f.MathUtils.signum(u),l.scaleX=Math.abs(l.scaleX)*d+(m-Math.abs(l.data.scaleX)*d)*o,l.scaleY=Math.abs(l.scaleY)*g+(u-Math.abs(l.data.scaleY)*g)*o}}}},S);function S(t){return c.call(this,t)||this}f.ScaleTimeline=h;var m,u=(__extends(g,m=p),g.prototype.getPropertyId=function(){return(i.shear<<24)+this.boneIndex},g.prototype.apply=function(t,e,i,a,o,n,r){var s=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<s[0])switch(n){case y.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case y.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}else{var p,c,h,m=0,u=0;switch(i>=s[s.length-g.ENTRIES]?(m=s[s.length+g.PREV_X],u=s[s.length+g.PREV_Y]):(m=s[(p=b.binarySearch(s,i,g.ENTRIES))+g.PREV_X],u=s[p+g.PREV_Y],c=s[p],h=this.getCurvePercent(p/g.ENTRIES-1,1-(i-c)/(s[p+g.PREV_TIME]-c)),m+=(s[p+g.X]-m)*h,u+=(s[p+g.Y]-u)*h),n){case y.setup:l.shearX=l.data.shearX+m*o,l.shearY=l.data.shearY+u*o;break;case y.first:case y.replace:l.shearX+=(l.data.shearX+m-l.shearX)*o,l.shearY+=(l.data.shearY+u-l.shearY)*o;break;case y.add:l.shearX+=m*o,l.shearY+=u*o}}},g);function g(t){return m.call(this,t)||this}f.ShearTimeline=u;var E,x=(__extends(w,E=n),w.prototype.getPropertyId=function(){return(i.color<<24)+this.slotIndex},w.prototype.setFrame=function(t,e,i){t*=w.ENTRIES,this.frames[t]=e,this.frames[t+w.A]=i},w.prototype.apply=function(t,e,i,a,o,n,r){var s=t.slots[this.slotIndex];if(s.bone.active){var l=this.frames;if(i<l[0])switch(n){case y.setup:return void s.color.setFromColor(s.data.color);case y.first:var p=s.color,c=s.data.color;p.add((c.a-p.a)*o)}else{var h,m,u,d=0;i>=l[l.length-w.ENTRIES]?d=l[l.length+w.PREV_A]:(d=l[(h=b.binarySearch(l,i,w.ENTRIES))+w.PREV_A],m=l[h],u=this.getCurvePercent(h/w.ENTRIES-1,1-(i-m)/(l[h+w.PREV_TIME]-m)),d+=(l[h+w.A]-d)*u),1==o?s.color.set(d):(p=s.color,n==y.setup&&p.setFromColor(s.data.color),p.add((d-p.a)*o))}}},w.ENTRIES=5,w.PREV_TIME=-5,w.PREV_A=-1,w.A=4,w);function w(t){var e=E.call(this,t)||this;return e.frames=f.Utils.newFloatArray(t*w.ENTRIES),e}f.ColorTimeline=x;var P=(C.prototype.getPropertyId=function(){return(i.attachment<<24)+this.slotIndex},C.prototype.getFrameCount=function(){return this.frames.length},C.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},C.prototype.apply=function(t,e,i,a,o,n,r){var s,l,p,c,h,m=t.slots[this.slotIndex];m.bone.active&&(r!=_.mixOut||n!=y.setup?i<(s=this.frames)[0]?n!=y.setup&&n!=y.first||(l=m.data.attachmentName,m.setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))):(p=0,p=i>=s[s.length-1]?s.length-1:b.binarySearch(s,i,1)-1,c=this.attachmentNames[p],t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))):(h=m.data.attachmentName,m.setAttachment(null==h?null:t.getAttachment(this.slotIndex,h))))},C);function C(t){this.frames=f.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}f.AttachmentTimeline=P;var I=(R.prototype.getPropertyId=function(){return i.event<<24},R.prototype.getFrameCount=function(){return this.frames.length},R.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},R.prototype.apply=function(t,e,i,a,o,n,r){if(null!=a){var s=this.frames,l=this.frames.length;if(i<e)this.apply(t,e,Number.MAX_VALUE,a,o,n,r),e=-1;else if(e>=s[l-1])return;if(!(i<s[0])){var p=0;if(e<s[0])p=0;else for(var c=s[p=b.binarySearch(s,e)];0<p&&s[p-1]==c;)p--;for(;p<l&&i>=s[p];p++)a.push(this.events[p])}}},R);function R(t){this.frames=f.Utils.newFloatArray(t),this.events=new Array(t)}f.EventTimeline=I;var G=(A.prototype.getPropertyId=function(){return i.drawOrder<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},A.prototype.apply=function(t,e,i,a,o,n,r){var s=t.drawOrder,l=t.slots;if(r!=_.mixOut||n!=y.setup){var p=this.frames;if(i<p[0])n!=y.setup&&n!=y.first||f.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var c=0,c=i>=p[p.length-1]?p.length-1:b.binarySearch(p,i)-1,h=this.drawOrders[c];if(null==h)f.Utils.arrayCopy(l,0,s,0,l.length);else for(var m=0,u=h.length;m<u;m++)s[m]=l[h[m]]}}else f.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},A);function A(t){this.frames=f.Utils.newFloatArray(t),this.drawOrders=new Array(t)}f.DrawOrderTimeline=G;var k,D=(__extends(O,k=n),O.prototype.getPropertyId=function(){return(i.ikConstraint<<24)+this.ikConstraintIndex},O.prototype.setFrame=function(t,e,i,a,o,n,r){t*=O.ENTRIES,this.frames[t]=e,this.frames[t+O.MIX]=i,this.frames[t+O.SOFTNESS]=a,this.frames[t+O.BEND_DIRECTION]=o,this.frames[t+O.COMPRESS]=n?1:0,this.frames[t+O.STRETCH]=r?1:0},O.prototype.apply=function(t,e,i,a,o,n,r){var s,l,p,c,h,m=this.frames,u=t.ikConstraints[this.ikConstraintIndex];if(u.active)if(i<m[0])switch(n){case y.setup:return u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,void(u.stretch=u.data.stretch);case y.first:u.mix+=(u.data.mix-u.mix)*o,u.softness+=(u.data.softness-u.softness)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}else i>=m[m.length-O.ENTRIES]?n==y.setup?(u.mix=u.data.mix+(m[m.length+O.PREV_MIX]-u.data.mix)*o,u.softness=u.data.softness+(m[m.length+O.PREV_SOFTNESS]-u.data.softness)*o,r==_.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=m[m.length+O.PREV_BEND_DIRECTION],u.compress=0!=m[m.length+O.PREV_COMPRESS],u.stretch=0!=m[m.length+O.PREV_STRETCH])):(u.mix+=(m[m.length+O.PREV_MIX]-u.mix)*o,u.softness+=(m[m.length+O.PREV_SOFTNESS]-u.softness)*o,r==_.mixIn&&(u.bendDirection=m[m.length+O.PREV_BEND_DIRECTION],u.compress=0!=m[m.length+O.PREV_COMPRESS],u.stretch=0!=m[m.length+O.PREV_STRETCH])):(l=m[(s=b.binarySearch(m,i,O.ENTRIES))+O.PREV_MIX],p=m[s+O.PREV_SOFTNESS],c=m[s],h=this.getCurvePercent(s/O.ENTRIES-1,1-(i-c)/(m[s+O.PREV_TIME]-c)),n==y.setup?(u.mix=u.data.mix+(l+(m[s+O.MIX]-l)*h-u.data.mix)*o,u.softness=u.data.softness+(p+(m[s+O.SOFTNESS]-p)*h-u.data.softness)*o,r==_.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=m[s+O.PREV_BEND_DIRECTION],u.compress=0!=m[s+O.PREV_COMPRESS],u.stretch=0!=m[s+O.PREV_STRETCH])):(u.mix+=(l+(m[s+O.MIX]-l)*h-u.mix)*o,u.softness+=(p+(m[s+O.SOFTNESS]-p)*h-u.softness)*o,r==_.mixIn&&(u.bendDirection=m[s+O.PREV_BEND_DIRECTION],u.compress=0!=m[s+O.PREV_COMPRESS],u.stretch=0!=m[s+O.PREV_STRETCH])))},O.ENTRIES=6,O.PREV_TIME=-6,O.PREV_MIX=-5,O.PREV_SOFTNESS=-4,O.PREV_BEND_DIRECTION=-3,O.PREV_COMPRESS=-2,O.PREV_STRETCH=-1,O.MIX=1,O.SOFTNESS=2,O.BEND_DIRECTION=3,O.COMPRESS=4,O.STRETCH=5,O);function O(t){var e=k.call(this,t)||this;return e.frames=f.Utils.newFloatArray(t*O.ENTRIES),e}f.IkConstraintTimeline=D}(spine=spine||{}),function(x){var t=(w.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,a=e.length;i<a;i++){var o=e[i];if(null!=o){o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast;var n=t*o.timeScale;if(0<o.delay){if(o.delay-=n,0<o.delay)continue;n=-o.delay,o.delay=0}var r=o.next;if(null!=r){var s=o.trackLast-r.delay;if(0<=s){for(r.delay=0,r.trackTime=0==o.timeScale?0:(s/o.timeScale+t)*r.timeScale,o.trackTime+=n,this.setCurrent(i,r,!0);null!=r.mixingFrom;)r.mixTime+=t,r=r.mixingFrom;continue}}else if(o.trackLast>=o.trackEnd&&null==o.mixingFrom){e[i]=null,this.queue.end(o),this.disposeNext(o);continue}if(null!=o.mixingFrom&&this.updateMixingFrom(o,t)){var l=o.mixingFrom;for((o.mixingFrom=null)!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}o.trackTime+=n}}this.queue.drain()},w.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var a=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),a):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},w.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,i=this.tracks,a=!1,o=0,n=i.length;o<n;o++){var r=i[o];if(!(null==r||0<r.delay)){a=!0;var s=0==o?x.MixBlend.first:r.mixBlend,l=r.alpha;null!=r.mixingFrom?l*=this.applyMixingFrom(r,t,s):r.trackTime>=r.trackEnd&&null==r.next&&(l=0);var p=r.animationLast,c=r.getAnimationTime(),h=r.animation.timelines.length,m=r.animation.timelines;if(0==o&&1==l||s==x.MixBlend.add)for(var u=0;u<h;u++)x.Utils.webkit602BugfixHelper(l,s),m[u].apply(t,p,c,e,l,s,x.MixDirection.mixIn);else{var d=r.timelineMode,g=0==r.timelinesRotation.length;g&&x.Utils.setArraySize(r.timelinesRotation,h<<1,null);for(var f=r.timelinesRotation,u=0;u<h;u++){var y=m[u],_=(d[u]&w.NOT_LAST-1)==w.SUBSEQUENT?s:x.MixBlend.setup;y instanceof x.RotateTimeline?this.applyRotateTimeline(y,t,c,l,_,f,u<<1,g):(x.Utils.webkit602BugfixHelper(l,s),y.apply(t,p,c,e,l,_,x.MixDirection.mixIn))}}this.queueEvents(r,c),e.length=0,r.nextAnimationLast=c,r.nextTrackLast=r.trackTime}}return this.queue.drain(),a},w.prototype.applyMixingFrom=function(t,e,i){var a=t.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,e,i);var o=0;0==t.mixDuration?(o=1,i==x.MixBlend.first&&(i=x.MixBlend.setup)):(1<(o=t.mixTime/t.mixDuration)&&(o=1),i!=x.MixBlend.first&&(i=a.mixBlend));var n=o<a.eventThreshold?this.events:null,r=o<a.attachmentThreshold,s=o<a.drawOrderThreshold,l=a.animationLast,p=a.getAnimationTime(),c=a.animation.timelines.length,h=a.animation.timelines,m=a.alpha*t.interruptAlpha,u=m*(1-o);if(i==x.MixBlend.add)for(var d=0;d<c;d++)h[d].apply(e,l,p,n,u,i,x.MixDirection.mixOut);else{var g=a.timelineMode,f=a.timelineHoldMix,y=0==a.timelinesRotation.length;y&&x.Utils.setArraySize(a.timelinesRotation,c<<1,null);for(var _=a.timelinesRotation,d=a.totalAlpha=0;d<c;d++){var b=h[d],v=x.MixDirection.mixOut,T=void 0,S=0;switch(g[d]&w.NOT_LAST-1){case w.SUBSEQUENT:if(!r&&b instanceof x.AttachmentTimeline){if((g[d]&w.NOT_LAST)==w.NOT_LAST)continue;i=x.MixBlend.setup}if(!s&&b instanceof x.DrawOrderTimeline)continue;T=i,S=u;break;case w.FIRST:T=x.MixBlend.setup,S=u;break;case w.HOLD:T=x.MixBlend.setup,S=m;break;default:T=x.MixBlend.setup;var E=f[d],S=m*Math.max(0,1-E.mixTime/E.mixDuration)}a.totalAlpha+=S,b instanceof x.RotateTimeline?this.applyRotateTimeline(b,e,p,S,T,_,d<<1,y):(x.Utils.webkit602BugfixHelper(S,i),T==x.MixBlend.setup&&(b instanceof x.AttachmentTimeline?!r&&(g[d]&w.NOT_LAST)!=w.NOT_LAST||(v=x.MixDirection.mixIn):b instanceof x.DrawOrderTimeline&&s&&(v=x.MixDirection.mixIn)),b.apply(e,l,p,n,S,T,v))}}return 0<t.mixDuration&&this.queueEvents(a,p),this.events.length=0,a.nextAnimationLast=p,a.nextTrackLast=a.trackTime,o},w.prototype.applyRotateTimeline=function(t,e,i,a,o,n,r,s){if(s&&(n[r]=0),1!=a){var l=t,p=l.frames,c=e.bones[l.boneIndex];if(c.active){var h=0,m=0;if(i<p[0])switch(o){case x.MixBlend.setup:c.rotation=c.data.rotation;default:return;case x.MixBlend.first:h=c.rotation,m=c.data.rotation}else{var u,d,g,f,h=o==x.MixBlend.setup?c.data.rotation:c.rotation;i>=p[p.length-x.RotateTimeline.ENTRIES]?m=c.data.rotation+p[p.length+x.RotateTimeline.PREV_ROTATION]:(d=p[(u=x.Animation.binarySearch(p,i,x.RotateTimeline.ENTRIES))+x.RotateTimeline.PREV_ROTATION],g=p[u],f=l.getCurvePercent((u>>1)-1,1-(i-g)/(p[u+x.RotateTimeline.PREV_TIME]-g)),m=p[u+x.RotateTimeline.ROTATION]-d,m=d+(m-=360*(16384-(16384.499999999996-m/360|0)))*f+c.data.rotation,m-=360*(16384-(16384.499999999996-m/360|0)))}var y,_,b,v,T=0,S=m-h;0==(S-=360*(16384-(16384.499999999996-S/360|0)))?T=n[r]:(_=y=0,_=s?(y=0,S):(y=n[r],n[r+1]),b=0<S,v=0<=y,x.MathUtils.signum(_)!=x.MathUtils.signum(S)&&Math.abs(_)<=90&&(180<Math.abs(y)&&(y+=360*x.MathUtils.signum(y)),v=b),T=S+y-y%360,v!=b&&(T+=360*x.MathUtils.signum(y)),n[r]=T),n[r+1]=S,h+=T*a,c.rotation=h-360*(16384-(16384.499999999996-h/360|0))}}else t.apply(e,0,i,null,1,o,x.MixDirection.mixIn)},w.prototype.queueEvents=function(t,e){for(var i=t.animationStart,a=t.animationEnd,o=a-i,n=t.trackLast%o,r=this.events,s=0,l=r.length;s<l;s++){var p=r[s];if(p.time<n)break;p.time>a||this.queue.event(t,p)}for((t.loop?0==o||n>t.trackTime%o:a<=e&&t.animationLast<a)&&this.queue.complete(t);s<l;s++){r[s].time<i||this.queue.event(t,r[s])}},w.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},w.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var a=i.mixingFrom;if(null==a)break;this.queue.end(a),i.mixingFrom=null,i.mixingTo=null,i=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},w.prototype.setCurrent=function(t,e,i){var a=this.expandToIndex(t);this.tracks[t]=e,null!=a&&(i&&this.queue.interrupt(a),((e.mixingFrom=a).mixingTo=e).mixTime=0,null!=a.mixingFrom&&0<a.mixDuration&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},w.prototype.setAnimation=function(t,e,i){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,i)},w.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var a=!0,o=this.expandToIndex(t);null!=o&&(-1==o.nextTrackLast?(this.tracks[t]=o.mixingFrom,this.queue.interrupt(o),this.queue.end(o),this.disposeNext(o),o=o.mixingFrom,a=!1):this.disposeNext(o));var n=this.trackEntry(t,e,i,o);return this.setCurrent(t,n,a),this.queue.drain(),n},w.prototype.addAnimation=function(t,e,i,a){var o=this.data.skeletonData.findAnimation(e);if(null==o)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,o,i,a)},w.prototype.addAnimationWith=function(t,e,i,a){if(null==e)throw new Error("animation cannot be null.");var o=this.expandToIndex(t);if(null!=o)for(;null!=o.next;)o=o.next;var n,r=this.trackEntry(t,e,i,o);return null==o?(this.setCurrent(t,r,!0),this.queue.drain()):(o.next=r,a<=0&&(0!=(n=o.animationEnd-o.animationStart)?(o.loop?a+=n*(1+(o.trackTime/n|0)):a+=Math.max(n,o.trackTime),a-=this.data.getMix(o.animation,e)):a=o.trackTime)),r.delay=a,r},w.prototype.setEmptyAnimation=function(t,e){var i=this.setAnimationWith(t,w.emptyAnimation,!1);return i.mixDuration=e,i.trackEnd=e,i},w.prototype.addEmptyAnimation=function(t,e,i){i<=0&&(i-=e);var a=this.addAnimationWith(t,w.emptyAnimation,!1,i);return a.mixDuration=e,a.trackEnd=e,a},w.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,a=this.tracks.length;i<a;i++){var o=this.tracks[i];null!=o&&this.setEmptyAnimation(o.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},w.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(x.Utils.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},w.prototype.trackEntry=function(t,e,i,a){var o=this.trackEntryPool.obtain();return o.trackIndex=t,o.animation=e,o.loop=i,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=e.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==a?0:this.data.getMix(a.animation,e),o},w.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},w.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){if(null!=(i=this.tracks[t])){for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;null!=i.mixingFrom&&i.mixBlend==x.MixBlend.add||this.computeHold(i),null!=(i=i.mixingTo););}}this.propertyIDs.clear();for(t=this.tracks.length-1;0<=t;t--)for(var i=this.tracks[t];null!=i;)this.computeNotLast(i),i=i.mixingFrom},w.prototype.computeHold=function(t){var e=t.mixingTo,i=t.animation.timelines,a=t.animation.timelines.length,o=x.Utils.setArraySize(t.timelineMode,a);t.timelineHoldMix.length=0;var n=x.Utils.setArraySize(t.timelineHoldMix,a),r=this.propertyIDs;if(null!=e&&e.holdPrevious)for(var s=0;s<a;s++)r.add(i[s].getPropertyId()),o[s]=w.HOLD;else t:for(s=0;s<a;s++){var l=i[s],p=l.getPropertyId();if(r.add(p))if(null==e||l instanceof x.AttachmentTimeline||l instanceof x.DrawOrderTimeline||l instanceof x.EventTimeline||!this.hasTimeline(e,p))o[s]=w.FIRST;else{for(var c=e.mixingTo;null!=c;c=c.mixingTo)if(!this.hasTimeline(c,p)){if(0<t.mixDuration){o[s]=w.HOLD_MIX,n[s]=c;continue t}break}o[s]=w.HOLD}else o[s]=w.SUBSEQUENT}},w.prototype.computeNotLast=function(t){for(var e,i=t.animation.timelines,a=t.animation.timelines.length,o=t.timelineMode,n=this.propertyIDs,r=0;r<a;r++){i[r]instanceof x.AttachmentTimeline&&(e=i[r],n.add(e.slotIndex)||(o[r]|=w.NOT_LAST))}},w.prototype.hasTimeline=function(t,e){for(var i=t.animation.timelines,a=0,o=i.length;a<o;a++)if(i[a].getPropertyId()==e)return!0;return!1},w.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},w.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},w.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);0<=e&&this.listeners.splice(e,1)},w.prototype.clearListeners=function(){this.listeners.length=0},w.prototype.clearListenerNotifications=function(){this.queue.clear()},w.emptyAnimation=new x.Animation("<empty>",[],0),w.SUBSEQUENT=0,w.FIRST=1,w.HOLD=2,w.HOLD_MIX=3,w.NOT_LAST=4,w);function w(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new o(this),this.propertyIDs=new x.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new x.Pool(function(){return new e}),this.data=t}x.AnimationState=t;var e=(i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},i);function i(){this.mixBlend=x.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}x.TrackEntry=e;var s,a,o=(n.prototype.start=function(t){this.objects.push(s.start),this.objects.push(t),this.animState.animationsChanged=!0},n.prototype.interrupt=function(t){this.objects.push(s.interrupt),this.objects.push(t)},n.prototype.end=function(t){this.objects.push(s.end),this.objects.push(t),this.animState.animationsChanged=!0},n.prototype.dispose=function(t){this.objects.push(s.dispose),this.objects.push(t)},n.prototype.complete=function(t){this.objects.push(s.complete),this.objects.push(t)},n.prototype.event=function(t,e){this.objects.push(s.event),this.objects.push(t),this.objects.push(e)},n.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var a=t[i],o=t[i+1];switch(a){case s.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var n=0;n<e.length;n++)e[n].start&&e[n].start(o);break;case s.interrupt:null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o);for(n=0;n<e.length;n++)e[n].interrupt&&e[n].interrupt(o);break;case s.end:null!=o.listener&&o.listener.end&&o.listener.end(o);for(n=0;n<e.length;n++)e[n].end&&e[n].end(o);case s.dispose:null!=o.listener&&o.listener.dispose&&o.listener.dispose(o);for(n=0;n<e.length;n++)e[n].dispose&&e[n].dispose(o);this.animState.trackEntryPool.free(o);break;case s.complete:null!=o.listener&&o.listener.complete&&o.listener.complete(o);for(n=0;n<e.length;n++)e[n].complete&&e[n].complete(o);break;case s.event:var r=t[2+i++];null!=o.listener&&o.listener.event&&o.listener.event(o,r);for(n=0;n<e.length;n++)e[n].event&&e[n].event(o,r)}}this.clear(),this.drainDisabled=!1}},n.prototype.clear=function(){this.objects.length=0},n);function n(t){this.objects=[],this.drainDisabled=!1,this.animState=t}x.EventQueue=o,(a=s=x.EventType||(x.EventType={}))[a.start=0]="start",a[a.interrupt=1]="interrupt",a[a.end=2]="end",a[a.dispose=3]="dispose",a[a.complete=4]="complete",a[a.event=5]="event";var r=(l.prototype.start=function(t){},l.prototype.interrupt=function(t){},l.prototype.end=function(t){},l.prototype.dispose=function(t){},l.prototype.complete=function(t){},l.prototype.event=function(t,e){},l);function l(){}x.AnimationStateAdapter2=r}(spine=spine||{}),function(t){var e=(i.prototype.setMix=function(t,e,i){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);var o=this.skeletonData.findAnimation(e);if(null==o)throw new Error("Animation not found: "+e);this.setMixWith(a,o,i)},i.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=i},i.prototype.getMix=function(t,e){var i=t.name+"."+e.name,a=this.animationToMixTime[i];return void 0===a?this.defaultMix:a},i);function i(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}t.AnimationStateData=e}(spine=spine||{}),function(c){var t=(e.prototype.newRegionAttachment=function(t,e,i,a){var o=e.replace(/\//g,"_"),n=TGE.AssetManager.Get(o+"_"+a),r=(n.spriteSheet,"number"==typeof n.drawWidth?n.drawWidth:n.width),s="number"==typeof n.drawHeight?n.drawHeight:n.height,l=new c.TextureRegion;if(l.uid=a,l.name=e,l.x=n.x,l.y=n.y,l.width=r,l.height=s,l.rotate=!1,l.offsetX="number"==typeof n.offsetX?n.offsetX:0,l.offsetY="number"==typeof n.offsetY?n.offsetY:0,l.originalWidth=n.width,l.originalHeight=n.height,null==l)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");l.renderObject=l;var p=new c.RegionAttachment(e);return p.setRegion(l),p},e.prototype.newBoundingBoxAttachment=function(t,e){return new c.BoundingBoxAttachment(e)},e.prototype.newPointAttachment=function(t,e){return new c.PointAttachment(e)},e);function e(){}c.AtlasAttachmentLoader=t}(spine=spine||{}),function(A){var t=(e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,e,i,a,o,n,r){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=a,this.ascaleY=o,this.ashearX=n,this.ashearY=r,this.appliedValid=!0;var s=this.parent;if(null==s){var l=this.skeleton,p=i+90+r,c=l.scaleX,h=l.scaleY;return this.a=A.MathUtils.cosDeg(i+n)*a*c,this.b=A.MathUtils.cosDeg(p)*o*c,this.c=A.MathUtils.sinDeg(i+n)*a*h,this.d=A.MathUtils.sinDeg(p)*o*h,this.worldX=t*c+l.x,void(this.worldY=e*h+l.y)}var m=s.a,u=s.b,d=s.c,g=s.d;switch(this.worldX=m*t+u*e+s.worldX,this.worldY=d*t+g*e+s.worldY,this.data.transformMode){case A.TransformMode.Normal:var p=i+90+r,f=A.MathUtils.cosDeg(i+n)*a,y=A.MathUtils.cosDeg(p)*o,_=A.MathUtils.sinDeg(i+n)*a,b=A.MathUtils.sinDeg(p)*o;return this.a=m*f+u*_,this.b=m*y+u*b,this.c=d*f+g*_,void(this.d=d*y+g*b);case A.TransformMode.OnlyTranslation:p=i+90+r;this.a=A.MathUtils.cosDeg(i+n)*a,this.b=A.MathUtils.cosDeg(p)*o,this.c=A.MathUtils.sinDeg(i+n)*a,this.d=A.MathUtils.sinDeg(p)*o;break;case A.TransformMode.NoRotationOrReflection:var v=0,T=i+n-(v=1e-4<(E=m*m+d*d)?(u=d*(E=Math.abs(m*g-u*d)/E),g=m*E,Math.atan2(d,m)*A.MathUtils.radDeg):(d=m=0,90-Math.atan2(g,u)*A.MathUtils.radDeg)),S=i+r-v+90,f=A.MathUtils.cosDeg(T)*a,y=A.MathUtils.cosDeg(S)*o,_=A.MathUtils.sinDeg(T)*a,b=A.MathUtils.sinDeg(S)*o;this.a=m*f-u*_,this.b=m*y-u*b,this.c=d*f+g*_,this.d=d*y+g*b;break;case A.TransformMode.NoScale:case A.TransformMode.NoScaleOrReflection:var E,x=A.MathUtils.cosDeg(i),w=A.MathUtils.sinDeg(i),P=(m*x+u*w)/this.skeleton.scaleX,C=(d*x+g*w)/this.skeleton.scaleY;1e-5<(E=Math.sqrt(P*P+C*C))&&(E=1/E),P*=E,C*=E,E=Math.sqrt(P*P+C*C),this.data.transformMode==A.TransformMode.NoScale&&m*g-u*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(E=-E);var I=Math.PI/2+Math.atan2(C,P),R=Math.cos(I)*E,G=Math.sin(I)*E,f=A.MathUtils.cosDeg(n)*a,y=A.MathUtils.cosDeg(90+r)*o,_=A.MathUtils.sinDeg(n)*a,b=A.MathUtils.sinDeg(90+r)*o;this.a=P*f+R*_,this.b=P*y+R*b,this.c=C*f+G*_,this.d=C*y+G*b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*A.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*A.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent;if(null==t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*A.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*A.MathUtils.radDeg);var e=t.a,i=t.b,a=t.c,o=t.d,n=1/(e*o-i*a),r=this.worldX-t.worldX,s=this.worldY-t.worldY;this.ax=r*o*n-s*i*n,this.ay=s*e*n-r*a*n;var l,p=n*o,c=n*e,h=n*i,m=n*a,u=p*this.a-h*this.c,d=p*this.b-h*this.d,g=c*this.c-m*this.a,f=c*this.d-m*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(u*u+g*g),1e-4<this.ascaleX?(l=u*f-d*g,this.ascaleY=l/this.ascaleX,this.ashearY=Math.atan2(u*d+g*f,l)*A.MathUtils.radDeg,this.arotation=Math.atan2(g,u)*A.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,d)*A.MathUtils.radDeg)},e.prototype.worldToLocal=function(t){var e=this.a,i=this.b,a=this.c,o=this.d,n=1/(e*o-i*a),r=t.x-this.worldX,s=t.y-this.worldY;return t.x=r*o*n-s*i*n,t.y=s*e*n-r*a*n,t},e.prototype.localToWorld=function(t){var e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(t){var e=A.MathUtils.sinDeg(t),i=A.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*A.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=A.MathUtils.sinDeg(t),i=A.MathUtils.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*A.MathUtils.radDeg},e.prototype.rotateWorld=function(t){var e=this.a,i=this.b,a=this.c,o=this.d,n=A.MathUtils.cosDeg(t),r=A.MathUtils.sinDeg(t);this.a=n*e-r*a,this.b=n*i-r*o,this.c=r*e+n*a,this.d=r*i+n*o,this.appliedValid=!1},e);function e(t,e,i){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}A.Bone=t}(spine=spine||{}),function(a){function t(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=o.Normal,this.skinRequired=!1,this.color=new a.Alpha,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}var o,e;a.BoneData=t,(e=o=a.TransformMode||(a.TransformMode={}))[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine=spine||{}),(spine||(spine={})).ConstraintData=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i},(spine||(spine={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(spine||(spine={})).EventData=function(t){this.name=t},function(lt){var t=(e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(t,e,i,a,o,n,r){t.appliedValid||t.updateAppliedTransform();var s=t.parent,l=1/(s.a*s.d-s.b*s.c),p=e-s.worldX,c=i-s.worldY,h=(p*s.d-c*s.b)*l-t.ax,m=(c*s.a-p*s.c)*l-t.ay,u=Math.atan2(m,h)*lt.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(u+=180),180<u?u-=360:u<-180&&(u+=360);var d,g,f,y=t.ascaleX,_=t.ascaleY;(a||o)&&(d=t.data.length*y,g=Math.sqrt(h*h+m*m),(a&&g<d||o&&d<g&&1e-4<d)&&(y*=f=(g/d-1)*r+1,n&&(_*=f))),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*r,y,_,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,e,i,a,o,n,r,s){if(0!=s){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var l=t.ax,p=t.ay,c=t.ascaleX,h=c,m=t.ascaleY,u=e.ascaleX,d=0,g=0,f=0,f=c<0?(c=-c,d=180,-1):(d=0,1);m<0&&(m=-m,f=-f),g=u<0?(u=-u,180):0;var y=e.ax,_=0,b=0,v=0,T=t.a,S=t.b,E=t.c,x=t.d,w=Math.abs(c-m)<=1e-4,v=w?(b=T*y+S*(_=e.ay)+t.worldX,E*y+x*_+t.worldY):(_=0,b=T*y+t.worldX,E*y+t.worldY),P=t.parent,T=P.a,S=P.b;E=P.c;var C,I=1/(T*(x=P.d)-S*E),R=b-P.worldX,G=v-P.worldY,A=(R*x-G*S)*I-l,k=(G*T-R*E)*I-p,D=Math.sqrt(A*A+k*k),O=e.data.length*u;if(D<1e-4)return this.apply1(t,i,a,!1,n,!1,s),void e.updateWorldTransformWith(y,_,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var L,M,N,F=((R=i-P.worldX)*x-(G=a-P.worldY)*S)*I-l,B=(G*T-R*E)*I-p,H=F*F+B*B;0!=r&&(r*=c*(u+1)/2,0<(M=(L=Math.sqrt(H))-D-O*c+r)&&(H=(F-=(N=(M-r*(1-(N=Math.min(1,M/(2*r))-1)*N))/L)*F)*F+(B-=N*B)*B));t:if(w){var X=(H-D*D-(O*=c)*O)/(2*D*O);X<-1?X=-1:1<X&&(X=1,n&&(h*=(Math.sqrt(H)/(D+O)-1)*s+1)),C=Math.acos(X)*o,T=D+O*X,S=O*Math.sin(C),nt=Math.atan2(B*T-F*S,F*T+B*S)}else{var j=(T=c*O)*T,V=(S=m*O)*S,W=Math.atan2(B,F),Y=-2*V*D,z=V-j;if(0<=(x=Y*Y-4*z*(E=V*D*D+j*H-j*V))){var U=Math.sqrt(x);Y<0&&(U=-U);var q=(U=-(Y+U)/2)/z,Q=E/U,Z=Math.abs(q)<Math.abs(Q)?q:Q;if(Z*Z<=H){G=Math.sqrt(H-Z*Z)*o,nt=W-Math.atan2(G,Z),C=Math.atan2(G/m,(Z-D)/c);break t}}var K=lt.MathUtils.PI,J=D-T,$=J*J,tt=0,et=0,it=D+T,at=it*it,ot=0;-1<=(E=-T*D/(j-V))&&E<=1&&(E=Math.acos(E),(x=(R=T*Math.cos(E)+D)*R+(G=S*Math.sin(E))*G)<$&&(K=E,$=x,J=R,tt=G),at<x&&(et=E,at=x,it=R,ot=G)),C=H<=($+at)/2?(nt=W-Math.atan2(tt*o,J),K*o):(nt=W-Math.atan2(ot*o,it),et*o)}var nt,rt=Math.atan2(_,y)*f,st=t.arotation;180<(nt=(nt-rt)*lt.MathUtils.radDeg+d-st)?nt-=360:nt<-180&&(nt+=360),t.updateWorldTransformWith(l,p,st+nt*s,h,t.ascaleY,0,0),st=e.arotation,180<(C=((C+rt)*lt.MathUtils.radDeg-e.ashearX)*f+g-st)?C-=360:C<-180&&(C+=360),e.updateWorldTransformWith(y,_,st+C*s,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},e);function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}lt.IkConstraint=t}(spine=spine||{}),function(t){var i,e=(i=t.ConstraintData,__extends(a,i),a);function a(t){var e=i.call(this,t,0,!1)||this;return e.bones=new Array,e.bendDirection=1,e.compress=!1,e.stretch=!1,e.uniform=!1,e.mix=1,e.softness=0,e}t.IkConstraintData=e}(spine=spine||{}),function(y){var t=(e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++){(o=t[e]).sorted=o.data.skinRequired,o.active=!o.sorted}if(null!=this.skin)for(var a=this.skin.bones,e=0,i=this.skin.bones.length;e<i;e++)for(var o=this.bones[a[e].index];o.sorted=!1,o.active=!0,null!=(o=o.parent););var n=this.ikConstraints,r=n.length,s=r;t:for(e=0;e<s;e++)for(var l=0;l<r;l++){var p=n[l];if(p.data.order==e){this.sortIkConstraint(p);continue t}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e,i,a,o;t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&y.Utils.contains(this.skin.constraints,t.data,!0)),t.active&&(e=t.target,this.sortBone(e),a=(i=t.bones)[0],this.sortBone(a),1<i.length&&(o=i[i.length-1],-1<this._updateCache.indexOf(o)||this.updateCacheReset.push(o)),this._updateCache.push(t),this.sortReset(a.children),i[i.length-1].sorted=!0)},e.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var o=this._updateCache,e=0,i=o.length;e<i;e++)o[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var a=this.ikConstraints,e=0,i=a.length;e<i;e++){var o=a[e];o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;y.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,a=e.length;i<a;i++){var o,n=e[i],r=n.data.attachmentName;null==r||null!=(o=t.getAttachment(i,r))&&n.setAttachment(o)}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,a=0,o=i.length;a<o;a++){var n=i[a];if(n.data.name==t){var r=null;if(null!=e&&null==(r=this.getAttachment(a,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void n.setAttachment(r)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,a=e.length;i<a;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.getBounds=function(t,e,i){if(void 0===i&&(i=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var a=this.drawOrder,o=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=0,p=a.length;l<p;l++){var c=a[l];if(c.bone.active){var h=null,m=c.getAttachment();if(m instanceof y.RegionAttachment&&(h=y.Utils.setArraySize(i,8,0),m.computeWorldVertices(c.bone,h,0,2)),null!=h)for(var u=0,d=h.length;u<d;u+=2)var g=h[u],f=h[u+1],o=Math.min(o,g),n=Math.min(n,f),r=Math.max(r,g),s=Math.max(s,f)}}t.set(o,n),e.set(r-o,s-n)},e.prototype.update=function(t){this.time+=t},e);function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i,a=t.bones[e],o=void 0;null==a.parent?o=new y.Bone(a,this,null):(i=this.bones[a.parent.index],o=new y.Bone(a,this,i),i.children.push(o)),this.bones.push(o)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var n=t.slots[e],o=this.bones[n.boneData.index],r=new y.Slot(n,o);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new y.IkConstraint(s,this))}this.color=new y.Alpha(1),this.updateCache()}y.Skeleton=t}(spine=spine||{}),function(m){var t=(e.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,a=this.polygons,o=this.polygonPool,n=t.slots,r=n.length;i.length=0,o.freeAll(a);for(var s=a.length=0;s<r;s++){var l,p,c,h=n[s];h.bone.active&&((l=h.getAttachment())instanceof m.BoundingBoxAttachment&&(p=l,i.push(p),(c=o.obtain()).length!=p.worldVerticesLength&&(c=m.Utils.newFloatArray(p.worldVerticesLength)),a.push(c),p.computeWorldVertices(h,0,p.worldVerticesLength,c,0,2)))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=this.polygons,n=0,r=o.length;n<r;n++)for(var s=o[n],l=s,p=0,c=s.length;p<c;p+=2)var h=l[p],m=l[p+1],t=Math.min(t,h),e=Math.min(e,m),i=Math.max(i,h),a=Math.max(a,m);this.minX=t,this.minY=e,this.maxX=i,this.maxY=a},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e);function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new m.Pool(function(){return m.Utils.newFloatArray(16)})}m.SkeletonBounds=t}(spine=spine||{}),function(t){var e=(i.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,a=e.length;i<a;i++)if(e[i].name==t)return i;return-1},i.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,a=e.length;i<a;i++)if(e[i].name==t)return i;return-1},i.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,a=e.length;i<a;i++){var o=e[i];if(o.name==t)return o}return null},i);function i(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.fps=0}t.SkeletonData=e}(spine=spine||{}),function(B){var t=(k.prototype.readSkeletonData=function(t,e){var i=this.scale,a=new B.SkeletonData,o="string"==typeof t?JSON.parse(t):t,n=o.skeleton;if(null!=n&&(a.hash=n.hash,a.version=n.spine,a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height,a.fps=n.fps,a.imagesPath=n.images),o.bones)for(var r=0;r<o.bones.length;r++){var s=o.bones[r],l=null,p=this.getValue(s,"parent",null);if(null!=p&&null==(l=a.findBone(p)))throw new Error("Parent bone not found: "+p);(u=new B.BoneData(a.bones.length,s.name,l)).length=this.getValue(s,"length",0)*i,u.x=this.getValue(s,"x",0)*i,u.y=this.getValue(s,"y",0)*i,u.rotation=this.getValue(s,"rotation",0),u.scaleX=this.getValue(s,"scaleX",1),u.scaleY=this.getValue(s,"scaleY",1),u.shearX=this.getValue(s,"shearX",0),u.shearY=this.getValue(s,"shearY",0),u.transformMode=k.transformModeFromString(this.getValue(s,"transform","normal")),u.skinRequired=this.getValue(s,"skin",!1),a.bones.push(u)}if(o.slots)for(r=0;r<o.slots.length;r++){var c=(P=o.slots[r]).name,h=P.bone,m=a.findBone(h);if(null==m)throw new Error("Slot bone not found: "+h);var u=new B.SlotData(a.slots.length,c,m),d=this.getValue(P,"color",null);null!=d&&u.color.setFromString(d);var g=this.getValue(P,"dark",null);null!=g&&(u.darkColor=new B.Alpha(1),u.darkColor.setFromString(g)),u.attachmentName=this.getValue(P,"attachment",null),a.slots.push(u)}if(o.ik)for(r=0;r<o.ik.length;r++){var f=o.ik[r];(u=new B.IkConstraintData(f.name)).order=this.getValue(f,"order",0),u.skinRequired=this.getValue(f,"skin",!1);for(var y=0;y<f.bones.length;y++){h=f.bones[y];if(null==(T=a.findBone(h)))throw new Error("IK bone not found: "+h);u.bones.push(T)}var _=f.target;if(u.target=a.findBone(_),null==u.target)throw new Error("IK target bone not found: "+_);u.mix=this.getValue(f,"mix",1),u.softness=this.getValue(f,"softness",0)*i,u.bendDirection=this.getValue(f,"bendPositive",!0)?1:-1,u.compress=this.getValue(f,"compress",!1),u.stretch=this.getValue(f,"stretch",!1),u.uniform=this.getValue(f,"uniform",!1),a.ikConstraints.push(u)}if(o.skins)for(r=0;r<o.skins.length;r++){var b=o.skins[r],v=new B.Skin(b.name);if(b.bones)for(var T,S=0;S<b.bones.length;S++){if(null==(T=a.findBone(b.bones[S])))throw new Error("Skin bone not found: "+b.bones[r]);v.bones.push(T)}if(b.ik)for(S=0;S<b.ik.length;S++){var E=a.findIkConstraint(b.ik[S]);if(null==E)throw new Error("Skin IK constraint not found: "+b.ik[r]);v.constraints.push(E)}for(c in b.attachments){var x=a.findSlot(c);if(null==x)throw new Error("Slot not found: "+c);var w,P=b.attachments[c];for(w in P){var C=this.readAttachment(P[w],v,x.index,w,a,e);null!=C&&v.setAttachment(x.index,w,C)}}a.skins.push(v),"default"==v.name&&(a.defaultSkin=v)}if(o.events)for(var I in o.events){var R=o.events[I];(u=new B.EventData(I)).intValue=this.getValue(R,"int",0),u.floatValue=this.getValue(R,"float",0),u.stringValue=this.getValue(R,"string",""),u.audioPath=this.getValue(R,"audio",null),null!=u.audioPath&&(u.volume=this.getValue(R,"volume",1),u.balance=this.getValue(R,"balance",0)),a.events.push(u)}if(o.animations)for(var G in o.animations){var A=o.animations[G];this.readAnimation(A,G,a)}return a},k.prototype.readAttachment=function(t,e,i,a,o,n){var r=this.scale;switch(a=this.getValue(t,"name",a),this.getValue(t,"type","region")){case"region":var s=this.getValue(t,"path",a),l=this.attachmentLoader.newRegionAttachment(e,a,s,n);return null==l?null:(l.path=s,l.x=this.getValue(t,"x",0)*r,l.y=this.getValue(t,"y",0)*r,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*r,l.height=t.height*r,null!=(c=this.getValue(t,"color",null))&&l.color.setFromString(c),l.updateOffset(),l);case"boundingbox":var p=this.attachmentLoader.newBoundingBoxAttachment(e,a);return null==p?null:(this.readVertices(t,p,t.vertexCount<<1),null!=(c=this.getValue(t,"color",null))&&p.color.setFromString(c),p);case"point":var c,h=this.attachmentLoader.newPointAttachment(e,a);return null==h?null:(h.x=this.getValue(t,"x",0)*r,h.y=this.getValue(t,"y",0)*r,h.rotation=this.getValue(t,"rotation",0),null!=(c=this.getValue(t,"color",null))&&h.color.setFromString(c),h)}return null},k.prototype.readVertices=function(t,e,i){var a=this.scale;e.worldVerticesLength=i;var o=t.vertices;if(i!=o.length){for(var n=new Array,r=new Array,s=0,l=o.length;s<l;){var p=o[s++];r.push(p);for(var c=s+4*p;s<c;s+=4)r.push(o[s]),n.push(o[s+1]*a),n.push(o[s+2]*a),n.push(o[s+3])}e.bones=r,e.vertices=B.Utils.toFloatArray(n)}else{var h=B.Utils.toFloatArray(o);if(1!=a)for(var s=0,l=o.length;s<l;s++)h[s]*=a;e.vertices=h}},k.prototype.readAnimation=function(t,e,i){var a=this.scale,o=new Array,n=0;if(t.slots)for(var r in t.slots){var s=t.slots[r];if(-1==(O=i.findSlotIndex(r)))throw new Error("Slot not found: "+r);for(d in s){var l=s[d];if("attachment"==d){(y=new B.AttachmentTimeline(l.length)).slotIndex=O;for(var p=0,c=0;c<l.length;c++){var h=l[c];y.setFrame(p++,this.getValue(h,"time",0),h.name)}o.push(y),n=Math.max(n,y.frames[y.getFrameCount()-1])}else{if("color"!=d)throw new Error("Invalid timeline type for a slot: "+d+" ("+r+")");(y=new B.ColorTimeline(l.length)).slotIndex=O;for(p=0,c=0;c<l.length;c++){var h=l[c],m=new B.Alpha;m.setFromString(h.color),y.setFrame(p,this.getValue(h,"time",0),m.a),this.readCurve(h,y,p),p++}o.push(y),n=Math.max(n,y.frames[(y.getFrameCount()-1)*B.ColorTimeline.ENTRIES])}}}if(t.bones)for(var u in t.bones){var d,g=t.bones[u],f=i.findBoneIndex(u);if(-1==f)throw new Error("Bone not found: "+u);for(d in g){l=g[d];if("rotate"===d){(y=new B.RotateTimeline(l.length)).boneIndex=f;for(p=0,c=0;c<l.length;c++){h=l[c];y.setFrame(p,this.getValue(h,"time",0),this.getValue(h,"angle",0)),this.readCurve(h,y,p),p++}o.push(y),n=Math.max(n,y.frames[(y.getFrameCount()-1)*B.RotateTimeline.ENTRIES])}else{if("translate"!==d&&"scale"!==d&&"shear"!==d)throw new Error("Invalid timeline type for a bone: "+d+" ("+u+")");var y=null,_=1,b=0;"scale"===d?(y=new B.ScaleTimeline(l.length),b=1):"shear"===d?y=new B.ShearTimeline(l.length):(y=new B.TranslateTimeline(l.length),_=a),y.boneIndex=f;for(p=0,c=0;c<l.length;c++){var h=l[c],v=this.getValue(h,"x",b),T=this.getValue(h,"y",b);y.setFrame(p,this.getValue(h,"time",0),v*_,T*_),this.readCurve(h,y,p),p++}o.push(y),n=Math.max(n,y.frames[(y.getFrameCount()-1)*B.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var S in t.ik){var E=t.ik[S],x=i.findIkConstraint(S);(y=new B.IkConstraintTimeline(E.length)).ikConstraintIndex=i.ikConstraints.indexOf(x);for(p=0,c=0;c<E.length;c++){h=E[c];y.setFrame(p,this.getValue(h,"time",0),this.getValue(h,"mix",1),this.getValue(h,"softness",0)*a,this.getValue(h,"bendPositive",!0)?1:-1,this.getValue(h,"compress",!1),this.getValue(h,"stretch",!1)),this.readCurve(h,y,p),p++}o.push(y),n=Math.max(n,y.frames[(y.getFrameCount()-1)*B.IkConstraintTimeline.ENTRIES])}var w=t.drawOrder;if(null==w&&(w=t.draworder),null!=w){for(var y=new B.DrawOrderTimeline(w.length),P=i.slots.length,p=0,C=0;C<w.length;C++){var I=w[C],R=null,G=this.getValue(I,"offsets",null);if(null!=G){R=B.Utils.newArray(P,-1);for(var A=B.Utils.newArray(P-G.length,0),k=0,D=0,c=0;c<G.length;c++){var O,L=G[c];if(-1==(O=i.findSlotIndex(L.slot)))throw new Error("Slot not found: "+L.slot);for(;k!=O;)A[D++]=k++;R[k+L.offset]=k++}for(;k<P;)A[D++]=k++;for(c=P-1;0<=c;c--)-1==R[c]&&(R[c]=A[--D])}y.setFrame(p++,this.getValue(I,"time",0),R)}o.push(y),n=Math.max(n,y.frames[y.getFrameCount()-1])}if(t.events){for(y=new B.EventTimeline(t.events.length),p=0,c=0;c<t.events.length;c++){var M=t.events[c],N=i.findEvent(M.name);if(null==N)throw new Error("Event not found: "+M.name);var F=new B.Event(B.Utils.toSinglePrecision(this.getValue(M,"time",0)),N);F.intValue=this.getValue(M,"int",N.intValue),F.floatValue=this.getValue(M,"float",N.floatValue),F.stringValue=this.getValue(M,"string",N.stringValue),null!=F.data.audioPath&&(F.volume=this.getValue(M,"volume",1),F.balance=this.getValue(M,"balance",0)),y.setFrame(p++,F)}o.push(y),n=Math.max(n,y.frames[y.getFrameCount()-1])}if(isNaN(n))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new B.Animation(e,o,n))},k.prototype.readCurve=function(t,e,i){var a;t.curve&&("stepped"==t.curve?e.setStepped(i):(a=t.curve,e.setCurve(i,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))))},k.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},k.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return B.TransformMode.Normal;if("onlytranslation"==t)return B.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return B.TransformMode.NoRotationOrReflection;if("noscale"==t)return B.TransformMode.NoScale;if("noscaleorreflection"==t)return B.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},k);function k(t){this.scale=1,this.attachmentLoader=t}B.SkeletonJson=t}(spine=spine||{}),function(t){var n=function(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i};t.SkinEntry=n;var e=(i.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=i},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],a=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==i){a=!0;break}a||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){for(var n=t.constraints[e],a=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){a=!0;break}a||this.constraints.push(n)}for(var r=t.getAttachments(),e=0;e<r.length;e++){var s=r[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},i.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],a=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==i){a=!0;break}a||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){for(var n=t.constraints[e],a=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){a=!0;break}a||this.constraints.push(n)}for(var r=t.getAttachments(),e=0;e<r.length;e++){var s=r[e];null!=s.attachment&&(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment))}},i.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},i.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},i.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var i=this.attachments[e];if(i)for(var a in i){var o=i[a];o&&t.push(new n(e,a,o))}}return t},i.prototype.getAttachmentsForSlot=function(t,e){var i=this.attachments[t];if(i)for(var a in i){var o=i[a];o&&e.push(new n(t,a,o))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var i=0,a=0;a<t.slots.length;a++){var o=t.slots[a],n=o.getAttachment();if(n&&i<e.attachments.length){var r,s=e.attachments[i];for(r in s){if(n==s[r]){var l=this.getAttachment(i,r);null!=l&&o.setAttachment(l);break}}}i++}},i);function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}t.Skin=e}(spine=spine||{}),function(i){var t=(e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e);function e(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new i.Alpha,this.darkColor=null==t.darkColor?null:new i.Alpha,this.setToSetupPose()}i.Slot=t}(spine=spine||{}),function(a){function t(t,e,i){if(this.color=new a.Alpha(1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}a.SlotData=t}(spine=spine||{}),(spine||(spine={})).TextureRegion=function(){this.name="",this.uid="",this.x=0,this.y=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},function(t){var e=(i.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},i.prototype.contains=function(t){return null!=this.array[0|t]},i.prototype.remove=function(t){this.array[0|t]=void 0},i.prototype.clear=function(){this.array.length=0},i);function i(){this.array=new Array}t.IntSet=e;var a=(o.prototype.set=function(t){return this.a=t,this.clamp(),this},o.prototype.setFromColor=function(t){return this.a=t.a,this},o.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},o.prototype.add=function(t){return this.a+=t,this.clamp(),this},o.prototype.clamp=function(){return this.a<0?this.a=0:1<this.a&&(this.a=1),this},o.rgba8888ToColor=function(t,e){t.a=(255&e)/255},o.rgb888ToColor=function(t,e){},o);function o(t){void 0===t&&(t=0),this.a=t}t.Alpha=a;var n=(r.clamp=function(t,e,i){return t<e?e:i<t?i:t},r.cosDeg=function(t){return Math.cos(t*r.degRad)},r.sinDeg=function(t){return Math.sin(t*r.degRad)},r.signum=function(t){return 0<t?1:t<0?-1:0},r.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},r.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},r.PI2=2*(r.PI=3.1415927),r.radDeg=r.radiansToDegrees=180/r.PI,r.degRad=r.degreesToRadians=r.PI/180,r);function r(){}t.MathUtils=n;var s=(l.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},l);function l(){}t.Interpolation=s;var p=(c.arrayCopy=function(t,e,i,a,o){for(var n=e,r=a;n<e+o;n++,r++)i[r]=t[n]},c.setArraySize=function(t,e,i){void 0===i&&(i=0);var a=t.length;if(a==e)return t;if(a<(t.length=e))for(var o=a;o<e;o++)t[o]=i;return t},c.ensureArrayCapacity=function(t,e,i){return void 0===i&&(i=0),t.length>=e?t:c.setArraySize(t,e,i)},c.newArray=function(t,e){for(var i=new Array(t),a=0;a<t;a++)i[a]=e;return i},c.newFloatArray=function(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),i=0;i<e.length;i++)e[i]=0;return e},c.newShortArray=function(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),i=0;i<e.length;i++)e[i]=0;return e},c.toFloatArray=function(t){return c.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},c.toSinglePrecision=function(t){return c.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},c.webkit602BugfixHelper=function(t,e){},c.contains=function(t,e,i){void 0===i&&(i=!0);for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},c.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,c);function c(){}t.Utils=p;var h=(m.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}},m);function m(){}t.DebugUtils=h;var u=(d.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},d.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},d.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},d.prototype.clear=function(){this.items.length=0},d);function d(t){this.items=new Array,this.instantiator=t}t.Pool=u;var g=(f.prototype.set=function(t,e){return this.x=t,this.y=e,this},f);function f(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}t.Vector2=g}(spine=spine||{}),function(){var e;Math.fround||(Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(e){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}e.Attachment=t;var i,a=(__extends(o,i=t),o.prototype.computeWorldVertices=function(t,e,i,a,o,n){i=o+(i>>1)*n;var r=t.bone.skeleton,s=t.deform,l=this.vertices,p=this.bones;if(null!=p){for(var c=0,h=0,m=0;m<e;m+=2){c+=(f=p[c])+1,h+=f}var u=r.bones;if(0==s.length)for(S=o,E=3*h;S<i;S+=n){var d=0,g=0,f=p[c++];for(f+=c;c<f;c++,E+=3){var y=u[p[c]],_=l[E],b=l[E+1],v=l[E+2];d+=(_*y.a+b*y.b+y.worldX)*v,g+=(_*y.c+b*y.d+y.worldY)*v}a[S]=d,a[S+1]=g}else for(var T=s,S=o,E=3*h,x=h<<1;S<i;S+=n){d=0,g=0,f=p[c++];for(f+=c;c<f;c++,E+=3,x+=2){y=u[p[c]],_=l[E]+T[x],b=l[E+1]+T[x+1],v=l[E+2];d+=(_*y.a+b*y.b+y.worldX)*v,g+=(_*y.c+b*y.d+y.worldY)*v}a[S]=d,a[S+1]=g}}else{0<s.length&&(l=s);for(var y,w=(y=t.bone).worldX,P=y.worldY,C=y.a,E=y.b,I=y.c,R=y.d,G=e,S=o;S<i;G+=2,S+=n){var _=l[G],b=l[G+1];a[S]=_*C+b*E+w,a[S+1]=_*I+b*R+P}}},o.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),e.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=e.Utils.newFloatArray(this.vertices.length),e.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},o.nextID=0,o);function o(t){var e=i.call(this,t)||this;return e.id=(65535&o.nextID++)<<11,e.worldVerticesLength=0,e.deformAttachment=e}e.VertexAttachment=a}(spine=spine||{}),function(t){var e;(e=t.AttachmentType||(t.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(spine=spine||{}),function(i){var a,t=(a=i.VertexAttachment,__extends(e,a),e.prototype.copy=function(){var t=new e(name);return this.copyTo(t),t.color.setFromColor(this.color),t},e);function e(t){var e=a.call(this,t)||this;return e.color=new i.Alpha(1),e}i.BoundingBoxAttachment=t}(spine=spine||{}),function(n){var i,t=(i=n.VertexAttachment,__extends(e,i),e.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=n.MathUtils.cosDeg(this.rotation),i=n.MathUtils.sinDeg(this.rotation),a=e*t.a+i*t.b,o=e*t.c+i*t.d;return Math.atan2(o,a)*n.MathUtils.radDeg},e.prototype.copy=function(){var t=new e(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e);function e(t){var e=i.call(this,t)||this;return e.color=new n.Alpha(1),e}n.PointAttachment=t}(spine=spine||{}),function(i){var a,t=(a=i.Attachment,__extends(_,a),_.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*e,o=i+this.region.width*t,n=a+this.region.height*e,r=this.rotation*Math.PI/180,s=Math.cos(r),l=Math.sin(r),p=i*s+this.x,c=i*l,h=a*s+this.y,m=a*l,u=o*s+this.x,d=o*l,g=n*s+this.y,f=n*l,y=this.offset;y[_.OX1]=p-m,y[_.OY1]=h+c,y[_.OX2]=p-f,y[_.OY2]=g+c,y[_.OX3]=u-f,y[_.OY3]=g+d,y[_.OX4]=u-m,y[_.OY4]=h+d},_.prototype.setRegion=function(t){this.region=t;this.uvs},_.prototype.computeWorldVertices=function(t,e,i,a){var o=this.offset,n=t.worldX,r=t.worldY,s=t.a,l=t.b,p=t.c,c=t.d,h=o[_.OX1],m=o[_.OY1];e[i]=h*s+m*l+n,e[i+1]=h*p+m*c+r,i+=a,h=o[_.OX2],m=o[_.OY2],e[i]=h*s+m*l+n,e[i+1]=h*p+m*c+r,i+=a,h=o[_.OX3],m=o[_.OY3],e[i]=h*s+m*l+n,e[i+1]=h*p+m*c+r,i+=a,h=o[_.OX4],m=o[_.OY4],e[i]=h*s+m*l+n,e[i+1]=h*p+m*c+r},_.prototype.copy=function(){var t=new _(name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,i.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),i.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},_.OX1=0,_.OY1=1,_.OX2=2,_.OY2=3,_.OX3=4,_.OY3=5,_.OX4=6,_.OY4=7,_.X1=0,_.Y1=1,_.C1R=2,_.C1G=3,_.C1B=4,_.C1A=5,_.U1=6,_.V1=7,_.X2=8,_.Y2=9,_.C2R=10,_.C2G=11,_.C2B=12,_.C2A=13,_.U2=14,_.V2=15,_.X3=16,_.Y3=17,_.C3R=18,_.C3G=19,_.C3B=20,_.C3A=21,_.U3=22,_.V3=23,_.X4=24,_.Y4=25,_.C4R=26,_.C4G=27,_.C4B=28,_.C4A=29,_.U4=30,_.V4=31,_);function _(t){var e=a.call(this,t)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new i.Alpha(1),e.offset=i.Utils.newFloatArray(8),e.uvs=i.Utils.newFloatArray(8),e.tempColor=new i.Alpha(1),e}i.RegionAttachment=t}(spine=spine||{}),function(T){var t,e;function i(t){this.debugRendering=!1,this.vertices=T.Utils.newFloatArray(8192),this.tempColor=new T.Alpha,this.ctx=t}t=T.canvas||(T.canvas={}),i.prototype.draw=function(t){this.drawImages(t)},i.prototype.drawImages=function(t){var e=this.ctx,i=t.drawOrder;this.debugRendering&&(e.strokeStyle="green"),e.save();for(var a=0,o=i.length;a<o;a++){var n,r,s,l,p,c,h,m,u,d,g,f,y,_,b,v=i[a];v.bone.active&&(p=s=r=null,(n=v.getAttachment())instanceof T.RegionAttachment&&(l=(s=(r=n).region).name.replace(/\//g,"_"),p=TGE.AssetManager.Get(l+"_"+s.uid).spriteSheet,c=v.bone.skeleton.color,h=v.color,m=r.color,u=c.a*h.a*m.a,(d=this.tempColor).set(u),g=n,f=v.bone,y=s.width,_=s.height,e.save(),e.transform(f.a,f.c,f.b,f.d,f.worldX,f.worldY),e.translate(n.offset[0],n.offset[1]),e.rotate(n.rotation*Math.PI/180),b=g.width/y,e.scale(b*n.scaleX,b*n.scaleY),e.translate(y/2,_/2),e.scale(1,-1),e.translate(-y/2,-_/2),1!=d.a&&(e.globalAlpha=d.a),e.drawImage(p,s.x,s.y,y,_,0,0,y,_),this.debugRendering&&e.strokeRect(0,0,y,_),e.restore()))}e.restore()},i.QUAD_TRIANGLES=[0,1,2,2,3,0],i.VERTEX_SIZE=8,e=i,t.SkeletonRenderer=e}(spine=spine||{}),TrackEntryWrapper=function(){TrackEntryWrapper.superclass.constructor.apply(this,arguments)},TrackEntryWrapper.prototype={setup:function(t){return TrackEntryWrapper.superclass.setup.call(this,t),this._mSpineAnimation=t.spineAnimation,this._mAnimationName=t.animParams.animation||t.spineAnimation.getAnimationNames()[0],this._mLooping=t.animParams.looping||!1,this._mOnComplete=t.animParams.onComplete||function(){},this._mOnStart=t.animParams.onStart||function(){},this._mRemoveOnComplete=t.animParams.removeOnComplete||!1,this._mDelay=t.animParams.delay||0,this._mMixDuration=t.animParams.mixDuration||0,this._mTrackIndex=t.animParams.trackIndex||0,this._mTrackStartTime=t.animParams.trackStartTime||0,this._mTrackEndTime=t.animParams.trackEndTime||0,this._mTimeScale=t.animParams.timeScale||1,this._mLoopCounter=1,this._mTrackEntry=this._queue(t.startNow),this._mTrackEntry.alpha=t.animParams.alpha||1,this},_setTimeAndStop:function(t){this._mTrackEntry.animationStart=t,this._mTrackEntry.animationEnd=t,this._pause()},_pause:function(){this._mTrackEntry.timeScale=0},_unpause:function(){this._mTrackEntry.timeScale=this._mTimeScale},_queue:function(t){var e=t&&0===this._mDelay?this._mSpineAnimation._mAnimationState.setAnimation(this._mTrackIndex,this._mAnimationName,!0===this._mLooping):this._mSpineAnimation._mAnimationState.addAnimation(this._mTrackIndex,this._mAnimationName,!0===this._mLooping,this._mDelay);return e.timeScale=this._mTimeScale,e.animationStart=this._mTrackStartTime,this._mTrackEndTime&&(e.animationEnd=this._mTrackEndTime),e.trackEntryWrapper=this,e.mixDuration=this._mMixDuration,e.listener={},1===this._mLoopCounter&&(e.listener.start=this._onStart.bind(this),t&&e.listener.start()),!1!==this._mLooping&&this._mLoopCounter!==this._mLooping||(e.listener.complete=this._onComplete.bind(this)),"number"==typeof this._mLooping&&this._mLoopCounter<this._mLooping&&(this._mLoopCounter++,this._queue(!1)),e},_onStart:function(){this._mOnStart(),this.dispatchEvent({type:"trackEntryStart"})},_onComplete:function(){this._mOnComplete(),this.dispatchEvent({type:"trackEntryComplete"})}},extend(TrackEntryWrapper,TGE.DisplayObjectContainer),SpineAnimation=function(){return SpineAnimation.superclass.constructor.apply(this,arguments),this._mLoaded=!1,this._mSkeleton=null,this._mSkeletonName=null,this._mRenderer=null,this._mAnimationState=null,this._mPlaying=!1,this._mDebug=!1,this._mTriangleRendering=!1,this._mQueuedFunctionCalls=[],this.addEventListener("update",this._updateAnimation.bind(this)),this},SpineAnimation.Animations={},SpineAnimation.RUNTIME_VERSION="3.8",SpineAnimation.prototype={setup:function(t){return SpineAnimation.superclass.setup.call(this,t),t.debug&&(this._mDebug=t.debug),t.triangleRendering&&(this._mTriangleRendering=t.triangleRendering),t.skeleton=t.skeleton||t.skeletonName,t.skeleton?TGE.Game.GetInstance().waitForAsset(t.skeleton,this._setupAfterLoad.bind(this,t,!SpineAnimation.Animations[t.skeleton]),!1):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"'skeleton' parameter required for SpineAnimation setup"),this},_setupAfterLoad:function(t,e){for(var i in this._setupSkeleton(t.skeleton,t.skin),this._mDebug&&console.log(this.toString()),"object"==typeof t.play||!0===t.play?this.play(t.play):!0===t.playAndRemove&&(t.play={removeOnComplete:!0},this.play(t.play)),e&&this.tweenFrom({alpha:0,duration:.2}),this._mQueuedFunctionCalls)this._mQueuedFunctionCalls[i]()},setMix:function(t,e,i){this._mAnimationState&&this._mAnimationState.data.setMix(t,e,i)},play:function(t){return this._checkIfReady(this.play.bind(this,t))&&this._createTrackEntry(t,!0),this},thenPlay:function(t){return this._checkIfReady(this.thenPlay.bind(this,t))&&this._createTrackEntry(t,!1),this},setTimeAndStop:function(t){this._checkIfReady(this.setTimeAndStop.bind(this,t))&&this._createTrackEntry(t,!0)._setTimeAndStop(t.stopTime)},clearQueue:function(){this._checkIfReady(this.clearQueue.bind(this))&&(this._mAnimationState.queue.drain(),this._mPlaying=!1)},stop:function(){this._checkIfReady(this.stop.bind(this))&&this.clearQueue()},pause:function(t){this._checkIfReady(this.pause.bind(this,t))&&this._getCurrentTrackEntry(t)._pause()},unpause:function(t){this._checkIfReady(this.unpause.bind(this,t))&&this._getCurrentTrackEntry(t)._unpause()},getAnimationNames:function(){var t=[];if(this._mSkeleton&&this._mSkeleton.data)for(var e in this._mSkeleton.data.animations)t.push(this._mSkeleton.data.animations[e].name);return t},getSkinNames:function(){var t=[];if(this._mSkeleton&&this._mSkeleton.data)for(var e in this._mSkeleton.data.skins)t.push(this._mSkeleton.data.skins[e].name);return t},getCurrentAnimation:function(t){var e=this._getCurrentTrackEntry(t);return e?e._mAnimationName:null},getDuration:function(t){var e=this._mSkeleton.data.findAnimation(t||this.getCurrentAnimation());return e?e.duration:(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"getDuration animation '"+t+"' not found"),0)},toString:function(){var t,e=this.getAnimationNames(),i=this.getSkinNames(),a="SPINE ANIMATION DEBUG\n\n";for(t in a+="ANIMATIONS: \n",e)a+=e[t]+"\n";for(t in a+="\nSKINS: \n",i)a+=i[t]+"\n";return a},setSkin:function(t){this._checkIfReady(this.setSkin.bind(this,t))&&(this._mSkeleton.setSkinByName(t),this._mSkeleton.setSlotsToSetupPose())},_setupSkeleton:function(e,t){if(!SpineAnimation.Animations[e]||null===SpineAnimation.Animations[e].data)return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Spine skeleton '"+e+"' does not have any data"),null;try{var i,a;SpineAnimation.Animations[e].skeletonData||(i=new spine.AtlasAttachmentLoader,a=new spine.SkeletonJson(i),SpineAnimation.Animations[e].skeletonData=a.readSkeletonData(SpineAnimation.Animations[e].data,SpineAnimation.Animations[e].uid)),this._mSkeletonName=e,this._mSkeleton=new spine.Skeleton(SpineAnimation.Animations[e].skeletonData),this._mSkeleton.scaleY=-1;var o=t||this._mSkeleton.data.skins[0].name;o&&this.setSkin(o),this._mAnimationState=new spine.AnimationState(new spine.AnimationStateData(this._mSkeleton.data)),this.width=this._mSkeleton.data.width,this.height=this._mSkeleton.data.height,this._mLoaded=!0}catch(t){return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"could not create SpineAnimation '"+e+"': "+t),null}},_createTrackEntry:function(t,e){if(!(t="object"==typeof t?t:{}).animation||this._mSkeleton.data.findAnimation(t.animation)){var i=this._getLastTrackEntry(t.trackIndex),a=i&&!0===i._mLooping;if(e||!a){var o=this.addChild((new TrackEntryWrapper).setup({spineAnimation:this,startNow:e,animParams:t}));return o.addEventListener("trackEntryStart",this._onTrackEntryStarted.bind(this,o)),o.addEventListener("trackEntryComplete",this._onTrackEntryFinished.bind(this,o)),this._mPlaying=!0,o}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"animation not found: '"+t.animation+"'")},_onTrackEntryStarted:function(t){this._mPlaying=!0},_onTrackEntryFinished:function(t){this.dispatchEvent({type:"complete"}),t.markForRemoval(),t._mRemoveOnComplete&&this.markForRemoval()},_getCurrentTrackEntry:function(t){return(this._mAnimationState.tracks[t||0]||{}).trackEntryWrapper},_getLastTrackEntry:function(t){var e=this._mAnimationState.expandToIndex(t||0);if(null!=e)for(;null!=e.next;)e=e.next;return e?e.trackEntryWrapper:null},_checkIfReady:function(t){return!!this._mSkeleton||(this._mQueuedFunctionCalls.push(t),!1)},_calculateBounds:function(){if(!this._mLoaded)return{offset:{x:0,y:0},size:{x:0,y:0}};var t=new spine.Vector2,e=new spine.Vector2;return this._mSkeleton.getBounds(t,e,[]),{offset:t,size:e}},_updateAnimation:function(t){this._mLoaded&&this._mPlaying&&(this._mAnimationState.update(t.elapsedTime),this._mAnimationState.apply(this._mSkeleton),this._setBoundingInfoDirty())},_objectDraw:function(t){var e,i,a;this._mLoaded&&((e=t.getCanvasContext())&&null===this._mRenderer&&(this._mRenderer=new spine.canvas.SkeletonRenderer(e)),this._mRenderer&&(this._mRenderer.debugRendering=this._mDebug,this._mRenderer._mTriangleRendering=this._mTriangleRendering,e.save(),i=null!==this.stage&&1!==this.stage._mScale?this.stage._mScale:1,t.setWorldTransform(this._mWorldTransformNoReg,i),this._mSkeleton.updateWorldTransform(),this._mRenderer.draw(this._mSkeleton),this._mDebug&&(a=this.getBounds(),e.setTransform(1,0,0,1,0,0),e.strokeStyle="#ff0000",e.lineWidth=1,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(a.x+a.width,a.y),e.lineTo(a.x+a.width,a.y+a.height),e.lineTo(a.x,a.y+a.height),e.lineTo(a.x,a.y),e.stroke()),e.restore())),SpineAnimation.superclass._objectDraw.call(this,t)},_updateAABB:function(){SpineAnimation.superclass._updateAABB.call(this);var t=this._calculateBounds(),e=new TGE.Vector2(t.offset.x,t.offset.y),i=new TGE.Vector2(t.offset.x+t.size.x,t.offset.y),a=new TGE.Vector2(t.offset.x+t.size.x,t.offset.y+t.size.y),o=new TGE.Vector2(t.offset.x,t.offset.y+t.size.y);this._mWorldTransformNoReg.transformPoint(e),this._mWorldTransformNoReg.transformPoint(i),this._mWorldTransformNoReg.transformPoint(a),this._mWorldTransformNoReg.transformPoint(o);var n=Math.min(e.x,i.x,a.x,o.x),r=Math.min(e.y,i.y,a.y,o.y),s=Math.max(e.x,i.x,a.x,o.x),l=Math.max(e.y,i.y,a.y,o.y),p=new TGE.Rectangle(n,r,s-n,l-r);this._mAABB.union(p)}},extend(SpineAnimation,TGE.DisplayObjectContainer),Object.defineProperty(SpineAnimation.prototype,"skeleton",{get:function(){return this._mSkeletonName},set:function(t){this._setupSkeleton(t)}}),Popup=function(){Popup.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{width:480,height:320,margins:.025,characterIconScale:.9,characterIconPosition:"left",enterAnimation:"fade",exitAnimation:"fade",updateRemoteSettingsInRealTime:!1,showPopupRemoteSetting:"popup_showPopup",useBackgroundImageRemoteSetting:"popup_useBackgroundImage",useCharacterIconRemoteSetting:"popup_useCharacterIcon",characterIconScaleRemoteSetting:"popup_characterIconScale",characterIconPositionRemoteSetting:"popup_characterIconPosition",enterAnimationRemoteSetting:"popup_enterAnimation",exitAnimationRemoteSetting:"popup_exitAnimation",previewExitAnimationRemoteSetting:"popup_previewExitAnimation",freezeAnimationsRemoteSetting:"popup_freezeAnimations"})},Popup.prototype={setup:function(t){return t.usePortraitImage&&(t.useCharacterIcon=t.usePortraitImage),t.portraitImage&&(t.characterIconImage=t.portraitImage),t.portraitPosition&&(t.characterIconPosition=t.portraitPosition),!t.useBackgroundImageRemoteSetting&&TGE.RemoteSettings.HasSetting("usePopupBackgroundImage")&&(t.useBackgroundImageRemoteSetting="usePopupBackgroundImage"),!t.useCharacterIconRemoteSetting&&TGE.RemoteSettings.HasSetting("useCharacterIcon")&&(t.useCharacterIconRemoteSetting="useCharacterIcon"),!t.characterIconPosition&&TGE.RemoteSettings.HasSetting("characterIconPosition")&&(t.characterIconPosition=TGE.RemoteSettings("characterIconPosition")),!t.characterIconScaleRemoteSetting&&TGE.RemoteSettings.HasSetting("popup_characterIconScale")?t.characterIconScaleRemoteSetting="popup_characterIconScale":!t.characterIconPosition&&TGE.RemoteSettings.HasSetting("popupPortraitPosition")&&(t.characterIconPosition=TGE.RemoteSettings("popupPortraitPosition")),!t.enterAnimation&&TGE.RemoteSettings.HasSetting("tutorialPopupEnter")&&(t.enterAnimation=TGE.RemoteSettings("tutorialPopupEnter")),!t.exitAnimation&&TGE.RemoteSettings.HasSetting("tutorialPopupExit")&&(t.exitAnimation=TGE.RemoteSettings("tutorialPopupExit")),PropertyCombine.setupInstance(this,t,Popup.superclass.setup),this.useBackgroundImage=void 0!==this.backgroundImage,this.useCharacterIcon=void 0!==this.characterIconImage,this.updateRemoteSettingsInRealTime&&(this.useCharacterIcon=TGE.RemoteSettings(this.useCharacterIconRemoteSetting)),TGE.InCreativeBuilder()&&this.updateRemoteSettingsInRealTime?(this.watchedRemoteSettings=[],this.watchedRemoteSettings.push(this.showPopupRemoteSetting),this.useBackgroundImage&&this.watchedRemoteSettings.push(this.useBackgroundImageRemoteSetting),this.characterIconImage&&this.watchedRemoteSettings.push(this.useCharacterIconRemoteSetting),void 0===t.characterIconScale&&this.watchedRemoteSettings.push(this.characterIconScaleRemoteSetting),void 0===t.characterIconPosition&&this.watchedRemoteSettings.push(this.characterIconPositionRemoteSetting),void 0===t.enterAnimation&&this.watchedRemoteSettings.push(this.enterAnimationRemoteSetting),void 0===t.exitAnimation&&this.watchedRemoteSettings.push(this.exitAnimationRemoteSetting),this._refreshRemoteSettings(),0<this.watchedRemoteSettings.length&&(this._checkForRemoteSettingChanges(),this.addEventListener("update",this._checkForRemoteSettingChanges.bind(this)))):this._refreshRemoteSettings(),void 0!==this.backgroundImage&&this.useBackgroundImage?this.game.waitForAsset(this.backgroundImage,this._initPopup.bind(this),!1):this._initPopup(),this},_initPopup:function(){this._buildLayout(),TGE.InCreativeBuilder()&&TGE.RemoteSettings.HasSetting(this.previewExitAnimationRemoteSetting)&&TGE.RemoteSettings(this.previewExitAnimationRemoteSetting)?(this._enter(),this.performAction({action:this.exit.bind(this),delay:1})):(this.enterAnimation&&this._enter(),TGE.InCreativeBuilder()&&TGE.RemoteSettings.HasSetting(this.freezeAnimationsRemoteSetting)&&TGE.RemoteSettings(this.freezeAnimationsRemoteSetting)||this.exitAfter&&this.performAction({action:this.exit.bind(this),delay:this.exitAfter}))},exit:function(t){switch(this.exiting=!0,this.clearTweens(),t=t||this.exitAnimation,this.popupHolder||(t="none"),t){case"fade":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut,onComplete:this.markForRemoval.bind(this)});break;case"rise":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenTo({layout:{yPercentage:-2},duration:.5,easing:TGE.Tween.Back.In,onComplete:this.markForRemoval.bind(this)});break;case"slide":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut,onComplete:this.markForRemoval.bind(this)}),this.popupHolder.tweenTo({layout:{xPercentage:1},duration:.4,easing:TGE.Tween.Back.In});break;case"none":default:this.markForRemoval()}},_enter:function(t){if(!this.exiting)switch(t=t||this.enterAnimation){case"fade":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut});break;case"bounce":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{yPercentage:-1.5},duration:.75,easing:TGE.Tween.Bounce.Out});break;case"drop":this.popupHolder.tweenFrom({alpha:0,duration:.6,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{yPercentage:-1.5},duration:.6,easing:TGE.Tween.Back.Out});break;case"slide":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{xPercentage:-1},duration:.4,easing:TGE.Tween.Back.Out})}},_refreshRemoteSettings:function(){this.showPopup=this.showPopupRemoteSetting?TGE.RemoteSettings(this.showPopupRemoteSetting):this.showPopup,this.useBackgroundImage=this.useBackgroundImageRemoteSetting?TGE.RemoteSettings(this.useBackgroundImageRemoteSetting):this.useBackgroundImage,this.useCharacterIcon=this.useCharacterIconRemoteSetting?TGE.RemoteSettings(this.useCharacterIconRemoteSetting):this.useCharacterIcon,this.characterIconScale=this.characterIconScaleRemoteSetting?TGE.RemoteSettings(this.characterIconScaleRemoteSetting):this.characterIconScale,this.characterIconPosition=this.characterIconPositionRemoteSetting?TGE.RemoteSettings(this.characterIconPositionRemoteSetting):this.characterIconPosition,this.enterAnimation=this.enterAnimationRemoteSetting?TGE.RemoteSettings(this.enterAnimationRemoteSetting):this.enterAnimation,this.exitAnimation=this.exitAnimationRemoteSetting?TGE.RemoteSettings(this.exitAnimationRemoteSetting):this.exitAnimation},_buildLayout:function(){if(GameConfig.ELX_DEFS||(GameConfig.ELX_DEFS={}),this.popupHolder)for(var t=0;t<this.popupHolder.numChildren();t++)this.popupHolder.getChildAt(t).markForRemoval();var e,i=this.width<=this.height;if(!0!==this.useBackgroundImage&&void 0!==this.useBackgroundImage||!this.backgroundImage||(e=GameConfig.ELX_DEFS[this.backgroundImage]||{},this.backgroundImageSprite=this.addChild((new CroppedSprite).setup({width:e?e.cropWidth:void 0,height:e?e.cropHeight:void 0,image:this.backgroundImage,layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1}})),this.backgroundImageSprite.sendToBack(),this.width=this.backgroundImageSprite.width,this.height=this.backgroundImageSprite.height),this.popupHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1}})),this.backgroundImageSprite&&this.popupHolder.addChild(this.backgroundImageSprite),(!0===this.useCharacterIcon||void 0===this.useCharacterIcon)&&this.characterIconImage){if("positionOne"===this.characterIconPosition)var a=i?"top":"left";else if("positionTwo"===this.characterIconPosition)a=i?"bottom":"right";else{a=this.characterIconPosition;switch(this.characterIconPosition){case"left":i&&(a="top");break;case"right":i&&(a="bottom");break;case"top":i||(a="left");break;case"bottom":i||(a="right")}}switch(a){case"left":var o={leftAnchor:-.475+this.margins,yPercentage:0,matchWidth:.4-this.margins,matchHeight:1-2*this.margins};break;case"right":o={rightAnchor:.475+this.margins,yPercentage:0,matchWidth:.4-this.margins,matchHeight:1-2*this.margins};break;case"top":o={xPercentage:0,topAnchor:-.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.4-this.margins};break;case"bottom":o={xPercentage:0,bottomAnchor:.5-this.margins,matchWidth:1-2*this.margins,matchHeight:.4+this.margins}}this.characterIconHolder=this.popupHolder.addChild((new TGE.DisplayObjectContainer).setup({layout:o})),this.game.waitForAsset(this.characterIconImage,function(){var t=GameConfig.ELX_DEFS[this.characterIconImage]||{};this.characterIconSprite=this.characterIconHolder.addChild((new CroppedSprite).setup({image:this.characterIconImage,cropWidth:t?t.cropWidth:void 0,cropHeight:t?t.cropHeight:void 0,layout:{xPercentage:0,yPercentage:0,scaleToWidth:this.characterIconScale,scaleToHeight:this.characterIconScale}}))}.bind(this),!1)}if(this.textDef){var n={xPercentage:0,yPercentage:0,matchWidth:1-2*this.margins,matchHeight:1-2*this.margins};if(this.characterIconImage)switch(a){case"left":n={rightAnchor:.5+this.margins,yPercentage:0,matchWidth:.6-this.margins,matchHeight:1-2*this.margins};break;case"right":n={leftAnchor:-.5+this.margins,yPercentage:0,matchWidth:.6-this.margins,matchHeight:1-2*this.margins};break;case"top":n={xPercentage:0,bottomAnchor:.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.6+this.margins};break;case"bottom":n={xPercentage:0,topAnchor:-.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.6-this.margins}}this.textHolder=this.popupHolder.addChild((new TGE.DisplayObjectContainer).setup({layout:n}));var r={textDef:this.textDef,wrapWidth:this.textHolder.width-30};this.textParams&&PropertyCombine.combineProperties(this.textParams,r),this.text=this.textHolder.addChild((new TGE.Text).setup(r))}void 0!==this.showPopup&&!1===this.showPopup?this.popupHolder.visible=!1:this.popupHolder.visible=!0},_checkForRemoteSettingChanges:function(){if(this.remoteSettingsLastFrame)for(var t in this.watchedRemoteSettings)if(this.remoteSettingsLastFrame[t]!==TGE.RemoteSettings(this.watchedRemoteSettings[t])){this._refreshRemoteSettings(),this._buildLayout();break}for(var t in this.remoteSettingsLastFrame=[],this.watchedRemoteSettings)this.remoteSettingsLastFrame.push(TGE.RemoteSettings(this.watchedRemoteSettings[t]))}},extend(Popup,TGE.DisplayObjectContainer),TutorialPopup=function(){TutorialPopup.superclass.constructor.call(this)},TutorialPopup.prototype={setup:function(t){return this.addRemoteSetting("showTutorialPopup",{type:"boolean",default:!0}),this.addRemoteSetting("tutorialPopupEnter",{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]}),this.addRemoteSetting("tutorialPopupExit",{type:"string",default:"fade",options:["fade","rise","slide","none"]}),this.addRemoteSetting("popup_previewExitAnimation",{type:"boolean",default:!1}),this.addRemoteSetting("usePopupBackgroundImage",{type:"boolean",default:!0}),this.addRemoteSetting("usePopupPortraitImage",{type:"boolean",default:!0}),this.addRemoteSetting("useCharacterIcon",{type:"boolean",default:!1}),this.addRemoteSetting("characterIconPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("characterIconMargin",{type:"number",default:.01,options:[{min:.01,max:.05,interval:.001}]}),this.addRemoteSetting("popupPortraitPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("popup_characterIconScale",{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]}),this.enterAnimation=t.enterAnimation?t.enterAnimation:TGE.RemoteSettings("tutorialPopupEnter"),this.exitAnimation=t.exitAnimation?t.exitAnimation:TGE.RemoteSettings("tutorialPopupExit"),TutorialPopup.superclass.setup.call(this,t),this.backgroundImage&&(TutorialPopup.defs.backgroundImageGroup.steps[1].image=this.backgroundImage),this.characterIconImage&&(TutorialPopup.defs.characterIconGroup.steps[1].steps[0].image=this.characterIconImage),this.visible=TGE.RemoteSettings("showTutorialPopup"),this},enter:function(){if(TGE.RemoteSettings("previewTutorialExit"))return this.alpha=1,void this.performAction({delay:.1,action:this.exit.bind(this)});TutorialPopup.superclass.enter.call(this,this.enterAnimation)},exit:function(){TutorialPopup.superclass.exit.call(this,this.exitAnimation)},addRemoteSetting:function(t,e){TGE.RemoteSettings.HasSetting(t)||TGE.RemoteSettings.AddSetting(t,e)}},extend(TutorialPopup,Popup),Popup.MERGE_DATA={GameConfig:{REMOTE_SETTINGS:{_ADD_:{popup_showPopup:{type:"boolean",default:!0},popup_useBackgroundImage:{type:"boolean",default:!0},popup_useCharacterIcon:{type:"boolean",default:!1},popup_characterIconScale:{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]},popup_characterIconPosition:{type:"string",default:"positionOne",options:["positionOne","positionTwo"]},popup_enterAnimation:{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]},popup_freezeAnimations:{type:"boolean",default:!1},popup_exitAnimation:{type:"string",default:"fade",options:["fade","rise","slide","none"]},popup_previewExitAnimation:{type:"boolean",default:!1}}},TEXT_DEFS:{_ADD_:{popup_txt:{fontFamily:"Roboto",fontWeight:"bold",fontSize:52,textColor:"#494B54",strokeColor:"#ffffff",strokeWidth:0}}}},BuilderConfig:{MACRO_DEFS:{_ADD_:{popup_macro:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_characterPortraitTab",macroParams:["%%1"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_macro_noCharIcon:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_backgroundImageTab:{name:"Background Image",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a background image for the popup",type:"remoteSetting",settingName:"popup_useBackgroundImage"},{prompt:"Upload a new background image for the popup",type:"imageGroup",selectorDef:"popup_backgroundImage",path:"assets/alternate-images/popupBackgrounds",image:"%%0",colorize:!0,visibilityRemoteSetting:"popup_useBackgroundImage"}]},popup_characterPortraitTab:{name:"Character Icon",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a character icon for the popup",type:"remoteSetting",settingName:"popup_useCharacterIcon",restart:!0},{type:"group",groupType:"open",visibilityRemoteSetting:"popup_useCharacterIcon",steps:[{prompt:"Upload a new character icon",type:"imageGroup",selectorDef:"popup_characterIconImage",path:"assets/alternate-images/popupCharacterIcons",image:"%%0",autoCrop:!0,colorize:!0},{prompt:"Select the position of the character icon",type:"remoteSetting",settingName:"popup_characterIconPosition",selectorDef:"popup_characterIconPosition",dispatchResize:!0},{prompt:"Adjust the size of the character icon",type:"remoteSetting",settingName:"popup_characterIconScale",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}}]}]},popup_fontTab:{name:"Font",type:"group",groupType:"open",steps:[{prompt:"Change the font of the popups",type:"text",textDef:"popup_txt"}]},popup_animationsTab:{name:"Animations",type:"group",groupType:"tabs",stepId:"tween_group",steps:[{name:"Appearing Animation",prompt:"Choose the popup entrance style",type:"remoteSetting",settingName:"popup_enterAnimation",restart:!0},{name:"Disappearing Animation",prompt:"Choose a disappearing animation",type:"remoteSetting",settingName:"popup_exitAnimation",restart:!0,state:"popup_previewExitAnimation"}]}}},SELECTOR_DEFS:{_ADD_:{popup_backgroundImage:{names:["Default","Bubble","Cork","Gradient","Striped","Wood","Plastic"],values:["default.png","bubble.png","cork.png","gradient.png","greenBubble.png","wood.png","yellow.png"]},popup_characterIconImage:{names:["Default","Silhouette With Bow","Female","Male","Pirate"],values:["default.png","default_Bow.png","opponent_female.png","opponent_male.png","portrait_demo.png"]},popup_characterIconPosition:{names:["Left","Right"],values:["positionOne","positionTwo"]}}},STATE_DEFS:{_ADD_:{tutorialPopupExit:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]},popup_freezeAnimations:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_freezeAnimations",value:!0}]},popup_previewExitAnimation:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]}}}}},TutorialPopup=function(){TutorialPopup.superclass.constructor.call(this)},TutorialPopup.prototype={setup:function(t){return this.addRemoteSetting("showTutorialPopup",{type:"boolean",default:!0}),this.addRemoteSetting("tutorialPopupEnter",{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]}),this.addRemoteSetting("tutorialPopupExit",{type:"string",default:"fade",options:["fade","rise","slide","none"]}),this.addRemoteSetting("popup_previewExitAnimation",{type:"boolean",default:!1}),this.addRemoteSetting("usePopupBackgroundImage",{type:"boolean",default:!0}),this.addRemoteSetting("usePopupPortraitImage",{type:"boolean",default:!0}),this.addRemoteSetting("useCharacterIcon",{type:"boolean",default:!1}),this.addRemoteSetting("characterIconPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("characterIconMargin",{type:"number",default:.01,options:[{min:.01,max:.05,interval:.001}]}),this.addRemoteSetting("popupPortraitPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("popup_characterIconScale",{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]}),this.enterAnimation=t.enterAnimation?t.enterAnimation:TGE.RemoteSettings("tutorialPopupEnter"),this.exitAnimation=t.exitAnimation?t.exitAnimation:TGE.RemoteSettings("tutorialPopupExit"),TutorialPopup.superclass.setup.call(this,t),this.backgroundImage&&(TutorialPopup.defs.backgroundImageGroup.steps[1].image=this.backgroundImage),this.characterIconImage&&(TutorialPopup.defs.characterIconGroup.steps[1].steps[0].image=this.characterIconImage),this.visible=TGE.RemoteSettings("showTutorialPopup"),this},enter:function(){if(TGE.RemoteSettings("previewTutorialExit"))return this.alpha=1,void this.performAction({delay:.1,action:this.exit.bind(this)});TutorialPopup.superclass.enter.call(this,this.enterAnimation)},exit:function(){TutorialPopup.superclass.exit.call(this,this.exitAnimation)},addRemoteSetting:function(t,e){TGE.RemoteSettings.HasSetting(t)||TGE.RemoteSettings.AddSetting(t,e)}},extend(TutorialPopup,Popup),Popup.MERGE_DATA={GameConfig:{REMOTE_SETTINGS:{_ADD_:{popup_showPopup:{type:"boolean",default:!0},popup_useBackgroundImage:{type:"boolean",default:!0},popup_useCharacterIcon:{type:"boolean",default:!1},popup_characterIconScale:{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]},popup_characterIconPosition:{type:"string",default:"positionOne",options:["positionOne","positionTwo"]},popup_enterAnimation:{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]},popup_freezeAnimations:{type:"boolean",default:!1},popup_exitAnimation:{type:"string",default:"fade",options:["fade","rise","slide","none"]},popup_previewExitAnimation:{type:"boolean",default:!1}}},TEXT_DEFS:{_ADD_:{popup_txt:{fontFamily:"Roboto",fontWeight:"bold",fontSize:52,textColor:"#494B54",strokeColor:"#ffffff",strokeWidth:0}}}},BuilderConfig:{MACRO_DEFS:{_ADD_:{popup_macro:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_characterPortraitTab",macroParams:["%%1"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_macro_noCharIcon:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_backgroundImageTab:{name:"Background Image",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a background image for the popup",type:"remoteSetting",settingName:"popup_useBackgroundImage"},{prompt:"Upload a new background image for the popup",type:"imageGroup",selectorDef:"popup_backgroundImage",path:"assets/alternate-images/popupBackgrounds",image:"%%0",colorize:!0,visibilityRemoteSetting:"popup_useBackgroundImage"}]},popup_characterPortraitTab:{name:"Character Icon",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a character icon for the popup",type:"remoteSetting",settingName:"popup_useCharacterIcon",restart:!0},{type:"group",groupType:"open",visibilityRemoteSetting:"popup_useCharacterIcon",steps:[{prompt:"Upload a new character icon",type:"imageGroup",selectorDef:"popup_characterIconImage",path:"assets/alternate-images/popupCharacterIcons",image:"%%0",autoCrop:!0,colorize:!0},{prompt:"Select the position of the character icon",type:"remoteSetting",settingName:"popup_characterIconPosition",selectorDef:"popup_characterIconPosition"},{prompt:"Adjust the size of the character icon",type:"remoteSetting",settingName:"popup_characterIconScale",sliderOptions:{formatter:function(){return""},reversed:!1}}]}]},popup_fontTab:{name:"Font",type:"group",groupType:"open",steps:[{prompt:"Change the font of the popups",type:"text",textDef:"popup_txt"}]},popup_animationsTab:{name:"Animations",type:"group",groupType:"tabs",stepId:"tween_group",steps:[{name:"Appearing Animation",prompt:"Choose the popup entrance style",type:"remoteSetting",settingName:"popup_enterAnimation",restart:!0},{name:"Disappearing Animation",prompt:"Choose a disappearing animation",type:"remoteSetting",settingName:"popup_exitAnimation",restart:!0,state:"popup_previewExitAnimation"}]}}},SELECTOR_DEFS:{_ADD_:{popup_backgroundImage:{names:["Default","Bubble","Cork","Gradient","Striped","Wood","Plastic"],values:["default.png","bubble.png","cork.png","gradient.png","greenBubble.png","wood.png","yellow.png"]},popup_characterIconImage:{names:["Default","Silhouette With Bow","Female","Male","Pirate"],values:["default.png","default_Bow.png","opponent_female.png","opponent_male.png","portrait_demo.png"]},popup_characterIconPosition:{names:["Left","Right"],values:["positionOne","positionTwo"]}}},STATE_DEFS:{_ADD_:{tutorialPopupExit:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]},popup_freezeAnimations:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_freezeAnimations",value:!0}]},popup_previewExitAnimation:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]}}}}},Phase10=function(){Phase10.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},Phase10.prototype={setup:function(t){Phase10.superclass.setup.call(this,t),this.game.colorDefUpdater=this.addChild((new ColorDefUpdater).setup({}));var e="promo"===TGE.RemoteSettings("state")?"promo":"gameplay";return this.stateManager=this.addChild((new StateManager).setup({initState:e,states:{gameplay:{events:[{event:"enterState",callback:function(){this.game.gameplayManager=this.addChild((new Phase10.Gameplay).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}}))}.bind(this)},{event:"gameplayCompleted",target:this.game.globalEvents,callback:this._setState.bind(this,"promo")}]},promo:{events:[{event:"enterState",callback:this.game.dispatchGlobalEvent.bind(this.game,{type:"promoActivated"})}]}}})),this},_setState:function(t){this.stateManager.setState(t)},nothing:function(){this.addChild((new ParticleBurst).setup({}))}},extend(Phase10,TGE.DisplayObjectContainer),Phase10.Gameplay=function(){Phase10.Gameplay.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},Phase10.Gameplay.prototype={setup:function(t){Phase10.Gameplay.superclass.setup.call(this,t),this.fullDeck=[];for(var e=1;e<=12;e++)this.fullDeck.push({color:"yellow",number:e});for(e=1;e<=12;e++)this.fullDeck.push({color:"red",number:e});for(e=1;e<=12;e++)this.fullDeck.push({color:"green",number:e});for(e=1;e<=12;e++)this.fullDeck.push({color:"blue",number:e});this.game.currentPhase=TGE.RemoteSettings("startOnPhase"),this.phaseData={};for(e=1;e<=TGE.RemoteSettings("numberOfPhases");e++){var i="run"===TGE.RemoteSettings("groupType_phase"+e)?"_run":"";this.phaseData[e]={groupType:TGE.RemoteSettings("groupType_phase"+e),groupSize:TGE.RemoteSettings("groupSize_phase"+e+i),startingCardAmount:TGE.RemoteSettings("startingCardAmount_phase"+e+i)}}switch(this.backgroundHolder=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1}})),this.backgroundHolder.addChild((new TGE.ProgressiveLoadingSprite).setup({lowResImage:"bg",highResImage:"bg_2x",layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1,useMinScale:!1}})),this.upperGradient=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:.2,xPercentage:0,topAnchor:-.5},backgroundGradient:{color1:this.game.colorDefUpdater.getTransparentColor(GameConfig.COLOR_DEFS.topGradient,0),color2:GameConfig.COLOR_DEFS.topGradient},alpha:.8})),this.game.colorDefUpdater.addWatchedColorDef("topGradient"),this.game.colorDefUpdater.addEventListener("colorDefChanged",function(){this.upperGradient.backgroundGradient={color1:this.game.colorDefUpdater.getTransparentColor(GameConfig.COLOR_DEFS.topGradient,0),color2:GameConfig.COLOR_DEFS.topGradient}}.bind(this)),this.logo=this.addChild((new TGE.Sprite).setup({image:"img_logo",layout:{portrait:{topAnchor:-.46,xPercentage:-.3,scaleToHeight:.09},landscape:{topAnchor:-.44,leftAnchor:-.44,scaleToWidth:.11,scaleToHeight:.13}}})),this.maskOverlay=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},backgroundColor:GameConfig.COLOR_DEFS.maskOverlay,visible:!1,alpha:0})),this.game.addGlobalEventListener("createMaskOverlay",this._fadeInMaskOverlay.bind(this)),this.game.addGlobalEventListener("removeMaskOverlay",this._fadeOutMaskOverlay.bind(this)),TGE.RemoteSettings("logoClickable")&&this.logo.addEventListener("click",TGE.Game.AppstoreClickthrough.bind(TGE.Game)),this.ctaButton=this.addChild((new TGE.Sprite).setup({image:"img_btn",layout:{portrait:{topAnchor:-.44,xPercentage:.23,scaleToHeight:.055},landscape:{topAnchor:-.42,rightAnchor:.56,scaleToWidth:.17,scaleToHeight:.25}}})),this.ctaButton.addChild((new TGE.DisplayObjectContainer).setup({width:596,height:152,layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:-.125}})).addChild((new TGE.Text).setup({textDef:"txt_gameplayCTA"})),this.ctaButton.addEventListener("click",TGE.Game.AppstoreClickthrough.bind(TGE.Game)),this.hand=this.addChild((new Phase10.Hand).setup({width:700,height:250,layout:{portrait:{xPercentage:0,bottomAnchor:.555,scaleToWidth:1,scaleToHeight:.19},landscape:{xPercentage:0,bottomAnchor:.55,scaleToHeight:.26}}})),this.cardSlots=[],this.slotHolder=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{portrait:{topAnchor:-.35,xPercentage:0,matchWidth:1,matchHeight:.6},landscape:{topAnchor:-.5,xPercentage:0,matchWidth:1,matchHeight:.65}}})),TGE.RemoteSettings("numberOfPhases")){case 1:this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,yPercentage:-.1,scaleToWidth:.9,scaleToHeight:.4},landscape:{xPercentage:0,yPercentage:.17,scaleToWidth:.9,scaleToHeight:.5}},groupType:this.phaseData[1].groupType,groupSize:this.phaseData[1].groupSize,phaseNumber:1})));break;case 2:this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,topAnchor:-.45,scaleToWidth:.9,scaleToHeight:.35},landscape:{xPercentage:-.25,yPercentage:.17,scaleToWidth:.45,scaleToHeight:.5}},groupType:this.phaseData[1].groupType,groupSize:this.phaseData[1].groupSize,beginLocked:1!==TGE.RemoteSettings("startOnPhase"),phaseNumber:1}))),this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,topAnchor:-.05,scaleToWidth:.9,scaleToHeight:.35},landscape:{xPercentage:.25,yPercentage:.17,scaleToWidth:.45,scaleToHeight:.5}},beginLocked:2!==TGE.RemoteSettings("startOnPhase"),groupType:this.phaseData[2].groupType,groupSize:this.phaseData[2].groupSize,phaseNumber:2})));break;case 3:this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,topAnchor:-.5,scaleToWidth:.9,scaleToHeight:.29},landscape:{xPercentage:0,topAnchor:-.45,scaleToWidth:.5,scaleToHeight:.45}},beginLocked:1!==TGE.RemoteSettings("startOnPhase"),groupType:this.phaseData[1].groupType,groupSize:this.phaseData[1].groupSize,phaseNumber:1}))),this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,yPercentage:-.05,scaleToWidth:.9,scaleToHeight:.29},landscape:{xPercentage:-.25,topAnchor:.025,scaleToWidth:.475,scaleToHeight:.45}},beginLocked:2!==TGE.RemoteSettings("startOnPhase"),groupType:this.phaseData[2].groupType,groupSize:this.phaseData[2].groupSize,phaseNumber:2}))),this.cardSlots.push(this.slotHolder.addChild((new Phase10.CardSlot).setup({width:700,height:300,layout:{portrait:{xPercentage:0,bottomAnchor:.6,scaleToWidth:.9,scaleToHeight:.29},landscape:{xPercentage:.25,topAnchor:.025,scaleToWidth:.475,scaleToHeight:.45}},beginLocked:3!==TGE.RemoteSettings("startOnPhase"),groupType:this.phaseData[3].groupType,groupSize:this.phaseData[3].groupSize,phaseNumber:3})))}return this.cardLayer=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1}})),this.tutorialManager=this.addChild((new Phase10.TutorialManager).setup({hand:this.hand,cardSlots:this.cardSlots,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.performAction({delay:.5,action:this._createStates.bind(this)}),this},_createStates:function(){this.stateManager=this.addChild((new StateManager).setup({initState:"phase",states:{phase:{events:[{event:"enterState",callback:function(){this.game.dispatchGlobalEvent({type:"newPhase",phaseData:this.phaseData[this.game.currentPhase]});var t,e=this._generatePhaseCards(this.game.currentPhase),i=e.startingCards,a=e.hand;for(t in a){var o=this.cardLayer.addChild((new Phase10.Card).setup({layer:this.cardLayer,x:.6*-this.game.stage.width,y:this.hand.y,scaleByHeight:this.hand.getCardHeight(),color:a[t].color,number:a[t].number,isFacingForward:!1}));this.performAction({delay:.05*t,action:this.hand.addCard.bind(this.hand,o)})}for(t in this.performAction({delay:.05*a.length+.15,action:this.hand.flipAndFanOut.bind(this.hand)}),i){var n=this.cardSlots[this.game.currentPhase-1],r=n.localToObject(this.cardLayer,{x:n.slot.x,y:n.slot.y},!0),o=this.cardLayer.addChild((new Phase10.Card).setup({layer:this.cardLayer,x:r.x,y:r.y,scaleByHeight:n.getCardHeight(),color:i[t].color,number:i[t].number,isFacingForward:!0,isLockedInPlace:!0,visible:!1}));n.addCard(o),this.performAction({delay:1+.025*t,action:function(t){t.visible=!0,t.tweenFrom({scaleX:0,duration:.2,easing:TGE.Tween.Back.Out})}.bind(this,o)})}}.bind(this)},{event:"phaseObjectiveComplete",target:this.game.globalEvents,callback:function(){this._setState("phaseCompleteCelebration")}.bind(this)}]},phaseCompleteCelebration:{events:[{event:"enterState",callback:function(){this.hand.discardAll(),this.cardSlots[this.game.currentPhase]&&this.cardSlots[this.game.currentPhase].unlockSpine(),this.completionConditionsFulfilled=0}.bind(this)},{event:"handDiscardComplete",target:this.game.globalEvents,callback:this.dispatchEvent.bind(this,{type:"completionConditionFulfilled"})},{event:"cardSmileAnimationComplete",target:this.game.globalEvents,callback:this.dispatchEvent.bind(this,{type:"completionConditionFulfilled"})},{event:"completionConditionFulfilled",callback:function(){this.completionConditionsFulfilled++,1<=this.completionConditionsFulfilled&&this.dispatchEvent({type:"phaseCompleteAnimationFinished"})}.bind(this)},{event:"phaseCompleteAnimationFinished",callback:function(){this.cardSlots[this.game.currentPhase-1].lock(),this.game.currentPhase++,this.game.currentPhase>TGE.RemoteSettings("numberOfPhases")?this._setState("gameCompleteCelebration"):this._setState("phase")}.bind(this)}]},gameCompleteCelebration:{events:[{event:"enterState",callback:function(){this._playGameCompleteAnimation()}.bind(this)},{event:"gameCompleteAnimationFinished",delay:.5,callback:this.game.dispatchGlobalEvent.bind(this.game,{type:"gameplayCompleted"})}]}}})),this.game.addGlobalEventListener("cardDropped",this._onCardDropped.bind(this))},_setState:function(t){this.stateManager.setState(t)},_generatePhaseCards:function(t){var e=this.phaseData[t].groupType,i=this.phaseData[t].groupSize,a=this.phaseData[t].startingCardAmount,o=TGE.DeepClone(this.fullDeck),n=[],r=[];switch(e){case"set":this.winningNumber=ModuleMath.Random.rangeInt(1,12);var s=function(t){return t.number===this.winningNumber}.bind(this);break;case"run":var l=ModuleMath.Random.rangeInt(1,13-i);this.completeRun=[];for(var p=l;p<l+i;p++)this.completeRun.push(p);s=function(t){return!!this.completeRun.includes(t.number)&&(this.completeRun.splice(this.completeRun.indexOf(t.number),1),!0)}.bind(this);break;case"color":var c=["red","blue","green","yellow"];this.winningColor=c[ModuleMath.Random.int(c.length)];s=function(t){return t.color===this.winningColor}.bind(this)}for(var h=0,p=0;p<i;p++){for(this.pickedCard=o[ModuleMath.Random.int(o.length)];!1===s.call(this,this.pickedCard);)this.pickedCard=o[ModuleMath.Random.int(o.length)];h<a?(r.push(this.pickedCard),h++):n.push(this.pickedCard),o.splice(o.indexOf(this.pickedCard),1)}for(var m="run"===e?"_run":"";n.length<TGE.RemoteSettings("handSize_phase"+t+m);){var u=ModuleMath.Random.int(o.length-1);n.push(o[u]),o.splice(u,1)}for(p=n.length-1;0<p;p--){var d=Math.floor(Math.random()*(p+1)),g=n[p];n[p]=n[d],n[d]=g}return{startingCards:r,hand:n}},_onCardDropped:function(t){var e,i=t.card.getBounds(!0);for(e in this.cardSlots)if(!this.cardSlots[e].isLocked){if(this.cardSlots[e].cardsInSlot.length>=this.cardSlots[e].groupSize)return void t.card.denySlotEntry(this.hand.addCard.bind(this.hand,t.card));if(i.intersects(this.cardSlots[e].getBounds())){t.card.notEnoughSpaces=void 0;var a=this.getIsPhaseWinnableWithCard(t.card);return TGE.RemoteSettings("allowWrongCardPlacement")||a?(a||void 0!==t.card.notEnoughSpaces||(t.card.isIncorrect=!0),t.card.notEnoughSpaces=void 0,void this.cardSlots[e].addCard(t.card)):void t.card.denySlotEntry(this.hand.addCard.bind(this.hand,t.card))}}this.hand.addCard(t.card)},_playGameCompleteAnimation:function(){this.game.isAssetListLoaded(this.game.engagementAssetList)?(this.addChild((new ParticleEffect).setup({particleImage:"img_whiteSqure",baseEffect:particleEffect_confettiBurst1,particleScale:.4,width:100,height:568,initialSpeed:{min:300,max:1e3},layout:{scaleToHeight:1,xPercentage:-.5,yPercentage:0}})),this.addChild((new ParticleEffect).setup({particleImage:"img_whiteSqure",baseEffect:particleEffect_confettiBurst1,initialDirection:{min:-30,max:-90},startingXPercentage:1.1,particleScale:.4,initialSpeed:{min:300,max:1e3},tweens:[{scaleX:0,duration:{min:.2,max:.5},loop:!0,rewind:!0}],width:100,height:568,layout:{scaleToHeight:1,xPercentage:.5,yPercentage:0}})),this.animationHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:512,height:209,layout:{portrait:{scaleToWidth:.9,scaleToHeight:1,xPercentage:0,yPercentage:0},landscape:{scaleToWidth:1,scaleToHeight:.4,xPercentage:0,yPercentage:-.1}}})),this.animationHolder.addChild((new ParticleEffect).setup({particleImage:"sparkle",baseEffect:particleEffect_sparkle,startingXPercentage:{min:0,max:1},startingYPercentage:{min:0,max:1},particleScale:.25,simulationSpace:"screen",layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.completedBackground=this.animationHolder.addChild((new TGE.Sprite).setup({image:"bg_completed",alpha:1,layout:{portrait:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},landscape:{scaleToWidth:1,scaleToHeight:2,xPercentage:0,yPercentage:0}}})),this.completedBackground.addChild((new TGE.Sprite).setup({image:"bg_completed",layout:{scaleToWidth:1,scaleToHeight:1,rightAnchor:1.49,yPercentage:.3475}})),this.completedBackground.addChild((new TGE.Sprite).setup({image:"bg_completed",layout:{scaleToWidth:1,scaleToHeight:1,leftAnchor:.49,yPercentage:-.3475}})),this.completedText=this.animationHolder.addChild((new TGE.Sprite).setup({image:"txt_completed",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},alpha:1})),this.completedBackground.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Sine.Out}),this.completedBackground.tweenFrom({layout:{portrait:{xPercentage:-1,yPercentage:.35},landscape:{xPercentage:-1,yPercentage:.35}},duration:.5,easing:TGE.Tween.Sine.Out}),this.completedText.tweenFrom({alpha:0,layout:{scaleToWidth:.5},delay:.1,duration:.25,easing:TGE.Tween.Sine.Out}),this.animationHolder.tweenTo({layout:{portrait:{yPercentage:-.025,scaleToWidth:.95},landscape:{yPercentage:-.15,scaleToHeight:.45}},duration:.9,easing:TGE.Tween.Back.Out,onComplete:function(){this.completedBackground.tweenTo({alpha:0,layout:{portrait:{xPercentage:1,yPercentage:-.35},landscape:{xPercentage:1,yPercentage:-.35}},duration:.25,easing:TGE.Tween.Quadratic.In}),this.completedText.tweenTo({layout:{scaleToWidth:.85},duration:.25,easing:TGE.Tween.Back.Out,onComplete:this.dispatchEvent.bind(this,{type:"gameCompleteAnimationFinished"})})}.bind(this)})):this.game.waitForAssetList(this.game.engagementAssetList,this._playGameCompleteAnimation.bind(this))},getIsPhaseWinnableWithCard:function(t){var h=this.cardSlots[this.game.currentPhase-1];switch(h.groupType){case"color":case"set":var e,i="set"===h.groupType?"number":"color",a=t[i],o=[];for(l in this.hand.cardsInHand)o.push(this.hand.cardsInHand[l]);for(l in h.cardsInSlot)o.push(h.cardsInSlot[l]);o.includes(t)?e=0:(e=1,o.push(t));var n=0;for(l in h.cardsInSlot)h.cardsInSlot[l][i]===a&&n++;var r=0,s=h.groupSize-h.cardsInSlot.length;for(l in s-=h.cardsInSlot.length-n,o)if(this.hand.cardsInHand.includes(o[l])){if(o[l][i]===a&&(r++,!h.cardsInSlot.includes(o[l]))){if(s<=0)return!(t.notEnoughSpaces=!0);s--}if(r+n+e>=h.groupSize)return!0}return!1;case"run":for(var l in h.cardsInSlot)if(t!==h.cardsInSlot[l]&&h.cardsInSlot[l].number===t.number)return!1;function p(t,e,i){var a=[];for(l in this.hand.cardsInHand)"emptySpace"!==this.hand.cardsInHand[l]&&a.push(this.hand.cardsInHand[l]);var o=[];for(l in h.cardsInSlot)o.push(h.cardsInSlot[l]);o.push(i);var n,r=[t],s=t;n=a.includes(i)?(a.splice(a.indexOf(i),1),1):0;for(var l=0;l<h.groupSize&&!(r.length>=h.groupSize);l++){var p=null;for(c in o)if(o[c].number===s.number+e){p=o[c];break}if(null===p){if(!(n>=h.groupSize-h.cardsInSlot.length-1)){for(var c in p=null,a)if(a[c].number===s.number+e){p=a[c];break}if(null===p)break;r.push(p),s=p,a.splice(a.indexOf(p),1),n++}}else r.push(p),s=p,o.splice(o.indexOf(p),1)}for(l in h.cardsInSlot)if(!r.includes(h.cardsInSlot[l]))return!1;if(r.length>=h.groupSize&&r.includes(i))return!0}if(p.call(this,t,1,t))return!0;if(p.call(this,t,-1,t))return!0;for(var l in h.cardsInSlot){if(p.call(this,h.cardsInSlot[l],1,t))return!0;if(p.call(this,h.cardsInSlot[l],-1,t))return!0}for(var l in this.hand.cardsInHand){if(!(Math.abs(this.hand.cardsInHand[l].number-t.number)>this.groupSize-h.cardsInSlot.length)){if(p.call(this,this.hand.cardsInHand[l],1,t))return!0;if(p.call(this,this.hand.cardsInHand[l],-1,t))return!0}}return!1}},_fadeInMaskOverlay:function(){this.game.endTween(this.maskOverlayTween),this.maskOverlay.visible=!0,this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:TGE.RemoteSettings("maskOverlayAlpha"),duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out})},_fadeOutMaskOverlay:function(){this.game.endTween(this.maskOverlayTween),this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:0,duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out,onComplete:function(){this.maskOverlay.visible=!1}.bind(this)})}},extend(Phase10.Gameplay,TGE.DisplayObjectContainer),Phase10.TutorialManager=function(){Phase10.TutorialManager.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},Phase10.TutorialManager.prototype={setup:function(t){return Phase10.TutorialManager.superclass.setup.call(this,t),this.hand=t.hand,this.cardSlots=t.cardSlots,this.game.addGlobalEventListener("newPhase",function(t){this.currentPhaseData=t.phaseData}.bind(this)),TGE.RemoteSettings("tutorialMessageActive")&&TGE.RemoteSettings("forceTutorialMessage")&&this._createTutorialMessage(),this.stateManager=this.addChild((new StateManager).setup({initState:"waitingForStartOfPhase",states:{waitingForStartOfPhase:{events:[{event:"enterState",callback:function(){this.no=!0}.bind(this)},{event:"cardsFannedOut",target:this.game.globalEvents,callback:function(){TGE.RemoteSettings("pointerActive")||TGE.RemoteSettings("tutorialMessageActive")?(this._setState("showingTutorial"),this.no=!1):TGE.RemoteSettings("idleTimerActive")&&(this._setState("runningTimer"),this.no=!1)}.bind(this)}]},idle:{events:[{event:"cardEnteredHand",target:this.game.globalEvents,callback:function(){TGE.RemoteSettings("idleTimerActive")&&this._setState("runningTimer")}.bind(this)},{event:"beginningSmileyAnimation",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForStartOfPhase")},{event:"cardEnteredSlot",target:this.game.globalEvents,callback:function(){this.no||TGE.RemoteSettings("idleTimerActive")&&this._setState("runningTimer")}.bind(this)}]},runningTimer:{events:[{event:"enterState",callback:function(){this.idleTimer=TGE.RemoteSettings("idleTimerDuration")}.bind(this)},{event:"update",callback:function(t){this.idleTimer-=t.elapsedTime,this.idleTimer<=0&&this._setState("showingTutorial")}.bind(this)},{event:"beginningSmileyAnimation",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForStartOfPhase")},{event:"cardDraggedOutOfHand",target:this.game.globalEvents,callback:this._setState.bind(this,"idle")},{event:"cardDraggedOutOfSlot",target:this.game.globalEvents,callback:this._setState.bind(this,"idle")},{event:"cardEnteredSlot",target:this.game.globalEvents,callback:function(t){this.no||this.game.gameplayManager.getIsPhaseWinnableWithCard(t.card)&&this._setState("runningTimer")}.bind(this)}]},showingTutorial:{events:[{event:"enterState",callback:function(){var t=this.cardSlots[this.game.currentPhase-1],e=(TGE.RemoteSettings("groupSize_phase"+this.game.currentPhase),t.getIncorrectCard());if(void 0!==e)var i=this.hand;else{if(void 0===(e=this.hand.getWinningCard()))return void this._setState("idle");i=t}this.hand.highlightCard(e),TGE.RemoteSettings("maskOverlayActive")&&this.game.dispatchGlobalEvent({type:"createMaskOverlay",highlightedCard:e}),TGE.RemoteSettings("tutorialMessageActive")&&this._createTutorialMessage(),TGE.RemoteSettings("pointerActive")&&(this.pointer=this.game.gameScreen.addChild((new Pointer).setup({pointerImage:"pointer",action:"drag",target:e,target2:i,mirror:!1})),this.showedPointer=!0)}.bind(this)},{event:"beginningSmileyAnimation",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForStartOfPhase")},{event:"cardDraggedOutOfHand",target:this.game.globalEvents,callback:this._setState.bind(this,"idle")},{event:"cardDraggedOutOfSlot",target:this.game.globalEvents,callback:this._setState.bind(this,"idle")},{event:"leaveState",callback:function(){this.pointer&&this.pointer.markForRemoval(),TGE.RemoteSettings("maskOverlayActive")&&this.game.dispatchGlobalEvent({type:"removeMaskOverlay"}),this.popup&&this.messageReference&&(this.removePopup(),this.performAction({delay:.5,action:function(){this.messageReference.markForRemoval(),this.messageReference=null,this.messageHolder.markForRemoval(),null!==this.messageHolderListener&&(this.removeEventListener("update",this.messageHolderListener),this.messageHolderListener=null)}.bind(this)}))}.bind(this)}]}}})),this},_setState:function(t){this.stateManager.setState(t)},_createTutorialMessage:function(){var t,e,i={};if(!this.messageReference){if(1===TGE.RemoteSettings("numberOfPhases"))i.portrait={xPercentage:0,yPercentage:.25,scaleToWidth:1.1,scaleToHeight:.25};else{for(e in this.cardSlots)if(this.cardSlots[e].isLocked){t=this.cardSlots[e];break}i.portrait=TGE.DeepClone(t.layout.portrait),i.portrait.scaleToWidth+=.25}TGE.RemoteSettings("numberOfPhases")<3?i.landscape={topAnchor:-.45,xPercentage:0,scaleToWidth:.5,scaleToHeight:.35}:1===this.game.currentPhase?i.landscape={topAnchor:.05,xPercentage:0,scaleToWidth:.6,scaleToHeight:.4}:i.landscape=TGE.DeepClone(this.cardSlots[0].layout.landscape);var a,o,n=this.game.assetManager.getAsset("img_tutBox");this.messageReference||(this.messageReference=this.cardSlots[0].parent.addChild((new TGE.DisplayObjectContainer).setup({width:n.width,height:n.height,layout:i})),this.messageHolder=this.game.gameScreen.addChild((new TGE.DisplayObjectContainer).setup({width:this.messageReference.width*this.messageReference.scaleX,height:this.messageReference.height*this.messageReference.scaleY})),this.messageHolderListener=this.addEventListener("update",function(){var t=this.messageReference.localToStage({x:0,y:0},!0);this.messageHolder.x=t.x,this.messageHolder.y=t.y,this.messageHolder.width=this.messageReference.width*this.messageReference.scaleX,this.messageHolder.height=this.messageReference.height*this.messageReference.scaleY,this.popup.dispatchEvent(TGE._ResizeEvent)}.bind(this))),o=TGE.RemoteSettings("forceTutorialMessage")?(a="txt_tutorialMessage_"+TGE.RemoteSettings("forceTutorialMessage"),"img_"+TGE.RemoteSettings("forceTutorialMessage")+"3"):(a="txt_tutorialMessage_"+this.currentPhaseData.groupType,"img_"+this.currentPhaseData.groupType+"3"),this.popup=this.messageHolder.addChild((new TGE.DisplayObjectContainer).setup({alpha:0,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.popup.addChild((new TGE.Sprite).setup({image:"img_tutBox",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}})),this.popup.addChild((new TGE.DisplayObjectContainer).setup({width:.75*n.width,height:.4*n.height,layout:{xPercentage:0,topAnchor:-.45,scaleToHeight:.4}})).addChild((new TGE.Text).setup({textDef:a,wrapWidth:.9*n.width,lineSpacing:.1})),this.popup.addChild((new TGE.Sprite).setup({image:o,layout:{xPercentage:0,bottomAnchor:.6,scaleToHeight:.475}})),this.popup.addChild((new TGE.DisplayObjectContainer).setup({width:100,height:75,layout:{rightAnchor:1.09,yPercentage:.05,scaleToHeight:.325}})).addChild((new TGE.Text).setup({textDef:"font_tutorialEG",text:"e.g."})),this.game.endTween(this.popupTween),this.popupTween=this.popup.tweenTo({alpha:1,duration:.4,easing:TGE.Tween.Sine.InOut})}},removePopup:function(){this.game.endTween(this.popupTween),this.popupTween=this.popup.tweenTo({alpha:0,duration:.4,easing:TGE.Tween.Sine.InOut,removeOnComplete:!0})}},extend(Phase10.TutorialManager,TGE.DisplayObjectContainer),Phase10.Card=function(){Phase10.Card.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{isFacingForward:!0})},Phase10.Card.prototype={setup:function(t){return t.width=150,t.height=232,PropertyCombine.setupInstance(this,t,Phase10.Card.superclass.setup),this.localObject=this.layer,this.tweens=[],this.scaleByHeight&&this.setScaleByHeight(this.scaleByHeight,0),this.visual=this.addChild((new Phase10.Card.Visual).setup({card:this,isFacingForward:this.isFacingForward,layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1}})),this.visual.mouseEnabled=!0,this.stateManager=this.addChild((new StateManager).setup({initState:"idle",states:{idle:{events:[{event:"enteredHand",callback:this._setState.bind(this,"idleInHand")},{event:"enteredSlot",callback:this._setState.bind(this,"idleInSlot")},{event:"selectedInHand",callback:this._setState.bind(this,"selectedInHand")}]},idleInSlot:{events:[{event:"enterState",callback:function(){this.isInSlot=!0}.bind(this)},{event:"selectedInSlot",callback:this._setState.bind(this,"selectedInSlot")}]},selectedInSlot:{events:[{event:"mouseup",target:this.game.stage,callback:function(){this.selectInSlot(!1),this._setState("idleInSlot")}.bind(this)},{event:"update",callback:function(){this.isSelected&&this.slot.getMouseDownCard()!==this&&(this.game.dispatchGlobalEvent({type:"cardDraggedOutOfSlot",card:this}),this.bringToFront(),this.dispatchEvent({type:"draggedOutOfSlot"}),this._setState("beingDragged"))}.bind(this)},{event:"leaveState",callback:function(){this.isInSlot=!1}.bind(this)}]},idleInHand:{events:[{event:"selectedInHand",callback:this._setState.bind(this,"selectedInHand")}]},selectedInHand:{events:[{event:"mouseup",target:this.game.stage,callback:function(){this.selectInHand(!1),this._setState("idleInHand")}.bind(this)},{event:"update",callback:function(){var t;this.isSelected&&(t=TGE.Vector2.Distance(this.hand.mouseDownPosition,new TGE.Vector2(this.stage.mouseX,this.stage.mouseY)),this.game.stage.isMouseDown()&&10<=t&&(this.game.dispatchGlobalEvent({type:"cardDraggedOutOfHand"}),this._setState("beingDragged")))}.bind(this)}]},beingDragged:{events:[{event:"enterState",callback:function(){TGE.Analytics.Engagement(),this.bringToFront(),this.tweens.push(this.tweenTo({rotation:0,duration:.3,easing:TGE.Tween.Quadratic.Out}))}.bind(this)},{event:"mouseup",target:this.game.stage,callback:function(){this.game.dispatchGlobalEvent({type:"cardDropped",card:this}),this._setState("idle")}.bind(this)},{event:"update",callback:function(){var t=this.layer.stageToLocal({x:this.stage.mouseX-.5*this.stage.width,y:this.stage.mouseY-.5*this.stage.height}),e=TGE.Math.Lerp(this.x,t.x,.3),i=TGE.Math.Lerp(this.y,t.y,.3);this.x=e,this.y=i}.bind(this)}]}}})),this},_setState:function(t){this.stateManager.setState(t)},flipOver:function(){this.dispatchEvent({type:"flipOver"})},activateGlow:function(t){!0===t?this.dispatchEvent({type:"startGlowing"}):!1===t&&this.dispatchEvent({type:"stopGlowing"})},moveTo:function(t){this.localObject=t.localObject,this.game.endTweens(this.tweens,!1,!1);var e,i,a=this._getLayerPosition(this.localObject,{x:t.x,y:t.y}),o=t.duration?t.duration:void 0;void 0===o&&(e=ModuleMath.Geometry.distance({x:0,y:0},a),i=this.game.stage.width>this.game.stage.height?this.game.stage.width:this.game.stage.height,o=TGE.MapValue(e,0,i,.1,.5)),t.height&&this.setScaleByHeight(t.height,o),this.tweens.push(this.tweenTo({x:a.x,y:a.y,rotation:t.rotation,duration:o,easing:t.easing?t.easing:TGE.Tween.Cubic.Out,onComplete:t.onComplete?t.onComplete:null}))},setScaleByHeight:function(t,e){this.game.endTween(this.setScaleTween),this.setScaleTween=this.tweenTo({scale:t?t/this.height:1,duration:.2,easing:TGE.Tween.Sine.Out})},getMouseOn:function(){return this.isMobileDevice?this.visual.cardFront.isMouseOver():this.visual.cardFront.isMouseOver()&&this.game.stage.isMouseDown()},highlight:function(t){!0===t?(this.dispatchEvent({type:"highlighted"}),this.activateGlow(!0)):(this.dispatchEvent({type:"unhighlighted"}),this.activateGlow(!1))},becomeLocked:function(){this.dispatchEvent({type:"locked"})},selectInHand:function(t){this._select(t,"hand")},selectInSlot:function(t){this._select(t,"slot")},_select:function(t,e){var i="hand"===e?"Hand":"Slot";this.isSelected&&!t?(this.game.dispatchGlobalEvent({type:"cardDeselectedIn"+i}),this.dispatchEvent({type:"deselectedIn"+i})):!this.isSelected&&t&&this.dispatchEvent({type:"selectedIn"+i}),this.isSelected=t},setLayerDepth:function(t){t<0&&(t=0),this.layer.addChildAt(this,t)},getLayerDepth:function(){return this.layer.getChildIndex(this)},becomeSmiley:function(){this.dispatchEvent({type:"becomingSmiley"})},denySlotEntry:function(t){this.dispatchEvent({type:"deniedEntry",onComplete:t})},_updatePosition:function(){this.x=layerPosition.x,this.y=layerPosition.y},_getLayerPosition:function(t,e){return t.localToObject(this.layer,e,!0)}},extend(Phase10.Card,TGE.DisplayObjectContainer),Phase10.Card.Visual=function(t,e){Phase10.Card.Visual.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},Phase10.Card.Visual.prototype={setup:function(t){return PropertyCombine.setupInstance(this,t,Phase10.Card.Visual.superclass.setup),this.selectionTweens=[],this.mainHolder=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1}})),this.glow=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-glow",layout:{xPercentage:0,yPercentage:0,matchWidth:1.3,matchHeight:1.2},alpha:0})),this.cardBack=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-back",layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1},visible:!this.isFacingForward})),this.cardFront=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-base",layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1},visible:this.isFacingForward,mouseEnabled:!0})),this.number=this.cardFront.addChild((new TGE.Sprite).setup({image:"card"+this.card.number,colorize:GameConfig.COLOR_DEFS["card_"+this.card.color],layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.lockOverlay=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-base",colorize:GameConfig.COLOR_DEFS.maskOverlay,visible:!1,alpha:0,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.maskOverlay=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-base",colorize:GameConfig.COLOR_DEFS.maskOverlay,visible:!1,alpha:0,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.mistakeOverlay=this.mainHolder.addChild((new TGE.Sprite).setup({image:"card-base",colorize:"#b11e1e",visible:!1,alpha:0,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.card.addEventListener("selectedInHand",this._popUp.bind(this)),this.card.addEventListener("highlighted",this._popUp.bind(this)),this.card.addEventListener("deselectedInHand",this._plopDown.bind(this)),this.card.addEventListener("unhighlighted",this._plopDown.bind(this)),this.card.addEventListener("selectedInSlot",this._popUp.bind(this)),this.card.addEventListener("deselectedInSlot",this._plopDown.bind(this)),this.card.addEventListener("enteringSlot",this._plopDown.bind(this)),this.card.addEventListener("draggedOutOfSlot",this._resetScale.bind(this)),this.card.addEventListener("flipOver",this._flipOver.bind(this)),this.card.addEventListener("becomingSmiley",this._becomeSmiley.bind(this)),this.card.addEventListener("startGlowing",this._startGlowing.bind(this)),this.card.addEventListener("stopGlowing",this._stopGlowing.bind(this)),this.card.addEventListener("locked",this._becomeLocked.bind(this)),this.card.addEventListener("enteredSlot",this._wiggleAfterMoveTo.bind(this)),this.card.addEventListener("deniedEntry",this._playDenyEntryAnimation.bind(this)),this.game.addGlobalEventListener("cardEnteredSlot",this._stopGlowing.bind(this)),this.game.addGlobalEventListener("createMaskOverlay",this._fadeInMaskOverlay.bind(this)),this.game.addGlobalEventListener("removeMaskOverlay",this._fadeOutMaskOverlay.bind(this)),this},_wiggleAfterMoveTo:function(){this.mainHolder.tweenTo({layout:{matchWidth:.9,matchHeight:1.1},duration:.1,easing:TGE.Tween.Sine.InOut}).thenTweenTo({layout:{matchWidth:1.1,matchHeight:.9},duration:.1,easing:TGE.Tween.Sine.InOut}).thenTweenTo({layout:{matchWidth:1,matchHeight:1},duration:.1,easing:TGE.Tween.Sine.InOut})},_becomeLocked:function(){this.lockOverlay.visible=!0,this.lockOverlay.tweenTo({alpha:TGE.RemoteSettings("maskOverlayAlpha"),duration:.25,easing:TGE.Tween.Sine.InOut})},_startGlowing:function(){this.game.endTween(this.glowTween),this.glowTween=this.glow.tweenTo({alpha:1,duration:.3,easing:TGE.Tween.Sine.Out}).thenTweenTo({alpha:.2,duration:.5,rewind:!0,loop:!0,easing:TGE.Tween.Sine.InOut})},_stopGlowing:function(){this.game.endTween(this.glowTween,!1,!1),this.glowTween=this.glow.tweenTo({alpha:0,duration:.3,easing:TGE.Tween.Sine.Out})},_becomeSmiley:function(){this.mainHolder.tweenTo({rotation:15,delay:.3,duration:.2,easing:TGE.Tween.Back.InOut}),this._flipAndRevealSmiley(.3,.4,!0);this.performAction({delay:2,action:this._flipAndRevealSmiley.bind(this,0,.4,!1)}),this.performAction({delay:2.4,action:this.game.dispatchGlobalEvent.bind(this.game,{type:"smileyAnimationCompleted"})})},_flipAndRevealSmiley:function(t,e,i){this.mainHolder.tweenTo({layout:{matchWidth:0},delay:t+.5*e,duration:.25*e,easing:TGE.Tween.Back.In,onComplete:function(){this.cardFront.visible=!1,this.cardBack.visible=!0}.bind(this)}).thenTweenTo({layout:{matchWidth:1},duration:.25*e,easing:TGE.Tween.Quadratic.Out}).thenTweenTo({layout:{matchWidth:0},duration:.25*e,easing:TGE.Tween.Quadratic.In,onComplete:function(){this.cardBack.visible=!1,this.cardFront.visible=!0,this.game.isAssetLoaded("card-face")&&(this.number.image=i?"card-face":"card"+this.card.number)}.bind(this)}).thenTweenTo({layout:{matchWidth:1},duration:.25*e,easing:TGE.Tween.Back.Out,onComplete:i?this._flipOver.bind(this,!0):null})},_flipOver:function(t){this.mainHolder.tweenTo({layout:{matchHeight:.7,matchWidth:1.3,yPercentage:.15},duration:.4*.7,easing:TGE.Tween.Back.In}).thenTweenTo({layout:{yPercentage:0,matchHeight:1.2,matchWidth:.8},duration:.4*.35,easing:TGE.Tween.Back.Out}),this.mainHolder.tweenTo({layout:{yPercentage:-1,matchHeight:1},rotation:0,delay:.4*.9,duration:.36,easing:TGE.Tween.Quintic.Out}).thenTweenTo({layout:{yPercentage:0},duration:.24,easing:TGE.Tween.Bounce.Out}),this.mainHolder.tweenTo({layout:{matchWidth:0},delay:.4*.9+.12,duration:.18,easing:TGE.Tween.Back.In,onComplete:function(t){!0===t||(this.isFacingForward=!this.isFacingForward,this.cardFront.visible=this.isFacingForward,this.cardBack.visible=!this.isFacingForward)}.bind(this,t)}).thenTweenTo({layout:{matchWidth:1},duration:.18,easing:TGE.Tween.Back.Out})},_popUp:function(){this.game.endTweens(this.selectionTweens,!1,!1),this.selectionTweens.push(this.mainHolder.tweenTo({layout:{yPercentage:-.25},easing:TGE.Tween.Back.Out,duration:.2}))},_popOut:function(){this.game.endTweens(this.selectionTweens,!1,!1),this.selectionTweens.push(this.mainHolder.tweenTo({scale:1.1,easing:TGE.Tween.Back.Out,duration:.2}))},_plopBack:function(){this.game.endTweens(this.selectionTweens,!1,!1),this.selectionTweens.push(this.mainHolder.tweenTo({scale:1,easing:TGE.Tween.Back.Out,duration:.2}))},_plopDown:function(){this.game.endTweens(this.selectionTweens,!1,!1),this.selectionTweens.push(this.mainHolder.tweenTo({layout:{yPercentage:0},easing:TGE.Tween.Back.Out,duration:.2}))},_playDenyEntryAnimation:function(t){this.mainHolder.tweenTo({rotation:5,duration:.1,easing:TGE.Tween.Circular.In}).thenTweenTo({rotation:-5,duration:.1,easing:TGE.Tween.Back.Out}).thenTweenTo({rotation:5,duration:.1,easing:TGE.Tween.Back.Out}).thenTweenTo({rotation:0,duration:.1,easing:TGE.Tween.Circular.Out,onComplete:t.onComplete}),this.mainHolder.tweenTo({layout:{matchWidth:.9,matchHeight:.9},duration:.1,easing:TGE.Tween.Circular.Out}).thenTweenTo({layout:{matchWidth:1,matchHeight:1},duration:.4*.75,easing:TGE.Tween.Back.Out}),this.game.endTween(this.mistakeOverlayTween),this.mistakeOverlay.visible=!0;this.mistakeOverlayTween=this.mistakeOverlay.tweenTo({alpha:.7,duration:.2,easing:TGE.Tween.Sine.Out}).thenTweenTo({alpha:0,duration:.2,easing:TGE.Tween.Sine.Out,onComplete:function(){this.mistakeOverlay.visible=!1}.bind(this)})},_resetScale:function(){this.game.endTweens(this.selectionTweens),this.selectionTweens.push(this.mainHolder.tweenTo({scale:1,easing:TGE.Tween.Sine.InOut,duration:.2}))},_fadeInMaskOverlay:function(t){t.highlightedCard===this.card||this.card.isInSlot||(this.game.endTween(this.maskOverlayTween),this.maskOverlay.visible=!0,this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:TGE.RemoteSettings("maskOverlayAlpha"),duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out}))},_fadeOutMaskOverlay:function(){this.game.endTween(this.mistakeOverlayTween),this.game.endTween(this.maskOverlayTween),this.mistakeOverlayTween=this.mistakeOverlay.tweenTo({alpha:0,duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out}),this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:0,duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out,onComplete:function(){this.maskOverlay.visible=!1}.bind(this)})}},extend(Phase10.Card.Visual,TGE.DisplayObjectContainer),Phase10.Hand=function(){Phase10.Hand.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{targetHorizontalSpacing:.095,targetVerticalSpacing:5,highestY:0,lowestY:50,rotationIncrement:3,maxRotation:15})},Phase10.Hand.prototype={setup:function(t){return PropertyCombine.setupInstance(this,t,Phase10.Hand.superclass.setup),this.cardsInHand=[],this.isFannedOut=!1,this.lockInput=!0,this.stateManager=this.addChild((new StateManager).setup({initState:"init",states:{init:{events:[{event:"cardsFannedOut",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForCardSelection")},{event:"leaveState",callback:function(){this.lockInput=!1}.bind(this)}]},idle:{events:[{event:"cardEnteredHand",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForCardSelection")},{event:"cardEnteredSlot",target:this.game.globalEvents,callback:function(){this._removeEmptySpaces(),this._updateCardPositions(),this._setState("waitingForCardSelection")}.bind(this)}]},waitingForCardSelection:{events:[{event:"update",callback:function(){var t;this.lockInput||null!==(t=this.getMouseDownCard())&&this.selectCard(t)}.bind(this)},{event:"cardSelected",callback:this._setState.bind(this,"cardSelected")},{event:"cardDraggedOutOfSlot",target:this.game.globalEvents,callback:function(t){this.grabbedCard=t.card,this._deselectAllCards(),this._setState("cardOut")}.bind(this)}]},cardSelected:{events:[{event:"cardDeselectedInHand",target:this.game.globalEvents,callback:function(){this._setState("waitingForCardSelection")}.bind(this)},{event:"cardDraggedOutOfHand",target:this.game.globalEvents,callback:function(){this._unhighlightAll(),this.removeCard(this.selectedCard),this.grabbedCard=this.selectedCard,this.selectedCard=null,this._setState("cardOut")}.bind(this)}]},cardOut:{events:[{event:"update",callback:function(){if(0!==this.cardsInHand.length){var t=this.cardsInHand[this.cardsInHand.length-1];if("emptySpace"!==t){var e=t.localToStage({x:.5*t.width,y:0}).x,i=this.stage.mouseX>e;if(i&=this.stage.mouseY>this.localToStage({x:0,y:.5*-this.height}).y)return this._removeEmptySpaces(),this.cardsInHand.push("emptySpace"),this._updateCardPositions(),this.grabbedCard.setScaleByHeight(this.getCardHeight()),void this.grabbedCard.bringToFront()}var a,o=this.getMouseDownCard();if("emptySpace"===t&&o===this.cardsInHand[this.cardsInHand.length-2]){var n=o.localToStage({x:.5*o.width,y:0}).x;if(this.stage.mouseX>n)return}null!==o&&(this._removeEmptySpaces(),a=this.cardsInHand.indexOf(o),this.cardsInHand.splice(a,0,"emptySpace"),this._updateCardPositions(),this.grabbedCard.getLayerDepth()!==o.getLayerDepth()-1&&this.grabbedCard.setLayerDepth(o.getLayerDepth()-1),this.grabbedCard.setScaleByHeight(this.getCardHeight()))}}.bind(this)},{event:"cardDropped",target:this.game.globalEvents,callback:function(){this._setState("idle")}.bind(this)}]}}})),this.game.addGlobalEventListener("beginningSmileyAnimation",function(){this.lockInput=!0,this._setState("init")}.bind(this)),this.addEventListener("resizeEnd",function(){this.performAction({delay:.1,action:this._updateCardPositions.bind(this)})}.bind(this)),this},_setState:function(t){this.stateManager.setState(t)},selectCard:function(t){this.mouseDownPosition=new TGE.Vector2(this.stage.mouseX,this.stage.mouseY),this._deselectAllCards(),t.selectInHand(!0),this.selectedCard=t,this.dispatchEvent({type:"cardSelected"})},highlightCard:function(t){this._deselectAllCards(),t.highlight(!0)},_unhighlightAll:function(){for(var t in this.cardsInHand)this.cardsInHand[t].highlight(!1)},addCard:function(t){var e;this.cardsInHand.includes("emptySpace")?(e=this.cardsInHand.indexOf("emptySpace"),this.cardsInHand.splice(e,1,t)):(this.cardsInHand.push(t),t.bringToFront()),(t.hand=this)._updateCardPositions("enteringHand")},removeCard:function(t){t.removeEventListenersFor("draggedOutOfHand");var e=this.cardsInHand.indexOf(t);this.cardsInHand.splice(e,1,"emptySpace")},discardAll:function(){this.isFannedOut=!1,0!==this.cardsInHand.length?(this._updateCardPositions(),this.positionsUpdatedListener=this.addEventListener("allCardPositionsUpdated",function(){for(var t in this.cardsInHand){var e=this.cardsInHand[t];this.performAction({delay:.05*t,action:function(t,e){t.moveTo({localObject:this,x:.6*this.game.stage.width,y:0,rotation:0,duration:.2,easing:TGE.Tween.Sine.In,onComplete:function(t,e){t.markForRemoval(),e&&(this.cardsInHand=[],this.game.dispatchGlobalEvent({type:"handDiscardComplete"}))}.bind(this,t,e==this.cardsInHand.length-1)})}.bind(this,e,t)})}this.removeEventListener("allCardPositionsUpdated",this.positionsUpdatedListener)}.bind(this))):this.performAction({delay:.5,action:this.game.dispatchGlobalEvent.bind(this.game,{type:"handDiscardComplete"})})},flipAndFanOut:function(){for(var t in this.cardsInHand)this.cardsInHand[t].flipOver();this.performAction({delay:1.2,action:function(){this.isFannedOut=!0,this._updateCardPositions("fanningOut")}.bind(this)})},getMouseDownCard:function(){for(var t=this.cardsInHand.length-1;0<=t;t--){var e=this.cardsInHand[t];if("emptySpace"!==e&&e.getMouseOn())return e}return null},getWinningCard:function(){for(var t=this.cardsInHand.length-1;0<=t;t--)if(this.game.gameplayManager.getIsPhaseWinnableWithCard(this.cardsInHand[t]))return this.cardsInHand[t]},_deselectAllCards:function(){for(var t in this.cardsInHand)"emptySpace"!==this.cardsInHand[t]&&this.cardsInHand[t].selectInHand(!1)},_updateCardPositions:function(t,e){var i,a,o,n,r,s,l,p,c=this.width*this.targetHorizontalSpacing,h=(this.cardsInHand.length-1)*c*-.5,m=(this.cardsInHand.length-1)*c*.5,u=(this.cardsInHand.length-1)*this.rotationIncrement*-.5,d=(this.cardsInHand.length-1)*this.rotationIncrement*.5;for(i in this.cardsInHand){"emptySpace"!==this.cardsInHand[i]&&(this.cardsInHand[i].bringToFront(),o=.2*(a=this.getCardHeight()),n=0*a,p=this.cardsInHand.length-1!=0&&this.isFannedOut?(r=(s=TGE.MapValue(i,0,this.cardsInHand.length-1,h,m))<0?TGE.Math.InverseLerp(h,0,s):TGE.Math.InverseLerp(m,0,s),l=TGE.Math.Lerp(o,n,TGE.Tween.Quadratic.Out(r)),TGE.MapValue(s,h,m,u,d)):(s=0,l=this.highestY,0),this.cardsInHand[i].moveTo({localObject:this,x:s,y:l,height:a,rotation:p,duration:e||void 0,easing:TGE.Tween.Cubic.Out,onComplete:function(t,e,i){i&&(this.dispatchEvent({type:"allCardPositionsUpdated"}),"fanningOut"===e&&this.game.dispatchGlobalEvent({type:"cardsFannedOut"})),"enteringHand"===e&&(t.dispatchEvent({type:"enteredHand"}),this.game.dispatchGlobalEvent({type:"cardEnteredHand"}))}.bind(this,this.cardsInHand[i],t,i==this.cardsInHand.length-1)}))}},_removeEmptySpaces:function(){for(var t in this.cardsInHand)"emptySpace"===this.cardsInHand[t]&&this.cardsInHand.splice(t,1)},getCardHeight:function(){return this.height*this.scaleY}},extend(Phase10.Hand,TGE.DisplayObjectContainer),Phase10.CardSlot=function(){Phase10.CardSlot.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{targetSpacing:50})},Phase10.CardSlot.prototype={setup:function(t){PropertyCombine.setupInstance(this,t,Phase10.CardSlot.superclass.setup),this.cardsInSlot=[],this.inputEnabled=!0!==this.beginLocked;var e=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},alpha:.7}));this.addEventListener("resizeEnd",function(){this.backgroundCanvas=this._generateBackgroundCanvas(GameConfig.COLOR_DEFS.slotBackground)}.bind(this)),e.addEventListener("drawbegin",function(t){this.backgroundCanvas&&0!==this.backgroundCanvas.width&&0!==this.backgroundCanvas.height&&t.canvasContext.drawImage(this.backgroundCanvas,0,0,this.width,this.height)}.bind(this)),this.objectiveTextHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:50,layout:{scaleToWidth:1,scaleToHeight:.2,xPercentage:0,bottomAnchor:.5},alpha:this.beginLocked?0:1}));var i="";switch(this.groupType){case"set":i=this.groupSize+" of Same Number";break;case"color":i=this.groupSize+" of One Color";break;case"run":i="Run of "+this.groupSize}this.objectiveTextHolder.addChild((new TGE.Text).setup({text:i,textDef:"font_phaseObjective"})),this.slot=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:.9,matchHeight:.8,topAnchor:-.45,xPercentage:0}})),this.addEventListener("resizeEnd",function(){this.slotCanvas=this._generateSlotCanvas()}.bind(this)),this.slot.addEventListener("drawbegin",function(t){this.slotCanvas&&0!==this.slotCanvas.width&&0!==this.slotCanvas.height&&t.canvasContext.drawImage(this.slotCanvas,0,0,this.slot.width,this.slot.height)}.bind(this)),this.slot.addEventListener("drawend",function(t){t.canvasContext.restore()}.bind(this)),this.maskOverlay=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},alpha:0,visible:!1})),this.game.addGlobalEventListener("createMaskOverlay",this._fadeInMaskOverlay.bind(this)),this.game.addGlobalEventListener("removeMaskOverlay",this._fadeOutMaskOverlay.bind(this)),this.addEventListener("resizeEnd",function(){this.maskOverlayCanvas=this._generateMaskOverlayCanvas()}.bind(this)),this.maskOverlay.addEventListener("drawbegin",function(t){this.maskOverlayCanvas&&0!==this.maskOverlayCanvas.width&&0!==this.maskOverlayCanvas.height&&t.canvasContext.drawImage(this.maskOverlayCanvas,0,0,this.width,this.height)}.bind(this)),this.lockOverlay=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},alpha:0})),this.addEventListener("resizeEnd",function(){this.lockOverlayCanvas=this._generateBackgroundCanvas("black")}.bind(this)),this.lockOverlay.addEventListener("drawbegin",function(t){this.lockOverlayCanvas&&0!==this.lockOverlayCanvas.width&&0!==this.lockOverlayCanvas.height&&t.canvasContext.drawImage(this.lockOverlayCanvas,0,0,this.width,this.height)}.bind(this)),this.beginLocked&&(this.lockSpine=this.addChild((new SpineAnimation).setup({skeleton:"lock",layout:{xPercentage:0,yPercentage:-.125,scaleToWidth:.5,scaleToHeight:.5}})));var a=this.beginLocked?"locked":"waitingForCardSelection";return this.stateManager=this.addChild((new StateManager).setup({initState:a,states:{locked:{events:[]},waitingForCardSelection:{events:[{event:"update",callback:function(){var t;!this.inputEnabled||null!==(t=this.getMouseDownCard())&&(this._deselectAllCards(),t.selectInSlot(!0),this.selectedCard=t,this.dispatchEvent({type:"cardSelected"}))}.bind(this)},{event:"cardDraggedOutOfSlot",target:this.game.globalEvents,callback:function(t){for(var e in this.cardsInSlot)this.cardsInSlot[e].highlight(!1);t.card===this.selectedCard&&(this.removeCard(this.selectedCard),this.selectedCard=null),this._updateCardPositions(),this._setState("cardOut")}.bind(this)},{event:"cardDraggedOutOfHand",target:this.game.globalEvents,callback:this._setState.bind(this,"cardOut")}]},cardOut:{events:[{event:"cardEnteredHand",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForCardSelection")},{event:"cardEnteredSlot",target:this.game.globalEvents,callback:this._setState.bind(this,"waitingForCardSelection")}]},waitingForSmileyAnimation:{events:[{event:"enterState",callback:function(){for(var t in this.performAction({delay:.5,action:function(){this.slot.addChild((new ParticleEffect).setup({particleImage:"sparkle",layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},baseEffect:particleEffect_sparkle,particleAmount:16,particleScale:.25,startingX:null,startingY:null,startingXPercentage:{min:0,max:1},startingYPercentage:{min:0,max:1},simulationSpace:"screen"}))}.bind(this)}),this.smileyAnimationsCompleted=0,this.cardsInSlot)this.performAction({delay:.05*t,action:this.cardsInSlot[t].becomeSmiley.bind(this.cardsInSlot[t])})}.bind(this)},{event:"smileyAnimationCompleted",target:this.game.globalEvents,callback:function(){this.smileyAnimationsCompleted++,this.smileyAnimationsCompleted>=this.cardsInSlot.length&&this.game.dispatchGlobalEvent({type:"phaseObjectiveComplete"})}.bind(this)}]}}})),this.beginLocked&&this.lock(),this.addEventListener("resizeEnd",function(){this.performAction({delay:.1,action:this._updateCardPositions.bind(this)})}.bind(this)),this},_setState:function(t){this.stateManager.setState(t)},lock:function(){for(var t in this.lockOverlay.tweenTo({alpha:.5,duration:.3,easing:TGE.Tween.Sine.InOut}),this.isLocked=!0,this._setState("locked"),this.cardsInSlot)this.cardsInSlot[t].becomeLocked()},unlockSpine:function(){this.lockSpine&&(this.lockSpine.tweenTo({scale:.95,duration:.4,easing:TGE.Tween.Quadratic.Out}).thenTweenTo({scale:1.6,duration:.4,easing:TGE.Tween.Quadratic.Out,easingParam:10}),this.lockSpine.play({animation:"lockOpen",delay:.3,onComplete:function(){this.performAction({delay:0,action:this.unlock.bind(this)})}.bind(this)}))},unlock:function(){this.lockOverlay.tweenTo({alpha:0,duration:.4,easing:TGE.Tween.Sine.InOut}),this.objectiveTextHolder.tweenTo({alpha:1,duration:.4,easing:TGE.Tween.Sine.InOut}),this.lockSpine&&this.lockSpine.tweenTo({alpha:0,scale:2,duration:.4,easing:TGE.Tween.Sine.InOut}),this.isLocked=!1,this.inputEnabled=!0,this._setState("waitingForCardSelection")},addCard:function(t){!TGE.RemoteSettings("allowCorrectCardsToBeRemovedFromSlot")&&this.game.gameplayManager.getIsPhaseWinnableWithCard(t)&&(t.isLockedInPlace=!0),this.cardsInSlot.push(t),(t.slot=this).cardsUnsorted=!0,t.enteringSlot=!0,this._updateCardPositions()},removeCard:function(t){t.isIncorrect=void 0;var e=this.cardsInSlot.indexOf(t);this.cardsInSlot.splice(e,1)},_updateCardPositions:function(){var t,e,i=(this.cardsInSlot.length-1)*this.targetSpacing*-.5,a=(this.cardsInSlot.length-1)*this.targetSpacing*.5;if(this.cardsUnsorted){switch(this.groupType){case"set":case"run":this.cardsInSlot.sort(function(t,e){return t.number-e.number});break;case"color":this.cardsInSlot.sort(function(t,e){return t.color<e.color?-1:t.color>e.color?1:void 0})}this.cardsUnsorted=!1}for(t in this.cardsInSlot){this.cardsInSlot[t].bringToFront(),e=this.cardsInSlot.length-1==0?0:TGE.MapValue(t,0,this.cardsInSlot.length-1,i,a);this.cardsInSlot[t].dispatchEvent({type:"enteringSlot"}),this.cardsInSlot[t].moveTo({localObject:this,x:e,y:this.slot.y,height:this.getCardHeight(),rotation:0,easing:TGE.Tween.Quadratic.InOut,onComplete:function(t,e){if(e){t.enteringSlot=!1,t.dispatchEvent({type:"enteredSlot"}),this.game.dispatchGlobalEvent({type:"cardEnteredSlot",slot:this,card:t});var i=!1;switch(this.groupType){case"set":var a=0,o=void 0;for(r in this.cardsInSlot)void 0===o?(o=this.cardsInSlot[r].number,a++):this.cardsInSlot[r].number===o&&a++;i=a>=this.groupSize;break;case"color":var a=0,n=void 0;for(r in this.cardsInSlot)void 0===n?(n=this.cardsInSlot[r].color,a++):this.cardsInSlot[r].color===n&&a++;i=a>=this.groupSize;break;case"run":for(var r in this.cardsInSlot)for(var s=this.cardsInSlot[r].number,a=0,l=r;l<this.cardsInSlot.length&&this.cardsInSlot[l].number===s;l++)if(s++,++a>=this.groupSize){i=!0;break}}i&&!this.objectiveCompleted&&(this.objectiveCompleted=!0,this.game.dispatchGlobalEvent({type:"beginningSmileyAnimation"}),this._setState("waitingForSmileyAnimation"))}}.bind(this,this.cardsInSlot[t],this.cardsInSlot[t].enteringSlot)})}},_generateBackgroundCanvas:function(t){var e=document.createElement("canvas"),i=e.getContext("2d");return e.width=this.width,e.height=this.height,this._drawBevelledRect(e.getContext("2d"),0,0,e.width,e.height,20),i.fillStyle=t,i.fill(),e},_generateSlotCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.width,t.height=this.height;return this._drawBevelledRect(t.getContext("2d"),5,5,t.width-10,t.height-10,20),e.setLineDash([15,10]),e.lineWidth=4,e.strokeStyle="white",e.stroke(),t},_generateMaskOverlayCanvas:function(){var t=this._generateBackgroundCanvas(GameConfig.COLOR_DEFS.maskOverlay),e=t.getContext("2d");return this._drawBevelledRect(t.getContext("2d"),.5*this.width-.5*this.slot.width+this.slot.x+5-2,.5*this.height-.5*this.slot.height+this.slot.y+5-2,this.slot.width-10+4,this.slot.height-10+4,20),e.globalCompositeOperation="destination-out",e.fill(),t},_drawBevelledRect:function(t,e,i,a,o,n){n={tl:n,tr:n,br:n,bl:n},t.beginPath(),t.moveTo(e+n.tl,i),t.lineTo(e+a-n.tr,i),t.quadraticCurveTo(e+a,i,e+a,i+n.tr),t.lineTo(e+a,i+o-n.br),t.quadraticCurveTo(e+a,i+o,e+a-n.br,i+o),t.lineTo(e+n.bl,i+o),t.quadraticCurveTo(e,i+o,e,i+o-n.bl),t.lineTo(e,i+n.tl),t.quadraticCurveTo(e,i,e+n.tl,i),t.closePath()},getMouseDownCard:function(){for(var t=this.cardsInSlot.length-1;0<=t;t--){var e=this.cardsInSlot[t];if(e.getMouseOn()&&!e.isLockedInPlace)return e}return null},_deselectAllCards:function(){for(var t in this.cardsInSlot)this.cardsInSlot[t].selectInSlot(!1)},getCardHeight:function(){return this.slot.height*this.scaleY*.95},_fadeInMaskOverlay:function(){this.isLocked||(this.maskOverlayTween&&!this.maskOverlayTween.finished()&&this.maskOverlayTween.endTween(),this.maskOverlay.visible=!0,this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:.5,duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out}))},_fadeOutMaskOverlay:function(){this.maskOverlayTween&&!this.maskOverlayTween.finished()&&this.maskOverlayTween.endTween(),this.maskOverlayTween=this.maskOverlay.tweenTo({alpha:0,duration:TGE.RemoteSettings("maskOverlayFadeDuration"),easing:TGE.Tween.Sine.Out,onComplete:function(){this.maskOverlay.visible=!1}.bind(this)})},getIncorrectCard:function(){for(var t in this.cardsInSlot)if(!0===this.cardsInSlot[t].isIncorrect)return this.cardsInSlot[t]}},extend(Phase10.CardSlot,TGE.DisplayObjectContainer),Phase10.DancingCardsPromo=function(){Phase10.DancingCardsPromo.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance()},Phase10.DancingCardsPromo.prototype={setup:function(t){t.elxParams={elx:ELX_promo,override:{img_logo:{className:"TGE.Sprite",image:"img_logo"},ttxt_prompt_holder:{layout:{portrait:{scaleToWidth:1.0331,scaleToHeight:.395,xPercentage:.0012,bottomAnchor:1.1037},landscape:{scaleToWidth:1.123,scaleToHeight:.2588,xPercentage:-.0105,bottomAnchor:.7728}}},ttxt_prompt:{textDef:"txt_promoBlurb"},txt_btn_holder:{layout:{portrait:{scaleToWidth:.4577,scaleToHeight:.2384,xPercentage:8e-4,yPercentage:.17},landscape:{scaleToWidth:.5052,scaleToHeight:.0868,xPercentage:-.01,yPercentage:.3826}}},txt_btn:{textDef:"txt_promoCTA"},holder_card_3:{layout:{portrait:{scaleToWidth:.3027,scaleToHeight:.62,xPercentage:.3487,yPercentage:-.1},landscape:{scaleToWidth:.3027,scaleToHeight:.62,xPercentage:.3487,yPercentage:.1127}}}}},Phase10.DancingCardsPromo.superclass.setup.call(this,t),this.getObject("bg_promo2x").addChild((new ParticleEffect).setup({particleImage:"img_whiteSqure",baseEffect:ParticleEffect.FullScreen.Confetti,particleScale:.7,looping:!0,color:["#ff6200","#f045f8","#f1d74f"],layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),this.getObject("group_cards").addChild((new ParticleEffect).setup({particleImage:"sparkle",baseEffect:particleEffect_sparkle,startingXPercentage:{min:0,max:1},startingYPercentage:{min:0,max:.75},layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}}));for(var e=1;e<=3;e++)this.performAction({delay:.05*e,action:function(t){var e=this.getObject("holder_card_"+t).addChild((new SpineAnimation).setup({skeleton:"cardDance"}));switch(t){case 1:e.setSkin("Red"),e.play({animation:"dance",looping:!0});break;case 2:e.setSkin("Yellow"),e.play({animation:"dance2",looping:!0});break;case 3:e.setSkin("Blue"),e.play({animation:"dance3",looping:!0})}}.bind(this,e)});return this}},extend(Phase10.DancingCardsPromo,PromoScreen),GameConstructor=function(){GameConstructor.superclass.constructor.call(this);var t="required",e=1;function i(){t="required"+(++e).toString()}this.addFonts(t,["font_game"]),this.assetManager.addSheetImages(t,{sheetURL:"images/initial.png",subsheetURL:"scripts/lock.js"}),this.assetManager.addSheetImages(t,{sheetURL:"images/game.png"}),this.assetManager.addAsset(t,{id:"bg",url:"images/bg.jpg"}),i(),this.engagementAssetList=t,this.assetManager.addSheetImages(t,{sheetURL:"images/engagement.png"}),i(),this.assetManager.addAsset(t,{id:"bg_2x",url:"images/bg_2x.jpg"}),i(),this.promoAssetList=t,!TGE.InCreativeBuilder()&&0!==TGE.RemoteSettings("promoVariant")||this.addPromoAssets(t),!TGE.InCreativeBuilder()&&1!==TGE.RemoteSettings("promoVariant")||(this.assetManager.addSheetImages(t,{sheetURL:"images/promo.png",subsheetURL:"scripts/cardDance.js"}),this.assetManager.addAsset(t,{id:"bg_promo2x",url:"images/bg_promo2x.jpg"})),this.resizeCanvasToFit=!0,this.allowMultitouch=!0,TGE.FirstGameWindow=GameScreen},GameConstructor.prototype={addGlobalEventListener:function(t,e){return this.globalEvents.addEventListener(t,e)},dispatchGlobalEvent:function(t){this.globalEvents.dispatchEvent(t)},removeGlobalEventListener:function(t,e){this.globalEvents.removeEventListener(t,e)},endTween:function(t,e,i){t&&!t.finished()&&t.endTween(e,i)},endTweens:function(t,e,i){for(var a in t)this.endTween(t[a],e,i)}},extend(GameConstructor,BuilderGame),GameScreen=function(t,e){GameScreen.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.game.gameScreen=this,ELXDisplay.setupELXPreview(this)},GameScreen.prototype={setup:function(t){return GameScreen.superclass.setup.call(this,t),this.game.globalEvents=this.addChild((new TGE.DisplayObjectContainer).setup({})),this.addChild((new Phase10).setup({layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1}})),this.game.addGlobalEventListener("promoActivated",this.createPromoScreen.bind(this,"completed")),TGE.AdFooter.Create(),this},createPromoScreen:function(t){if(this.game.isAssetListLoaded(this.game.promoAssetList)){var e=t||"complete";switch(TGE.RemoteSettings("promoVariant")){case 0:this.game.addPromoScreen(this,{reason:e,winOnly:!0,onReplay:this.playAgain.bind(this)});break;case 1:this.addChild((new Phase10.DancingCardsPromo).setup({reason:e,winOnly:!0,onReplay:this.playAgain.bind(this)}))}}else this.game.waitForAssetList(this.game.promoAssetList,this.createPromoScreen.bind(this,t))},playAgain:function(){this.game.playedAgain=!0,this.game.globalEvents=this.addChild((new TGE.DisplayObjectContainer).setup({})),this.transitionToWindow({windowClass:GameScreen})}},extend(GameScreen,TGE.Window),ColorDefUpdater=function(){ColorDefUpdater.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen},ColorDefUpdater.prototype={setup:function(t){return ColorDefUpdater.superclass.setup.call(this,t),this.watchedColorDefs=[],TGE.InCreativeBuilder()&&this.addEventListener("drawbegin",this._updateObjects.bind(this)),this},addObject:function(t){t.object.constructor===TGE.Sprite||t.object.constructor===TGE.Text||t.object.constructor===TGE.DisplayObjectContainer?t.object.constructor!==TGE.DisplayObjectContainer||null!==t.object._mBackgroundGradient?t.object.constructor!==TGE.DisplayObjectContainer||null===t.object._mBackgroundGradient||t.colorDef2?(this[t.colorDef+"_objects"]||(this[t.colorDef+"_objects"]=[]),t.brightnessChange&&(t.object.brightnessChange=t.brightnessChange),this[t.colorDef+"_objects"].push(t.object),this.addWatchedColorDef(t.colorDef),t.colorDef2&&(this[t.colorDef2+"_objects"]||(this[t.colorDef2+"_objects"]=[]),this[t.colorDef2+"_objects"].push(t.object),this.addWatchedColorDef(t.colorDef2))):console.error("ColorDefUpdater.addObject() requires a 'colorDef2' parameter when adding a background gradient."):console.error("ColorDefUpdater only supports DisplayObjectContainers with background gradients. For backgroundColor, please use the colorDef parameter in TGE.DisplayObjectContainer.setup()"):console.error("ColorDefUpdater only supports TGE.Sprite, TGE.Text, and TGE.DisplayObjectContainer")},_updateObjects:function(){for(var t in this.watchedColorDefs){var e=GameConfig.COLOR_DEFS[this.watchedColorDefs[t].name];if(e!==this.watchedColorDefs[t].previousValue){this.dispatchEvent({type:"colorDefChanged",colorDefName:this.watchedColorDefs[t].name,newValue:e});var i,a=this[this.watchedColorDefs[t].name+"_objects"];for(i in a)a.brightnessChange&&(e=this.changeColorBrightness(e,a.brightnessChange)),a[i].constructor===TGE.Sprite?a[i].colorize(e):a[i].constructor===TGE.Text&&(a[i].textColor=e)}this.watchedColorDefs[t].previousValue=e}},addWatchedColorDef:function(t){var e,i={name:t,previousValue:GameConfig.COLOR_DEFS[t]},a=!0;for(e in this.watchedColorDefs)if(this.watchedColorDefs[e].name===i.name){a=!1;break}a&&this.watchedColorDefs.push(i)},changeColorBrightness:function(t,e){var i=ModuleMath.Color.hexToRgb(t);return i.r=TGE.Math.Clamp(i.r+e,0,255),i.g=TGE.Math.Clamp(i.g+e,0,255),i.b=TGE.Math.Clamp(i.b+e,0,255),ModuleMath.Color.rgbToHex(i.r,i.g,i.b)},getTransparentColor:function(t,e){var i=ModuleMath.Color.hexToRgb(t);return"rgba("+i.r+","+i.g+","+i.b+", "+e+")"}},extend(ColorDefUpdater,TGE.DisplayObjectContainer),TGE.AssetManager.SpriteSheets.initial={"card-wrong":[0,710,150,232],img_btn:[0,230,596,152],img_color3:[151,911,189,106],img_logo:[597,230,309,222],img_run3:[341,911,189,106],img_run4:[257,383,237,106],img_set3:[257,490,189,106],img_tutBox:[0,0,1018,229],lock:[0,453,256,256],pointer:[151,710,200,200]},TGE.AssetManager.SpriteSheets.game={"card-back":[1,281,150,232],"card-base":[1,515,150,232],"card-face":[1,749,150,232],"card-glow":[1,1,196,278],card1:[153,281,150,232],card2:[351,1,150,232],card3:[503,1,150,232],card4:[655,1,150,232],card5:[807,1,150,232],card6:[305,235,150,232],card7:[305,469,150,232],card8:[305,703,150,232],card9:[457,235,150,232],card10:[199,1,150,232],card11:[153,515,150,232],card12:[153,749,150,232]},TGE.AssetManager.SpriteSheets.engagement={bg_completed:[0,0,512,209],"card-face":[193,350,150,232],"img_whiteSqure-2":[344,350,50,50],img_whiteSqure:[395,350,50,50],sparkle:[0,350,192,193],txt_completed:[0,210,502,139]};var particleEffect_sparkle={particleImage:"img_particle1_1",particleScale:.48,color:"#faf5ce",particleAmount:11,timeBetweenParticles:.04,looping:!(TGE.AssetManager.SpriteSheets.promo={cardDance:[1,1,1022,426,0,0,1024,512]}),startingX:{min:-100,max:100,mapToParticleNumber:!1},startingY:{min:-100,max:100,mapToParticleNumber:!1},totalLifetime:1,fadeInTime:.09,fadeOutTime:.5,fadeTimesArePercent:!0,startingAlpha:0,maxAlpha:1,endingAlpha:0,startingScale:.2,maxScale:1,endingScale:.3,startingRotation:{min:0,max:360,mapToParticleNumber:!1},rotationDirection:[-1,1],rotationSpeed:{min:200,max:500,mapToParticleNumber:!1},initialSpeed:0,scaleSpeedToScreenSize:!1,acceleration:1,initialDirection:{min:-180,max:180,mapToParticleNumber:!1},gravity:-160,collisionPlane:"none",bounciness:.75,simulationSpace:"local",alignRotationToDirection:!1,tweens:[]},particleEffect_confettiBurst1={particleImage:"img_particle1_1",particleScale:{min:.61,max:.89,mapToParticleNumber:!1},color:["#ff6200","#f045f8","#f1d74f"],particleAmount:27,timeBetweenParticles:0,looping:!1,startingXPercentage:-.1,startingYPercentage:{min:.1,max:1.12,mapToParticleNumber:!1},totalLifetime:1.05,fadeInTime:.1,fadeOutTime:.46,fadeTimesArePercent:!0,startingAlpha:0,maxAlpha:1,endingAlpha:0,startingScale:0,maxScale:1,endingScale:.6,startingRotation:{min:0,max:360,mapToParticleNumber:!1},rotationDirection:[-1,1],rotationSpeed:{min:0,max:130,mapToParticleNumber:!1},initialSpeed:{min:670,max:2e3,mapToParticleNumber:!1},scaleSpeedToScreenSize:!1,acceleration:.944,initialDirection:{min:30,max:90,mapToParticleNumber:!1},gravity:920,collisionPlane:"none",bounciness:.75,simulationSpace:"local",alignRotationToDirection:!1,tweens:[]},ELX_promo={landscape:{childObjects:[{name:"bg_promo2x",className:"TGE.Sprite",image:"bg_promo2x",layout:"aspect-fill"},{name:"group_cards",className:"TGE.DisplayObjectContainer",width:631,height:479,layout:{scaleToWidth:.473,scaleToHeight:.6387,leftAnchor:.0795,yPercentage:.5073},childObjects:[{name:"holder_card_2",className:"TGE.DisplayObjectContainer",width:191,height:297,layout:{scaleToWidth:.3027,scaleToHeight:.62,xPercentage:-.0016,yPercentage:-.19}},{name:"holder_card_3",className:"TGE.DisplayObjectContainer",width:191,height:297,layout:{scaleToWidth:.3027,scaleToHeight:.62,xPercentage:.3487,yPercentage:.1127}},{name:"holder_card_1",className:"TGE.DisplayObjectContainer",width:191,height:297,layout:{scaleToWidth:.3027,scaleToHeight:.62,xPercentage:-.3487,yPercentage:.19}}]},{name:"group_cta",className:"TGE.DisplayObjectContainer",width:479,height:622,layout:{scaleToWidth:.3591,scaleToHeight:.8293,rightAnchor:.027,yPercentage:.5053},childObjects:[{name:"ttxt_prompt_holder",className:"TGE.DisplayObjectContainer",width:537.94,height:161,layout:{scaleToWidth:1.123,scaleToHeight:.2588,xPercentage:-.0105,bottomAnchor:.7728},childObjects:[{name:"ttxt_prompt",className:"TGE.Text",textColor:"#FEFEFE",wrapWidth:559.83,fontSize:48,lineSpacing:.2,text:"Phase 10: \nMore Challenges Waiting!",hAlign:"center",fontFamily:"Futura-Bold",scale:.9609}]},{name:"img_btn",className:"TGE.Sprite",image:"img_btn",layout:{scaleToWidth:1,scaleToHeight:.1961,xPercentage:0,yPercentage:.4019}},{name:"txt_btn_holder",className:"TGE.DisplayObjectContainer",width:242,height:54,layout:{scaleToWidth:.5052,scaleToHeight:.0868,xPercentage:.001,yPercentage:.3826},childObjects:[{name:"txt_btn",className:"TGE.Text",textColor:"#FFFFFF",fontSize:40,lineSpacing:.2,text:"Play Now",hAlign:"center",fontFamily:"Futura-Bold",scale:1.2324}]},{name:"img_logo",className:"TGE.DisplayObjectContainer",width:309,height:223,backgroundColor:"#FFFFFF",layout:{scaleToWidth:.6451,scaleToHeight:.3585,leftAnchor:-.333,topAnchor:-.5}}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"bg_promo2x",className:"TGE.Sprite",image:"bg_promo2x",layout:"aspect-fill"},{name:"img_logo",className:"TGE.DisplayObjectContainer",width:322,height:232,backgroundColor:"#FFFFFF",layout:{scaleToWidth:.4293,scaleToHeight:.1739,xPercentage:.5,topAnchor:.054}},{name:"group_cta",className:"TGE.DisplayObjectContainer",width:662,height:281,layout:{scaleToWidth:.8827,scaleToHeight:.2106,xPercentage:.4987,bottomAnchor:.0622},childObjects:[{name:"ttxt_prompt_holder",className:"TGE.DisplayObjectContainer",width:683.89,height:111,layout:{scaleToWidth:1.0331,scaleToHeight:.395,xPercentage:.0012,bottomAnchor:1.1037},childObjects:[{name:"ttxt_prompt",className:"TGE.Text",textColor:"#FEFEFE",wrapWidth:683.89,fontSize:48,lineSpacing:.2,text:"Phase 10: \nMore Challenges Waiting!",hAlign:"center",fontFamily:"Futura-Bold",scale:1}]},{name:"img_btn",className:"TGE.Sprite",image:"img_btn",layout:{scaleToWidth:.9003,scaleToHeight:.5409,xPercentage:.0015,yPercentage:.2295}},{name:"txt_btn_holder",className:"TGE.DisplayObjectContainer",width:303,height:67,layout:{scaleToWidth:.4577,scaleToHeight:.2384,xPercentage:8e-4,yPercentage:.1815},childObjects:[{name:"txt_btn",className:"TGE.Text",textColor:"#FFFFFF",fontSize:40,lineSpacing:.2,text:"Play Now",hAlign:"center",fontFamily:"Futura-Bold",scale:1.5338}]}]},{name:"group_cards",className:"TGE.DisplayObjectContainer",width:671,height:719,layout:{scaleToWidth:.8947,scaleToHeight:.539,xPercentage:.5007,yPercentage:.5851},childObjects:[{name:"holder_card_2",className:"TGE.DisplayObjectContainer",width:197,height:307,layout:{scaleToWidth:.2936,scaleToHeight:.427,xPercentage:0,yPercentage:-.2865}},{name:"holder_card_3",className:"TGE.DisplayObjectContainer",width:197,height:307,layout:{scaleToWidth:.2936,scaleToHeight:.427,xPercentage:.3532,yPercentage:.2865}},{name:"holder_card_1",className:"TGE.DisplayObjectContainer",width:197,height:307,layout:{scaleToWidth:.2936,scaleToHeight:.427,xPercentage:-.3532,yPercentage:-.1683}}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promo_landscape=(ELX_STORAGE.ELX_promo=ELX_promo).landscape,ELX_promo_portrait=ELX_promo.portrait;var PromoGameConfig={PROD_ENV:!0,LOG_LEVEL:3,DEBUG:!1,APPCACHE:{ENABLED:!1},ORIENTATION:"unspecified",GAME_ID:"promobuilder",TITLE:"PromoBuilder",VERSION:"1.82.0",BUILDER:"1.7.64",REMOTE_SETTINGS:{},EXCLUDED_SETTINGS:[],CONSTRUCTOR:"GameConstructor",SOURCE:["js/game/sheets/promoCommon.js","js/game/sheets/promoFullImage.js","js/game/sheets/promoPopupIcon.js","js/game/sheets/promoTwoBox.js","js/game/elx/ELX_promoFullVideoDouble.js","js/game/elx/ELX_promoFullVideoSingle.js","js/game/elx/ELX_promoFullVideoNone.js","js/game/elx/ELX_promoFullInsetVideoDouble.js","js/game/elx/ELX_promoFullInsetVideoSingle.js","js/game/elx/ELX_promoFullInsetVideoNone.js","js/game/elx/ELX_promoFullTopVideoDouble.js","js/game/elx/ELX_promoFullTopVideoSingle.js","js/game/elx/ELX_promoFullTopVideoNone.js","js/game/elx/ELX_promoFullImageDouble.js","js/game/elx/ELX_promoFullImageNone.js","js/game/elx/ELX_promoFullImageIconSingle.js","js/game/elx/ELX_promoFullImageIconNone.js","js/game/elx/ELX_promoPopupIconDouble.js","js/game/elx/ELX_promoPopupIconSingle.js","js/game/elx/ELX_promoPopupIconNone.js","js/game/elx/ELX_promoPopupImageIconNone.js","js/game/elx/ELX_promoPopupImageIconSingle.js","js/game/elx/ELX_promoSingleImage.js","js/game/elx/ELX_promoDualImage.js","js/PromoBuilder.js"],IMAGE_COMPRESSION:{"assets/images/promoCommon.png":{type:"tinypng"},"assets/images/promoPopupIcon.png":{type:"tinypng"},"assets/images/promoFullImage.png":{type:"tinypng"},"assets/images/promoTwoBox.jpg":{type:"tinypng"},"assets/images/img_promoBackground.jpg":{type:"tinypng"},"assets/images/img_promoBg_portrait.jpg":{type:"tinypng"},"assets/images/img_promoBg_landscape.jpg":{type:"tinypng"},"assets/video/portraitCountdown.mp4":{type:"video"}},CSS:[],EXCLUDE:["assets/source-images//**","js/lib-debug//**"],ADS:{INTERSTITIAL_PLACEMENT_ID:""},TGL:{VERSION:"1.0"},TGS:{ENABLED:!0,VERSION:"0.3"},TGE:{ENABLED:!0,VERSION:"1.1"},GoogleAnalytics:{ENABLED:!1,QA_ID:"",PROD_ID:"UA-73000303-8",LABEL:"Crafty Candy",ENHANCED:!0},MixPanel:{ENABLED:!0,TOKEN:""},Quantcast:{ENABLED:!1}};TGE.AssetManager.SpriteSheets.promoCommon={img_promo_buttonA:[1,1,600,150],img_promo_buttonB:[1,152,600,150],img_promo_icon:[602,152,300,300]},TGE.AssetManager.SpriteSheets.promoFullImage={img_promo_artA:[1,1,510,510],img_promo_artB:[1,512,510,510]},TGE.AssetManager.SpriteSheets.promoPopupIcon={img_promo_popupBackground:[1,1,700,700]},TGE.AssetManager.SpriteSheets.promoTwoBox={img_promo_bgA:[0,0,512,512],img_promo_bgB:[0,512,512,512]};var ELX_promoFullVideoDouble={landscape:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:1234,height:150,layout:{scaleToWidth:.925,scaleToHeight:.2,xPercentage:.5,yPercentage:.8547},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.4862,scaleToHeight:1,xPercentage:.2569,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.4862,scaleToHeight:1,xPercentage:-.2569,yPercentage:0},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:328,layout:{scaleToWidth:.8,scaleToHeight:.2459,xPercentage:.5053,bottomAnchor:.024},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:.2713},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:-.2713},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullVideoDouble_landscape=(ELX_STORAGE.ELX_promoFullVideoDouble=ELX_promoFullVideoDouble).landscape,ELX_promoFullVideoDouble_portrait=ELX_promoFullVideoDouble.portrait,ELX_promoFullVideoSingle={landscape:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.4498,scaleToHeight:.2,xPercentage:.5,yPercentage:.8547},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:750,height:1336,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1.0015,xPercentage:.5,yPercentage:.5007}},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.8,scaleToHeight:.1124,xPercentage:.5053,yPercentage:.9198},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullVideoSingle_landscape=(ELX_STORAGE.ELX_promoFullVideoSingle=ELX_promoFullVideoSingle).landscape,ELX_promoFullVideoSingle_portrait=ELX_promoFullVideoSingle.portrait,ELX_promoFullVideoNone={landscape:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullVideoNone_landscape=(ELX_STORAGE.ELX_promoFullVideoNone=ELX_promoFullVideoNone).landscape,ELX_promoFullVideoNone_portrait=ELX_promoFullVideoNone.portrait,ELX_promoFullInsetVideoDouble={landscape:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5},childObjects:[{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:.8,yPercentage:-.1529}},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:-.0891},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:-.0891},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:1234,height:150,layout:{scaleToWidth:1.7629,scaleToHeight:.2143,xPercentage:.4543,yPercentage:.3371},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.4862,scaleToHeight:1,xPercentage:.2569,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.4862,scaleToHeight:1,xPercentage:-.2569,yPercentage:0},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753},childObjects:[{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:0,yPercentage:-.4529}},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:328,layout:{scaleToWidth:.8571,scaleToHeight:.4686,xPercentage:.0014,yPercentage:.1743},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:.2713},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:-.2713},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullInsetVideoDouble_landscape=(ELX_STORAGE.ELX_promoFullInsetVideoDouble=ELX_promoFullInsetVideoDouble).landscape,ELX_promoFullInsetVideoDouble_portrait=ELX_promoFullInsetVideoDouble.portrait,ELX_promoFullInsetVideoSingle={landscape:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5},childObjects:[{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:.8,yPercentage:-.1529}},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:-.0891},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:-.0891},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:917,height:150,layout:{scaleToWidth:1.31,scaleToHeight:.2143,xPercentage:.2279,yPercentage:.3371},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.6543,scaleToHeight:1,xPercentage:.1728,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753},childObjects:[{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:0,yPercentage:-.4529}},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:231,layout:{scaleToWidth:.8571,scaleToHeight:.33,xPercentage:.0014,yPercentage:.105},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.6494,xPercentage:0,yPercentage:.1753},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullInsetVideoSingle_landscape=(ELX_STORAGE.ELX_promoFullInsetVideoSingle=ELX_promoFullInsetVideoSingle).landscape,ELX_promoFullInsetVideoSingle_portrait=ELX_promoFullInsetVideoSingle.portrait,ELX_promoFullInsetVideoNone={landscape:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5},childObjects:[{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:.048},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.2386},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:-.1057,yPercentage:.048},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:-.1057,yPercentage:-.2386},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:.8,yPercentage:0}}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.581},childObjects:[{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:750,height:422,backgroundColor:"#44464F",layout:{scaleToWidth:1.0714,scaleToHeight:.6029,xPercentage:0,yPercentage:-.4529}},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:189,layout:{scaleToWidth:.8571,scaleToHeight:.27,xPercentage:0,yPercentage:-.9648},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-1.2043},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullInsetVideoNone_landscape=(ELX_STORAGE.ELX_promoFullInsetVideoNone=ELX_promoFullInsetVideoNone).landscape,ELX_promoFullInsetVideoNone_portrait=ELX_promoFullInsetVideoNone.portrait,ELX_promoFullTopVideoDouble={landscape:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:1024,height:512,layout:{scaleToWidth:1,xPercentage:.5,yPercentage:.5},childObjects:[{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:-.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:512,height:250,layout:{scaleToWidth:1,scaleToHeight:.5,xPercentage:0,yPercentage:.25},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:-.2},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:.2},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,topAnchor:0},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,bottomAnchor:0},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:512,height:250,layout:{scaleToWidth:1,scaleToHeight:.5,xPercentage:0,yPercentage:.25},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:-.2},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:.2},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullTopVideoDouble_landscape=(ELX_STORAGE.ELX_promoFullTopVideoDouble=ELX_promoFullTopVideoDouble).landscape,ELX_promoFullTopVideoDouble_portrait=ELX_promoFullTopVideoDouble.portrait,ELX_promoFullTopVideoSingle={landscape:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:1024,height:512,layout:{scaleToWidth:1,xPercentage:.5,yPercentage:.5},childObjects:[{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:-.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:512,height:250,layout:{scaleToWidth:1,scaleToHeight:.5,xPercentage:0,yPercentage:.25},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,topAnchor:0},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,bottomAnchor:0},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.36},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:-.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:512,height:250,layout:{scaleToWidth:1,scaleToHeight:.5,xPercentage:0,yPercentage:.25},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToHeight:.3,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullTopVideoSingle_landscape=(ELX_STORAGE.ELX_promoFullTopVideoSingle=ELX_promoFullTopVideoSingle).landscape,ELX_promoFullTopVideoSingle_portrait=ELX_promoFullTopVideoSingle.portrait,ELX_promoFullTopVideoNone={landscape:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:1024,height:512,layout:{scaleToWidth:1,xPercentage:.5,yPercentage:.5},childObjects:[{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToWidth:.5,xPercentage:-.25,topAnchor:-.5},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.16},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.16},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]}]}]}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_groupA",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,topAnchor:0},childObjects:[{name:"img_promo_bgA",className:"TGE.Sprite",image:"img_promo_bgA"},{name:"promo_videoContainer",className:"TGE.DisplayObjectContainer",width:480,height:480,backgroundColor:"#44464F",layout:{scaleToWidth:.935,scaleToHeight:.935,xPercentage:0,yPercentage:0}}]},{name:"promo_groupB",className:"TGE.DisplayObjectContainer",width:512,height:512,layout:{scaleToHeight:.5,xPercentage:.5,bottomAnchor:0},childObjects:[{name:"img_promo_bgB",className:"TGE.Sprite",image:"img_promo_bgB"},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.16},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:64,layout:{scaleToWidth:.6428,scaleToHeight:.0914,xPercentage:0,yPercentage:-.16},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:450,height:250,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:.13},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:449.99,height:255,layout:{scaleToWidth:.6428,scaleToHeight:.3643,xPercentage:0,yPercentage:.13},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:449.99,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]}]}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullTopVideoNone_landscape=(ELX_STORAGE.ELX_promoFullTopVideoNone=ELX_promoFullTopVideoNone).landscape,ELX_promoFullTopVideoNone_portrait=ELX_promoFullTopVideoNone.portrait,ELX_promoFullImageDouble_landscape={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.524,yPercentage:.5}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.524,yPercentage:.5}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5},childObjects:[{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.1671,xPercentage:0,yPercentage:-.1877},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.1671,xPercentage:0,yPercentage:-.1877},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:328,layout:{scaleToWidth:.8571,scaleToHeight:.4686,xPercentage:.0014,yPercentage:.21},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:.2713},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:-.2713},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageDouble_portrait={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.524}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.524}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753},childObjects:[{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.1671,xPercentage:0,yPercentage:-.1877},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.1671,xPercentage:0,yPercentage:-.1877},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:328,layout:{scaleToWidth:.8571,scaleToHeight:.4686,xPercentage:.0014,yPercentage:.21},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:.2713},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:-.2713},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageNone_landscape={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.5187,yPercentage:.5}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.5187,yPercentage:.5}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:689,height:700,layout:{scaleToWidth:.5165,scaleToHeight:.9333,rightAnchor:.4843,yPercentage:.5},childObjects:[{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8708,scaleToHeight:.1671,xPercentage:-.0022,yPercentage:.0566},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8708,scaleToHeight:.0914,xPercentage:-7e-4,yPercentage:-.1314},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8708,scaleToHeight:.1671,xPercentage:-.0022,yPercentage:.0566},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8708,scaleToHeight:.0914,xPercentage:-7e-4,yPercentage:-.1314},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageNone_portrait={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.3883}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.3883}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:520,layout:{scaleToWidth:.9333,scaleToHeight:.3898,xPercentage:.5,topAnchor:.6109},childObjects:[{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.225,xPercentage:0,yPercentage:-.0796},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.1231,xPercentage:.0014,yPercentage:-.3327},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:117,layout:{scaleToWidth:.8571,scaleToHeight:.225,xPercentage:0,yPercentage:-.0796},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.1231,xPercentage:.0014,yPercentage:-.3327},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageIconSingle_landscape={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.524,yPercentage:.5}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.524,yPercentage:.5}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5},childObjects:[{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:492,layout:{scaleToWidth:.8571,scaleToHeight:.7029,xPercentage:.0014,yPercentage:.0929},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.3049,xPercentage:0,yPercentage:.3476},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.5,scaleToHeight:.6098,xPercentage:0,yPercentage:-.1951}}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageIconSingle_portrait={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.524}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.524}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753},childObjects:[{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:-.3757},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.8571,scaleToHeight:.2143,xPercentage:.0014,yPercentage:.3371},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:-.0017,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.4286,xPercentage:0,yPercentage:-.0443}}]}],elxVersion:"1.3.1"},ELX_promoFullImageIconNone_landscape={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.5172,yPercentage:.5}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.4498,scaleToHeight:.8,leftAnchor:.5172,yPercentage:.5}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:686,height:700,layout:{scaleToWidth:.5142,scaleToHeight:.9333,rightAnchor:.4865,yPercentage:.5},childObjects:[{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8746,scaleToHeight:.0914,xPercentage:-.0015,yPercentage:-.25},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8746,scaleToHeight:.0914,xPercentage:-.0015,yPercentage:-.25},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:300,height:300,layout:{scaleToWidth:.4373,scaleToHeight:.4286,xPercentage:-.0015,yPercentage:.0814},childObjects:[{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}}]}]}],elxVersion:"1.3.1"},ELX_promoFullImageIconNone_portrait={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"TGE.Sprite",image:"img_promo_background",layout:"aspect-fill"},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.4505}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:.8,scaleToHeight:.4498,xPercentage:.5013,bottomAnchor:.4505}},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:599,layout:{scaleToWidth:.9333,scaleToHeight:.449,xPercentage:.5,topAnchor:.551},childObjects:[{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.1068,xPercentage:.0014,yPercentage:-.3598},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.1068,xPercentage:.0014,yPercentage:-.3598},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.5008,xPercentage:0,yPercentage:.0275}}]}],elxVersion:"1.3.1"},ELX_promoPopupIconDouble={childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:862,layout:{scaleToWidth:.9333,scaleToHeight:.9452,xPercentage:.5,yPercentage:.5},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:.8121,xPercentage:0,yPercentage:.094}},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.348,xPercentage:0,yPercentage:-.326}},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.0014,yPercentage:-.0545},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.0014,yPercentage:-.0545},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:328,layout:{scaleToWidth:.8571,scaleToHeight:.3805,xPercentage:0,yPercentage:.2517},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:.2713},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"promo_buttonB",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:.4573,xPercentage:0,yPercentage:-.2713},childObjects:[{name:"img_promo_buttonB",className:"TGE.Sprite",image:"img_promo_buttonB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonB_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonB",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Redo",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.3.1"},ELX_promoPopupIconSingle={childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:862,layout:{scaleToWidth:.9333,scaleToHeight:.9452,xPercentage:.5,yPercentage:.5},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:.8121,xPercentage:0,yPercentage:.094}},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.348,xPercentage:0,yPercentage:-.326}},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2181,xPercentage:0,yPercentage:.1196},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.0014,yPercentage:-.0742},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2181,xPercentage:0,yPercentage:.1196},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.0014,yPercentage:-.0742},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonGroup",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.8571,scaleToHeight:.174,xPercentage:0,yPercentage:.355},childObjects:[{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}]}]}],elxVersion:"1.3.1"},ELX_promoPopupIconNone={childObjects:[{name:"promo_background",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:862,layout:{scaleToWidth:.9333,scaleToHeight:.9452,xPercentage:.5,yPercentage:.5},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:.8121,xPercentage:0,yPercentage:.094}},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.348,xPercentage:0,yPercentage:-.326}},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2181,xPercentage:.0086,yPercentage:.1984},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.01,yPercentage:.0046},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2181,xPercentage:.0086,yPercentage:.1984},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0742,xPercentage:.01,yPercentage:.0046},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]}],elxVersion:"1.3.1"},ELX_promoPopupImageIconNone_landscape={childObjects:[{name:"background",className:"TGE.DisplayObjectContainer",width:1450,height:750,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.4828,scaleToHeight:.9333,rightAnchor:.5,yPercentage:.5},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2686,xPercentage:0,yPercentage:.3129},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:.0743},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.2686,xPercentage:0,yPercentage:.3129},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:.0014,yPercentage:.0743},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.43,xPercentage:0,yPercentage:-.2421}}]},{name:"imageGroup",className:"TGE.DisplayObjectContainer",width:750,height:750,layout:{scaleToHeight:1,leftAnchor:.5,yPercentage:.5},childObjects:[{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}}]}],elxVersion:"1.3.1"},ELX_promoPopupImageIconNone_portrait={childObjects:[{name:"background",className:"TGE.DisplayObjectContainer",width:750,height:1424,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:1399,layout:{scaleToWidth:.9333,scaleToHeight:.9824,xPercentage:.5,yPercentage:.4912},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:.5004,xPercentage:0,yPercentage:.2498}},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:1,scaleToHeight:.5004,xPercentage:0,yPercentage:-.2498}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:1,scaleToHeight:.4996,xPercentage:0,yPercentage:-.2502}},{name:"txt_promo_bodyB_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.1344,xPercentage:0,yPercentage:.4064},childObjects:[{name:"txt_promo_bodyB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0457,xPercentage:.0014,yPercentage:.287},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_bodyA_holder",className:"TGE.DisplayObjectContainer",width:600,height:188,layout:{scaleToWidth:.8571,scaleToHeight:.1344,xPercentage:0,yPercentage:.4064},childObjects:[{name:"txt_promo_bodyA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:56,lineSpacing:.2,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",hAlign:"center",fontFamily:"Roboto-Regular",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0457,xPercentage:.0014,yPercentage:.287},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.2152,xPercentage:0,yPercentage:.1287}}]}],elxVersion:"1.3.1"},ELX_promoPopupImageIconSingle_landscape={childObjects:[{name:"background",className:"TGE.DisplayObjectContainer",width:1450,height:750,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.4828,scaleToHeight:.9333,rightAnchor:.5,yPercentage:.5},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:0,yPercentage:.0943},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0914,xPercentage:0,yPercentage:.0943},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.8571,scaleToHeight:.2143,xPercentage:0,yPercentage:.3371},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.43,xPercentage:0,yPercentage:-.2421}}]},{name:"imageGroup",className:"TGE.DisplayObjectContainer",width:750,height:750,layout:{scaleToHeight:1,leftAnchor:.5,yPercentage:.5},childObjects:[{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}}]}],elxVersion:"1.3.1"},ELX_promoPopupImageIconSingle_portrait={childObjects:[{name:"background",className:"TGE.DisplayObjectContainer",width:750,height:1424,backgroundColor:"#000000",alpha:.4,layout:"fill"},{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:1399,layout:{scaleToWidth:.9333,scaleToHeight:.9824,xPercentage:.5,yPercentage:.4912},childObjects:[{name:"img_promo_popupBackground",className:"TGE.Sprite",image:"img_promo_popupBackground",layout:{scaleToWidth:1,scaleToHeight:.5004,xPercentage:0,yPercentage:.2498}},{name:"img_promo_artA",className:"TGE.Sprite",image:"img_promo_artA",layout:{scaleToWidth:1,scaleToHeight:.5004,xPercentage:0,yPercentage:-.2498}},{name:"img_promo_artB",className:"TGE.Sprite",image:"img_promo_artB",layout:{scaleToWidth:1,scaleToHeight:.4996,xPercentage:0,yPercentage:-.2502}},{name:"txt_promo_headerB_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0457,xPercentage:.0014,yPercentage:.297},childObjects:[{name:"txt_promo_headerB",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"txt_promo_headerA_holder",className:"TGE.DisplayObjectContainer",width:600,height:64,layout:{scaleToWidth:.8571,scaleToHeight:.0457,xPercentage:.0014,yPercentage:.297},childObjects:[{name:"txt_promo_headerA",className:"TGE.Text",textColor:"#494B54",wrapWidth:600,fontSize:84,lineSpacing:.2,text:"Nice Job!",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]},{name:"promo_buttonA",className:"TGE.DisplayObjectContainer",width:600,height:150,layout:{scaleToWidth:.8571,scaleToHeight:.1072,xPercentage:0,yPercentage:.4185},childObjects:[{name:"img_promo_buttonA",className:"TGE.Sprite",image:"img_promo_buttonA",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0}},{name:"txt_promo_buttonA_holder",className:"TGE.DisplayObjectContainer",width:549.69,height:64,layout:{scaleToWidth:.9162,scaleToHeight:.4267,xPercentage:0,yPercentage:0},childObjects:[{name:"txt_promo_buttonA",className:"TGE.Text",textColor:"#363842",wrapWidth:549.69,fontSize:84,lineSpacing:.2,text:"Share",hAlign:"center",fontFamily:"Roboto-Bold",scale:1}]}]},{name:"img_promo_icon",className:"TGE.Sprite",image:"img_promo_icon",layout:{scaleToWidth:.4286,scaleToHeight:.2152,xPercentage:0,yPercentage:.1287}}]}],elxVersion:"1.3.1"},ELX_promoSingleImage={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"CroppedSprite",image:"img_promo_background",layout:{xPercentage:.5,yPercentage:.5,scaleToHeight:1,scaleToWidth:1,useMinScale:!1}}],elxVersion:"custom"},ELX_promoDualImage={portrait:{childObjects:[{name:"promo_background_portrait_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_portrait_letterbox",layout:"match"},{name:"img_promo_background_portrait",className:"CroppedSprite",image:"img_promo_background_portrait",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5,useMinScale:!1}}],elxVersion:"custom"},landscape:{childObjects:[{name:"promo_background_landscape_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_landscape_letterbox",layout:"match"},{name:"img_promo_background_landscape",className:"CroppedSprite",image:"img_promo_background_landscape",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5,useMinScale:!1}}],elxVersion:"custom"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoDualImage_portrait=(ELX_STORAGE.ELX_promoDualImage=ELX_promoDualImage).portrait,ELX_promoDualImage_landscape=ELX_promoDualImage.landscape,PromoBuilder={_sInstance:null,assetList:null,holder:null,REMOTE_SETTINGS:{promo_type:{type:"string",default:"preset",options:["static","preset","custom"]},promo_noVideo:{type:"boolean",default:!1},promo_style:{type:"string",default:"promoPopupIconDouble"},promo_reason:{type:"string",default:""},promo_videoInterstitial:{type:"boolean",default:!1},promo_dualVideo:{type:"boolean",default:!1},promo_winOnly:{type:"boolean",default:!1},promo_supportScore:{type:"boolean",default:!1},promo_previewBgFocus:{type:"boolean",default:!1},promo_staticBackground:{type:"string",default:"single",options:["single","dual"]},promo_background_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_portrait_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_landscape_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_bg:{type:"string",default:"popup",options:["popup","full","twoBox","none"]},promo_text:{type:"string",default:"header",options:["header","body","none","nofont"]},promo_icon:{type:"boolean",default:!0},promo_art:{type:"boolean",default:!1},promo_buttons:{type:"number",default:2,options:[0,1,2]},promo_buttonActionA:{type:"string",default:"action",options:["action","replay","popwallet"]},promo_buttonActionB:{type:"string",default:"replay",options:["action","replay","popwallet"]},promo_popwalletId:{type:"string",default:""},promo_popwalletRedeemOnce:{type:"boolean",default:!1},promo_fullClickAction:{type:"string",default:"none",options:["none","action","replay","popwallet"]},promo_fullClick:{type:"boolean",default:!1},promo_testVideo:{type:"boolean",default:!1},promo_video:{type:"boolean",default:!1},promo_video_videoUpload:{type:"boolean",default:!1},promo_video_loop:{type:"boolean",default:!1},promo_video_previewVideoCropping:{type:"boolean",default:!1},promo_video_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_video_noCropping:{type:"boolean",default:!0},promo_video_useSafeZone:{type:"boolean",default:!0},promo_video_zoomedPreview:{type:"boolean",default:!1},promo_video_location:{type:"number",default:.5,options:[{min:0,max:1,interval:.001}]},promo_video_safeZoneX:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneY:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneWidth:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_safeZoneHeight:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_watchdogTimer:{type:"number",default:500},promo_muteStyle:{type:"string",default:"circle",options:["none","filled","circle","circleFilled"]},promo_muteColor:{type:"string",default:"#ffffff"},promo_muteThickness:{type:"number",default:.5,options:[{min:.1,max:1,interval:.1}]}},SOURCE:["js/game/elx/ELX_promoFullVideoDouble.js","js/game/elx/ELX_promoFullVideoSingle.js","js/game/elx/ELX_promoFullVideoNone.js","js/game/elx/ELX_promoFullInsetVideoDouble.js","js/game/elx/ELX_promoFullInsetVideoSingle.js","js/game/elx/ELX_promoFullInsetVideoNone.js","js/game/elx/ELX_promoFullTopVideoDouble.js","js/game/elx/ELX_promoFullTopVideoSingle.js","js/game/elx/ELX_promoFullTopVideoNone.js","js/game/elx/ELX_promoFullImageDouble.js","js/game/elx/ELX_promoFullImageNone.js","js/game/elx/ELX_promoFullImageIconSingle.js","js/game/elx/ELX_promoFullImageIconNone.js","js/game/elx/ELX_promoPopupIconDouble.js","js/game/elx/ELX_promoPopupIconSingle.js","js/game/elx/ELX_promoPopupIconNone.js","js/game/elx/ELX_promoPopupImageIconNone.js","js/game/elx/ELX_promoPopupImageIconSingle.js","js/game/elx/ELX_promoSingleImage.js","js/game/elx/ELX_promoDualImage.js"],IMAGE_COMPRESSION:{"assets/images/promoCommon.png":{type:"tinypng"},"assets/images/promoPopupIcon.png":{type:"tinypng"}},ALL_ASSETS:{"assets/images/promoCommon.png":{type:"tinypng"},"assets/images/promoPopupIcon.png":{type:"tinypng"},"assets/images/promoFullImage.png":{type:"tinypng"},"assets/images/promoTwoBox.jpg":{type:"tinypng"},"assets/images/img_promoBackground.jpg":{type:"tinypng"},"assets/images/img_promoBg_portrait.jpg":{type:"tinypng"},"assets/images/img_promoBg_landscape.jpg":{type:"tinypng"},"assets/video/portraitCountdown.mp4":{type:"video"},"assets/video/pb_win.mp4":{type:"video"},"assets/video/pb_lose.mp4":{type:"video"}},ELX_OVERRIDES:{txt_promo_buttonA:{textDef:"txt_promo_buttonA"},txt_promo_buttonB:{textDef:"txt_promo_buttonB"},txt_promo_bodyA:{className:"PromoBuilder.Text",textDef:"txt_promo_bodyA"},txt_promo_bodyB:{className:"PromoBuilder.Text",textDef:"txt_promo_bodyB"},txt_promo_headerA:{className:"PromoBuilder.Text",textDef:"txt_promo_headerA"},txt_promo_headerB:{className:"PromoBuilder.Text",textDef:"txt_promo_headerB"}},promoData:{promoSingleImage:{elx:"ELX_promoSingleImage",assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoPopupIconNone:{elx:"ELX_promoPopupIconNone",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupIconSingle:{elx:"ELX_promoPopupIconSingle",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupIconDouble:{elx:"ELX_promoPopupIconDouble",sheets:["promoCommon.png","promoPopupIcon.png"]},promoPopupImageIconNone:{elx:"ELX_promoPopupImageIconNone",orientation:!0,sheets:["promoCommon.png","promoPopupIcon.png","promoFullImage.png"]},promoPopupImageIconSingle:{elx:"ELX_promoPopupImageIconSingle",orientation:!0,sheets:["promoCommon.png","promoPopupIcon.png","promoFullImage.png"]},promoFullImageIconNone:{elx:"ELX_promoFullImageIconNone",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageIconSingle:{elx:"ELX_promoFullImageIconSingle",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageNone:{elx:"ELX_promoFullImageNone",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullImageDouble:{elx:"ELX_promoFullImageDouble",orientation:!0,sheets:["promoCommon.png","promoFullImage.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullVideoDouble:{elx:"ELX_promoFullVideoDouble",orientation:!0,sheets:["promoCommon.png"]},promoFullVideoSingle:{elx:"ELX_promoFullVideoSingle",orientation:!0,sheets:["promoCommon.png"]},promoFullVideoNone:{elx:"ELX_promoFullVideoNone",orientation:!0},promoFullInsetVideoDouble:{elx:"ELX_promoFullInsetVideoDouble",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullInsetVideoSingle:{elx:"ELX_promoFullInsetVideoSingle",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullInsetVideoNone:{elx:"ELX_promoFullInsetVideoNone",orientation:!0,sheets:["promoCommon.png"],assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoFullTopVideoDouble:{elx:"ELX_promoFullTopVideoDouble",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoFullTopVideoSingle:{elx:"ELX_promoFullTopVideoSingle",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoFullTopVideoNone:{elx:"ELX_promoFullTopVideoNone",orientation:!0,sheets:["promoCommon.png","promoTwoBox.jpg"]},promoStatic_single:{elx:"ELX_promoSingleImage",assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoStatic_dual:{elx:"ELX_promoDualImage",orientation:!0,assets:[{id:"img_promo_background_portrait",url:"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:"images/img_promoBg_landscape.jpg"}]}},_videoBuffering:{pb_win:"loading",pb_lose:"loading"},UseDualVideo:function(){return TGE.RemoteSettings("promo_dualVideo")&&!TGE.RemoteSettings("promo_winOnly")},AddPromoAssets:function(o){var a,t=TGE.Game.GetInstance(),i=t.assetManager;for(var e in this.assetList=o,this.REMOTE_SETTINGS)TGE.RemoteSettings.GetSettings[e]||TGE.RemoteSettings.AddSetting(this.REMOTE_SETTINGS[e]);if(!1===GameConfig.PROMO_BUILDER_VIDEO&&(TGE.RemoteSettings.GetSettings().promo_noVideo.value=!0),TGE.InCreativeBuilder())l(o,"promoCommon.png"),l(o,"promoPopupIcon.png"),l(o,"promoFullImage.png"),l(o,"promoTwoBox.jpg"),i.addAssets(o,[{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"},{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]),n(),TGE.RemoteSettings("promo_noVideo")||i.addAssets(o,[{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4"},{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4"},{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4"}]);else switch(TGE.RemoteSettings("promo_type")){case"static":!function(){"dual"===TGE.RemoteSettings("promo_staticBackground")?i.addAssets(o,[{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]):i.addAsset(o,{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"});TGE.RemoteSettings("promo_videoInterstitial")&&r()}();break;case"preset":!function(){var e=TGE.RemoteSettings("promo_style"),t=PromoBuilder.promoData[e];if(t){if(t.sheets)for(a=t.sheets.length;0<=--a;)l(o,t.sheets[a]);if(t.assets){for(a=t.assets.length;0<=--a;)t.assets[a].url=GameConfig.PROMO_ASSET_PATH+t.assets[a].url;i.addAssets(o,t.assets)}(TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&r()}else console.error("PB: unknown promoStyle: "+e)}(),n();break;case"custom":TGE.RemoteSettings("promo_videoInterstitial")&&r()}if(window.__isLocal)for(a=this.SOURCE.length;0<=--a;)i.addAsset(o,{type:"script",url:"../promobuilder/"+this.SOURCE[a]});function r(){PromoBuilder.UseDualVideo()?(i.addAsset(o,{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4"}),i.addAsset(o,{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4"})):i.addAsset(o,{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4"})}function n(){var e=[];"nofont"===TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||e.push("txt_font_primary"),"body"!==TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||e.push("txt_font_secondary"),t.addFonts(o,e)}function l(e,t){var o=t.slice(0,-4);window.__isLocal?i.addSheetImages(e,GameConfig.PROMO_ASSET_PATH+"images/"+t,"../promobuilder/js/game/sheets/"+o+".js"):i.addSheetImages(e,GameConfig.PROMO_ASSET_PATH+"images/"+t)}},AddPromoScreen:function(e,t){return this.holder=e.addChild((new TGE.DisplayObjectContainer).setup({layout:function(e){this.registrationX=.5,this.registrationY=.5,this.width=this.parent.width,this.height=this.parent.height,this.x=this.parent.width*(.5-this.parent.registrationX),this.y=this.parent.height*(.5-this.parent.registrationY)}})),TGE.Game.GetInstance().waitForAssetList(PromoBuilder.assetList,PromoBuilder._AddPromoScreen.bind(PromoBuilder,this.holder,t)),this.holder},_AddPromoScreen:function(e,t){var o,a;PromoBuilder._sInstance&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempting to add another promo screen "+(t.reason?"for '"+t.reason+"' ":"")+"when one already exists");var i=TGE.RemoteSettings("promo_style");"static"===TGE.RemoteSettings("promo_type")&&(i="promoStatic_"+TGE.RemoteSettings("promo_staticBackground"));var r=this.promoData[i];if(r&&TGE.InCreativeBuilder()){var n={};if(r.sheets)for(o=r.sheets.length;0<=--o;)n["assets/images/"+r.sheets[o]]={type:"tinypng"};if(r.assets)for(o=r.assets.length;0<=--o;)n["assets/"+r.assets[o].url]={type:"tinypng"};(TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&(PromoBuilder.UseDualVideo()?(n["assets/video/pb_win.mp4"]={type:"video"},n["assets/video/pb_lose.mp4"]={type:"video"}):n["assets/video/portraitCountdown.mp4"]={type:"video"});var l=0;for(a in n)this.IMAGE_COMPRESSION[a]||++l;for(a in this.IMAGE_COMPRESSION)n[a]||++l;if(l){for(a in this.IMAGE_COMPRESSION=n,this.ALL_ASSETS)delete GameConfig.IMAGE_COMPRESSION[a];for(a in n)GameConfig.IMAGE_COMPRESSION[a]=n[a];_selfServe.saveData("_imageCompression",GameConfig.IMAGE_COMPRESSION)}}var s=e.addChild((new PromoBuilder.PromoScreen).setup(t));return(PromoBuilder._sInstance=s).addEventListener("remove",function(){PromoBuilder._sInstance=null}),"promo"!==getQueryString().state&&s.tweenFrom({alpha:0,duration:.3,easing:TGE.Tween.Sine.In}),s},PromoScreen:function(){PromoBuilder.PromoScreen.superclass.constructor.apply(this,arguments)}};PromoBuilder.PromoScreen.prototype={setup:function(e){var t,o=e.reason||"win";"promo"===TGE.RemoteSettings("state")&&(o=TGE.RemoteSettings("promo_reason")||o),"none"!==o&&TGE.Analytics.Completion(o),this.score=e.score;var a=TGE.RemoteSettings("promo_style");"static"===TGE.RemoteSettings("promo_type")&&(a="promoStatic_"+TGE.RemoteSettings("promo_staticBackground"));var i="none"===TGE.RemoteSettings("promo_bg");if(TGE.InCreativeBuilder()){if(0<=a.indexOf("Video"))onChangeSetting("promo_videoInterstitial",!1,!0);else{var r=_selfServe.stateSettings.promo_videoInterstitial;void 0!==r&&onChangeSetting("promo_videoInterstitial",r)}onChangeSetting("promo_supportScore",void 0!==e.score),onChangeSetting("promo_winOnly",e.winOnly||!1),"promo"===TGE.RemoteSettings("state")&&(this.score=12345)}TGE.RemoteSettings("promo_testVideo")&&a.indexOf("Video")<0&&(a="promoFullVideoNone",i=!0);var n=!e.winOnly&&"string"==typeof o&&0===o.indexOf("lose"),l="video_ad";if(PromoBuilder.UseDualVideo()){l=n?"pb_lose":"pb_win",PromoBuilder._videoBuffering[l]="played";var s=n?"pb_win":"pb_lose";if("loading"===PromoBuilder._videoBuffering[s]){var m=TGE.Game.GetInstance().assetManager.getAsset(s);m&&(m.setAttribute("preload","none"),m.load(),PromoBuilder._videoBuffering[s]="suspended")}}var c,p=PromoBuilder.promoData[a];p&&(t=PropertyCombine.clone(e.override),PropertyCombine.combineProperties(PromoBuilder.ELX_OVERRIDES,t),g(["txt_promo_bodyA_holder","txt_promo_headerA_holder","img_promo_artA"],t,!n),g(["txt_promo_bodyB_holder","txt_promo_headerB_holder","img_promo_artB"],t,n),0<=a.indexOf("Video")&&(t["promo_videoContainer"+(i?"Full":"")]={className:"PromoBuilder.VideoPlayer",assetId:l,fullscreen:i,aspectHandling:i&&!TGE.RemoteSettings("promo_video_noCropping")?"crop":"letterbox",colorDef:i?"promo_video_letterbox":null,backgroundColor:i?null:"rgba(0, 0, 0, 0)",loop:TGE.RemoteSettings("promo_video_loop"),autoplay:!1}),"full"!==TGE.RemoteSettings("promo_bg")||"preset"!==TGE.RemoteSettings("promo_type")||i||(t.img_promo_background={className:"CroppedSprite"}),p.orientation?(e.portrait={elx:TGE.GetClass(p.elx+"_portrait"),override:t},e.landscape={elx:TGE.GetClass(p.elx+"_landscape"),override:t}):(e.elx=TGE.GetClass(p.elx),e.override=t)),PromoBuilder.PromoScreen.superclass.setup.call(this,e),this.replayCallback=e.onReplay,0<=a.indexOf("Video")&&!TGE.RemoteSettings("promo_video_previewVideoCropping")&&((c=this.getObject("promo_videoContainer"+(i?"Full":"")))&&TGE.Game.AddEventListener("tgeGameViewable",this._playVideo.bind(this,c)));this._setPopwalletVisible("A"),this._setPopwalletVisible("B"),"static"!==TGE.RemoteSettings("promo_type")&&"full"!==TGE.RemoteSettings("promo_bg")||TGE.RemoteSettings("promo_testVideo")||(TGE.RemoteSettings("promo_previewBgFocus")&&(this.promo_background_crosshair=this.addChild((new PromoBuilder.Crosshair).setup({}))),this.isCached=function(){return!0},this.cache=function(){this._resizeBg()},this.addEventListener("resizeEnd",this._resizeBg),this.addEventListener("addedToStage",this._resizeBg)),this.performAction({delay:"number"==typeof e.delayBeforeClickable?e.delayBeforeClickable:1,action:this.addListeners.bind(this)}),!(TGE.RemoteSettings("promo_videoInterstitial")&&a.indexOf("Video")<0)||TGE.RemoteSettings("promo_testVideo")||"promo"===TGE.RemoteSettings("state")&&TGE.InCreativeBuilder()||((c=this.stage.addChild((new PromoBuilder.VideoPlayer).setup({assetId:l,colorDef:"promo_video_letterbox",fullscreen:!0,aspectHandling:TGE.RemoteSettings("promo_video_noCropping")?"letterbox":"crop",autoplay:!1,layout:"match"}))).addEventListener("complete",function(){c.setLocation(0),c.markForRemoval()}),TGE.Game.AddEventListener("tgeGameViewable",c.play.bind(c)),c.mouseEnabled=!0);return this;function g(e,t,o){for(var a=e.length;0<=--a;)t[e[a]]={visible:o}}},_playVideo:function(e){this.performAction({delay:.01,action:e.play.bind(e)})},_resizeBg:function(){var e=this._getBgName("img_promo_background"),t=this.getObject(e),o=this.promo_background_crosshair,a=this._getBgName("promo_background");if("crop"===TGE.RemoteSettings(a+"_aspectHandling")){var i=this.width*this.scaleX/(t.width*t.scaleX)/2,r=this.height*this.scaleY/(t.height*t.scaleY)/2,n=TGE.Math.Clamp(TGE.RemoteSettings(a+"_xPosition"),i,1-i),l=TGE.Math.Clamp(TGE.RemoteSettings(a+"_yPosition"),r,1-r),s=-1*(n-.5),m=-1*(l-.5),c=-2*(n-.5);t.x=this.width*n+c*t.registrationX*t.width*t.scaleX-this.width*this.registrationX+s*this.width;var p=-2*(l-.5);t.y=this.height*l+p*t.registrationY*t.height*t.scaleY-this.height*this.registrationY+m*this.height,o&&(s=TGE.RemoteSettings(a+"_xPosition")-n,m=TGE.RemoteSettings(a+"_yPosition")-l,o.x=s*t.width*t.scaleX+this.width/2,o.y=m*t.height*t.scaleY+this.height/2,o.visible=!0,o.bringToFront())}else t.x=this.width/2,t.y=this.height/2,t.scale=Math.min(this.width/t.width,this.height/t.height),o&&(o.visible=!1)},_getBgName:function(e){return"static"===TGE.RemoteSettings("promo_type")&&"dual"===TGE.RemoteSettings("promo_staticBackground")&&(e+=this.stage.isLandscape()?"_landscape":"_portrait"),e},addListeners:function(){this._addButtonListener("A"),this._addButtonListener("B"),this.addEventListener("click",this.onClick.bind(this))},onClick:function(e){if(e.y>.1*this.height){var t=TGE.RemoteSettings("promo_fullClickAction");if("static"!==TGE.RemoteSettings("promo_type"))switch(TGE.RemoteSettings("promo_buttons")){case 1:if(TGE.RemoteSettings("promo_fullClick")){t=TGE.RemoteSettings("promo_buttonActionA");break}case 2:t=null}"replay"===t&&this.onReplay(),"action"===t&&TGE.Game.AppstoreClickthrough(),"popwallet"===t&&(TGE.RemoteSettings("promo_popwalletRedeemOnce")&&"true"===TGE.GetFromStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon")||this.onPopwallet())}},_addButtonListener:function(e){if(this.hasObject("promo_button"+e)){var t;switch(TGE.RemoteSettings("promo_buttonAction"+e)){case"replay":t=this.onReplay.bind(this);break;case"action":t=TGE.Game.AppstoreClickthrough;break;case"popwallet":t=this.onPopwallet.bind(this)}this.getObject("promo_button"+e).addEventListener("click",t)}},_setPopwalletVisible:function(e){TGE.InCreativeBuilder()||this.hasObject("promo_button"+e)&&"popwallet"===TGE.RemoteSettings("promo_buttonAction"+e)&&TGE.RemoteSettings("promo_popwalletRedeemOnce")&&"true"===TGE.GetFromStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon")&&(this.getObject("promo_button"+e).visible=!1)},onPopwallet:function(e){TGE.RemoteSettings("promo_popwalletRedeemOnce")&&(e&&e.currentTarget&&(e.currentTarget.visible=!1),window.__isLocal&&TGE.SetInStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon","true")),this.getSecurePopwalletUrl(TGE.RemoteSettings("promo_popwalletId"))},getSecurePopwalletUrl:function(e){var t={popwalletId:e};TGE.Game.GetInstance().serverRequest("popwallet",t,this.securePopwalletCallback.bind(this),4)},securePopwalletCallback:function(e){e.success?this.gotoPopwalletSite(e.url):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error requesting secure coupon URL: "+e.error)},gotoPopwalletSite:function(e){TGE.SetInStorage(GameConfig.CREATIVE_ID+"_popwalletCoupon","true"),window.mraid&&"mopub"===getQueryString().ssp.toLowerCase()&&(e="mopubnativebrowser://navigate?url="+(e=encodeURIComponent(e))),TGE.Game.Clickthrough("popwallet",e)},onReplay:function(){for(id in PromoBuilder._videoBuffering)if("suspended"===PromoBuilder._videoBuffering[id]){var e=TGE.Game.GetInstance().assetManager.getAsset(id);e.setAttribute("preload","auto"),e.load(),PromoBuilder._videoBuffering[id]="loading"}TGE.Analytics.Replay(),this.replayCallback&&this.replayCallback()}},extend(PromoBuilder.PromoScreen,ELXDisplay),PromoBuilder.Text=function(){PromoBuilder.Text.superclass.constructor.apply(this,arguments)},PromoBuilder.Text.prototype={_applyTextDef:function(e){var t=GameConfig.TEXT_DEFS[e],o=PromoBuilder._sInstance;if(t&&o){var a=t.text;void 0!==t.text&&0<=t.text.toUpperCase().indexOf("#SCORE#")&&(void 0!==o.score?t.text=t.text.replace(/#SCORE#/gi,o.score):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"'score' must be specified in PromoScreen setup")),PromoBuilder.Text.superclass._applyTextDef.call(this,e),void 0!==a&&(t.text=a)}}},extend(PromoBuilder.Text,TGE.Text),PromoBuilder.VideoPlayer=function(){PromoBuilder.VideoPlayer.superclass.constructor.apply(this,arguments)},PromoBuilder.VideoPlayer.prototype={setup:function(e){if((PromoBuilder.VideoPlayer.superclass.setup.call(this,e),window.VideoPlayerGlobals=window.VideoPlayerGlobals||{},void 0===VideoPlayerGlobals.muted&&(TGE.InCreativeBuilder()&&!TGE.Game.GetInstance().timeSinceLastInteraction()?VideoPlayerGlobals.muted=!0:VideoPlayerGlobals.muted=!TGE.AudioManager.GetInstance().canPlayAudio()||TGE.AudioManager.GetInstance().isMuted()),TGE.AudioManager.GetInstance().mute(VideoPlayerGlobals.muted),this.aspectHandling=e.aspectHandling||"letterbox",this.fullscreen=e.fullscreen,this._progressEvent=0,this.paused=!0,this.completed=!1,this.frameCache=null,this.cacheTime=-1,this.assetId=e.assetId,e.assetId)&&("none"!==("NoAudio"!==TGE.AudioManager.GetInstance().pluginType()||TGE.InCreativeBuilder()?TGE.RemoteSettings("promo_muteStyle"):"none")&&(this.muteButton=this.addChild((new PromoBuilder.MuteButton).setup({})),this.muteButton.addEventListener("mousedown",this._onMute.bind(this))),this.video=TGE.Game.GetInstance().assetManager.getAsset(e.assetId,!1),this.video)){VideoPlayerGlobals._analytics||(VideoPlayerGlobals._analytics=e.assetId);var t=VideoPlayerGlobals[e.assetId];t&&t._video===this.video?t._videoPlayer=this:(t=VideoPlayerGlobals[e.assetId]={_playTime:0,_videoPlayer:this,_video:this.video,_onComplete:function(e){this._videoPlayer._onComplete(e)},_onTimeUpdate:function(e){this._playTime=(new Date).getTime(),this._videoPlayer._onTimeUpdate(e)},_onNewLoad:function(e){this._videoPlayer.paused=!1}},this.video.addEventListener("ended",t._onComplete.bind(t)),this.video.addEventListener("timeupdate",t._onTimeUpdate.bind(t)),TGE.InCreativeBuilder()&&this.video.addEventListener("loadstart",t._onNewLoad.bind(t)),this.video.setAttribute("webkit-playsinline",""),this.video.setAttribute("playsinline","")),e.loop||!1!==e.loop&&TGE.RemoteSettings("promo_video_videoUpload")?this.video.setAttribute("loop",""):this.video.removeAttribute("loop"),this.addEventListener("drawbegin",this._drawVideo.bind(this)),this.addEventListener("remove",this._onRemove.bind(this)),this.addEventListener("update",this._onUpdate.bind(this)),TGE.RemoteSettings("promo_video_previewVideoCropping")&&(this.addEventListener("resize",this.setLocation),this.setLocation(),TGE.RemoteSettings("promo_video_noCropping")||(this.overlay=this.addChild((new PromoBuilder.CBOverlay).setup({layout:function(e){var t=this.parent.getScreenRect("promo_video_safeZone");this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},mouseEnabled:!1,backdropFillStyle:"noFill",textPosition:"middle",textParams:{text:"SAFE ZONE",fontSize:19}})))),this.play(!e.autoplay)}return this},setLocation:function(e){"number"!=typeof e&&(e=TGE.RemoteSettings("promo_video_location")),this.pause(),this.video.duration&&this.seek(e*this.video.duration)},play:function(e){var t=this,o=this.video;if(o&&this.width&&this.height&&this.paused){this.paused=!0===e,this.paused||(VideoPlayerGlobals[this.assetId]._playTime=(new Date).getTime(),0===this._progressEvent&&this._logProgress(0)),this.completed=!1,this.frameCache=null,o.currentTime=0,o.muted=VideoPlayerGlobals.muted;var a=o.play();a&&a.catch(function(e){o.muted||t.paused?t.paused||console.log("VP: play failed: "+e):(console.log("VP: play failed, switching to muted: "+e),VideoPlayerGlobals.muted=!0,o.muted=!0,o.play())})}},_play:function(t){VideoPlayerGlobals[this.assetId]._playTime=(new Date).getTime();var e=this.video.play();e&&e.catch(function(e){console.log("VP: "+t+" failed: "+e)})},resume:function(){this.paused&&(this.paused=!1,this._resume())},_resume:function(){this.video&&this.video.paused&&this.width&&this.height&&this._play("_resume")},pause:function(){this.paused||(this.paused=!0,this._pause())},_pause:function(){this.video&&!this.video.paused&&this.video.pause()},_onUpdate:function(){if(this.video&&!this.paused&&!this.completed&&this.video.currentTime<this.video.duration)if(this.video.paused)this._resume();else{var e=VideoPlayerGlobals[this.assetId];if(e._playTime)(new Date).getTime()>e._playTime+TGE.RemoteSettings("promo_video_watchdogTimer")&&this._play("iOS hack resume")}},seek:function(e){if(this.video){if(e>this.video.duration)return void console.error("VP: seek offset > duration");this.video.currentTime=e,this.completed=!1,this.frameCache=null}},mute:function(e){this.video&&(this.video.muted=VideoPlayerGlobals.muted=!1!==e,TGE.InCreativeBuilder()&&_selfServe.mute(VideoPlayerGlobals.muted))},stop:function(){this.pause()},getScreenRect:function(e,t){var o,a,i=this.video.videoWidth||this.width,r=this.video.videoHeight||this.height,n=(e?TGE.RemoteSettings(e+"X"):.5)-this.xPosition,l=(e?TGE.RemoteSettings(e+"Y"):.5)-this.yPosition,s=n*i*this.videoScale,m=l*r*this.videoScale,c=Math.max(i,r)*this.videoScale,p=(e?TGE.RemoteSettings(e+"Width"):1)*(t?c:i*this.videoScale),g=(e?TGE.RemoteSettings(e+"Height"):1)*(t?c:r*this.videoScale),d=Math.min(i*this.videoScale,this.width)/2,h=Math.min(r*this.videoScale,this.height)/2;return(o=s-p/2)<-d?(p-=a=-d-o,s+=a/2):d<o+p&&(p-=a=o+p-d,s-=a/2),(o=m-g/2)<-h?(g-=a=-h-o,m+=a/2):h<o+g&&(g-=a=o+g-h,m-=a/2),new TGE.Rectangle(s,m,p,g)},_drawVideo:function(e){var t,o,a,i,r,n,l,s,m,c,p,g,d,h=e.canvasContext,_=this.width,u=this.height,b=this.video.videoWidth,T=this.video.videoHeight,E=this.video;E=this.video;if(TGE.BrowserDetect.oniOS){this.frameCache||(this.frameCache=document.createElement("canvas"),this.cacheTime=-1);var S=this.frameCache;if(this.video.hasAttribute("loop")||!this.completed&&this.video.currentTime>this.cacheTime)this.cacheTime=this.video.currentTime,S.width=this.video.videoWidth,S.height=this.video.videoHeight,S.getContext("2d").drawImage(this.video,0,0,S.width,S.height);E=S}if(h.fillStyle=this.backgroundColor||"black",h.fillRect(0,0,_,u),b&&T){if(a=b,i=T,"letterbox"===this.aspectHandling||!TGE.RemoteSettings("promo_video_zoomedPreview")&&TGE.RemoteSettings("promo_video_previewVideoCropping"))p=_/a,g=u/i,d=Math.min(p,g),r=_-(l=Math.ceil(a*d))>>1,n=u-(s=Math.ceil(i*d))>>1,h.drawImage(E,r,n,l,s),this.videoScale=d,this.xPosition=.5,this.yPosition=.5;else if(TGE.RemoteSettings("promo_video_useSafeZone")&&(a*=TGE.RemoteSettings("promo_video_safeZoneWidth"),i*=TGE.RemoteSettings("promo_video_safeZoneHeight")),p=_/a,g=u/i,d=Math.min(p,g,Math.max(_/b,u/T)),this.videoScale=d,a=Math.max(a,Math.min(b,Math.ceil(_/d))),i=Math.max(i,Math.min(T,Math.ceil(u/d))),c=b-(m=.5*a),t=TGE.Math.Clamp(b*TGE.RemoteSettings("promo_video_safeZoneX"),m,c),this.xPosition=t/b,c=T-(m=.5*i),o=TGE.Math.Clamp(T*TGE.RemoteSettings("promo_video_safeZoneY"),m,c),this.yPosition=o/T,t=t-.5*a|0,o=o-.5*i|0,r=_-(l=Math.ceil(a*d))>>1,n=u-(s=Math.ceil(i*d))>>1,TGE.BrowserDetect.oniOS)h.save(),h.beginPath(),h.rect(0,0,this.width,this.height),h.clip(),parseInt(TGE.BrowserDetect.OSversion.match(/\d+$/)[0],10)<10?h.drawImage(E,x,y,_,u):(a=b*d,i=T*d,t*=-d,o*=-d,t+=r,o+=n,h.drawImage(E,0|t,0|o,0|a,0|i)),h.restore();else h.drawImage(E,t,o,a,i,r,n,l,s);this.overlay&&this.overlay.reapplyLayout();var P=TGE.Game.GetInstance(),G=!P.audioManager.canPlayAudio()||P.audioManager.isMuted();TGE.InCreativeBuilder()&&G!==VideoPlayerGlobals.muted&&(VideoPlayerGlobals.muted=G,this.handleEvent({type:"mute",muted:VideoPlayerGlobals.muted})),this.video.muted=VideoPlayerGlobals.muted,this.muteButton&&(this.muteButton.muted=VideoPlayerGlobals.muted,this.muteButton.x=-(this.fullscreen?_:l)/2+.75*this.muteButton.width,this.muteButton.y=-(this.fullscreen?u:s)/2+.75*this.muteButton.height),!this.video||(TGE.Game.GetUpdateRoot().stage instanceof TGE.GameStage||this.paused)&&(!this.paused||this.video.paused)||this._pause()}},_logProgress:function(e){this.assetId===VideoPlayerGlobals._analytics&&(TGE.Events.logVideoProgress(e),this._progressEvent=e+25)},_onTimeUpdate:function(){if(this.video.duration&&!this.paused){var e=this.video.currentTime/this.video.duration*100;(e>this._progressEvent||e<25&&100===this._progressEvent)&&this._logProgress(this._progressEvent)}},_onMute:function(e){this.mute(!VideoPlayerGlobals.muted),this.handleEvent({type:"mute",muted:VideoPlayerGlobals.muted})},_onComplete:function(e){this.completed=!0,(this.paused=!0)!==e&&100===this._progressEvent&&this._logProgress(100),this.handleEvent({type:"complete",skipped:!0===e})},_onRemove:function(){this.paused||this.stop(),this.video&&(this.video.currentTime=0)}},extend(PromoBuilder.VideoPlayer,TGE.DisplayObjectContainer),PromoBuilder.MuteButton=function(){PromoBuilder.MuteButton.superclass.constructor.apply(this,arguments)},PromoBuilder.MuteButton.prototype={setup:function(e){return PromoBuilder.MuteButton.superclass.setup.call(this,e),this._muted=e.muted||!1,this.instanceName="muteButton",this.addEventListener("resize",this._onResize.bind(this)),this},_onResize:function(e){var t=Math.min(.12*this.parent.width,.12*this.parent.height);t&&(this.width=this.height=t,PromoBuilder.MuteButton.superclass.cache.call(this),this.cache())},cache:function(){var e=this.offscreenRenderer&&this.offscreenRenderer.getCanvasContext();e&&this.draw(e)},draw:function(e){e.clearRect(0,0,this.width,this.height);var t=TGE.RemoteSettings("promo_muteStyle"),o=TGE.RemoteSettings("promo_muteColor"),a=TGE.RemoteSettings("promo_muteThickness");!function(e,t,o,a,i,r,n){e.save(),e.fillStyle=r,e.strokeStyle=r,e.lineCap="round",e.lineJoin="round";var l=.1*t*i;e.lineWidth=l;var s=-.05*t*i;"circle"!==n&&"circleFilled"!==n||(e.beginPath(),e.arc(t/2,o/2,t/2,0,2*Math.PI),e.fill(),e.globalCompositeOperation="destination-out");(function(e,t,o,a,i,r){var n=.6*a,l=-.275*a;e.beginPath(),e.moveTo(t+l-.4*n+i/2,o-.5*n+i/2),e.lineTo(t+l+.5*n-i/2,o-.5*n+i/2),e.lineTo(t+l+1.25*n-i/2,o-1.2*n+i/2),e.lineTo(t+l+1.25*n-i/2,o+1.2*n-i/2),e.lineTo(t+l+.5*n-i/2,o+.5*n-i/2),e.lineTo(t+l-.4*n+i/2,o+.5*n-i/2),e.closePath(),"filled"!==r&&"circleFilled"!==r||e.fill();e.stroke()})(e,.375*t+s,o/2,.4*t,l,n),a?function(e,t,o,a){e.beginPath(),e.moveTo(t-.5*a,o-.5*a),e.lineTo(t+.5*a,o+.5*a),e.moveTo(t-.5*a,o+.5*a),e.lineTo(t+.5*a,o-.5*a),e.stroke()}(e,.76*t+s,o/2,.225*t):function(e,t,o,a,i){e.beginPath(),e.moveTo(t-.35*a-.25*i,o-.5*a+i/2),e.bezierCurveTo(t-.15*a-.5*i,o-.25*a+i/3,t-.15*a-.5*i,o+.25*a-i/3,t-.35*a-.25*i,o+.5*a-i/2),e.moveTo(t-.2*a+.25*i,o-.75*a+i/2),e.bezierCurveTo(t+.15*a,o-.4*a+i/3,t+.15*a,o+.4*a-i/3,t-.2*a+.25*i,o+.75*a-i/2),e.moveTo(t-.05*a+.75*i,o-a+i/2),e.bezierCurveTo(t+.45*a+.5*i,o-.5*a+i/3,t+.45*a+.5*i,o+.5*a-i/3,t-.05*a+.75*i,o+ +a-i/2),e.stroke()}(e,.75*t+s,o/2,.25*t,l);e.restore()}(e,this.width,this.height,this._muted,a,o,t)}},extend(PromoBuilder.MuteButton,TGE.DisplayObjectContainer),Object.defineProperty(PromoBuilder.MuteButton.prototype,"muted",{get:function(){return this._muted},set:function(e){e!==this._muted&&(this._muted=e,this.cache())}}),PromoBuilder.Crosshair=function(){PromoBuilder.Crosshair.superclass.constructor.apply(this,arguments),PropertyCombine.setDefaultParams(this,{width:64,height:64,emptyCenterSize:28,lineWidth:4,outsideStroke:2,strokeColorInside:"#ffffff",strokeColorOutside:"#000000",registrationX:.5,registrationY:.5,capStyle:"square"})},PromoBuilder.Crosshair.prototype={setup:function(e){return PropertyCombine.setupInstance(this,e,PromoBuilder.Crosshair.superclass.setup),this.addEventListener("drawbegin",this.onDrawBegin.bind(this)),this},onDrawBegin:function(e){var t=this.width/2,o=this.height/2,a=(this.width-this.emptyCenterSize)/2,i=(this.height-this.emptyCenterSize)/2,r=e.canvasContext;r.save(),r.lineCap=this.capStyle,r.beginPath(),r.moveTo(0,o),r.lineTo(a,o),r.moveTo(this.width,o),r.lineTo(this.width-a,o),r.moveTo(t,0),r.lineTo(t,i),r.moveTo(t,this.height),r.lineTo(t,this.height-i),r.lineWidth=this.lineWidth+2*this.outsideStroke,r.strokeStyle=this.strokeColorOutside,r.stroke(),r.lineWidth=this.lineWidth,r.strokeStyle=this.strokeColorInside,r.stroke(),r.closePath(),r.restore()}},extend(PromoBuilder.Crosshair,TGE.DisplayObjectContainer),PromoBuilder.CBOverlay=function(){PromoBuilder.CBOverlay.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen,PropertyCombine.setDefaultParams(this,{backdropColor:"#000000",backdropAlpha:.5,backdropFillStyle:"fillInside",textPosition:"bottom",textParams:{text:"OVERLAY",fontFamily:"Roboto",fontSize:10,fontWeight:"normal",textColor:"white",strokeWidth:3,strokeColor:"black",hAlign:"center"},borderLineDash:[20,10],borderColor:"white",borderWidth:5})},PromoBuilder.CBOverlay.prototype={setup:function(e){return PropertyCombine.setupInstance(this,e,PromoBuilder.CBOverlay.superclass.setup,PropertyCombine.Strategy.DEEP_COMBINE),this.addEventListener("drawbegin",this._drawObjects.bind(this)),this},_drawObjects:function(e){this._createBackdrop(e),this._createBorder(e),this._addText(e)},_createBackdrop:function(e){var t=e.canvasContext;switch(this.backdropFillStyle){case"fillInside":t.save(),t.beginPath(),t.rect(-this.borderWidth,-this.borderWidth,this.width+2*this.borderWidth,this.height+2*this.borderWidth),t.closePath(),t.globalAlpha=this.backdropAlpha,t.fillStyle=this.backdropColor,t.fill(),t.restore();break;case"fillOutside":t.save(),t.beginPath(),t.setTransform(1,0,0,1,0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),t.rect(this.borderWidth,this.borderWidth,this.width-2*this.borderWidth,this.height-2*this.borderWidth),t.clip("evenodd"),t.closePath(),t.globalAlpha=this.backdropAlpha,t.fillStyle=this.backdropColor,t.fill(),t.restore();break;case"noFill":t.save(),t.beginPath(),t.rect(0,0,this.width,this.height),t.closePath(),t.lineWidth=2*this.borderWidth,t.globalAlpha=this.backdropAlpha,t.strokeStyle=this.backdropColor,t.stroke(),t.restore()}},_createBorder:function(e){var t=e.canvasContext;t.save(),t.beginPath(),t.rect(0,0,this.width,this.height),t.closePath(),t.setLineDash(this.borderLineDash),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke(),t.restore()},_addText:function(){if(!this.textHolder){switch(this.textPosition){case"bottom":var e={xPercentage:0,bottomAnchor:.46,scaleToWidth:1,scaleToHeight:.1,useMinScale:!1};this.textParams.vAlign="bottom";break;case"middle":e={xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:.1,useMinScale:!1};this.textParams.vAlign="middle";break;case"top":e={xPercentage:0,topAnchor:-.54,scaleToWidth:1,scaleToHeight:.1,useMinScale:!1};this.textParams.vAlign="top"}this.textHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:50,layout:e})),this.textParams.wrapWidth||(this.textParams.wrapWidth=.95*this.width),this.textHolder.addChild((new TGE.Text).setup(this.textParams))}}},extend(PromoBuilder.CBOverlay,TGE.DisplayObjectContainer);var PromoConfig={PAGE_ORDER:["promoScreen"],PAGE_DEFS:{promoScreen:{name:"Promo Screen",state:"promo_win",groupType:"tabs",steps:[{name:"Style",type:"group",groupType:"open",steps:[{type:"remoteSetting",restart:!0,prompt:"Choose the end screen type",selectorDef:"promo_type",settingName:"promo_type",visibilityFunction:function(){return!advancedUser}},{type:"remoteSetting",restart:!0,prompt:"Choose the end screen type",selectorDef:"promo_type",settingName:"promo_type",advancedUser:!0},{type:"theme",restart:!0,prompt:"Choose a preset style",selectorDef:"promo_style",settingName:"promo_style",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&!TGE.RemoteSettings("promo_noVideo")}},{type:"theme",restart:!0,prompt:"Choose a preset style",selectorDef:"promo_styleNoVideo",settingName:"promo_style",visibilityFunction:function(){return"preset"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_noVideo")}},{label:"Display a video interstitial before the end screen",type:"remoteSetting",settingName:"promo_videoInterstitial",visibilityFunction:function(){return!("preset"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_noVideo"))}}]},{name:"Background",state:"promo_previewBgFocus",type:"group",groupType:"open",pageDef:"promo_background",visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")||"none"!==TGE.RemoteSettings("promo_bg")}},{name:"Icon",stepId:"step_promo_icon",type:"group",groupType:"open",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_icon")},steps:[{type:"imageUpload",prompt:"Upload an icon image",image:"img_promo_icon",colorize:!0,showNoImage:!0},{type:"layout",prompt:"Adjust the size/position",image:"img_promo_icon"}]},{name:"Text Styling",type:"group",groupType:"open",stepId:"step_promo_text",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&"nofont"!==TGE.RemoteSettings("promo_text")},steps:[{type:"text",prompt:"Choose a primary font",textDef:"txt_font_primary"},{type:"text",stepId:"step_promo_font_secondary",prompt:"Choose a secondary font",textDef:"txt_font_secondary"},{type:"text",stepId:"step_promo_header_style",prompt:"Change the text header style",textDef:"txt_promo_header",minFontSize:35,maxFontSize:120,position:!0},{type:"text",stepId:"step_promo_body_style",prompt:"Change the text body style",textDef:"txt_promo_body",minFontSize:20,maxFontSize:100,justification:!0,position:!0}]},{name:"Win Screen",type:"group",groupType:"open",stepId:"step_promo_win",state:"promo_win",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&("body"===TGE.RemoteSettings("promo_text")||"header"===TGE.RemoteSettings("promo_text"))},steps:[{type:"imageUpload",stepId:"step_promo_artA",prompt:'Choose a "win" image',image:"img_promo_artA",colorize:!0,showNoImage:!0},{type:"layout",stepId:"step_promo_sizeA",prompt:"Adjust the image size/position",image:"img_promo_artA"},{type:"text",prompt:"Edit the header text",textDef:"txt_promo_headerA"},{stepId:"step_promo_bodyA_text",type:"text",prompt:"Edit the body text",textDef:"txt_promo_bodyA",numLines:3},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]},{name:"Lose Screen",type:"group",groupType:"open",stepId:"step_promo_lose",state:"promo_lose",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&!TGE.RemoteSettings("promo_winOnly")&&("body"===TGE.RemoteSettings("promo_text")||"header"===TGE.RemoteSettings("promo_text"))},steps:[{type:"imageUpload",stepId:"step_promo_artB",prompt:'Choose a "lose" image',image:"img_promo_artB",colorize:!0,showNoImage:!0},{type:"layout",stepId:"step_promo_sizeB",prompt:"Adjust the image size/position",image:"img_promo_artB"},{type:"text",prompt:"Edit the header text",textDef:"txt_promo_headerB"},{stepId:"step_promo_bodyB_text",type:"text",prompt:"Edit the body text",textDef:"txt_promo_bodyB",numLines:3},{type:"noop",info:'NOTE: You can include the final game score with the text, by typing "#SCORE#" where you want the score number to appear. For example, "Final Score: #SCORE#".',visibilityRemoteSetting:"promo_supportScore"}]},{name:"Video",state:"promo_video_videoUpload",type:"group",groupType:"tabs",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return TGE.RemoteSettings("promo_videoInterstitial");case"preset":return TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial");case"custom":return!1}},steps:[{name:"Upload",type:"group",groupType:"open",state:"promo_video_videoUpload",steps:[{label:"Use two separate videos for win/lose conditions",type:"remoteSetting",settingName:"promo_dualVideo",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings("promo_winOnly")&&("preset"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_video")||TGE.RemoteSettings("promo_videoInterstitial"))&&!TGE.RemoteSettings("promo_noVideo")}},{type:"macro",macroDef:"promo_video_upload",macroParams:["video_ad"],visibilityFunction:function(){return!PromoBuilder.UseDualVideo()}},{type:"group",groupType:"buttons",visibilityFunction:PromoBuilder.UseDualVideo,steps:[{name:"Win Video",state:"promo_video_videoWin",type:"macro",macroDef:"promo_video_upload",macroParams:["pb_win"]},{name:"Lose Video",state:"promo_video_videoLose",type:"macro",macroDef:"promo_video_upload",macroParams:["pb_lose"]}]},{label:"Video repeats in an endless loop",type:"remoteSetting",settingName:"promo_video_loop",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings("promo_videoInterstitial")}},{prompt:"Adjust the size/position",type:"layout",elxName:"promo_videoContainer",visibilityFunction:function(){return"none"!==TGE.RemoteSettings("promo_bg")&&!TGE.RemoteSettings("promo_videoInterstitial")}}]},{type:"macro",macroDef:"promo_video_cropping",visibilityFunction:function(){return"none"===TGE.RemoteSettings("promo_bg")||TGE.RemoteSettings("promo_videoInterstitial")}},{type:"macro",macroDef:"promo_video_mute"}]},{name:"Full-screen click",restart:!0,type:"remoteSetting",prompt:"Detect full-screen click?",label:"Entire promo screen acts like the button",settingName:"promo_fullClick",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return!1;case"preset":return 1===TGE.RemoteSettings("promo_buttons");case"custom":return!1}}},{name:"Full-screen click",restart:!0,type:"remoteSetting",prompt:"Select full-screen click action",settingName:"promo_fullClickAction",selectorDef:"promoClickAction",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return!0;case"preset":return 0===TGE.RemoteSettings("promo_buttons");case"custom":return!1}}},{name:"Buttons",type:"group",groupType:"buttons",visibilityFunction:function(){return"static"!==TGE.RemoteSettings("promo_type")&&0<TGE.RemoteSettings("promo_buttons")},steps:[{name:"Button 1",stepId:"step_promo_button1",type:"group",groupType:"open",steps:[{name:"Click action",type:"remoteSetting",restart:!0,prompt:"Choose click action",settingName:"promo_buttonActionA",selectorDef:"promoButtonAction"},{type:"imageGroup",prompt:"Choose a button style",path:"assets/alternate-images/promo/buttons",selectorDef:"promoButton",image:"img_promo_buttonA",size:"promo_buttonA",position:"promo_buttonA",colorize:!0},{type:"text",prompt:"Edit the button text",textDef:"txt_promo_buttonA",position:!0}]},{name:"Button 2",stepId:"step_promo_button2",type:"group",groupType:"open",steps:[{name:"Click action",type:"remoteSetting",restart:!0,prompt:"Choose click action",settingName:"promo_buttonActionB",selectorDef:"promoButtonAction"},{type:"imageGroup",prompt:"Choose a button style",path:"assets/alternate-images/promo/buttons",selectorDef:"promoButton",image:"img_promo_buttonB",size:"promo_buttonB",position:"promo_buttonB",colorize:!0},{type:"text",prompt:"Edit the button text",textDef:"txt_promo_buttonB",position:!0}]}]},{name:"Popwallet",type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return"popwallet"===TGE.RemoteSettings("promo_fullClickAction");case"preset":switch(TGE.RemoteSettings("promo_buttons")){case 0:return"popwallet"===TGE.RemoteSettings("promo_fullClickAction");case 1:return"popwallet"===TGE.RemoteSettings("promo_buttonActionA");case 2:return"popwallet"===TGE.RemoteSettings("promo_buttonActionA")||"popwallet"===TGE.RemoteSettings("promo_buttonActionB")}case"custom":return!1}},steps:[{type:"noop",info:"Direct users to Apple Wallet and Google Pay content powered by Popwallet. Content can be coupons, offers, tickets, gift cards, and more. Secure server-to-server communication guarantees content can only be accessed via your creative. Talk to your TreSensa account manager to setup a campaign and get your Popwallet campaign ID."},{type:"remoteSetting",prompt:"Enter your Popwallet campaign ID",settingName:"promo_popwalletId"},{type:"remoteSetting",label:"Hide the button after the user has used it (applies to future sessions as well)",settingName:"promo_popwalletRedeemOnce",restart:!0}]}]},promo_background:{groupType:"open",steps:[{type:"remoteSetting",prompt:"Select image type",settingName:"promo_staticBackground",selectorDef:"promo_staticBackground",restart:!0,visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")}},{type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"static":return"single"===TGE.RemoteSettings("promo_staticBackground");case"preset":return"full"===TGE.RemoteSettings("promo_bg");case"custom":return!1}},steps:[{prompt:"Choose a background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_background",colorize:!0,autoCrop:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background"]}]},{prompt:"Choose background images for both Portrait and Landscape",type:"group",groupType:"buttons",visibilityFunction:function(){return"static"===TGE.RemoteSettings("promo_type")&&"dual"===TGE.RemoteSettings("promo_staticBackground")},steps:[{name:"Portrait",previewAspect:"portrait",type:"group",groupType:"open",steps:[{prompt:"Upload a portrait image",type:"imageUpload",image:"img_promo_background_portrait",autoCrop:!0,colorize:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background_portrait"]}]},{name:"Landscape",previewAspect:"landscape",type:"group",groupType:"open",steps:[{prompt:"Upload a landscape image",type:"imageUpload",image:"img_promo_background_landscape",autoCrop:!0,colorize:!0},{type:"macro",macroDef:"promo_aspectHandling",macroParams:["promo_background_landscape"]}]}]},{type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return"twoBox"===TGE.RemoteSettings("promo_bg");default:return!1}},steps:[{prompt:"Choose the top-half background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_bgA",colorize:!0},{prompt:"Choose the bottom-half background image",type:"imageGroup",path:"assets/alternate-images/promo",selectorDef:"promoBackground",image:"img_promo_bgB",colorize:!0}]},{type:"group",groupType:"open",visibilityFunction:function(){switch(TGE.RemoteSettings("promo_type")){case"preset":return"popup"===TGE.RemoteSettings("promo_bg");default:return!1}},steps:[{prompt:"Choose a popup background image",type:"imageGroup",path:"assets/alternate-images/promo/largePopup",selectorDef:"promoLargePopup",image:"img_promo_popupBackground",colorize:!0}]}]}},MACRO_DEFS:{promo_aspectHandling:{type:"group",groupType:"open",steps:[{type:"remoteSetting",prompt:"How to fit into different screen sizes:",settingName:"%%0_aspectHandling",restart:!0},{prompt:"Choose a letterbox color",type:"color",colorDef:"%%0_letterbox",visibilityFunction:function(e){return"letterbox"===TGE.RemoteSettings(e+"_aspectHandling")}},{prompt:"Adjust the main area of interest",info:"(On different screen sizes, the image will be cropped to keep this area in view)",type:"group",groupType:"open",visibilityFunction:function(e){return"crop"===TGE.RemoteSettings(e+"_aspectHandling")},steps:[{info:"Horizontal",type:"remoteSetting",settingName:"%%0_xPosition",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical",type:"remoteSetting",settingName:"%%0_yPosition",dispatchResize:!0,sliderOptions:{reversed:!0,formatter:function(){return""}}}]}]},promo_video_upload:{name:"Upload",state:"promo_video_videoUpload",type:"group",groupType:"open",steps:[{type:"videoUpload",prompt:"Upload a video",video:"%%0"}]},promo_video_cropping:{name:"Cropping",prompt:"Fitting video into different screen sizes",state:"promo_video_previewVideoCropping",type:"group",groupType:"open",steps:[{type:"remoteSetting",label:"Do not crop video (use letterbox only)",settingName:"promo_video_noCropping",restart:!0},{info:"On some screen sizes, letterboxing may still occur to keep video content in view",type:"noop",visibilityFunction:function(){return!TGE.RemoteSettings("promo_video_noCropping")}},{prompt:"Choose a letterbox color",type:"color",colorDef:"promo_video_letterbox"},{type:"group",groupType:"open",visibilityFunction:function(){return!TGE.RemoteSettings("promo_video_noCropping")},steps:[{prompt:"Adjust the area of the video that should always remain in view",type:"group",groupType:"open",steps:[{info:"Width",type:"remoteSetting",settingName:"promo_video_safeZoneWidth",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}},{info:"Height",type:"remoteSetting",settingName:"promo_video_safeZoneHeight",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}},{info:"Horizontal Position",type:"remoteSetting",settingName:"promo_video_safeZoneX",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical Position",type:"remoteSetting",settingName:"promo_video_safeZoneY",dispatchResize:!0,sliderOptions:{reversed:!0,formatter:function(){return""}}}]},{type:"remoteSetting",label:"Preview final cropped appearance",settingName:"promo_video_zoomedPreview",dispatchResize:!0}]},{prompt:"Preview video location",type:"remoteSetting",settingName:"promo_video_location",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}}]},promo_video_mute:{name:"Mute Button",state:"promo_video",type:"group",groupType:"open",steps:[{type:"remoteSetting",prompt:"Mute button style",settingName:"promo_muteStyle",restart:!0},{type:"group",groupType:"open",visibilityFunction:function(){return"none"!==TGE.RemoteSettings("promo_muteStyle")},steps:[{type:"remoteSetting",prompt:"Mute button color",settingName:"promo_muteColor"},{type:"remoteSetting",prompt:"Mute button line thickness",settingName:"promo_muteThickness"}]}]}},COLOR_DEFS:{promo_video_letterbox:"#000",promo_background_letterbox:"#000",promo_background_portrait_letterbox:"#000",promo_background_landscape_letterbox:"#000"},ELX_DEFS:{},TEXT_DEFS:{txt_font_primary:{fontFamily:"Roboto"},txt_font_secondary:{fontFamily:"Roboto"},txt_promo_body:{textDef:"txt_font_secondary",fontSize:56,textColor:"#5c5f6a",hAlign:"center",lineSpacing:.2,strokeColor:"#ffffff",strokeWidth:0},txt_promo_bodyA:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_bodyB:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_header:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",hAlign:"center",lineSpacing:.2,strokeColor:"#ffffff",strokeWidth:0},txt_promo_headerA:{textDef:"txt_promo_header",text:"Nice Job!"},txt_promo_headerB:{textDef:"txt_promo_header",text:"Nice Try!"},txt_promo_buttonA:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",strokeColor:"#ffffff",strokeWidth:0,text:"Learn More"},txt_promo_buttonB:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:84,textColor:"#5c5f6a",strokeColor:"#ffffff",strokeWidth:0,text:"Play Again"}},THEME_DEFS:{promoPopupIconNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconNone"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoPopupIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoPopupIconDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupIconDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoPopupImageIconNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupImageIconNone"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoPopupImageIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoPopupImageIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"popup"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullImageNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageNone"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullImageIconSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageIconSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!0},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"header"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullImageDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullImageDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!0},{type:"remoteSetting",settingName:"promo_video",value:!1},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"none"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"none"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"none"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"nofont"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullInsetVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullInsetVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullInsetVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullInsetVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"full"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]},promoFullTopVideoDouble:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoDouble"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:2}]},promoFullTopVideoSingle:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoSingle"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:1}]},promoFullTopVideoNone:{patches:[{type:"remoteSetting",settingName:"promo_style",value:"promoFullTopVideoNone"},{type:"remoteSetting",settingName:"promo_bg",value:"twoBox"},{type:"remoteSetting",settingName:"promo_icon",value:!1},{type:"remoteSetting",settingName:"promo_art",value:!1},{type:"remoteSetting",settingName:"promo_video",value:!0},{type:"remoteSetting",settingName:"promo_text",value:"body"},{type:"remoteSetting",settingName:"promo_buttons",value:0}]}},SETTING_CACHE_DEFS:{promo_muteStyle:["muteButton"],promo_muteColor:["muteButton"],promo_muteThickness:["muteButton"]},STEP_VISIBILITY_DEFS:{promo_art:{true:{show:["step_promo_sizeA","step_promo_sizeB","step_promo_artA","step_promo_artB"]},false:{hide:["step_promo_sizeA","step_promo_sizeB","step_promo_artA","step_promo_artB"]}},promo_text:{body:{show:["step_promo_text","step_promo_font_secondary","step_promo_header_style","step_promo_body_style","step_promo_bodyA_text","step_promo_bodyB_text"]},header:{show:["step_promo_text","step_promo_header_style"],hide:["step_promo_font_secondary","step_promo_body_style","step_promo_bodyA_text","step_promo_bodyB_text"]},none:{show:["step_promo_text"],hide:["step_promo_font_secondary","step_promo_header_style","step_promo_body_style","step_promo_bodyA_text","step_promo_bodyB_text"]},nofont:{hide:["step_promo_text","step_promo_font_secondary","step_promo_header_style","step_promo_body_style","step_promo_bodyA_text","step_promo_bodyB_text"]}}},NUMBERED_VISIBILITY_DEFS:{promo_buttons:{show:["step_promo_button1","step_promo_button2"],click:"step_promo_button1"}},SELECTOR_DEFS:{promoBackground:{names:["Solid","Gradient","Brick","Wood","Clouds","Grass","Circles","Striped","Charcoal","Paper"],values:["img_solid.jpg","img_gradient.jpg","img_brickWall.jpg","img_wood.jpg","img_clouds.jpg","img_grass.jpg","img_blueAbstract.jpg","img_stripes.jpg","img_textured.jpg","img_paper.jpg"]},promoLargePopup:{names:["Default","Outlined","Flat Squared","Flat Rounded","Simple Gradient","Gradient Rounded","Grooved Rounded","Textured"],values:["default.png","outlined_large.png","solid_large.png","flatRaised_large.png","gradient_large.png","gradientRounded_large.png","groovedRounded_large.png","textured_large.png"]},promoButton:{names:["Default","Outlined","Flat Squared","Flat Rounded","Simple Gradient","Gradient Rounded","Grooved Rounded","Textured"],values:["default.png","outlined_button.png","solid_button.png","flatRaised_button.png","gradient_button.png","gradientRounded_button.png","groovedRounded_button.png","textured_button.png"]},promoButtonAction:{names:["Primary Click-through","Replay","Popwallet"],values:["action","replay","popwallet"]},promoClickAction:{names:["None","Primary Click-through","Replay","Popwallet"],values:["none","action","replay","popwallet"]},promo_type:{names:["Static Images","Preset Styles"],values:["static","preset"]},promo_typeAdvanced:{names:["Static Images","Preset Styles","Custom"],values:["static","preset","custom"]},promo_style:{names:["Popup, No Buttons","Popup, One Button","Popup, Two Buttons","Large Popup, No Buttons","Large Popup, One Button","Full Screen, No Buttons","Full Screen, One Button","Full Screen, Two Buttons","Full Video, No Buttons","Full Video, One Button","Full Video, Two Buttons","Inset Video, No Buttons","Inset Video, One Button","Inset Video, Two Buttons","Top Video, No Buttons","Top Video, One Button","Top Video, Two Buttons"],values:["promoPopupIconNone","promoPopupIconSingle","promoPopupIconDouble","promoPopupImageIconNone","promoPopupImageIconSingle","promoFullImageNone","promoFullImageIconSingle","promoFullImageDouble","promoFullVideoNone","promoFullVideoSingle","promoFullVideoDouble","promoFullInsetVideoNone","promoFullInsetVideoSingle","promoFullInsetVideoDouble","promoFullTopVideoNone","promoFullTopVideoSingle","promoFullTopVideoDouble"]},promo_styleNoVideo:{names:["Popup, No Buttons","Popup, One Button","Popup, Two Buttons","Large Popup, No Buttons","Large Popup, One Button","Full Screen, No Buttons","Full Screen, One Button","Full Screen, Two Buttons"],values:["promoPopupIconNone","promoPopupIconSingle","promoPopupIconDouble","promoPopupImageIconNone","promoPopupImageIconSingle","promoFullImageNone","promoFullImageIconSingle","promoFullImageDouble"]},promo_staticBackground:{names:["Single image","Separate portrait/landscape images"],values:["single","dual"]}},STATE_DEFS:{promo_video_previewVideoCropping:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_previewVideoCropping",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoUpload:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoWin:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"win"}]},promo_video_videoLose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_testVideo",value:!0},{settingName:"promo_video_videoUpload",value:!0},{settingName:"promo_reason",value:"lose"}]},promo_previewBgFocus:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_previewBgFocus",value:!0}]},promo_win:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"}]},promo_lose:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"lose"}]},promo_video:{remoteSetting:[{settingName:"state",value:"promo"},{settingName:"promo_reason",value:"win"},{settingName:"promo_testVideo",value:!0}]}}};;</script><link rel="stylesheet" type="text/css" href="ad-css-injection.css"></head><body><div id="tre_container"></div>	<script type="text/javascript">var _TREMACROS={line:"634",protocol:"https",time:(new Date()).getTime(),dst:"B0119",campaign:"9775",advertiser:"373"};var _TRESETTINGS={placementId:"fjnt",qa:false,ctaButton:"off",mraid:false,closeButtonCountdown:false,ctaText:"GET THE APP",ignoreOrientation:true,closeButtonDelay:0,rewardedVideoOverlay:false,showLoadingIndicators:true,viewThroughTimer:"off",partnerHandlesClickThrough:true,showTresensaBranding:true,snapchatImmersive:false,gameVersion:"",showCloseButton:false,adFormat:"interstitial",freezeAnimationOnIdle:false,gameTitle:"P10_2Phases_Setof4_Colorof4_Tutorial_ShortHintTimer_010421",gameDescription:"Create your best set of cards with phase 10!",gameId:"5c39d7ba5ae441CB",advertiser:"Mattel163",loadingImage:true,creativeStatus:9,creativeName:"P10_2Phases_Setof4_Colorof4_Tutorial_ShortHintTimer_010421",clickThroughUrls:[],trackingUrls:[]};</script>	<script type="text/javascript">function extend(n,e){function t(){}var r=n.prototype;for(var o in t.prototype=e.prototype,n.prototype=new t,(n.prototype.constructor=n).superclass=e.prototype,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e),r)r.hasOwnProperty(o)&&(n.prototype[o]=r[o])}var TreSensa=TreSensa||{};TreSensa.InventoryAdapters={},TreSensa.InventoryAdapters.GenericAdapter=function(){return this},TreSensa.InventoryAdapters.GenericAdapter.prototype={initialize:function(){TreSensa.Console.log(TreSensa.LOG_INFO,"using generic inventory partner adapter")},getSessionId:function(){var n="dashpreview"==TreSensa.Playable.userID?"testuser":"xxxxxxxx".replace(/[x]/g,function(n){return(36*Math.random()|0).toString(36)});return"TRE3."+TreSensa.Playable.distributionPartner+"."+_TREMACROS.time+"."+n},usesPackagedBuilds:function(){return!1},assetsMustBeInline:function(){return!1},analyticsForbidden:function(){return!1},allowLocalStorage:function(){return!0},hideLoadingScreen:function(){return!1},getAssetsRoot:function(){return TreSensa.Playable.packagedBuild&&!TreSensa.Playable.inlinedAssets?"assets/":TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+"/"+GameConfig.VERSION+"/assets/"},postponeGameLaunch:function(){return!1},preGameConstruction:function(){},preLaunch:function(n){},postLaunch:function(n){},initialViewability:function(){return!1===_TRESETTINGS.mraid},viewabilityControlsPreloader:function(){return!1},closeButtonInfo:function(){var n=_TRESETTINGS.showCloseButton;return{known:n,delay:n?_TRESETTINGS.closeButtonDelay:null,countdownShown:_TRESETTINGS.closeButtonCountdown||!1}},runStartupLogic:function(){window.mraid?(_TRESETTINGS.mraid||TreSensa.Console.log(TreSensa.LOG_WARNING,"non-MRAID placement running in an MRAID environment"),"loading"===mraid.getState()?mraid.addEventListener("ready",mraidIsReady):mraidIsReady(!0)):_TRESETTINGS.mraid&&TreSensa.Playable.logError("mraid","MRAID was not defined")},sendEvent:function(n,e){},userCompleted:function(){},trueCompletion:function(){return!0},handlesClickThrough:function(){return!1},click:function(){}};TreSensa.InventoryAdapters.VunlgeAdapter=function(){return TreSensa.InventoryAdapters.VunlgeAdapter.superclass.constructor.call(this),this.closeDelay=null,this.startMuted=!1,this.adInitialized=!1,this},TreSensa.InventoryAdapters.VunlgeAdapter.prototype={initialize:function(){TreSensa.Console.log(TreSensa.LOG_INFO,"using Vungle inventory partner adapter"),window.addEventListener("ad-event-pause",this._onAdEventPause.bind(this)),window.addEventListener("ad-event-resume",this._onAdEventResume.bind(this)),window.VungleHelper?this._initAd():window.addEventListener("ad-event-init",this._onAdEventInit.bind(this,!0)),setTimeout(this._onAdEventInit.bind(this,!1),2e3)},usesPackagedBuilds:function(){return!0},getAssetsRoot:function(){return TreSensa.Playable.packagedBuild?"":TreSensa.InventoryAdapters.VunlgeAdapter.superclass.getAssetsRoot.call(this)},postponeGameLaunch:function(){return!this.adInitialized},initialViewability:function(){return this.adInitialized},viewabilityControlsPreloader:function(){return!0},preGameConstruction:function(e){TreSensa.Playable.packagedBuild&&TGE.AssetManager.SetFullPathTransformation(function(e){return e.split("/").join("_")}),this.startMuted&&(TreSensa.Console.log(TreSensa.LOG_INFO,"starting muted due to START_MUTED token"),TGE.AudioManager._sMuted=!0)},closeButtonInfo:function(){return{known:null!==this.closeDelay,delay:this.closeDelay,countdownShown:!0}},sendEvent:function(e,n){switch(e){case"promo_screen":window.parent.postMessage("complete","*")}},handlesClickThrough:function(){return!0},click:function(){window.parent.postMessage("download","*")},_onAdEventInit:function(e){this.adInitialized||(e?TreSensa.Console.log(TreSensa.LOG_INFO,"Vungle ad-event-init received"):TreSensa.Console.log(TreSensa.LOG_WARNING,"timeout waiting on Vungle ad-event-init"),this._initAd(),TreSensa.Playable.makeAdViewable(),TreSensa.Playable.launchGame())},_initAd:function(){this.adInitialized=!0,window.VungleHelper&&(void 0!==VungleHelper.closeDelay&&(this.closeDelay=VungleHelper.closeDelay),"boolean"==typeof VungleHelper.START_MUTED&&(this.startMuted=VungleHelper.START_MUTED))},_onAdEventPause:function(){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"Vungle ad-event-pause received"),window.TGE&&TGE.Game.GetInstance().pause()},_onAdEventResume:function(){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"Vungle ad-event-resume received"),window.TGE&&TGE.Game.GetInstance().resume()}},extend(TreSensa.InventoryAdapters.VunlgeAdapter,TreSensa.InventoryAdapters.GenericAdapter),TreSensa.InventoryAdapters._liveAdapter=new TreSensa.InventoryAdapters.VunlgeAdapter;var TreAdUtils={extend:function(i){return Array.prototype.forEach.call(Array.prototype.slice.call(arguments,1),function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}),i},getQueryString:function(){for(var e,t={},i=location.search.substring(1),n=/([^&=]+)=([^&]*)/g;e=n.exec(i);)t[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return t}};function encodeParams(e){var t="";for(var i in e)e.hasOwnProperty(i)&&void 0!==e[i]&&(t+=i+"="+encodeURIComponent(e[i])+"&");return"&"==t[t.length-1]&&(t=t.substr(0,t.length-1)),t}function createUrl(e,t){var i=encodeParams(t);return i.length?e+(-1===e.indexOf("?")?"?":"&")+i:e}var TreSensa,_onReady=function(){document.addEventListener("touchmove",function(e){e.preventDefault()},!1)};function launchAppstore(e){var t=!1;if(_TRESETTINGS.partnerHandlesClickThrough){var i=TreSensa.Playable.distributionPartner;if(TreSensa.Console.log(TreSensa.LOG_INFO,"partner "+i+" is handling click-through"),t=!0,TreSensa.Playable.logEvent("click_through",{redirect_url:"",target:e}),TreSensa.Playable.endSession(),TreSensa.Playable.inventoryAdapter.handlesClickThrough())return void TreSensa.Playable.inventoryAdapter.click();if("B0157"===i&&TreSensa.Macros.getValue("click")&&TreSensa.Macros.getValue("bwclick")){var n=null,a=TreSensa.Macros.getValue("click");try{a=(a=atob(a)).replace(/{{[A-Z_]*?}}/g,function(e){return e=e.replace(/[{}]/g,""),TreSensa.Macros.getValue("bw_"+e)||""});for(var r=TreSensa.Macros.getValue("bwclick")||"",o=0===r.length?0:parseInt(TreSensa.Macros.getValue("escapes")),s=0;s<o;s++)a=encodeURIComponent(a);openUrl(r+a)}catch(e){n=e}return void(n&&TreSensa.Playable.logError("beeswax_click",n))}openUrl(getClickThroughUrl("default",!0))}else{TreSensa.Playable.fireTrackingUrls("click_through",{target:e});var l=TreSensa.Playable.buildAttributionRequestURL(TreSensa.Playable.ATTRIBUTIONTYPE.CLICKTHROUGH,e,null,t);TreSensa.Console.log(TreSensa.LOG_INFO,"sending click-through request to server..."),window.mraid?(TreSensa.Playable.logEvent("mraid_open",{url:l}),mraid.open(l)):windowClickthrough(l,!_TRESETTINGS.openLinksInNewWindow),TreSensa.Playable.endSession()}}function getClickThroughUrl(t,i){var n=TreSensa.Playable.gameBucket+"clickthrough.html";return _TRESETTINGS.clickThroughUrls&&_TRESETTINGS.clickThroughUrls.forEach(function(e){e.label===t&&e.url&&(n=i?TreSensa.Playable.expandUrl(e.url):e.url)}),n}function openUrl(e){window.mraid?mraid.open(e):windowClickthrough(e,!1===_TRESETTINGS.openLinksInNewWindow)}function customClickThrough(e,t){TreSensa.Console.log(TreSensa.LOG_INFO,"doing client-side click-through redirect..."),TreSensa.Playable.logEvent("click_through",{redirect_url:e,target:t}),window.mraid?(TreSensa.Playable.logEvent("mraid_open",{url:e}),mraid.open(e)):windowClickthrough(e,!1===_TRESETTINGS.openLinksInNewWindow),TreSensa.Playable.endSession()}function windowClickthrough(e,t){t?window.location[atob("aHJlZg==")]=e:window.open(e,"_blank")}function loadGame(){if(!TreSensa.Playable.gameLoadStarted){TreSensa.Playable.gameLoadStarted=!0;var e=void 0===_TRESETTINGS.gameVersion||""==_TRESETTINGS.gameVersion?"":"/"+_TRESETTINGS.gameVersion+"/js",t=TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+e+"/GameConfig.js?t="+(new Date).getTime(),i=document.createElement("div");i.id="game_canvas",TreSensa.Playable.divAd.appendChild(i),_TRESETTINGS.ignoreOrientation||(_reorientDiv=document.createElement("div"),_reorientDiv.id="wrong_orientation",_reorientDiv.style.display="none",TreSensa.Playable.divAd.appendChild(_reorientDiv)),window.TGL_DIRECT_MODE={url:t,props:TreSensa.Playable.getParameters(),onGameLaunched:function(){TreSensa.Playable.initialGameLoadComplete()},onEngagement:function(e){"primary"==e?TreSensa.Playable.interaction():"secondary"==e&&TreSensa.Playable.engagement()},onPromoScreen:function(e,t){TreSensa.Playable.promoScreenShown(t)},onLaunchAppstore:function(){launchAppstore("attribution")},onCustomClickThrough:function(e,t){customClickThrough(e,t)}},TreAdUtils.insertScript=n,TreSensa.Playable.packagedBuild?TreSensa.Playable.loadSDKs():n(t,TreSensa.Playable.loadSDKs.bind(TreSensa.Playable))}function n(e,t){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.src=e,n.async=!1,n.onload=t,i.appendChild(n)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){_onReady()},!1):_onReady(),function(){var e=[window.TrePreview?"":"body, html, #tresensa_ad, #tre_container { width: 100%; height: 100%; margin: 0; padding: 0; background: black; text-align: center; font-family: Arial, Helvetica, sans-serif; overflow: hidden;}","#tresensa_ad { width: 100%; height: 100%; margin: 0; padding: 0; background: black; text-align: center; font-family: Arial, Helvetica, sans-serif; overflow: hidden;}","#tresensa_container {height: 100%; width: 100%; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }",".preloader {width: 100%; height: 100%; color: white; position: relative; background: black; }",".preloader-content {","position: absolute;","width: 100%;","height: 430px;","top: 50%;","margin-top: -315px;","text-align: center;","font-size: 30px;","padding: 100px 0;","}","#tresensa_companion {margin: 0px; padding: 0xp; text-align: left;}"];e=e.concat(window.TrePreview?[".preloader .center-block {","top:48%;","left: 50%;","transform: translate3d(-50%,-48%, 0);","position: absolute;","height: 34%;","}",".preloader .icon {height: 100%; border-radius: 20%; margin-bottom: 4%;}",".preloader .loading-msg {font-size: 1.0vmin; padding-bottom: 1%; text-align: center;}",".preloader .loading-gif-container {width: 20%; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader .powered-by {position: absolute; left: 0; bottom: 2%; background: #ff0102; padding: 0.5vmin 2vmin 0.5vmin 2vmin; font-size: 1.4vmin; border-radius: 0px 4px 4px 0px;}"]:["@media (orientation: landscape) {",".preloader .center-block {","top:48%;","left: 50%;","transform: translate3d(-50%,-48%, 0);","position: absolute;","height: 40%;","}",".preloader .icon {height: 100%; border-radius: 20%; margin-bottom: 8%;}",".preloader .loading-msg {font-size: 2.4vh; padding-bottom: 3%;}",".preloader .loading-gif-container {width: 10vh; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader .powered-by {position: absolute; left: 0; bottom: 1vw; background: #ff0102; padding: 1.2vh 6vh 1.0vh 6vh; font-size: 2.5vh; border-radius: 0px 6px 6px 0px;}","}","@media (orientation: portrait) {",".preloader .center-block {","top:50%;","left: 50%;","transform: translate3d(-50%,-50%, 0);","position: absolute;","width: 40%;","}",".preloader .icon {width: 100%; border-radius: 20%; margin-bottom: 8%;}",".preloader .loading-msg {font-size: 2.4vw; padding-bottom: 3%;}",".preloader .loading-gif-container {width: 10vw; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader .powered-by {position: absolute; left: 0; bottom: 1vh; background: #ff0102; padding: 1.2vw 6vw 1.0vw 6vw; font-size: 2.5vw; border-radius: 0px 6px 6px 0px;}","}"]);var t=["#callToAction {border-radius: 1.3em; box-shadow: 0px 0px 5px #fff; border: solid #aaa 1px; z-index: 5000; position: absolute; left: 50%; "+("top"==_TRESETTINGS.ctaButton?"top: 2.5%;":"bottom: 2.5%;")+" height: 6.8vmin; width: 38%; margin-left: -19%; background-color: rgba(50, 50, 50, 0.85); color: white; font-size: 3vmin; line-height: 6.8vmin; font-weight: bold;}"],i=["#callToAction {text-align: center; border-radius: 1.0em; box-shadow: 0px 0px 5px #fff; border: solid #aaa 1px; z-index: 5000; position: absolute; width: 50%; left: 20%; "+("top"==_TRESETTINGS.ctaButton?"top: 2.5%;":"bottom: 2.5%;")+" background-color: rgba(50, 50, 50, 0.85); color: white; font-size: 1.8vmin; font-weight: bold; padding: 1.5% 4% 1.5% 4%;}"];e=e.concat(window.TrePreview?i:t);var n=document.createElement("style");n.appendChild(document.createTextNode(e.join("\n"))),document.body.appendChild(n)}(),(TreSensa=TreSensa||{}).LOG_NONE=0,TreSensa.LOG_ERROR=1,TreSensa.LOG_WARNING=2,TreSensa.LOG_INFO=3,TreSensa.LOG_VERBOSE=4,TreSensa.Console={level:TreSensa.LOG_VERBOSE,log:function(e){if(window.console&&e<=this.level){var t="TPA: ",i="log";e===TreSensa.LOG_ERROR?(t+="**ERROR** ",i="error"):e===TreSensa.LOG_WARNING&&(t+="**WARNING** ",i="warn"),window.console[i](t+Array.prototype.slice.call(arguments,1))}}},TreSensa.Macros={_queryString:null,getValue:function(e,t){return t=void 0===t?null:t,_TREMACROS[e]||this._getQueryStringValue(e)||t},_getQueryStringValue:function(e){if(null===this._queryString){for(var t,i={},n=location.search.substring(1),a=/([^&=]+)=([^&]*)/g;t=a.exec(n);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);this._queryString=i}return this._queryString[e]}},(TreSensa=TreSensa||{}).PlatformInfo={initialize:function(){this.browser=this.searchString(this.dataBrowser)||null,this.browserVersion=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||null,this.platform=this.searchString(this.dataPlatform)||null,this.isMobileDevice=!("Windows"===this.platform||"Mac"===this.platform||"Linux"===this.platform),this.oniOS="iPhone"===this.platform||"iPad"===this.platform,this.onAndroid="Android"===this.platform,this.operatingSystem=this.detectOS(this.platform),this.operatingSystemVersion=this.detectOSversion(this.platform),this.hardwareVersion=this.detectHardwareVersion()},detectOS:function(e){return this.oniOS?"iOS":this.onAndroid?"Android":e},detectHardwareVersion:function(){if(!this.oniOS)return null;switch(window.screen.height){case 1024:return 1<window.devicePixelRatio?"iPad 3 or higher":"iPad 1 or 2";case 480:return 1<window.devicePixelRatio?"iPhone 4|S":"iPhone 3S or below";case 568:return"iPhone 5|S";case 667:return"iPhone 6|S";case 736:return"iPhone 6|S Plus"}return null},detectOSversion:function(e){var t="",i="",n=navigator.userAgent.toString();switch(e){case"Windows Phone":i=/Windows Phone OS\s+[\d\.]+/,t=String(n.match(i)).substring(17,20);break;case"iPhone":case"iPad":i=/OS\s+[\d\_]+/,t=String(n.match(i)).substring(3).replace(/_/g,".");break;case"Windows":i=/Windows NT\s+[\d\.]+/,t=String(n.match(i)).substring(11);break;case"OSX":i=/Mac OS X\s+[\d\_]+/,t=String(n.match(i)).substring(9,13);break;case"Android":i=/ndroid\s+[\d\.]+/,t=String(n.match(i)).substring(7,10)}return t},searchString:function(e){for(var t=0;t<e.length;t++)if(null!=e[t]){var i=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!==i.indexOf(e[t].subString))return"Mozilla"===e[t].identity&&navigator.userAgent.match(/Trident\/7\./)?"Explorer":e[t].identity}else if(n)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!==t){var i=t+this.versionSearchString.length+1,n=e.indexOf(" ",i);return-1==n?e.substr(i):e.substr(i,n-i)}},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Explorer",identity:"Explorer",versionSearch:"Explorer"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],dataPlatform:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}]};var mraid_ready_fired=!(TreSensa.Playable={ADFORMAT:{BANNER:1,INTERSTITIAL:2,EXPANDABLE:3},VIEWTHROUGHSTATE:{OFF:0,COUNTDOWN:1,SENT:2},ATTRIBUTIONTYPE:{VIEWTHROUGH:0,CLICKTHROUGH:1},CUSTOMCAPSTATE:{OK:0,WARNING:1,BLOCKED:2},parameters:null,adFormat:null,bannerWidth:0,bannerHeight:0,sessionID:null,distributionPartner:null,packagedBuild:!1,inlinedAssets:!1,supplySidePlatform:null,lineItemID:null,publisherBundleID:null,userID:null,sessionCost:null,geo:null,wildcards:[],clientAdStartTime:null,lastEventAt:null,skipToPromoTimer:null,skippedToPromo:!1,gdpr:null,gdprConsent:null,divContainer:null,divPreloader:null,divAd:null,divReorient:null,divCtaOverlay:null,divCompanion:null,getFromStorage:function(e){try{return this.inventoryAdapter.allowLocalStorage()?window.localStorage.getItem(e):null}catch(e){}},setInStorage:function(e,t){try{return this.inventoryAdapter.allowLocalStorage()?window.localStorage.setItem(e,t):null}catch(e){}},initialize:function(){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"initializing playable container..."),window._initDstSimulator&&window._initDstSimulator(),this.gameBucket=_TREMACROS.protocol+"://"+(!0===_TRESETTINGS.qa?"qa-":"")+"games.tresensa.com/",this.gameLoadStarted=!1,this.adViewable=!1,this.gameLoaded=!1,this.closeButtonShown=!1,this.numInteractions=0,this.numEngagements=0,this.numCompletions=0,this.promoScreenShowing=!1,this.heartbeatID=null,this.heartbeatCount=0,this.heartbeatPaused=!1,this.viewable=!1,this.sessionEnded=!1,this.viewThroughDelay=null,this.viewThroughState=0,this.expanded=!1,this.customEventCounter=0,this.customEventState=0,this.trackingFired=[],this.mraidReady=!1,this.clientAdStartTime=this.lastEventAt=(new Date).getTime(),TreSensa.PlatformInfo.initialize(),this.distributionPartner=_TREMACROS.dst,this.inventoryAdapter=TreSensa.InventoryAdapters._liveAdapter||new TreSensa.InventoryAdapters.GenericAdapter,this.inventoryAdapter.initialize(),this.createDomElements(),this.packagedBuild="false"!==_TREMACROS.inlinedAssets&&this.inventoryAdapter.usesPackagedBuilds(),this.inlinedAssets=this.packagedBuild&&this.inventoryAdapter.assetsMustBeInline(),this.adViewable=this.inventoryAdapter.initialViewability(),_TRESETTINGS.partnerHandlesClickThrough=this.packagedBuild||_TRESETTINGS.partnerHandlesClickThrough,this.adFormat=TreSensa.Playable.ADFORMAT.INTERSTITIAL,"300x250"==_TRESETTINGS.adFormat?(this.adFormat=TreSensa.Playable.ADFORMAT.BANNER,this.bannerWidth=300,this.bannerHeight=250):"expandable 320x50"==_TRESETTINGS.adFormat&&(this.adFormat=TreSensa.Playable.ADFORMAT.EXPANDABLE,this.bannerWidth=320,this.bannerHeight=50),this.lineItemID=TreSensa.Macros.getValue("line")||TreSensa.Macros.getValue("bw1"),this.publisherBundleID=TreSensa.Macros.getValue("publisher"),this.supplySidePlatform=TreSensa.Macros.getValue("ssp"),this.sessionCost=TreSensa.Macros.getValue("cost"),this.geo=TreSensa.Macros.getValue("geo"),this.gdpr=TreSensa.Macros.getValue("gdpr"),this.gdprConsent=TreSensa.Macros.getValue("gdpr_consent"),this.wildcards[1]=TreSensa.Macros.getValue("wild1"),this.wildcards[2]=TreSensa.Macros.getValue("wild2"),this.userID=TreSensa.Macros.getValue("user"),null!==this.userID&&"dashpreview"!==this.userID&&(this.userID=this.userID.match(/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/)?this.userID:null,"00000000-0000-0000-0000-000000000000"===this.userID&&(this.userID=null)),this.sessionID=this.inventoryAdapter.getSessionId(),this.viewThroughDelay="off"!==_TRESETTINGS.viewThroughTimer?parseInt(_TRESETTINGS.viewThroughTimer):null,this.skipToPromoTimer=parseInt(TreSensa.Macros.getValue("endcardtimer","0")),this.skipToPromoTimer&&TreSensa.Console.log(TreSensa.LOG_VERBOSE,"skip to promo screen timer enabled ("+this.skipToPromoTimer+" seconds)"),this.initializeParameters(),this.logStartingEvent(),this.adFormat==TreSensa.Playable.ADFORMAT.EXPANDABLE&&"1"!==_TREMACROS.expandablePrefetch||loadGame(),setInterval(this.customEventCheck.bind(this),5e3),TreSensa.Console.log(TreSensa.LOG_VERBOSE,"finished initializing playable container"),this.inventoryAdapter.runStartupLogic()},createDomElements:function(){this.divContainer&&(this.divContainer.parentNode.removeChild(this.divContainer),this.divContainer=null,this.divPreloader=null,this.divAd=null);if(this.divContainer=document.createElement("div"),this.divContainer.setAttribute("id","tresensa_container"),this.divPreloader=document.createElement("div"),this.divPreloader.setAttribute("class","preloader"),!this.inventoryAdapter.hideLoadingScreen()){var e=_TRESETTINGS.showLoadingIndicators?'<div class="loading-msg">LOADING PLAYABLE AD</div>':"";e="300x250"==_TRESETTINGS.adFormat?"":e;var t="string"==typeof _TRESETTINGS.loadingImage?_TRESETTINGS.loadingImage:window._TREIMAGES?_TREIMAGES["256x256.jpg"]:this.gameBucket+_TRESETTINGS.gameId+"/icons/256x256.jpg",i=['<div class="center-block">',_TRESETTINGS.loadingImage?'<img class="icon" src="'+t+'"/>':'<div style="height: 50%;"></div>',e,_TRESETTINGS.showLoadingIndicators?'<div class="loading-gif-container"><img src=data:image/gif;base64,R0lGODlhKwALAPEAAP///+8uJPaYk+8uJCH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=></img></div>':"","</div>",_TRESETTINGS.showTresensaBranding?'<div class="powered-by">Playable Ads by <b>TreSensa</b> </div>':""];this.divPreloader.innerHTML=i.join("")}if(this.divAd=document.createElement("div"),this.divAd.setAttribute("id","tresensa_ad"),this.divAd.style.visibility="hidden",_TRESETTINGS.adFormat&&0===_TRESETTINGS.adFormat.lastIndexOf("expandable",0)){this.divContainer.style.display="none",this.divCompanion=document.createElement("div"),this.divCompanion.setAttribute("id","tresensa_companion");var n=_TRESETTINGS.adFormat.substring(11),a=_TREMACROS.companionVariant||"1",r=this.gameBucket+_TRESETTINGS.gameId+"/companions/"+n+"_"+a+".gif";this.divCompanion.innerHTML='<img class="icon" src="'+r+'">',this.divCompanion.onclick=function(){window.mraid&&mraid.expand()},document.getElementById("tre_container").appendChild(this.divCompanion)}this.divContainer.appendChild(this.divPreloader),this.divContainer.appendChild(this.divAd),document.getElementById("tre_container").appendChild(this.divContainer),"off"!==_TRESETTINGS.ctaButton&&(this.divCtaOverlay=document.createElement("div"),this.divCtaOverlay.setAttribute("id","callToAction"),this.divCtaOverlay.innerHTML=_TRESETTINGS.ctaText,this.divCtaOverlay.addEventListener("click",launchAppstore.bind(null,"ctaButton")),this.divContainer.appendChild(this.divCtaOverlay))},initializeParameters:function(){for(var e in this.parameters={previewMode:this.adFormat,ignoreOrientation:_TRESETTINGS.ignoreOrientation?"true":"false",adanimation:_TRESETTINGS.freezeAnimationOnIdle?30:void 0,kvbw1:TreSensa.Playable.lineItemID,adinv:TreSensa.Playable.publisherBundleID},_TREMACROS)_TREMACROS.hasOwnProperty(e)&&(this.parameters[e]=_TREMACROS[e])},getParameters:function(){return this.parameters},getCloseButtonInfo:function(){return this.inventoryAdapter.closeButtonInfo()},startCloseButtonTimer:function(){var e=TreSensa.Macros.getValue("showclose");"0"!==e&&("1"===e||!1!==_TRESETTINGS.showCloseButton&&this.adFormat!==TreSensa.Playable.ADFORMAT.BANNER)&&(this.closeButtonShown||(setTimeout(this.showCloseButton.bind(this),1e3*_TRESETTINGS.closeButtonDelay),_TRESETTINGS.closeButtonCountdown&&window.TGE&&window.TGE.AdHeader&&window.TGE.AdHeader.ShowCountdown(_TRESETTINGS.closeButtonDelay)))},showCloseButton:function(){this.adFormat!==TreSensa.Playable.ADFORMAT.BANNER&&(this.divCtaOverlay&&(this.divCtaOverlay.style.display="none"),window.TGE&&window.TGE.AdHeader&&window.TGE.AdHeader.ShowClose(),this.closeButtonShown=!0,this.logEvent("show_close"))},expand:function(){this.adFormat!=TreSensa.Playable.ADFORMAT.EXPANDABLE||this.expanded||(loadGame(),this.divContainer.style.display="block",this.divCompanion.style.display="none",this.expanded=!0,window.TGE&&TGE.Game.GetInstance().resume())},collapse:function(){this.adFormat==TreSensa.Playable.ADFORMAT.EXPANDABLE&&this.expanded&&(this.divContainer.style.display="none",this.divCompanion.style.display="block",this.expanded=!1,this.exit("expandable_collapse"))},revealAd:function(){this.divPreloader.style.display="none",this.divAd.style.visibility="visible"},getSetting:function(e){return _TRESETTINGS[e]},logStartingEvent:function(){this.logEvent("container_code_loaded",{operating_system:TreSensa.PlatformInfo.operatingSystem,operating_system_version:TreSensa.PlatformInfo.operatingSystemVersion,browser:TreSensa.PlatformInfo.browser,browser_version:TreSensa.PlatformInfo.browserVersion,screen_width:window.screen.width,screen_height:window.screen.height,device:TreSensa.PlatformInfo.hardwareVersion,geo:this.geo,wild1:this.wildcards[1],wild2:this.wildcards[2]})},customEventCheck:function(){this.customEventState!==TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED&&(15<=this.customEventCounter?this.blockCustomEvents(!0):5<=this.customEventCounter&&(TreSensa.Console.log(TreSensa.LOG_WARNING,"too many custom events being fired"),this.customEventState=TreSensa.Playable.CUSTOMCAPSTATE.WARNING),this.customEventCounter=0)},blockCustomEvents:function(e){TreSensa.Console.log(TreSensa.LOG_ERROR,"too many custom events being fired - applying cap!"),this.customEventState=TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED,this.logError("custom_event_cap",e?">=10":"2 warnings")},logEvent:function(e,t){if("replay"===e&&(this.promoScreenShowing=!1),this.fireTrackingUrls(e,t),this.inventoryAdapter.sendEvent(e,t),!this.sessionEnded){if("custom"===e){if(this.customEventState===TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED)return;this.customEventCounter++}var i=(new Date).getTime();if(0<this.numEngagements&&3e5<i-this.lastEventAt)this.endSession();else if(t=t||{},TreSensa.Console.log(TreSensa.LOG_INFO,"firing '"+e+"' event"),this.lastEventAt=i,!this.inventoryAdapter.analyticsForbidden()){var n;n=this.onDevServer()?_TREMACROS.protocol+"://analytics-dev.tresensa.com/adevents":_TREMACROS.protocol+"://analytics.tresensa.com/adevents";var a={event_name:e,session_id:this.sessionID,creative_id:_TRESETTINGS.gameId,creative_version:window.GameConfig?GameConfig.VERSION:null,placement_id:_TRESETTINGS.placementId,variant_id:_TRESETTINGS.variantId?_TRESETTINGS.variantId:null,line_item_id:this.lineItemID,user_id:this.userID,app_bundle_id:this.publisherBundleID,ssp:this.supplySidePlatform,session_cost:null===this.sessionCost?null:this.sessionCost.toString(),user_agent:navigator.userAgent?navigator.userAgent:null};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);var o="event="+btoa(JSON.stringify(a));(new Image).setAttribute("src",n+"?"+o)}}},logError:function(e,t){t=t||"",TreSensa.Console.log(TreSensa.LOG_ERROR,e+" ("+t+")"),this.logEvent("error",{type:e,description:t})},fireTrackingUrls:function(e,t){var i=e;if(i+="click_through"===e?"_"+t.target:"",i+="custom"===e?"_"+t.name:"",!this.trackingFired[i]){var n=_TRESETTINGS.trackingUrls;if(n)for(var a=0;a<n.length;a++){var r=n[a],o=!1;switch(r.eventType){case"GAMEVIEWABLE":o="game_viewable"===e;break;case"INTERACTION":o="interaction"===e;break;case"ENGAGEMENT":o="engagement"===e;break;case"COMPLETION":o="promo_screen"===e;break;case"CLICK":o="click_through"===e&&r.label===t.target;break;case"CUSTOM":o="custom"===e&&r.label===t.name}o&&this.fireTrackingUrl(r.url)}this.trackingFired[i]=!0}},expandUrl:function(e){return e=(e=(e=(e=(e=e.replace("dc_rdid=;","dc_rdid={USER_ID};")).replace("ord=[timestamp]","ord={TIMESTAMP}")).replace("gdpr=${GDPR}","gdpr={GDPR}")).replace(/\${GDPR_CONSENT_[0-9Xx]*?}/g,"{GDPR_CONSENT_STRING}")).replace(/{[A-Za-z_]*?}/g,function(e){e=e.replace(/[{}]/g,"");var t=TreSensa.Macros.getValue(e);return null!==t?t:TreSensa.Playable.expandMacro(e)})},fireTrackingUrl:function(e){-1!==(e=this.expandUrl(e)).indexOf(".js")?this.fireTrackingScript(e):this.fireTrackingPixel(e)},fireTrackingScript:function(e){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"firing tracking script");var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},fireTrackingPixel:function(e){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"firing tracking pixel"),(new Image).src=e},expandMacro:function(e){var t="",i=!0;switch(e){case"CREATIVE_ID":t=_TRESETTINGS.gameId||"";break;case"CREATIVE_NAME":t=_TRESETTINGS.gameTitle||"";break;case"CREATIVE_VERSION":t=GameConfig.VERSION||"";break;case"LINE_ID":t=this.lineItemID||"";break;case"CAMPAIGN_ID":t=_TREMACROS.campaign||"";break;case"PLACEMENT_ID":t=_TRESETTINGS.placementId||"";break;case"SESSION_ID":t=this.sessionID||"";break;case"SSP":t=this.supplySidePlatform||"";break;case"DST":t=this.distributionPartner||"";break;case"PUBLISHER_BUNDLE_ID":t=this.publisherBundleID||"";break;case"USER_ID":t=this.userID||"";break;case"USER_AGENT":t=navigator.userAgent;break;case"TIMESTAMP":case"CACHEBUSTER":t=Math.round((new Date).getTime()/1e3);break;case"ADVERTISER_ID":t=_TREMACROS.advertiser||"";break;case"SCORE":var n=TGE.Game.GetInstance();t=n&&null!==n.getFinalScore()?n.getFinalScore():"";break;case"GDPR":t=null===this.gdpr?"":this.gdpr;break;case"GDPR_CONSENT_STRING":t=null===this.gdprConsent?"":this.gdprConsent,i=!1}return i?encodeURIComponent(t):t},loadSDKs:function(){var e=!0===_TRESETTINGS.qa;if(window.GameConfig){GameConfig.VERSION=void 0===_TRESETTINGS.gameVersion||""==_TRESETTINGS.gameVersion?GameConfig.VERSION:_TRESETTINGS.gameVersion;var t=GameConfig.HOST=this.gameBucket+_TRESETTINGS.gameId;GameConfig.DIRECT_AD=this.parameters,GameConfig.GoogleAnalytics&&(GameConfig.GoogleAnalytics.ENABLED=!1),GameConfig.ORIENTATION=GameConfig.ORIENTATION||"portrait",GameConfig.LIB_DIR=GameConfig.LIB_DIR||"https://sdk.tresensa.com/",GameConfig.TGE.VERSION=_TREMACROS.tgeVersion||GameConfig.TGE.VERSION,GameConfig.AUDIO_ROOT=GameConfig.IMAGE_ROOT=this.inventoryAdapter.getAssetsRoot(),this.packagedBuild?TreSensa.Playable.launchGame():(TreSensa.Console.log(TreSensa.LOG_INFO,"loading sdks (TGE v"+GameConfig.TGE.VERSION+")..."),TreAdUtils.insertScript(GameConfig.LIB_DIR+"tge/tge-"+GameConfig.TGE.VERSION+".min.js"),TreSensa.Console.log(TreSensa.LOG_INFO,"loading game code ("+_TRESETTINGS.gameId+" "+(e?"QA":"production")+" v"+GameConfig.VERSION+")..."),TreAdUtils.insertScript(t+"/"+GameConfig.VERSION+"/js/game.min.js",TreSensa.Playable.launchGame.bind(TreSensa.Playable)))}else this.logError("no_config","game: "+_TRESETTINGS.gameId+", "+(e?"QA":"production")+" version: "+(_TRESETTINGS.gameVersion||"latest"))},launchGame:function(){if(this.inventoryAdapter.postponeGameLaunch())TreSensa.Console.log(TreSensa.LOG_INFO,"waiting on partner before launching game");else{var e={gameDiv:"game_canvas",orientation:GameConfig.ORIENTATION,reorientDiv:_TRESETTINGS.ignoreOrientation?null:"wrong_orientation",audioRoot:GameConfig.AUDIO_ROOT,imageRoot:GameConfig.IMAGE_ROOT};TreSensa.Playable.adFormat===TreSensa.Playable.ADFORMAT.BANNER&&(e.width=this.bannerWidth,e.height=this.bannerHeight),this.inventoryAdapter.preGameConstruction();var t=new window[GameConfig.CONSTRUCTOR||"GameConstructor"];window.TrePreview&&(t.desktopMaxCanvasWidth=Number.MAX_VALUE,t.desktopMaxCanvasHeight=Number.MAX_VALUE,t.resizeCanvasToParent=!0),this.inventoryAdapter.preLaunch(t),TreSensa.Console.log(TreSensa.LOG_INFO,"launching game..."),t.launch(e),this.inventoryAdapter.postLaunch(t)}},initialGameLoadComplete:function(){if(this.gameLoaded=!0,!_TRESETTINGS.ignoreOrientation&&this.divReorient){var e=document.createElement("img");e.src=this.gameBucket+_TRESETTINGS.gameId+"/"+GameConfig.VERSION+"/reorient-message.jpg",this.divReorient.appendChild(e)}this.logEvent("game_ready",{load_time:(new Date).getTime()-this.clientAdStartTime}),this.inventoryAdapter.viewabilityControlsPreloader()||this.revealAd(),this.adFormat!==TreSensa.Playable.ADFORMAT.BANNER&&TGE.AdHeader.Create(this.closeAd.bind(this),this.closeButtonShown),this.adViewable&&this.makeGameViewable()},makeAdViewable:function(){this.adViewable||(this.adViewable=!0,this.gameLoaded&&this.makeGameViewable())},makeGameViewable:function(){this.viewable||(this.viewable=!0,this.logEvent("game_viewable",{}),this.inventoryAdapter.viewabilityControlsPreloader()&&this.revealAd(),this.startSkipToPromoTimer(),this.startCloseButtonTimer(),TGE.Game.GetInstance().gameMadeViewable(),_TRESETTINGS.rewardedVideoOverlay&&TGE.AdHeader.ShowRewardedPlayableOverlay())},startSkipToPromoTimer:function(){0<this.skipToPromoTimer&&(TreSensa.Console.log(TreSensa.LOG_VERBOSE,"starting "+this.skipToPromoTimer+" second promo screen countdown..."),setTimeout(this.skipToPromoScreen.bind(this),1e3*this.skipToPromoTimer),this.skipToPromoTimer=0)},interaction:function(){this.adViewable||this.makeAdViewable(),this.numInteractions++,1===this.numInteractions&&this.logEvent("interaction",{})},engagement:function(){this.adViewable||this.makeAdViewable(),this.numEngagements++,1===this.numEngagements&&(this.logEvent("engagement",{}),this.startHeartbeat(),1===this.numEngagements&&null!=this.viewThroughDelay&&this.viewThroughState===TreSensa.Playable.VIEWTHROUGHSTATE.OFF&&(this.viewThroughState=TreSensa.Playable.VIEWTHROUGHSTATE.COUNTDOWN,setTimeout(this._sendViewThrough.bind(this),1e3*this.viewThroughDelay)))},skipToPromoScreen:function(){if(this.promoScreenShowing)TreSensa.Console.log(TreSensa.LOG_INFO,"promo screen already showing, abandoning skip request");else{this.skippedToPromo=!0;var e=null;TGE.RemoteSettings.HasSetting("state")&&(e=TGE.RemoteSettings("state")),TGE.RemoteSettings.AddSetting("state",{default:"promo",type:"string",name:"state",value:"promo"});var t=TreSensa.Playable.parameters.state;TreSensa.Playable.parameters.state="promo",TGE.Game.GetInstance()._resetGame(),TreSensa.Playable.parameters.state=t,e&&TGE.RemoteSettings.AddSetting("state",{default:e,type:"string",name:"state",value:e})}},promoScreenShown:function(e){this.promoScreenShowing=!0,e=this.skippedToPromo?"skip":e,this.skippedToPromo=!1,this.inventoryAdapter.trueCompletion()&&(this.numCompletions++,TreSensa.Playable.logEvent("promo_screen",{reason:e,count:this.numCompletions}),this.viewThroughState===TreSensa.Playable.VIEWTHROUGHSTATE.COUNTDOWN&&(TreSensa.Console.log(TreSensa.LOG_INFO,"promo reached, forcing view-through"),this._sendViewThrough())),this.inventoryAdapter.userCompleted()},clickthrough:function(e,t){t?customClickThrough(t,e):launchAppstore(e)},endSession:function(e){this.sessionEnded||(TreSensa.Console.log(TreSensa.LOG_INFO,"session considered finished"),e=!0===e,this.stopHeartbeat(),document.dispatchEvent(new Event("tresensaSessionEnded")),window.TGE&&TGE.SessionEndedCallback&&TGE.SessionEndedCallback(e),this.sessionEnded=!0)},closeAd:function(){window.mraid&&(mraid.isViewable()||this.logError("mraid","ad closed before mraid viewable"),mraid.close()),this.endSession()},exit:function(e){TreSensa.Playable.logEvent("exit",{reason:e}),this.endSession(),window.TGE&&TGE.Game.GetInstance().pause()},startHeartbeat:function(){this.heartbeatID||(this.heartbeatID=setInterval(this._heartbeat.bind(this),5e3))},stopHeartbeat:function(){this.heartbeatID&&(clearInterval(this.heartbeatID),this.heartbeatID=null)},_addAttributionParam:function(e,t,i){null!=i&&(e[t]=i)},buildAttributionRequestURL:function(e,t,i,n){i=i||null,n=n||!1;var a={session_id:this.sessionID,creative_id:_TRESETTINGS.gameId,placement_id:_TRESETTINGS.placementId,game_version:window.GameConfig.VERSION,mixpaneluserid:window.mixpanel&&window.mixpanel.get_distinct_id()||this.sessionID,preserve_attribution_url:n?1:0,game_id:_TRESETTINGS.gameId,slug:_TRESETTINGS.gameId,adcid:_TRESETTINGS.placementId,beeswax_auction_id:this.sessionID,version:0};this._addAttributionParam(a,"publisher_id",this.publisherBundleID),this._addAttributionParam(a,"adinv",this.publisherBundleID),this._addAttributionParam(a,"geo",this.geo),this._addAttributionParam(a,"wild1",this.wildcards[1]),this._addAttributionParam(a,"wild2",this.wildcards[2]),this._addAttributionParam(a,"line_item_id",this.lineItemID),this._addAttributionParam(a,"kvbw1",this.lineItemID),this._addAttributionParam(a,"dst",this.distributionPartner),this._addAttributionParam(a,"user_id",this.userID),this._addAttributionParam(a,"adid",this.userID),this._addAttributionParam(a,"target",t),this._addAttributionParam(a,"tresensa_campaign_id",TreSensa.Macros.getValue("campaign")),a.appstore="unspecified","number"==typeof _TRESETTINGS.variantId&&(a.variant_id=_TRESETTINGS.variantId),null!=this.supplySidePlatform&&0<this.supplySidePlatform.length&&(a.ssp=this.supplySidePlatform),null!==i&&(a.custom_destination=i);var r=(this.onDevServer()?"http://dev-tgs.tresensa.com/server/0.3.9/":"https://tgs.tresensa.com/server/0.3.9/")+(e===TreSensa.Playable.ATTRIBUTIONTYPE.VIEWTHROUGH?"view_through.php":"click_through.php"),o=r,s="";for(var l in a)a.hasOwnProperty(l)&&void 0!==a[l]&&(s+=l+"="+encodeURIComponent(a[l])+"&");return"&"==s[s.length-1]&&(s=s.substr(0,s.length-1)),0<s.length&&(o=r+(-1===r.indexOf("?")?"?":"&")+s),o},_sendViewThrough:function(){if(this.viewThroughState!==TreSensa.Playable.VIEWTHROUGHSTATE.SENT&&this.viewThroughState!==TreSensa.Playable.VIEWTHROUGHSTATE.OFF){if(this.sessionEnded)return TreSensa.Console.log(TreSensa.LOG_INFO,"cancelling view-through attribution, session ended"),void(this.viewThroughState=TreSensa.Playable.VIEWTHROUGHSTATE.OFF);var e=this.buildAttributionRequestURL(TreSensa.Playable.ATTRIBUTIONTYPE.VIEWTHROUGH);TreSensa.Console.log(TreSensa.LOG_INFO,"sending view-through attribution request..."),(new Image).setAttribute("src",e),this.viewThroughState=TreSensa.Playable.VIEWTHROUGHSTATE.SENT}},_heartbeat:function(){0<this.numEngagements&&(this.heartbeatPaused&&this.heartbeatCount<=180&&TGE.Game.GetInstance().timeSinceLastInteraction()<=30&&(this.heartbeatPaused=!1),!this.heartbeatPaused&&(30<TGE.Game.GetInstance().timeSinceLastInteraction()||180<this.heartbeatCount)&&(this.heartbeatPaused=!0,this.logEvent("abort_heartbeat")),this.heartbeatPaused||(this.logEvent("heartbeat"),this.heartbeatCount++))},onDevServer:function(){return"dev"===_TRESETTINGS._adserver_env}});function mraidViewable(e){e&&(mraid.removeEventListener("viewableChange",mraidViewable),mraidViewableReceived())}function mraidViewableReceived(){TreSensa.Playable.logEvent("mraid_viewable",{prefetch_wait:(new Date).getTime()-TreSensa.Playable.clientAdStartTime}),TreSensa.Playable.startSkipToPromoTimer(),TreSensa.Playable.makeAdViewable()}function checkViewState(){mraid.isViewable()?mraidViewableReceived():mraid.addEventListener("viewableChange",mraidViewable)}function mraidIsReady(e){TreSensa.Playable.mraidReady?TreSensa.Playable.logError("mraid","MRAID ready already fired"):((TreSensa.Playable.mraidReady=!0)===_TRESETTINGS.showCloseButton&&mraid.useCustomClose(!0),TreSensa.Playable.logEvent("mraid_ready",{mraid_version:String(mraid.getVersion()),placement_type:mraid.getPlacementType()}),checkViewState(),!0!==e&&mraid.removeEventListener("ready",mraidIsReady),mraid.addEventListener("error",function(e,t){TreSensa.Playable.logEvent("error",{type:"mraid",description:e})}),mraid.addEventListener("stateChange",function(e){"hidden"==e&&TreSensa.Playable.adFormat!=TreSensa.Playable.ADFORMAT.EXPANDABLE?TreSensa.Playable.exit("mraid_hidden"):"expanded"==e?TreSensa.Playable.expand():"default"==e&&TreSensa.Playable.collapse()}),mraid.addEventListener("sizeChange",function(e,t){window.TGE&&TGE.Game.GetInstance()&&TGE.Game.GetInstance().mraidResized(e,t)}))}TreSensa.Playable.initialize();</script>	
        <script>
            window.vungleSettings = {
                ASOIEnabled: true ,
                ASOIDelayTimer: 2,
                ASOITapInteractions: 1
            };
        </script>
  
<script src="ad-js-injection.js"></script></body></html>